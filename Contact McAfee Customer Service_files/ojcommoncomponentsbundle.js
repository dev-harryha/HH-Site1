/**
 * @license
 * Copyright (c) 2014, 2023, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define("ojs/ojoption",["ojs/ojcore-base","ojs/ojcomponentcore","jquery","ojs/ojcustomelement","ojs/ojcustomelement-utils"],function(e,t,i,s,n){"use strict";function o(e){function t(e){var t=n.CustomElementUtils.getSlotMap(e),s=["startIcon","","endIcon"];i.each(t,function(t,n){-1===s.indexOf(t)&&function(e,t){i.each(t,function(t,i){e.removeChild(i)})}(e,n)}),i.each(s,function(s,n){t[n]&&function(e,t){i.each(t,function(t,i){e.appendChild(i)})}(e,t[n])})}this.updateDOM=function(){var i=e.element.customOptionRenderer;t(e.element),i&&"function"==typeof i&&i(e.element)}}var r;e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,(r={properties:{disabled:{type:"boolean",value:!1},value:{type:"any"}},methods:{getProperty:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}}).properties.customOptionRenderer={},r.extension._CONSTRUCTOR=o,e.CustomElementBridge.register("oj-option",{metadata:r})}),define("ojs/ojchildmutationobserver",["ojs/ojcustomelement","ojs/ojcustomelement-utils"],function(e,t){"use strict";return function(e,i){var s=e,n=i,o=t.CustomElementUtils.isElementRegistered(e.tagName)?t.CustomElementUtils.getElementState(e).getTrackChildrenOption():"none",r=function(e){var i=function(e){for(var i=[],n=0;n<e.length;n++)for(var r=e[n],a="childList"===r.type?r.target:r.target.parentNode;a;)a===s?(i.push(r),a=null):a="nearestCustomElement"!==o||t.ElementUtils.isValidCustomElementName(a.localName)?null:a.parentNode;return i}(e);i.length>0&&n(i)},a=new MutationObserver(r);return{observe:function(){"none"!==o&&a.observe(s,{attributes:!0,childList:!0,subtree:!0,characterData:!0})},disconnect:function(){var e=a.takeRecords();e&&e.length>0&&r(e),a.disconnect()}}}}),define("ojs/ojjquery-hammer",["ojs/ojlogger","hammerjs","jquery"],function(e,t,i){"use strict";var s;i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,t?(i.fn.ojHammer=function(e){switch(e){case"instance":return this.data("ojHammer");case"destroy":return this.each(function(){var e=i(this),t=e.data("ojHammer");t&&(t.destroy(),e.removeData("ojHammer")),e.off("remove.ojHammer")});default:return this.each(function(){var s=i(this);if(!s.data("ojHammer")){const i=new t.Manager(s[0],e);s.on("remove.ojHammer",e=>{e.target===s[0]&&i.destroy()}),s.data("ojHammer",i)}})}},t.Manager.prototype.emit=(s=t.Manager.prototype.emit,function(e,t){s.call(this,e,t),i(this.element).trigger({type:e,gesture:t})})):e.warn("Hammer jQuery extension loaded without Hammer.")}),define("ojs/ojpopup",["ojs/ojpopupcore","ojs/ojcore-base","jquery","ojs/ojcontext","ojs/ojdomutils","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojanimation","ojs/ojfocusutils","ojs/ojcustomelement-utils"],function(e,t,i,s,n,o,r,a,l,h){"use strict";var d;t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,l=l&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l,function(){var d=["oj-left","oj-center","oj-right","oj-top","oj-middle","oj-bottom"],c={"right-top":"oj-right oj-top","right-middle":"oj-right oj-middle","right-bottom":"oj-right oj-bottom","left-top":"oj-left oj-top","left-middle":"oj-left oj-middle","left-bottom":"oj-left oj-bottom","center-top":"oj-center oj-top","center-middle":"oj-left oj-middle","center-bottom":"oj-center oj-bottom"};t.__registerWidget("oj.ojPopup",i.oj.baseComponent,{widgetEventPrefix:"oj",options:{animation:null,autoDismiss:"focusLoss",chrome:"default",initialFocus:"auto",position:{my:{horizontal:"start",vertical:"top"},offset:{x:0,y:0},at:{horizontal:"start",vertical:"bottom"},of:void 0,collision:"flip"},tail:"none",modality:"modeless",role:"tooltip",beforeOpen:null,open:null,beforeClose:null,close:null,focus:null,animateStart:null,animateEnd:null},_ComponentCreate:function(){this._super();var e=this._getRootStyle(),s=this.element;s.hide().addClass(e).attr("aria-hidden","true"),s.addClass("oj-component");var n=i("<div>");n.addClass([e,"content"].join("-")),n.attr("role","presentation"),n.append(s[0].childNodes),n.appendTo(s),this._content=n,this._setChrome(),this._setupFocus(s);var o=this.options;o.position=t.PositionUtils.coerceToJet(o.position)},_AfterCreate:function(){this._super(),this.element.uniqueId(),this._createTail()},_destroy:function(){t.ZOrderUtils.getStatus(this.element)===t.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._setWhenReady("none"),this._destroyTail(),delete this._popupServiceEvents;var e=this.element;e.hide().attr("aria-hidden","true").removeUniqueId();var i=this._content;delete this._content,e.append(i[0].childNodes),i.remove();var s=this._closeDelayTimer;s&&(delete this._closeDelayTimer,s()),this._super()},open:function(e,i){if(!this._isOperationPending("open",[e,i])){t.ZOrderUtils.getStatus(this.element)===t.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly();var s=this.element,n=t.ZOrderUtils.getStatus(s);if(n===t.ZOrderUtils.STATUS.CLOSE||n===t.ZOrderUtils.STATUS.UNKNOWN)if(t.ZOrderUtils.setStatus(s,t.ZOrderUtils.STATUS.BEFORE_OPEN),!1!==this._trigger("beforeOpen")){this._setWhenReady("open"),this._setLauncher(e);var o=this._launcher,r=this.options;(i=i||r.position).of||(this._hasPositionOfLauncherOverride=!0,i.of=o),this._setPosition(i),this._setAutoDismiss(r.autoDismiss),this._addDescribedBy(),this._IsCustomElement()&&s[0].hasAttribute("role")||s.attr("role",r.role);var a=this._getPositionAsJqUi(),l=this._getRootStyle(),h=[l,"layer"].join("-"),d=r.tail;"none"!==d&&(h+=" "+[l,"tail",d].join("-"));var c={};c[t.PopupService.OPTION.POPUP]=s,c[t.PopupService.OPTION.LAUNCHER]=o,c[t.PopupService.OPTION.POSITION]=a,c[t.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),c[t.PopupService.OPTION.LAYER_SELECTORS]=h,c[t.PopupService.OPTION.MODALITY]=r.modality,c[t.PopupService.OPTION.CUSTOM_ELEMENT]=this._IsCustomElement(),t.PopupService.getInstance().open(c)}else t.ZOrderUtils.setStatus(this.element,n)}},_beforeOpenHandler:function(e){var i=e[t.PopupService.OPTION.POPUP],s=e[t.PopupService.OPTION.POSITION];i.show(),i.position(s),this.initialWidth=i.width(),this.initialHeight=i.height();var n=this.options.animation;if(n&&n.open){var o=n.actionPrefix,r=o?[o,"open"].join("-"):"open";return a.startAnimation(i[0],r,t.PositionUtils.addTransformOriginAnimationEffectsOption(i,n.open),this)}},_afterOpenHandler:function(e){var i=e[t.PopupService.OPTION.POPUP],s=e[t.PopupService.OPTION.LAUNCHER];this.initialWidth===i.width()&&this.initialHeight===i.height()||this._reposition(),delete this.initialWidth,delete this.initialHeight,this._registerResizeListener(i[0]),this._initVoiceOverAssist(),this._trigger("open"),this._intialFocus(),this._on(i,{keydown:this._keyHandler}),s&&s.length>0&&this._on(s,{keydown:this._keyHandler})},_GetContextMenu:function(){if(!this._IsCustomElement())return this._super();var e=h.CustomElementUtils.getSlotMap(this._content[0]).contextMenu;return e&&e.length>0?e[0]:void 0},close:function(){if(!this._isOperationPending("close",[])){var e=this.element,i=t.ZOrderUtils.getStatus(e);if(i===t.ZOrderUtils.STATUS.OPEN)if(t.ZOrderUtils.setStatus(e,t.ZOrderUtils.STATUS.BEFORE_CLOSE),!1!==this._trigger("beforeClose")||this._ignoreBeforeCloseResultant){this._setWhenReady("close");var s=this._launcher;this._off(e,"keydown"),s&&s.length>0&&this._off(s,"keydown"),this._restoreFocus(),this._destroyVoiceOverAssist();var n={};n[t.PopupService.OPTION.POPUP]=e,t.PopupService.getInstance().close(n)}else t.ZOrderUtils.setStatus(e,i)}},_beforeCloseHandler:function(e){var i=e[t.PopupService.OPTION.POPUP];this._unregisterResizeListener(i[0]);var s=this.options.animation;if(!this._ignoreBeforeCloseResultant&&s&&s.close){var n=s.actionPrefix,o=n?[n,"close"].join("-"):"close";return a.startAnimation(i[0],o,t.PositionUtils.addTransformOriginAnimationEffectsOption(i,s.close),this).then(function(){i.hide()})}i.hide()},_afterCloseHandler:function(e){(this._removeDescribedBy(),this._setAutoDismiss(),delete this._launcher,this._trigger("close"),this._hasPositionOfLauncherOverride)&&(this.options.position.of=null,delete this._hasPositionOfLauncherOverride)},isOpen:function(){var e=t.ZOrderUtils.getStatus(this.element);return e===t.ZOrderUtils.STATUS.OPENING||e===t.ZOrderUtils.STATUS.OPEN||e===t.ZOrderUtils.STATUS.BEFORE_CLOSE||e===t.ZOrderUtils.STATUS.CLOSING},refresh:function(){if(this._super(),t.ZOrderUtils.getStatus(this.element)===t.ZOrderUtils.STATUS.OPEN&&this._reposition()){var e=this.element;t.PopupService.getInstance().triggerOnDescendents(e,t.PopupService.EVENT.POPUP_REFRESH)}},_setOption:function(e,i){var s=this.options;switch(e){case"tail":i!==s.tail&&this._setTail(i);break;case"chrome":i!==s.chrome&&this._setChrome(i);break;case"position":return this._setPosition(i),void this.refresh();case"autoDismiss":t.ZOrderUtils.getStatus(this.element)===t.ZOrderUtils.STATUS.OPEN&&i!==s.autoDismiss&&this._setAutoDismiss(i);break;case"modality":if(t.ZOrderUtils.getStatus(this.element)===t.ZOrderUtils.STATUS.OPEN){var n=this.element,o={};o[t.PopupService.OPTION.POPUP]=n,o[t.PopupService.OPTION.MODALITY]=i,t.PopupService.getInstance().changeOptions(o)}}this._superApply(arguments)},_getRootStyle:function(){return"oj-popup"},_setTail:function(e){this._destroyTail(),this._createTail(e),this._reposition()},_createTail:function(e){var s=e||this.options.tail;if("none"!==s){var n=this._getRootStyle(),o=[n,"tail"].join("-"),r=[o,s].join("-"),a=i("<div>").hide();a.addClass(o).addClass(r),a.attr("role","presentation"),this._tailId=a.attr("id",this._getSubId("tail")).attr("id");var l=this.element;if(a.appendTo(l),l.addClass(r),t.ZOrderUtils.getStatus(this.element)===t.ZOrderUtils.STATUS.OPEN){var h=[n,"layer"].join("-");h+=" "+r;var d={};d[t.PopupService.OPTION.POPUP]=l,d[t.PopupService.OPTION.LAYER_SELECTORS]=h,t.PopupService.getInstance().changeOptions(d)}}},_getTail:function(){var e=this._tailId;return e?i(document.getElementById(e)):null},_destroyTail:function(){var e=this._getTail();e&&e.remove(),delete this._tailId;var i=this.options.tail,s=this._getRootStyle(),n=[s,"tail",i].join("-"),o=this.element;if(o.removeClass(n),t.ZOrderUtils.getStatus(this.element)===t.ZOrderUtils.STATUS.OPEN){var r=[s,"layer"].join("-"),a={};a[t.PopupService.OPTION.POPUP]=o,a[t.PopupService.OPTION.LAYER_SELECTORS]=r,t.PopupService.getInstance().changeOptions(a)}},_setChrome:function(e){var t=e||this.options.chrome,i=[this._getRootStyle(),"no-chrome"].join("-"),s=this.element;"default"===t&&s.hasClass(i)?s.removeClass(i):"none"!==t||s.hasClass(i)||s.addClass(i)},_setLauncher:function(e){var t=e;if(t?("string"===i.type(t)||1===t.nodeType)&&(t=i(t)):t=i(document.activeElement),t instanceof i&&t.length>1)for(var s=this.element,o=0;o<t.length;o++){var r=t[0];if(!n.isAncestorOrSelf(s[0],r)){t=i(r);break}}else t instanceof i&&!(t instanceof i&&0===t.length)||(t=i(document.activeElement));this._launcher=t},_setPosition:function(e){var i=this.options;e&&(i.position=t.PositionUtils.coerceToJet(e,i.position))},_getPositionAsJqUi:function(){var e=this.options,s=t.PositionUtils.coerceToJqUi(e.position),n="rtl"===this._GetReadingDirection(),o=(s=t.PositionUtils.normalizeHorizontalAlignment(s,n)).using;return o=i.isFunction(o)?o:null,s.using=this._usingHandler.bind(this,o),s},_resolveBusyStateAndCloseImplicitly:function(e){e(),delete this._closeDelayTimer,this._closeImplicitly()},_resolveBusyStateAndCancelDelayedClosure:function(e,t){window.clearTimeout(e),t()},_usingHandler:function(e,i,o){var r=o.element.element;if(i.top!==r.css("top")||i.left!==r.css("left")){var a=this._getTail();if(a){a.hide();for(var l=0;l<d.length;l++)a.removeClass(d[l]),r.removeClass(d[l]);if(a.removeAttr("style"),o.target&&0===o.target.height&&0===o.target.width){var h="rtl"===this._GetReadingDirection(),u=t.PositionUtils.normalizeHorizontalAlignment(this.options.position,h).my;if(!t.StringUtils.isEmptyOrUndefined(u)){var p="center"===u.horizontal?u.horizontal:o.horizontal,m="center"===u.vertical?"middle":u.vertical;o.horizontal=p,o.vertical=m}}var _=[o.horizontal,o.vertical].join("-"),g=c[_];a.addClass(g),r.addClass(g),a.show();var f,v;if("left"===o.horizontal?(f=a.outerWidth(),f-=f+n.getCSSLengthAsInt(a.css("left")),i.left+=f-2):"right"===o.horizontal&&(f=a.outerWidth(),f-=f+n.getCSSLengthAsInt(a.css("right")),i.left-=f-2),"top"===o.vertical?(v=a.outerHeight(),v-=v+n.getCSSLengthAsInt(a.css(o.vertical)),i.top+=v-2):"bottom"===o.vertical&&(v=a.outerHeight(),v-=v+n.getCSSLengthAsInt(a.css(o.vertical)),i.top-=v-2),r.css(i),"center"===o.horizontal&&"middle"!==o.vertical){var y=r.width(),E=Math.round((y/2-a.outerWidth()/2)/y*100);a.css({left:E+"%"})}else if("middle"===o.vertical){var b=r.height(),S=Math.round((b/2-a.outerHeight()/2)/b*100);a.css({top:S+"%"})}}else r.css(i);if(t.PositionUtils.captureTransformOriginAnimationEffectsOption(r,o),e&&e(i,o),"focusLoss"===this.options.autoDismiss&&t.PositionUtils.isAligningPositionClipped(o)){this._ignoreRestoreFocus=!0;var C=s.getContext(this.element[0]).getBusyContext(),I={description:["ojPopup identified by '",this.element.attr("id"),"' is pending implicit closure."].join("")},j=C.addBusyState(I),T=window.setTimeout(this._resolveBusyStateAndCloseImplicitly.bind(this,j),0);this._closeDelayTimer=this._resolveBusyStateAndCancelDelayedClosure.bind(this,T,j)}}},_reposition:function(){var e=this.element,s=this._getPositionAsJqUi();if(t.StringUtils.isString(s.of)){var n=i(s.of);if(0===n.length)return!1;s.of=n}return!(this.element.width()>window.innerWidth||this.element.height()>window.innerHeight)&&(e.position(s),!0)},_unregisterResizeListener:function(e){e&&this._resizeHandler&&(n.removeResizeListener(e,this._resizeHandler),this._resizeHandler=null)},_registerResizeListener:function(e){e&&(null==this._resizeHandler&&(this._resizeHandler=this._handleResize.bind(this)),n.addResizeListener(e,this._resizeHandler,30,!0))},_handleResize:function(){t.ZOrderUtils.getStatus(this.element)===t.ZOrderUtils.STATUS.OPEN&&this._reposition()},_intialFocus:function(e){var t=this._deriveInitialFocus();(e||"none"!==t)&&(this.GetFocusElement().focus(),this._trigger("focus"))},GetFocusElement:function(){var e=document.activeElement;if(e&&this._isFocusInPopup(e))return e;var t,s=this._deriveInitialFocus();if("none"===s&&(s="popup"),"firstFocusable"===s){for(var n=this._content.find(":focusable"),o=0;o<n.length;o++)if(l.isFocusable(n[o])){t=i(n[o]);break}t||(s="popup")}if("popup"===s){var r=this._closeSkipLink;r?t=r.getLink():(t=this.element).attr("tabindex","-1")}return t[0]},_deriveInitialFocus:function(){var e=this.options,t=e.initialFocus;"auto"===t&&(t="modal"===e.modality?n.isTouchSupported()?"popup":"firstFocusable":"none");return t},_isFocusInPopup:function(e,t){if(e||(e=document.activeElement),!e)return!1;var i=this.element;return t&&(i=i.parent()),n.isAncestorOrSelf(i[0],e)},_isFocusInLauncher:function(e){e||(e=document.activeElement);var t=this._launcher;return n.isAncestorOrSelf(t[0],e)},_restoreFocus:function(){this._ignoreRestoreFocus?delete this._ignoreRestoreFocus:this._isFocusInPopup(null,!0)&&this._launcher.focus()},_keyHandler:function(e){if(!e.isDefaultPrevented()){var t=this._content,s=e.target;if(e.keyCode===i.ui.keyCode.ESCAPE&&(this._isFocusInPopup(s)||this._isFocusInLauncher(s)))e.preventDefault(),e.stopPropagation(),this.close();else if(117===e.keyCode||"F6"===e.key)this._isFocusInPopup(s)?"modeless"===this.options.modality?(e.preventDefault(),this._launcher.focus()):this.close():this._isFocusInLauncher(s)&&(e.preventDefault(),this._intialFocus(!0));else if(e.keyCode===i.ui.keyCode.TAB&&this._isFocusInPopup(s)){var n=t.find(":tabbable");if(n.length>0){var o=n[0],r=n[n.length-1],a=this.element;o!==s&&a[0]!==s||!e.shiftKey?r!==s||e.shiftKey||(e.preventDefault(),r===o?(a.attr("tabindex","-1"),a.focus()):i(o).focus()):(e.preventDefault(),o===r&&o===s?(a.attr("tabindex","-1"),a.focus()):i(r).focus())}else e.preventDefault(),"modeless"===this.options.modality?this._launcher.focus():this.close()}}},_setAutoDismiss:function(e){var i=this._focusLossCallback,s=this._getPopupServiceEvents();if(i&&(delete s[t.PopupService.EVENT.POPUP_AUTODISMISS],delete this._focusLossCallback),"focusLoss"===e&&(i=this._dismissalHandler.bind(this),this._focusLossCallback=i,s[t.PopupService.EVENT.POPUP_AUTODISMISS]=i),t.ZOrderUtils.getStatus(this.element)===t.ZOrderUtils.STATUS.OPEN){var n=this.element,o={};o[t.PopupService.OPTION.POPUP]=n,o[t.PopupService.OPTION.EVENTS]=s,t.PopupService.getInstance().changeOptions(o)}},_dismissalHandler:function(e){if(t.ZOrderUtils.getStatus(this.element)===t.ZOrderUtils.STATUS.OPEN){var i=this._launcher,s=this.element.parent(),o=e.target,r=this._focusSkipLink;if(r){var a=r.getLink();if(a&&n.isAncestorOrSelf(a[0],o))return}if(!n.isAncestorOrSelf(i[0],o)&&!n.isAncestorOrSelf(s[0],o)){var h=o.getAttribute("tabindex");if(l.isFocusable(o)&&"-1"!==h){if("mousedown"===e.type||"touchstart"===e.type)return;this._ignoreRestoreFocus=!0}this.close()}}},_addDescribedBy:function(){var e=this._launcher,t=this.element.attr("id"),s=e.attr("aria-describedby"),n=s?s.split(/\s+/):[];n.push(t),s=i.trim(n.join(" ")),e.attr("aria-describedby",s)},_removeDescribedBy:function(){var e=this._launcher,t=this.element;if(e&&0!==e.length){var s=t.attr("id"),n=e.attr("aria-describedby"),o=n?n.split(/\s+/):[],r=i.inArray(s,o);-1!==r&&o.splice(r,1),(n=i.trim(o.join(" ")))?e.attr("aria-describedby",n):e.removeAttr("aria-describedby")}},_initVoiceOverAssist:function(){var i,s=t.AgentUtils.getAgentInfo().os===t.AgentUtils.OS.IOS||t.AgentUtils.getAgentInfo().os===t.AgentUtils.OS.ANDROID,n=this._liveRegion;n||(n=new e.PopupLiveRegion,this._liveRegion=n);var o=this._deriveInitialFocus();if(i=s?this.getTranslatedString("none"===o?"ariaLiveRegionInitialFocusNoneTouch":"ariaLiveRegionInitialFocusFirstFocusableTouch"):this.getTranslatedString("none"===o?"ariaLiveRegionInitialFocusNone":"ariaLiveRegionInitialFocusFirstFocusable"),n.announce(i),s){var r=this._getSubId("focusSkipLink"),a=this._launcher,l=this._intialFocus.bind(this,!0);i=this.getTranslatedString("ariaFocusSkipLink"),this._focusSkipLink=new e.PopupSkipLink(a,i,l,r);var h=this._content,d=this._getSubId("closeSkipLink");l=this._closeImplicitly.bind(this),i=this.getTranslatedString("ariaCloseSkipLink"),this._closeSkipLink=new e.PopupSkipLink(h,i,l,d)}},_destroyVoiceOverAssist:function(){this._liveRegion.destroy(),delete this._liveRegion;var e=this._focusSkipLink;e&&(e.destroy(),delete this._focusSkipLink);var t=this._closeSkipLink;t&&(t.destroy(),delete this._closeSkipLink)},_getSubId:function(e){var i=this.element.attr("id");return t.StringUtils.isEmptyOrUndefined(i)&&(i=this.uuid),[i,e].join("_")},_surrogateRemoveHandler:function(){var e=this.element;t.ZOrderUtils.getStatus(e)===t.ZOrderUtils.STATUS.OPEN&&e.remove()},_getPopupServiceEvents:function(){if(!this._popupServiceEvents){var e={};this._popupServiceEvents=e,e[t.PopupService.EVENT.POPUP_CLOSE]=this._closeImplicitly.bind(this),e[t.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),e[t.PopupService.EVENT.POPUP_REFRESH]=this.refresh.bind(this),e[t.PopupService.EVENT.POPUP_BEFORE_OPEN]=this._beforeOpenHandler.bind(this),e[t.PopupService.EVENT.POPUP_AFTER_OPEN]=this._afterOpenHandler.bind(this),e[t.PopupService.EVENT.POPUP_BEFORE_CLOSE]=this._beforeCloseHandler.bind(this),e[t.PopupService.EVENT.POPUP_AFTER_CLOSE]=this._afterCloseHandler.bind(this)}return this._popupServiceEvents},_closeImplicitly:function(){this._ignoreBeforeCloseResultant=!0,this.close(),delete this._ignoreBeforeCloseResultant},_setWhenReady:function(t){var i=this._whenReadyMediator;i&&(i.destroy(),delete this._whenReadyMediator),["open","close"].indexOf(t)<0||(this._whenReadyMediator=new e.PopupWhenReadyMediator(this.element,t,"ojPopup",this._IsCustomElement()))},_isOperationPending:function(e,t){var i=this._whenReadyMediator;return!!i&&i.isOperationPending(this,e,e,t)},_setupFocus:function(e){var t=this;this._focusable({applyHighlight:!0,setupHandlers:function(s,n){t._on(e,{focus:function(e){s(i(e.currentTarget))},blur:function(e){n(i(e.currentTarget))}})}})},_NotifyDetached:function(){t.ZOrderUtils.getStatus(this.element)===t.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._super()}});const u={open:"--oj-private-popup-global-open-animation-default",close:"--oj-private-popup-global-close-animation-default"};r.setDefaultOptions({ojPopup:{modality:r.createDynamicPropertyGetter(function(){return o.getCachedCSSVarValues(["--oj-private-popup-global-modality-default"])[0]}),animation:r.createDynamicPropertyGetter(function(){const e={},t=Object.keys(u),i=t.map(e=>u[e]),s=o.getCachedCSSVarValues(i);return t.forEach((t,i)=>{e[t]=JSON.parse(s[i])}),e})}})}(),(d={properties:{autoDismiss:{type:"string",enumValues:["focusLoss","none"],value:"focusLoss"},chrome:{type:"string",enumValues:["default","none"],value:"default"},initialFocus:{type:"string",enumValues:["auto","firstFocusable","none","popup"],value:"auto"},modality:{type:"string",enumValues:["modal","modeless"],value:"modeless"},position:{type:"object",properties:{at:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"],value:"start"},vertical:{type:"string",enumValues:["bottom","center","top"],value:"bottom"}}},collision:{type:"string",enumValues:["fit","flip","flipcenter","flipfit","none"],value:"flip"},my:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"],value:"start"},vertical:{type:"string",enumValues:["bottom","center","top"],value:"top"}}},of:{type:"string|object"},offset:{type:"object",properties:{x:{type:"number",value:0},y:{type:"number",value:0}}}}},tail:{type:"string",enumValues:["none","simple"],value:"none"},translations:{type:"object",value:{},properties:{ariaCloseSkipLink:{type:"string"},ariaFocusSkipLink:{type:"string"},ariaLiveRegionInitialFocusFirstFocusable:{type:"string"},ariaLiveRegionInitialFocusFirstFocusableTouch:{type:"string"},ariaLiveRegionInitialFocusNone:{type:"string"},ariaLiveRegionInitialFocusNoneTouch:{type:"string"}}}},methods:{close:{},getProperty:{},isOpen:{},open:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateEnd:{},ojAnimateStart:{},ojBeforeClose:{},ojBeforeOpen:{},ojClose:{},ojFocus:{},ojOpen:{}},extension:{}}).extension._WIDGET_NAME="ojPopup",d.extension._CONTROLS_SUBTREE_HIDDEN=!0,t.CustomElementBridge.register("oj-popup",{metadata:d})}),define("ojs/ojlabel",["ojs/ojcore","ojs/ojjquery-hammer","ojs/ojcomponentcore","ojs/ojpopup","ojs/ojcore-base","jquery","hammerjs","ojs/ojlogger","ojs/ojcontext","ojs/ojdomutils"],function(e,t,i,s,n,o,r,a,l,h){"use strict";var d;n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,l=l&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l,n.__registerWidget("oj.ojLabel",o.oj.baseComponent,{version:"1.0.0",defaultElement:"<label>",widgetEventPrefix:"oj",options:{for:null,help:{definition:null,source:null},labelId:null,showRequired:!1,rootAttributes:null},_BUNDLE_KEY:{_TOOLTIP_HELP:"tooltipHelp",_TOOLTIP_REQUIRED:"tooltipRequired"},widget:function(){return this.uiLabel},refresh:function(){this._super(),this._refreshRequired(),this._refreshHelp(),this._addIdsToDom()},_InitOptions:function(e,t){this._super(e,t),this._isCustomElement=this._IsCustomElement(),this._checkRequiredOption()},_ComponentCreate:function(){this._super(),this._touchEatClickNamespace=this.eventNamespace+"TouchEatClick",this._touchEatContextMenuNamespace=this.eventNamespace+"TouchEatContextMenu",this._helpDefPopupNamespace=this.eventNamespace+"HelpDefPopup",this._bTouchSupported=h.isTouchSupported(),this._drawOnCreate()},_AfterCreate:function(){var e,t,i,s=this,n=this.options.for,o=this.options.showRequired;if(this.OuterWrapper&&(e=this.OuterWrapper.getAttribute("data-oj-input-id"),t=this.OuterWrapper.getAttribute("data-oj-set-id")),e?this.element[0].setAttribute("for",e):t&&(this._targetElement=document.getElementById(t),(i=this._targetElement)&&(this._needsHelpIcon()&&s._addHelpSpanIdOnTarget(s.helpSpanId,i),s.options.showRequired&&s._addRequiredDescribedByOnCustomFormElement(i))),n&&this._isCustomElement){var r=l.getContext(this.OuterWrapper).getBusyContext().addBusyState({description:"The oj-label id='"+this.OuterWrapper.id+"' is looking for its form component with id "+n});Promise.resolve().then(()=>{if(s._targetElement=document.getElementById(n),s._targetElement){i=s._targetElement;var t=document.getElementById(s.helpSpanId);if(s._needsHelpIcon()?s._addHelpSpanIdOnTarget(s.helpSpanId,i):t||i.getAttribute("described-by")!==s.helpSpanId||s._removeHelpSpanIdOnTarget(s.helpSpanId,i),o&&s._addRequiredDescribedByOnCustomFormElement(i),!e)if(s._isElementCustomElement(i)){var l=s.OuterWrapper.id;s._addElementAttribute(i,l,"labelled-by")}else s.element[0].setAttribute("for",n)}else a.info("could not find an element with forOption "+n);r()})}else this._isCustomElement&&this.options.labelId&&(this._targetElement=this._getTargetElementFromLabelledAttr("aria-labelledby",this.options.labelId),(i=this._targetElement)&&this._needsHelpIcon()&&this._addHelpSpanIdOnTarget(this.helpSpanId,i))},_SaveAttributes:function(e){this._IsCustomElement()||(this._savedClasses=e.attr("class"))},_RestoreAttributes:function(){this._IsCustomElement()||(this._savedClasses?this.element.attr("class",this._savedClasses):this.element.removeAttr("class"))},_NotifyDetached:function(){this._superApply(arguments),this._handleCloseHelpDefPopup()},_NotifyHidden:function(){this._superApply(arguments),this._handleCloseHelpDefPopup()},_ReleaseResources:function(){this._super(),this._removeHelpDefIconEventListeners()},_SetupResources:function(){this._super(),this._addShowHelpDefinitionEventHandlers()},_GetTranslationsSectionName:function(){return"oj-ojLabel"},_WatchedAttributeChanged:function(e,t,i){switch(this._superApply(arguments),e){case"data-oj-input-id":this.element[0].setAttribute("for",i);break;case"data-oj-set-id":if(t&&!i){let e=document.getElementById(t);this._removeDescribedByWithPrefix(e,this.OuterWrapper.id)}else{this._targetElement=document.getElementById(i);var s=this._targetElement,n=this._needsHelpIcon(),o=this.options.showRequired;if(n||o){var r=l.getContext(this.OuterWrapper).getBusyContext(),a=r.addBusyState({description:"The oj-label is writing described-by on its target."}),h=this;Promise.resolve().then(()=>{n&&h._addHelpSpanIdOnTarget(h.helpSpanId,s),h.options.showRequired&&h._addRequiredDescribedByOnCustomFormElement(s),a()})}}}},_removeDescribedByWithPrefix:function(e,t){var i,s;s=(i=e.getAttribute("described-by"))?i.split(/\s+/):[],(i=(s=s.filter(function(e){return-1===e.indexOf(t)})).join(" ").trim())?e.setAttribute("described-by",i):e.removeAttribute("described-by")},_drawOnCreate:function(){var e,t=null;this.OuterWrapper?(this.uiLabel=o(this.OuterWrapper).append(this.element.wrap(this._createOjLabelGroupDom()).parent()),this.uiLabel.addClass("oj-label oj-component")):this.uiLabel=this.element.wrap(this._createRootDomElement()).closest(".oj-component"),this._addIdsToDom(),e=this.element[0].id,this.helpSpanId=e+"_helpIcon",this.requiredSpanId=e+"_requiredIcon",this._isCustomElement||this._moveLabelStyleClassesToRootDom(),this.options.showRequired&&this._createRequiredIconSpanDom(),this._needsHelpIcon()&&(t=this._createIconSpan(this.helpSpanId,!0),this._createHelp(t))},_addRequiredDescribedByOnCustomFormElement:function(e){e&&this._isElementCustomElementAriaRequiredUnsupported(e)&&this._addElementAttribute(e,this.requiredSpanId,"described-by")},_removeRequiredDescribedByOnCustomFormElement:function(e){e&&this._isElementCustomElementAriaRequiredUnsupported(e)&&this._removeElementAttribute(e,this.requiredSpanId,"described-by")},_addHelpSpanIdOnTarget:function(e,t){var i;i=this._getAriaAttributeForTarget(t),this._addElementAttribute(t,e,i)},_removeHelpSpanIdOnTarget:function(e,t){var i;i=this._getAriaAttributeForTarget(t),this._removeElementAttribute(t,e,i)},_getAriaAttributeForTarget:function(e){return this._isElementCustomElement(e)?"described-by":"group"===e.getAttribute("role")?"aria-labelledby":"aria-describedby"},_getTargetElementFromLabelledAttr:function(e,t){var i;return i="["+e+"~='"+t+"']",document.querySelector(i)},_isElementCustomElement:function(e){return n.Assert.assertDomElement(e),-1!==e.tagName.indexOf("-")},_isElementCustomElementAriaRequiredUnsupported:function(e){var t;n.Assert.assertDomElement(e);var i,s=["oj-radioset","oj-checkboxset"],o=s.length,r=!1;i=e.tagName.toLowerCase();for(var a=0;a<o&&!r;a++)t=s[a],0===i.indexOf(t)&&(r=!0);return r},_addElementAttribute:function(e,t,i){var s,n,o=e.getAttribute(i);-1===(n=o?o.split(/\s+/):[]).indexOf(t)&&n.push(t),s=n.join(" ").trim(),e.setAttribute(i,s)},_removeElementAttribute:function(e,t,i){var s,n,o,r=e.getAttribute(i);-1!==(n=(o=r?r.split(/\s+/):[]).indexOf(t))&&o.splice(n,1),(s=o.join(" ").trim())?e.setAttribute(i,s):e.setAttribute(i,"")},_createHelp:function(e){var t=this.options.help.definition,i=this.options.help.source,s=this._createHelpIconAnchorDomElement(t,i);o(e).prepend(s),this._attachHelpDefToIconAnchor(),this._focusable({element:s,applyHighlight:!0})},_createRequiredIconSpanDom:function(){this._createIconSpan(this.requiredSpanId,!1).appendChild(this._createRequiredIconDomElement())},_checkRequiredOption:function(){var e=this.options.showRequired;if("boolean"!=typeof e)throw new Error("Option 'showRequired' has invalid value set: "+e)},_addIdsToDom:function(){this._isCustomElement&&(this.OuterWrapper.id||o(this.OuterWrapper).uniqueId(),this._refreshLabelId()),null==this.element.attr("id")&&this.element.uniqueId()},_moveLabelStyleClassesToRootDom:function(){var e,t,i,s=this.element.attr("class");if(s){i=(e=s.split(/\s+/)).length;for(var n=0;n<i;n++)(t=e[n]).includes("-label")&&(this.uiLabel.addClass(t),this.element.removeClass(t))}},_createIconSpan:function(e,t){var i=document.createElement("span");return i.setAttribute("id",e),t?this.uiLabel.find(".oj-label-group").prepend(i):this.element.before(i),i},_createRootDomElement:function(){var e,t,i=this.options.rootAttributes,s="oj-label oj-component";return i&&(e=i.class),e&&(s=s+" "+e),(t=document.createElement("div")).className=s,t.appendChild(this._createOjLabelGroupDom()),t},_createOjLabelGroupDom:function(){var e;return(e=document.createElement("div")).className="oj-label-group",e},_createRequiredIconDomElement:function(){var e=this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_REQUIRED),t=document.createElement("span");return t.className="oj-label-required-icon oj-component-icon",t.setAttribute("role","img"),t.setAttribute("title",e),t.setAttribute("aria-label",e),t},_createHelpIconAnchorDomElement:function(e,t){var i;if((i=document.createElement("a")).setAttribute("tabindex","0"),i.setAttribute("target","_blank"),i.className="oj-label-help-icon-anchor oj-label-help-icon oj-component-icon oj-clickable-icon-nocontext",t)try{h.validateURL(t),i.setAttribute("href",t)}catch(e){throw new Error(e+". The source option ("+t+") is invalid.")}else i.setAttribute("role","img");return e?i.setAttribute("aria-label",e):i.setAttribute("aria-label",this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_HELP)),i},_attachHelpDefToIconAnchor:function(){var e,t,i,s=this;0!==(t=this.widget().find(".oj-label-help-icon-anchor")).length&&(this._bTouchSupported&&(this._eatClickOnHelpIconListener&&this.widget().off(this._touchEatClickNamespace),this._eatClickOnHelpIconListener=function(){return!1},t.on("contextmenu"+this._touchEatContextMenuNamespace,!1)),this._openPopupForHelpDefCallbackListener=function(n){null==e&&((e=s._createHelpDefPopupDiv()).on("mouseleave"+s._helpDefPopupNamespace,s._mouseleaveClosePopupForHelpDefListener),e.on("mouseenter"+s._helpDefPopupNamespace,s._clearTimeoutOnPopupMouseEnterListener),i={my:"start bottom",at:"end top",collision:"flipcenter",of:t},e.ojPopup({position:i,modality:"modeless",animation:{open:null,close:null}})),s._handleOpenHelpDefPopup(n,e,t)},this._mouseleaveClosePopupForHelpDefListener=function(i){if(null!=s._helpDefPopupDivId){const n=i.currentTarget===t[0],o=i.currentTarget===e[0];if(n||o){const t=l.getContext(s.element[0]).getBusyContext();s.helpDefClosePopupBCResolved=t.addBusyState({description:"The oj-label is closing the help popup.'"}),s.closePopupTimer=setTimeout(function(){e.ojPopup("close"),s._resolveHelpDefClosePopupTimoutBC()},200)}}},this._clearTimeoutOnPopupMouseEnterListener=function(){s.closePopupTimer&&(clearTimeout(s.closePopupTimer),s._resolveHelpDefClosePopupTimoutBC())})},_createHelpDefPopupDiv:function(){var e,t,i,s,n=this.options.help.definition;return s=n||this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_HELP),this._helpDefPopupDivId?(i=o(document.getElementById(this._helpDefPopupDivId))).length&&i.find(".oj-label-help-popup-container").first().text(s):((t=document.createElement("div")).className="oj-label-help-popup",t.style.display="none",(i=o(t)).uniqueId(),this._helpDefPopupDivId=i.prop("id"),(e=document.createElement("div")).className="oj-label-help-popup-container",t.appendChild(e),o(e).text(s),this.uiLabel.append(i)),i},_addShowHelpDefinitionEventHandlers:function(){const e=this.uiLabel.find(".oj-label-help-icon");0!==e.length&&(e.on("focusin"+this._helpDefPopupNamespace+" mouseenter"+this._helpDefPopupNamespace,this._openPopupForHelpDefCallbackListener),e.on("mouseleave"+this._helpDefPopupNamespace,this._mouseleaveClosePopupForHelpDefListener),this._setupHammerEventHandlers(e))},_setupHammerEventHandlers:function(){const e=this.uiLabel.find(".oj-label-help-icon");if(this._bTouchSupported&&0!==e.length)if(this.options.help.source){let t={recognizers:[[r.Press,{time:h.PRESS_HOLD_THRESHOLD}]]};e.ojHammer(t),this._on(e,{press:this._openPopupForHelpDefCallbackListener})}else{let t={recognizers:[[r.Tap],[r.Press,{time:h.PRESS_HOLD_THRESHOLD}]]};e.ojHammer(t),this._on(e,{press:this._openPopupForHelpDefCallbackListener,tap:this._openPopupForHelpDefCallbackListener})}},_releaseHammerEventHandlers:function(){const e=this.uiLabel.find(".oj-label-help-icon");this._bTouchSupported&&0!==e.length&&e.ojHammer("destroy")},_resolveHelpDefClosePopupTimoutBC:function(){this.closePopupTimer=null,this.helpDefClosePopupBCResolved&&(this.helpDefClosePopupBCResolved(),delete this.helpDefClosePopupBCResolved)},_handleOpenHelpDefPopup:function(e,t,i){if(this.closePopupTimer&&(clearTimeout(this.closePopupTimer),this._resolveHelpDefClosePopupTimoutBC()),!t.ojPopup("isOpen"))if(this._bTouchSupported){if("press"===e.type){var s=this.widget();s.on("click"+this._touchEatClickNamespace,this._eatClickOnHelpIconListener);var n=this;t.on("ojclose",function(){s.off(n._touchEatClickNamespace)})}else t.off("ojclose");"press"!==e.type&&"tap"!==e.type&&(h.recentTouchStart()||"focusin"!==e.type&&"mouseenter"!==e.type)||t.ojPopup("open",i)}else t.ojPopup("open",i)},_handleCloseHelpDefPopup:function(){null!=this._helpDefPopupDivId&&o(document.getElementById(this._helpDefPopupDivId)).ojPopup("close")},_removeHelpDefIconEventListeners:function(){const e=this.uiLabel.find(".oj-label-help-icon");this._bTouchSupported&&(this.widget().off(this._touchEatClickNamespace),e.off(this._touchEatContextMenuNamespace)),this._releaseHammerEventHandlers(),e.off(this._helpDefPopupNamespace),null!=this._helpDefPopupDivId&&o(document.getElementById(this._helpDefPopupDivId)).off(this._helpDefPopupNamespace)},_removeHelpDefPopup:function(){var e;null!=this._helpDefPopupDivId&&((e=o(document.getElementById(this._helpDefPopupDivId))).length>0&&(e.ojPopup("destroy"),e.remove()),this._helpDefPopupDivId=null)},_needsHelpIcon:function(){var e,t,i=this.options,s=i.help.source;return(t=""!==s&&null!=s)||(t=""!==(e=i.help.definition)&&null!=e),t},_refreshHelp:function(){var e,t,i=this.helpSpanId,s=this._targetElement;1===(t=this.uiLabel.find(".oj-label-help-icon")).length&&(this._removeHelpDefIconEventListeners(),this._removeHelpDefPopup(),t.remove()),e=document.getElementById(i),this._needsHelpIcon()?(null==e&&(e=this._createIconSpan(i,!0)),this._createHelp(e),this._addShowHelpDefinitionEventHandlers(),this._isCustomElement&&s&&this._addHelpSpanIdOnTarget(i,s)):null!==e&&(e.parentNode.removeChild(e),this._isCustomElement&&s&&this._removeHelpSpanIdOnTarget(i,s))},_refreshRequired:function(){var e,t,i=this.requiredSpanId;e=document.getElementById(i),this.options.showRequired?e?(t=this.getTranslatedString(this._BUNDLE_KEY._TOOLTIP_REQUIRED),this.uiLabel.find(".oj-label-required-icon").attr("title",t)):(this._createRequiredIconSpanDom(),this._isCustomElement&&this._addRequiredDescribedByOnCustomFormElement(this._targetElement)):(null!==(e=document.getElementById(i))&&e.parentNode.removeChild(e),this._isCustomElement&&this._removeRequiredDescribedByOnCustomFormElement(this._targetElement))},_refreshFor:function(e,t){var i=this.element[0],s=this.OuterWrapper.id;if(e){i.removeAttribute("for"),this.OuterWrapper.removeAttribute("data-oj-input-id");var n=document.getElementById(e);if(n){var o=n.getAttribute("labelled-by");if(o)if(o===s)n.removeAttribute("labelled-by");else{var r=o.split(/\s+/).filter(function(e){return e!==s}).join(" ");n.setAttribute("labelled-by",r)}}}if(this._targetElement=document.getElementById(this.options.for),this._targetElement){var a=this._targetElement;this._isElementCustomElement(a)?(this._addElementAttribute(a,s,"labelled-by"),this._needsHelpIcon()&&this._addHelpSpanIdOnTarget(this.helpSpanId,a),this.options.showRequired&&this._addRequiredDescribedByOnCustomFormElement(a)):i.setAttribute("for",t)}},_refreshLabelId:function(){var e,t;(e=this.options.labelId)?this.element.attr("id",e):(t=this.uiLabel.attr("id"))&&this.element.attr("id",t+"|label")},_setOption:function(e,t){var i=this.options[e];switch(this._superApply(arguments),e){case"showRequired":this._refreshRequired();break;case"help":this._refreshHelp();break;case"for":this._isCustomElement&&this._refreshFor(i,t);break;case"labelId":this._refreshLabelId()}},getNodeBySubId:function(e){var t;return(t=this._super(e))||"oj-label-help-icon"===e.subId&&(t=this.widget().find(".oj-label-help-icon")[0]),t||null},getSubIdByNode:function(e){var t=null;return null!=e&&e===this.widget().find(".oj-label-help-icon")[0]&&(t={subId:"oj-label-help-icon"}),t||this._superApply(arguments)},_destroy:function(){return this._removeHelpDefIconEventListeners(),this._removeHelpDefPopup(),this.helpSpanId=null,this.requiredSpanId=null,this._isCustomElement=null,h.unwrap(this.element,this.uiLabel),this._super()}}),(d={properties:{for:{type:"string"},help:{type:"object",value:{definition:null,source:null},properties:{definition:{type:"string"},source:{type:"string"}}},labelId:{type:"string"},showRequired:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{tooltipHelp:{type:"string"},tooltipRequired:{type:"string"}}}},methods:{getProperty:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}}).extension._WIDGET_NAME="ojLabel",d.extension._INNER_ELEM="label",d.extension._GLOBAL_TRANSFER_ATTRS=["accesskey"],d.extension._WATCHED_ATTRS=["data-oj-input-id","data-oj-set-id"],n.CustomElementBridge.register("oj-label",{metadata:d})}),define("ojs/ojlabelledbyutils",["ojs/ojlabel"],function(e){"use strict";const t={CUSTOM_LABEL_ELEMENT_ID:"|label",_labelledByUpdatedForSet:function(e,i,s,n){if((i||s)&&this._IsCustomElement()){var o={callbackAdd:function(e,i,s){const n=t.CUSTOM_LABEL_ELEMENT_ID;t._addAriaLabelledBy(e,i+n),t._addSetIdOnLabel(i,s.componentId)},callbackRemove:function(e,i,s){const n=t.CUSTOM_LABEL_ELEMENT_ID;t._removeAriaLabelledBy(e,i+n),t._removeSetIdOnLabel(i,s.componentId)},args:{componentId:e}};t._byUpdatedTemplate(i,s,n,o)}},_describedByUpdated:function(e,i,s=this._GetContentElement()){if(e||i){var n={callbackAdd:function(e,i){t._addRemoveAriaBy(e,"aria-describedby",i,!0)},callbackRemove:function(e,i){t._addRemoveAriaBy(e,"aria-describedby",i,!1)}};t._byUpdatedTemplate(e,i,s,n)}},_byUpdatedTemplate:function(e,t,i,s){var n,o,r,a;if(!e&&t)for(o=t.split(/\s+/),a=0;a<o.length;a++)n=o[a],s.callbackAdd.call(this,i,n,s.args);else if(e&&!t)for(o=e.split(/\s+/),a=0;a<o.length;a++)n=o[a],s.callbackRemove.call(this,i,n,s.args);else if(e&&t){for(o=t.split(/\s+/),r=e.split(/\s+/),a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&s.callbackRemove.call(this,i,n,s.args);for(a=0;a<o.length;a++)n=o[a],-1===e.indexOf(n)&&s.callbackAdd.call(this,i,n,s.args)}},_addAriaLabelledBy:function(e,i){t._addRemoveAriaBy(e,"aria-labelledby",i,!0)},_removeAriaLabelledBy:function(e,i){t._addRemoveAriaBy(e,"aria-labelledby",i,!1)},_addSetIdOnLabel:function(e,t){var i=document.getElementById(e);i&&(i.getAttribute("data-oj-set-id")||i.setAttribute("data-oj-set-id",t))},_removeSetIdOnLabel:function(e){var t=document.getElementById(e);t&&t.getAttribute("data-oj-set-id")&&t.removeAttribute("data-oj-set-id")},_addRemoveAriaBy:function(e,t,i,s){e.each(function(){let e=this.getAttribute(t),n=e?e.split(/\s+/):[],o=n.indexOf(i);s&&-1===o?n.push(i):s||-1===o||n.splice(o,1);let r=n.join(" ").trim();r?this.setAttribute(t,r):this.removeAttribute(t)})}};return t}),define("ojs/ojmenu",["jquery","ojs/ojjquery-hammer","ojs/ojpopupcore","ojs/ojoption","ojs/ojcore-base","hammerjs","ojs/ojcontext","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojanimation","ojs/ojlogger","ojs/ojconfig","ojs/ojcustomelement-utils"],function(e,t,i,s,n,o,r,a,l,h,d,c,u){"use strict";var p;e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,function(){var t=[],s=!1,p="oj-menu-position";const m={dropdown:{open:"--oj-private-menu-global-drop-down-open-animation",close:"--oj-private-menu-global-drop-down-close-animation"},sheet:{open:"--oj-private-menu-global-sheet-open-animation",close:"--oj-private-menu-global-sheet-close-animation"},submenu:{open:"--oj-private-menu-global-submenu-open-animation",close:"--oj-private-menu-global-submenu-close-animation"}};var _=n.AgentUtils.getAgentInfo().os===n.AgentUtils.OS.MAC&&n.AgentUtils.getAgentInfo().browser===n.AgentUtils.BROWSER.SAFARI,g="menuItem"===a.getCachedCSSVarValues(["--oj-private-menu-global-sheet-cancel-affordance"])[0],f="dismiss"===a.getCachedCSSVarValues(["--oj-private-menu-global-sheet-swipe-down-behavior"])[0],v=a.getCachedCSSVarValues(["--oj-private-menu-global-drop-down-modality"])[0]||"modeless",y=a.getCachedCSSVarValues(["--oj-private-menu-global-sheet-modality"])[0]||"modal",E="bottom-"+(a.getCachedCSSVarValues(["oj-private-menu-global-sheet-margin-bottom"])[0]||0),b=f&&{recognizers:[[o.Swipe,{direction:o.DIRECTION_HORIZONTAL}]]};const S=-(.5*parseInt(window.getComputedStyle(document.documentElement).fontSize,10)+1);function C(t){var i,s=[],n=t.children("oj-defer").first();i=n.length>0?n.children(".oj-menu-item, oj-menu-select-many"):t.children(".oj-menu-item, oj-menu-select-many");for(var o=0;o<i.length;o++){var r=e(i[o]);r.is(".oj-menu-item")?s.push(r[0]):"OJ-MENU-SELECT-MANY"===r[0].nodeName&&(s=e.merge(s,r.children(".oj-menu-item")))}return s}n.__registerWidget("oj.ojMenu",e.oj.baseComponent,{defaultElement:"<ul>",delay:300,role:"menu",widgetEventPrefix:"oj",options:{menuSelector:"ul",openOptions:{display:"auto",initialFocus:"menu",launcher:null,position:{my:{horizontal:"start",vertical:"top"},offset:{x:0,y:0},at:{horizontal:"start",vertical:"bottom"},of:void 0,collision:"flipfit"}},submenuOpenOptions:{position:{my:"start top",at:"end top",collision:"flipfit"}},animateStart:null,animateEnd:null,beforeOpen:null,close:null,open:null,action:null,menuAction:null},_ComponentCreate:function(){if(this._super(),this._focusForTesting=this._focus,this._nextForTesting=this._next,this._selectForTesting=this._select,this._IsCustomElement()){this.element.hide();var e=this.options;e.openOptions.position=n.PositionUtils.coerceToJet(e.openOptions.position);var t=this.element[0].querySelector("oj-defer");t&&t.setAttribute("data-oj-context",!0)}else this._createAsTopLevelMenu()},_preventDefault:function(e){this.options.disabled&&e.preventDefault()},_createAsTopLevelMenu:function(){var t=this;this.activeMenu=this.element,this.mouseHandled=!1,this._setupSwipeBehavior(),this.element.uniqueId().addClass("oj-menu oj-component").hide().attr({role:this.role,tabIndex:"0","aria-hidden":"true"}),this._on(!0,{"mousedown .oj-menu-item":this._preventDefault,click:this._preventDefault,keydown:function(t){this.options.disabled&&(t.keyCode!==e.ui.keyCode.ESCAPE&&t.keyCode!==e.ui.keyCode.TAB||(t.keyCode===e.ui.keyCode.TAB&&t.preventDefault(),this._focusLauncherAndDismiss(t)))}}),this.options.disabled&&this.element.addClass("oj-disabled").attr("aria-disabled","true");var i=function(t){if(!this.focusHandled){this.focusHandled=!0;var i=e(t.currentTarget);try{this._focusIsFromPointer=!0,this._focus(t,i)}finally{this._focusIsFromPointer=!1}}}.bind(this),s=function(t){e(t.target).is(":visible")&&this._collapse(t,"eventSubtree")}.bind(this);this._touchStartHandler=function(t){this.focusHandled=!1;var i=e(t.currentTarget);this._focus(t,i)}.bind(this),this.element[0].addEventListener("touchstart",this._touchStartHandler,{passive:!0}),this._delegatedHandleMouseEnterMenuItem=function(t){const s=t.currentTarget,n=t.target.closest(".oj-menu-item");n&&s.contains(n)&&i(e.Event(t,{currentTarget:n}))},this.element[0].addEventListener("touchstart",this._delegatedHandleMouseEnterMenuItem,{passive:!0}),this._on({"click .oj-disabled > a":function(e){e.preventDefault()},click:function(){this.mouseHandled=!1},mouseover:function(){this.focusHandled=!1},"click .oj-menu-item:has(a)":function(t){var i=e(t.target).closest(".oj-menu-item");if(!this.mouseHandled&&i.not(".oj-disabled").length){if(this.mouseHandled=!0,t.preventDefault(),this.active&&this.active.closest(i).length&&this.active.get(0)!==i.get(0))return;i.has(".oj-menu").length?this._expand(t):(this._select(t),this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".oj-menu").length&&this._clearTimer&&this._clearTimer()))}},"mouseenter .oj-menu-item":i,mouseleave:s,"mouseleave .oj-menu":s,focus:function(t,i){if(!(i||t.target===this.element[0]||this._focusSkipLink&&t.target===this._focusSkipLink.getLink()[0])){var s=this.active||e(C(this.element)).first(0);this._focus(t,s)}},keydown:this._keydown,keyup:function(t){t.keyCode!==e.ui.keyCode.ENTER&&t.keyCode!==e.ui.keyCode.SPACE||(this.__spaceEnterDownInMenu=!1)}}),this._focusable({applyHighlight:!_,recentPointer:function(){return t._focusIsFromPointer},setupHandlers:function(e,i){t._focusInHandler=e,t._focusOutHandler=i}}),this._usingCallback=e.proxy(this._usingHandler,this),this._setup()},_createAsSubmenu:function(){this.element.attr(l._OJ_CONTAINER_ATTR,this.widgetName),this.element.uniqueId().addClass("oj-menu oj-component oj-menu-submenu oj-menu-dropdown").hide().attr({role:this.role,tabIndex:"0","aria-hidden":"true"}),this._setup()},__contextMenuPressHoldJustEnded:function(e){if(!arguments.length)return s;s=e},_processOjOptions:function(){this._maxEndIconCount=0,this._maxStartIconCount=0,this._startIconWidth=0,this._endIconWidth=0;var t=function(t){var i,s=[],n=t.children("oj-defer").first();i=n.length>0?n.children("oj-option, oj-menu-select-many"):t.children("oj-option, oj-menu-select-many");for(var o=0;o<i.length;o++){var r=e(i[o]);"OJ-OPTION"===r[0].nodeName?s.push(r[0]):"OJ-MENU-SELECT-MANY"===r[0].nodeName&&(s=e.merge(s,r.children("oj-option")))}return e(s)}(this.element);this._clearOption(t);for(var i=0;i<t.length;i++){t[i].customOptionRenderer=this._customOptionRenderer.bind(this)}},_customOptionRenderer:function(t){function i(e){if(e.previousElementSibling&&"OJ-OPTION"===e.previousElementSibling.nodeName)return e.previousElementSibling;if(e.previousElementSibling&&"OJ-MENU-SELECT-MANY"===e.previousElementSibling.nodeName){var t=e.previousElementSibling.lastElementChild;return"OJ-OPTION"===t.nodeName?t:t.previousElementSibling?t.previousElementSibling:i(t)}return e.previousElementSibling||"OJ-MENU-SELECT-MANY"!==e.parentElement.nodeName?void 0:i(e.parentElement)}function s(e){return e.nextElementSibling&&"OJ-OPTION"===e.nextElementSibling.nodeName?e.nextElementSibling:e.nextElementSibling&&"OJ-MENU-SELECT-MANY"===e.nextElementSibling.nodeName?e.nextElementSibling.firstElementChild:e.nextElementSibling&&"OJ-OPTION"===e.nextElementSibling.nodeName||"OJ-MENU-SELECT-MANY"!==e.parentElement.nodeName?void 0:s(e.parentElement)}var n=e(t),o="OJ-MENU-SELECT-MANY"===n.parent().prop("nodeName"),r=this;this._hasSubmenus=!1;for(var a,l,h,d,c=n.children('a[ojmenu="opt"]'),p=0;p<c.length;p++)(a=e(c[p])).children().removeClass("oj-menu-item-icon").removeClass("oj-menu-item-end-icon"),a.replaceWith(a.contents());if(n.children('span[ojmenu="opt"]').remove(),/[^\-\u2014\u2013\s]/.test(n.text())||0!==n.children().length){this._initMenuItems(n);var m=document.createElement("a");m.setAttribute("href","#"),m.setAttribute("ojmenu","opt"),(a=e(m)).uniqueId().attr({tabIndex:"-1",role:this._itemRole(n)}),o&&(a.attr("aria-checked","false"),(l=t).previousElementSibling||i(l)||e(l).addClass("oj-top"),l.nextElementSibling&&"OJ-OPTION"===l.nextElementSibling.nodeName||s(l)||e(l).addClass("oj-bottom")),n.prepend(m);var _=u.CustomElementUtils.getSlotMap(t),g=_.startIcon;if(g||o){if(o){var f=document.createElement("span");f.setAttribute("slot","startIcon"),f.setAttribute("ojmenu","opt"),f.setAttribute("class","oj-menucheckbox-icon"),g?g.splice(0,0,f):g=[f]}var v=g.length;r._maxStartIconCount=Math.max(r._maxStartIconCount,v),e.each(g,function(t,i){e(i).addClass("oj-menu-item-icon"),a.append(i),v>1&&r._positionStartIcon(i,t,v)})}var y=0,E=_.endIcon;E&&(y=E.length,r._maxEndIconCount=Math.max(r._maxEndIconCount,y));var b=_[""];e.each(b,function(t,i){e(i).is("oj-menu")?(r._setupSubmenu(a,e(i),0===y),r._hasSubmenus=!0):a.append(i)}),E&&e.each(E,function(t,i){e(i).addClass("oj-menu-item-end-icon"),a.append(i),y>1&&r._positionEndIcon(i,t,y)}),t.disabled?(n.addClass("oj-disabled"),a.attr("aria-disabled","true")):(n.removeClass("oj-disabled"),a.removeAttr("aria-disabled"))}else this._initDividers(n),(d=i(h=t))&&e(d).addClass("oj-menu-item-before-divider"),(d=s(h))&&e(d).addClass("oj-menu-item-after-divider");this._updateMenuPadding(this.element)},_positionStartIcon:function(t,i,s){var n;n=this.isRtl?"margin-right":"margin-left";var o=Number(e(t).attr("data-oj-default-margin"));isNaN(o)&&(o=parseInt(e(t).css(n),10),e(t).attr("data-oj-default-margin",o)),this._startIconWidth=-1*o,e(t).css(n,o*(s-i)+"px")},_positionEndIcon:function(t,i,s){var n,o;this.isRtl?(n="margin-left",o="margin-right"):(n="margin-right",o="margin-left");var r=Number(e(t).attr("data-oj-default-margin"));isNaN(r)&&(r=parseInt(e(t).css(n),10),e(t).attr("data-oj-default-margin",r)),this._endIconWidth=-1*parseInt(e(t).css(o),10),e(t).css(n,r+this._endIconWidth*(s-i-1)+"px")},_updateMenuPadding:function(t){var i=e(C(t)).children();i.each(function(){let t=e(this).children(".oj-menu-item-icon:not(.oj-menu-cancel-icon)").length,i=e(this).children(".oj-menu-item-end-icon").length||e(this).children(".oj-menu-submenu-icon").length;0===t&&0===i?e(this).addClass("oj-menu-option-text-only"):(t>0&&e(this).addClass("oj-menu-option-start-icon"),i>0&&e(this).addClass("oj-menu-option-end-icon"))}),this._maxStartIconCount&&this._maxStartIconCount>1&&this._applyAnchorIconPadding(i,this._startIconWidth,this._maxStartIconCount,!0),this._maxEndIconCount&&this._maxEndIconCount>1&&this._applyAnchorIconPadding(i,this._endIconWidth,this._maxEndIconCount,!1)},_applyAnchorIconPadding:function(t,i,s,n){var o;o=this.isRtl&&n||!this.isRtl&&!n?"padding-right":"padding-left",t.each(function(){var t=Number(e(this).attr("data-oj-default-padding"));isNaN(t)&&(t=parseInt(e(this).css(o),10),e(this).attr("data-oj-default-padding",t)),e(this).css(o,t+i*(s-1)+"px")})},_clickAwayHandler:function(i){if("focus"===i.type||"mousedown"===i.type||"touchstart"===i.type||121===i.keyCode&&i.shiftKey||93===i.keyCode){if("mousedown"===i.type&&s)return;var n=this,o=t.slice(0,t.length);e.each(o,function(t,s){if(!e(i.target).closest(s.element).length&&("keydown"===i.type||"mousedown"===i.type&&3===i.which||!e(i.target).closest(s._launcher).length||s._isContextMenu&&("mousedown"===i.type&&3!==i.which||"touchstart"===i.type))&&!s._dismissEvent){s._dismissEvent=i;var o=s._collapse(i,"eventSubtree");n._runOnPromise(o,function(){s.__dismiss(i),s._dismissEvent=null})}})}},_setOption:function(e,t){this._superApply(arguments),"translations"===e&&this._cancelAnchor&&this._cancelAnchor.text(this.options.translations.labelCancel)},_destroy:function(){this.element.is(":visible")&&this.__dismiss(),this._setWhenReady("none"),this._clearTimer&&this._clearTimer(),delete this._clearTimer,this.element[0].removeEventListener("touchstart",this._touchStartHandler,{passive:!0}),delete this._touchStartHandler,this.element[0].removeEventListener("touchstart",this._delegatedHandleMouseEnterMenuItem,{passive:!0}),delete this._delegatedHandleMouseEnterMenuItem,this.element.removeAttr("aria-activedescendant").removeClass("oj-component").find(".oj-menu").addBack().removeClass("oj-menu oj-menu-submenu oj-menu-icons oj-menu-end-icons oj-menu-text-only").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".oj-menu-item").removeClass("oj-menu-item").removeAttr("role").children("a").removeAttr("aria-disabled").removeUniqueId().removeClass("oj-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("oj-ojMenu-submenu-icon")&&t.remove()}),this.element.find("a").removeAttr("aria-expanded"),this.element.find(".oj-menu-divider").removeClass("oj-menu-divider").removeAttr("role"),delete this._popupServiceEvents,delete this._usingCallback;var t=this._clearCloseDelayTimer;delete this._clearCloseDelayTimer,t&&t(),this.element.ojHammer("destroy"),this._super()},_keydown:function(t){var i=!0;function s(e){return e.replace(/[-\[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}switch(t.keyCode){case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this._previous(t);break;case e.ui.keyCode.DOWN:this._next(t);break;case e.ui.keyCode.LEFT:case e.ui.keyCode.RIGHT:t.keyCode===e.ui.keyCode.RIGHT!==this.isRtl?this.active&&!this.active.is(".oj-disabled")&&this._expand(t):this._collapse(t,"active");break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._handleEnterSpace(t),this.__spaceEnterDownInMenu=!0;var n=this;setTimeout(function(){n.__spaceEnterDownInMenu=!1},100);break;case e.ui.keyCode.TAB:t.preventDefault(),this._focusLauncherAndDismiss(t);break;case e.ui.keyCode.ESCAPE:if(this._launcher){var o=this.element.attr("aria-activedescendant"),r=e(document.getElementById(o)).parents(".oj-menu").first();r.length>0&&r[0]!==this.element[0]?this._collapse(t,"active"):this._focusLauncherAndDismiss(t)}else this._collapse(t,"active");break;default:i=!1;var a=this.previousFilter||"",l=String.fromCharCode(t.keyCode),h=!1;clearTimeout(this.filterTimer),l===a?h=!0:l=a+l;var d=new RegExp("^"+s(l),"i"),c=e(C(this.activeMenu)).filter(function(){return d.test(e(this).children("a").text())});(c=h&&-1!==c.index(this.active.next())?this.active.nextAll(".oj-menu-item"):c).length||(l=String.fromCharCode(t.keyCode),d=new RegExp("^"+s(l),"i"),c=e(C(this.activeMenu)).filter(function(){return d.test(e(this).children("a").text())})),c.length?(this._focus(t,c),c.length>1?(this.previousFilter=l,this.filterTimer=setTimeout(function(){delete this.previousFilter}.bind(this),1e3)):delete this.previousFilter):delete this.previousFilter}i&&t.preventDefault()},_handleEnterSpace:function(e){this.active&&!this.active.is(".oj-disabled")&&(this.active.children("a[aria-haspopup='true']").length?this._expand(e):this._select(e))},refresh:function(){function t(t){for(var i=t.element.find("oj-menu:not(.oj-menu-submenu)"),s=0;s<i.length;s++){e(i[s]).attr("aria-hidden","true").hide(),r.getContext(i[s]).getBusyContext().whenReady().then(function(e){e.refresh()}.bind(t,i[s]))}}(this._super(),this._IsCustomElement()&&!this._wasCreated)?(this.element.parent().is("oj-option")&&(this._isSubmenu=!0,this._createAsSubmenu()),this._isSubmenu||(l.subtreeShown(this.element[0]),this._createAsTopLevelMenu(),t(this)),this._wasCreated=!0):(t(this),this._setup());this._reposition()},_reposition:function(){var t=this.element;if(t.is(":visible")&&!(t[0].getBoundingClientRect().width>document.documentElement.clientWidth)){var i=t.data(p);t[0].style.maxHeight="",t[0].style.overflowY="",this._updateMenuMaxHeight(),t.position(i),t.find(".oj-menu").each(function(){var t=e(this);t.is(":visible")&&(i=t.data(p),t.position(i))})}},_setup:function(){this.isRtl="rtl"===this._GetReadingDirection(),this._IsCustomElement()?(this._processOjOptions(),this._isSubmenu&&(this.options.openOptions.launcher=this.element.parent()),this._updateMenuPadding(this.element)):this._setupWidgetMenus(),this.active&&!e.contains(this.element[0],this.active[0])&&this._blur()},_setupWidgetMenus:function(){var t=this,i=this.element.find(this.options.menuSelector),s=i.add(this.element),n=s.children();this._hasSubmenus=!!i.length,n.filter(".oj-menu-divider").has("a").removeClass("oj-menu-divider oj-menu-item").removeAttr("role");var o=n.filter(":not(.oj-menu-item):has(a)"),r=o.children("a");this._initMenuItems(o),this._initAnchors(r);var a=n.filter(function(t,i){var s=e(i);return s.is(":not(.oj-menu-item)")&&!/[^\-\u2014\u2013\s]/.test(s.text())});this._initDividers(a),this._initDividerNeighbors(n,a),n.filter(".oj-disabled").children("a").attr("aria-disabled","true"),n.filter(":not(.oj-disabled)").children("a").removeAttr("aria-disabled"),i.filter(":not(.oj-menu)").addClass("oj-menu oj-menu-submenu oj-menu-dropdown").hide().attr({role:this.role,"aria-hidden":"true"}).each(function(){var i=e(this);t._setupSubmenu(t._getSubmenuAnchor(i),i,!0)}),s.each(function(){t._updateMenuPadding(e(this))})},_setupSubmenu:function(t,i,s){var n=0!==t[0].querySelectorAll(".oj-menu-submenu-icon.oj-component-icon").length;if(t.attr("aria-haspopup","true").attr("role","menuitem").attr("aria-expanded","false"),s&&!n){var o=e("<span>");o.addClass("oj-menu-submenu-icon oj-component-icon").data("oj-ojMenu-submenu-icon",!0),t.append(o)}t[0].parentElement.disabled&&i.find("oj-option").attr("disabled",!0),i.attr("aria-labelledby",t.attr("id"))},_initMenuItems:function(e){e.addClass("oj-menu-item").attr("role","presentation")},_initAnchors:function(t){for(var i=0;i<t.length;i++){var s=e(t[i]);s.uniqueId().attr({tabIndex:"-1",role:this._itemRole(s.parent())})}},_initDividers:function(e){e.addClass("oj-menu-divider").attr("role","separator")},_initDividerNeighbors:function(e,t){e.removeClass("oj-menu-item-before-divider oj-menu-item-after-divider"),t.prev().addClass("oj-menu-item-before-divider"),t.next().addClass("oj-menu-item-after-divider")},_clearOption:function(e){e.removeClass("oj-menu-item-before-divider oj-menu-item-after-divider oj-menu-divider oj-menu-item").removeAttr("role")},_getSubmenuAnchor:function(e){return e.prev("a")},_getSubmenuWidget:function(e){return l.__GetWidgetConstructor(e,"ojMenu")("instance")},_itemRole:function(e){return"OJ-MENU-SELECT-MANY"===e.parent().prop("nodeName")?"menuitemcheckbox":"menuitem"},_getAdjacentDividers:function(e,t){var i=e.prev(".oj-menu-divider").add(e.next(".oj-menu-divider"));return t&&(i=i.add(e)),i},_focus:function(t,i){var s=this.active?this.active:e();if(!i.is(s)){t&&"focus"===t.type||this._clearTimer&&this._clearTimer(),i=i.first(),this._makeActive(i,t);var n=i.parents(".oj-menu").first(),o=n.closest(".oj-menu-item");n.find(".oj-focus-ancestor").removeClass("oj-focus-ancestor"),this._getAdjacentDividers(o,!0).addClass("oj-focus-ancestor"),t&&"keydown"===t.type?this._close():this._clearTimer=this._setTimer(function(){return delete this._clearTimer,this._close()},this._getSubmenuBusyStateDescription("closing"),this.delay);var r=this._IsCustomElement()?i.children("oj-menu"):i.children(".oj-menu"),a=r.length>0&&s.length>0&&e.contains(r[0],s[0]);r.length&&t&&/^mouse|click/.test(t.type)&&!a&&this._startOpening(t,r),this.activeMenu=i.parents(".oj-menu").first()}},_makeActive:function(t,i){if(!t.is(this.active)){var s,n,o=this.active?this.active:e(),r=t.children("a");this.active=t,this.element.attr("aria-activedescendant",r.attr("id")),this._focusOutHandler(o),this._focusInHandler(t),this._getAdjacentDividers(o).removeClass("oj-focus"),this._getAdjacentDividers(t).addClass("oj-focus"),this._trigger("_activeItem",i,{previousItem:o,item:t,privateNotice:"The _activeItem event is private.  Do not use."}),i&&/^key/.test(i.type)&&(s=r[0],(n=s.getBoundingClientRect()).top<0||n.bottom>document.documentElement.clientHeight||n.left<0||n.right>document.documentElement.clientWidth)&&r[0].scrollIntoView()}},_removeActive:function(t){if(this.active){var i=this.active;this.active=null,this.element.removeAttr("aria-activedescendant"),this._focusOutHandler(i),this._getAdjacentDividers(i).removeClass("oj-focus"),this._trigger("_activeItem",t,{previousItem:i,item:e(),privateNotice:"The _activeItem event is private.  Do not use."})}},_blur:function(e){this._clearTimer&&this._clearTimer(),this._removeActive(e)},_focusLauncherAndDismiss:function(e,t){this._launcher&&this._launcher.focus(),this.__dismiss(e,t)},close:function(){this.__dismiss()},__dismiss:function(e,t){if(!this._isOperationPending("close","__dismiss",[e,t])&&n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN){var i=this.element.is(":visible");this._setWhenReady("close");var s={};s[n.PopupService.OPTION.POPUP]=this.element,s[n.PopupService.OPTION.CONTEXT]={event:e,selectUi:t,isOpen:i},n.PopupService.getInstance().close(s)}},_getDefaultAnimation:function(e,t){var i=m,s=a.getCachedCSSVarValues([i[e][t]])[0];return JSON.parse(s)},_isAnimationDisabled:function(){return!this._IsCustomElement()||this._disableAnimation},_replaceAnimationOptions:function(e,t){var i=e;if(t&&e&&"string"!=typeof e){for(var s=JSON.stringify(e),n=Object.keys(t),o=0;o<n.length;o++){var r=n[o];s=s.replace(new RegExp(r,"g"),t[r])}i=JSON.parse(s)}return i},_runOnPromise:function(e,t){return e?e.then(t):t()},_beforeCloseHandler:function(e){var t=e[n.PopupService.OPTION.POPUP];if(this._IsCustomElement()){var i=e[n.PopupService.OPTION.CONTEXT],s=i.selectUi;if(s&&s.item.length){var o={},r=s.item[0],a=i.event;o.originalEvent=a.originalEvent;var l={detail:o,cancelable:!0,bubbles:!0},d=new CustomEvent("ojAction",l);r.dispatchEvent(d),l.detail.selectedValue=r.value;var c=new CustomEvent("ojMenuAction",l);this.element[0].dispatchEvent(c),i.event=c}}if(!this._isAnimationDisabled()){var u=this._getDefaultAnimation(this._sheetMenuIsOpen?"sheet":"dropdown","close"),p=h.startAnimation(t[0],"close",n.PositionUtils.addTransformOriginAnimationEffectsOption(t,u),this);return p.then(function(){t.attr("aria-hidden","true").hide()}),p}t.attr("aria-hidden","true").hide()},_afterCloseHandler:function(e){var i=e[n.PopupService.OPTION.CONTEXT],s=i.event,o=i.selectUi,r=i.isOpen;(this.element.removeData(p),this._launcher=null,this._sheetMenuIsOpen=!1,!this._IsCustomElement()&&o)&&(s=this._trigger2("select",s,o).event);r&&this._trigger("close",s,{}),this._currentOpenOptions=null;var a=t.indexOf(this);t.splice(a,1),this._destroyVoiceOverAssist()},getCurrentOpenOptions:function(){return e.extend(!0,{},this._currentOpenOptions||this.options.openOptions)},_closeMenuIfOpen:function(e,t,i){n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN&&(this._disableAnimation=!0,this._currentOpenOptions=e,this.__dismiss(t.event),this._dismissEvent=null,this._currentOpenOptions=i)},open:function(i,s){var o=arguments[2];if(!this._isOperationPending("open","open",[i,s,o])){var l=function(i,s){this._IsCustomElement()&&this.refresh(),this.element.removeAttr("aria-activedescendant"),this.element.find(".oj-focus").removeClass("oj-focus"),this.focusHandled=!1,this._focusIsFromPointer=!1,this.mouseHandled=!1,this.activeMenu=this.element,this.active=null,(s=e.extend({},this.options.openOptions,s)).position=e.extend({},s.position),i&&"keydown"===i.type&&121===i.which&&(s.initialFocus="firstItem"),this._IsCustomElement()&&this._setPosition(s.position),o=e.extend({},this.options.submenuOpenOptions,o);var r=this._currentOpenOptions;this._currentOpenOptions=s,n.PositionUtils._normalizeEventForPosition(i),this._isContextMenu=this.element[0].slot&&"contextMenu"===this.element[0].slot;var l=this._trigger2("beforeOpen",i,{openOptions:s});if(!l.proceed)return this._currentOpenOptions=r,void(this._disableAnimation=!1);this._closeMenuIfOpen(r,l,s);var h=s.launcher;if(!(h=this._IsCustomElement()?"string"===e.type(h)?e(document.getElementById(h)):e(h):"string"===e.type(h)?e(h):h)||!h.length)return d.warn("When calling Menu.open(), must specify openOptions.launcher via the component option, method param, or beforeOpen listener.  Ignoring the call."),this._currentOpenOptions=null,void(this._disableAnimation=!1);var c,u,m=this._isDropDown(s.display);if(this._toggleCancelDom(m),m){this.element.addClass("oj-menu-dropdown").removeClass("oj-menu-sheet"),u=v;var _=n.PositionUtils.normalizeHorizontalAlignment(s.position,this.isRtl);if(!_.of&&_.offset&&0===_.offset.x&&0===_.offset.y){const e=a.getCachedCSSVarValues(["--oj-private-core-global-dropdown-offset"])[0]||0;_.offset={x:0,y:e}}this._IsCustomElement()?(_=n.PositionUtils.coerceToJet(_,this.options.openOptions.position),this._referenceOpenPosition=_,c=n.PositionUtils.coerceToJqUi(_)):(this._referenceOpenPosition=_,c=_),c.of=n.PositionUtils.normalizePositionOf(c.of,h,i)}else this.element.addClass("oj-menu-sheet").removeClass("oj-menu-dropdown"),u=y,c={my:"bottom",at:E,of:window,collision:"flipfit"};var g=this.element[0],f=t.slice(0,t.length);e.each(f,function(e,t){t.element[0]!==g&&(t._collapse(i,"eventSubtree"),t.__dismiss(i))}),this._submenuPosition=n.PositionUtils.normalizeHorizontalAlignment(o.position,this.isRtl);var b=this._usingCallback;e.isFunction(c.using)&&(c.origUsing=c.using),c.using=b,this.element.data(p,c),this._setWhenReady("open");var S={};S[n.PopupService.OPTION.POPUP]=this.element,S[n.PopupService.OPTION.LAUNCHER]=h,S[n.PopupService.OPTION.POSITION]=c,S[n.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),S[n.PopupService.OPTION.LAYER_SELECTORS]="oj-menu-layer",S[n.PopupService.OPTION.MODALITY]=u,S[n.PopupService.OPTION.CONTEXT]={event:i,initialFocus:s.initialFocus,launcher:h,isDropDown:m},S[n.PopupService.OPTION.CUSTOM_ELEMENT]=this._IsCustomElement();var C=n.PopupService.getInstance(),I=C.open.bind(C,S),j=this.element[0].querySelector("oj-defer");j?n.Context.getContext(j).getBusyContext().whenReady().then(I):I();this._disableAnimation=!1}.bind(this,i,s);if(this._dismissEvent){var h=r.getContext(this.element[0]).getBusyContext();h.whenReady().then(l)}else l()}},_setPosition:function(e){var t=this.options;t.openOptions.position=n.PositionUtils.coerceToJet(e,t.openOptions.position)},_beforeOpenHandler:function(e){var t,i=e[n.PopupService.OPTION.POPUP],s=e[n.PopupService.OPTION.POSITION],o=e[n.PopupService.OPTION.CONTEXT],r=o.event,a=o.isDropDown,l=o.initialFocus;if(i[0].style.maxHeight="",i[0].style.overflowY="",i.show(),a&&(s=this._checkBrowserVerticalScollBar(o,s)),this.rootHeight=i[0].offsetHeight,"click"===s.of.type?this.launcherHeight=s.of.clientY:this.launcherHeight=o.launcher[0].getBoundingClientRect().bottom,this._updateMenuMaxHeight(),i.position(s),this._initVoiceOverAssist(l),"firstItem"===l){var d=this._getFirstItem();this._focus(r,d)}if(!this._isAnimationDisabled()){var c=this._getDefaultAnimation(a?"dropdown":"sheet","open");t=h.startAnimation(i[0],"open",n.PositionUtils.addTransformOriginAnimationEffectsOption(i,c),this)}return t},_checkBrowserVerticalScollBar:function(t,i){var s=t.launcher,o=e.position.scrollbarWidth(),r=window.innerWidth>document.documentElement.clientWidth,a=window.innerWidth-s[0].offsetLeft-this.element[0].offsetWidth<o;if(!r||!a)return i;if(this._referenceOpenPosition.offset.x=-1*o,this._IsCustomElement()){var l=n.PositionUtils.coerceToJqUi(this._referenceOpenPosition);return Object.assign(i,{my:l.my})}return Object.assign(i,{offset:{my:-1*o}})},_updateMenuMaxHeight:function(e){var t=e?e[0]:this.element[0],i=this._isDropDown(this.options.openOptions.display);if(!(t.querySelectorAll("oj-menu").length||!i||this.rootHeight<window.innerHeight)){var s=window.innerHeight-this.launcherHeight-25;s<25&&(s=25),t.style.maxHeight=s+"px",t.style.overflowY="auto"}},_afterOpenHandler:function(e){var i,s=e[n.PopupService.OPTION.CONTEXT],o=s.event,r=s.launcher,a=s.isDropDown,l=s.initialFocus;(this._launcher=r,this._sheetMenuIsOpen=!a,t.push(this),"firstItem"===l||"menu"===l)&&(i=this._focusSkipLink&&"menu"===l?this._focusSkipLink.getLink():this.element,this._IsCustomElement()?window.setImmediate(function(){i.focus()}):i.focus());this._trigger("open",o,{})},_initVoiceOverAssist:function(e){if("menu"===e&&(n.AgentUtils.getAgentInfo().os===n.AgentUtils.OS.IOS||n.AgentUtils.getAgentInfo().os===n.AgentUtils.OS.ANDROID)){var t=this._getFirstItem();if(!(t.length<1)){var s=this.element.attr("id");n.StringUtils.isEmptyOrUndefined(s)&&(s=this.uuid);var o=[s,"focusSkipLink"].join("_"),r=function(){window.setImmediate(function(e,t){t.find("a").first().focus(),e._focus(null,t)}.bind(this,this,t))}.bind(this),a=this.options.translations.ariaFocusSkipLink;this._focusSkipLink=new i.PopupSkipLink(t,a,r,o,{insertBefore:!0,preventKeyEvents:!1})}}},_destroyVoiceOverAssist:function(){this._focusSkipLink&&(this._focusSkipLink.destroy(),delete this._focusSkipLink)},_getFirstItem:function(){return this.element.find(".oj-menu-item").first()},_startOpening:function(e,t){this._clearTimer&&this._clearTimer(),this._IsCustomElement()&&t[0].refresh(),this._clearTimer=this._setTimer(function(){return delete this._clearTimer,this._close().then(function(){this._open(e,t)}.bind(this))},this._getSubmenuBusyStateDescription("closing and opening"),this.delay)},_open:function(t,i){if("true"===i.attr("aria-hidden")&&this.active){var s;if(this._IsCustomElement()){var o=this._getSubmenuWidget(i);if(!o._trigger2("beforeOpen",t).proceed)return;let e=Object.assign(o.options.openOptions.position,{offset:{x:0,y:S}});s=n.PositionUtils.coerceToJqUi(e),s=n.PositionUtils.normalizeHorizontalAlignment(s,this.isRtl)}else s=this._submenuPosition;if(s=e.extend({of:this.active},s),this._clearTimer&&this._clearTimer(),this.element.find(".oj-menu").not(i.parents(".oj-menu")).hide().attr("aria-hidden","true").removeData(p),i.show().removeAttr("aria-hidden").position(s).data(p,s),this._getSubmenuAnchor(i).attr("aria-expanded","true"),!this._isAnimationDisabled()){var a=r.getContext(this.element[0]).getBusyContext().addBusyState({description:this._getSubmenuBusyStateDescription("opening")}),l=this._getDefaultAnimation("submenu","open"),d=s.my.slice();!this.isRtl&&parseFloat(i[0].style.left)<0?d="right top":this.isRtl&&parseFloat(i[0].style.left)>0&&(d="left top"),l=this._replaceAnimationOptions(l,{"#myPosition":d}),h.startAnimation(i[0],"open",l,this).then(a)}this._updateMenuMaxHeight(i)}},__collapseAll:function(t,i,s){var n;this._clearTimer&&this._clearTimer();var o=this,a=function(){delete o._clearTimer;var s=i?o.element:e(t&&t.target).closest(o.element.find(".oj-menu"));s.length||(s=o.element);var n=o._close(s);return n=o._runOnPromise(n,function(){o._blur(t),o.activeMenu=s})};if(s?this._isAnimationDisabled()?o._clearTimer=o._setTimer(a,o._getSubmenuBusyStateDescription("closing"),s):n=new Promise(function(e){o._clearTimer=o._setTimer(a,o._getSubmenuBusyStateDescription("closing"),s,function(){e(!0)})}):n=a(),n){var l=r.getContext(this.element[0]).getBusyContext().addBusyState({description:"closing submenus"});n.then(l)}return n},_close:function(t){var i;t||(t=this.active?this.active.parents(".oj-menu").first():this.element);var s=this,n=s._getDefaultAnimation("submenu","close"),o=t.find(".oj-menu"),r=function(e){e.hide().attr("aria-hidden","true").removeData(p),s._getSubmenuAnchor(e).attr("aria-expanded","false")};if(this._isAnimationDisabled())r(o),t.find(".oj-focus-ancestor").removeClass("oj-focus-ancestor"),i=Promise.resolve(!0);else{var a=function(t){var i=null;return e(C(t)).children(".oj-menu").each(function(t,o){var l=e(o);if(l.is(":visible")){var d=a(l);i=s._runOnPromise(d,function(){var e=l.data(p),t=s._replaceAnimationOptions(n,{"#myPosition":e.my});return h.startAnimation(o,"close",t,s).then(function(){r(l)})})}else r(l),i=Promise.resolve(!0)}),i};i=a(t),i=this._runOnPromise(i,function(){t.find(".oj-focus-ancestor").removeClass("oj-focus-ancestor")})}return i},_collapse:function(e,t){var i;if(null==t||"active"===t){var s=this.activeMenu&&this.activeMenu.closest(".oj-menu-item",this.element);if(s&&s.length){var n=this;i=this._close(),i=this._runOnPromise(i,function(){n._focus(e,s)})}}else"all"===t||"eventSubtree"===t?i=this.__collapseAll(e,"all"===t,this.delay):d.warn("Invalid param "+t+" passed to Menu._collapse().  Ignoring the call.");return i},_expand:function(t){var i,s;if(this.active){var n=C(s=this.active.children(".oj-menu ").first());n.length>0&&(i=e(n[0]))}i&&i.length&&(this._open(t,s),this._clearTimer&&this._clearTimer(),this._clearTimer=this._setTimer(function(){delete this._clearTimer,this._focus(t,i)},this._getBusyStateDescription("focusing an item")))},_next:function(e){this._move("next","first",e)},_previous:function(e){this._move("prev","last",e)},_move:function(t,i,s){var n,o=C(this.activeMenu),r=o.indexOf(this.active?this.active[0]:null);r>-1?"first"===t?n=o[0]:"last"===t?n=o[o.length-1]:"next"===t?n=r+1<o.length?o[r+1]:o[0]:"prev"===t&&(n=r-1>-1?o[r-1]:o[o.length-1]):n="first"===i?o[0]:o[o.length-1],this._focus(s,e(n))},_select:function(t){if(!this.active&&t&&t.target){var i=e(t.target).closest(".oj-menu-item");i.closest(this.element).length&&this._makeActive(i,t)}var s=this.active.is(this._cancelItem)?void 0:{item:this.active},n=this.__collapseAll(t,!0);this._runOnPromise(n,function(){this._focusLauncherAndDismiss(t,s)}.bind(this))},_surrogateRemoveHandler:function(){var e=this.element;n.ZOrderUtils.getStatus(e)===n.ZOrderUtils.STATUS.OPEN&&e.remove()},_getPopupServiceEvents:function(){if(!this._popupServiceEvents){var e={};this._popupServiceEvents=e,e[n.PopupService.EVENT.POPUP_CLOSE]=this._closeAll.bind(this),e[n.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),e[n.PopupService.EVENT.POPUP_REFRESH]=this._reposition.bind(this),e[n.PopupService.EVENT.POPUP_AUTODISMISS]=this._clickAwayHandler.bind(this),e[n.PopupService.EVENT.POPUP_BEFORE_OPEN]=this._beforeOpenHandler.bind(this),e[n.PopupService.EVENT.POPUP_AFTER_OPEN]=this._afterOpenHandler.bind(this),e[n.PopupService.EVENT.POPUP_BEFORE_CLOSE]=this._beforeCloseHandler.bind(this),e[n.PopupService.EVENT.POPUP_AFTER_CLOSE]=this._afterCloseHandler.bind(this)}return this._popupServiceEvents},_closeAll:function(){this._disableAnimation=!0,this._close(this.element),this.__dismiss(null),this._setWhenReady("none")},_usingHandler:function(e,t){var i=t.element.element;i.css(e),n.PositionUtils.captureTransformOriginAnimationEffectsOption(i,t);var s=i.data(p).origUsing;s&&s(e,t),n.PositionUtils.isAligningPositionClipped(t)&&(this._clearCloseDelayTimer=this._setTimer(this._closeAll,this._getSubmenuBusyStateDescription("closing"),1))},getNodeBySubId:function(e){return e&&"oj-menu-cancel-command"===e.subId?this._cancelDomAttached?this._cancelItem[0]:null:this._super(e)},getSubIdByNode:function(t){return this._cancelItem&&this._cancelItem.is(e(t).parents().addBack(t))?{subId:"oj-menu-cancel-command"}:this._super(t)},_isDropDown:function(e){if(this._hasSubmenus)return!0;switch(e){case"dropDown":return!0;case"sheet":return!1;default:return"phone"!==c.getDeviceRenderMode()}},_toggleCancelDom:function(t){function i(t,i){var s=C(t),n=s.indexOf(i[1]);return e(s[n-1])}if(g)if(t)this._cancelDomAttached&&(i(this.element,this._getCancelDom()).removeClass("oj-menu-item-before-divider"),this._getCancelDom().detach(),this._cancelDomAttached=!1);else{var s=this._getCancelDom();s.appendTo(this.element),i(this.element,s).addClass("oj-menu-item-before-divider"),this._cancelDomAttached=!0}},_getCancelDom:function(){if(!this._cancelDom){var t=e("<li></li>",this.document[0]),i=e("<a href='#'></a>",this.document[0]).text(this.options.translations.labelCancel);e("<span class='oj-menu-item-icon oj-component-icon oj-menu-cancel-icon'></span>",this.document[0]).prependTo(i);var s=e("<li></li>",this.document[0]).addClass("oj-menu-item-cancel oj-menu-item-after-divider").append(i);this._initDividers(t),this._initAnchors(i),this._initMenuItems(s),this._cancelAnchor=i,this._cancelItem=s,this._cancelDom=e([t[0],s[0]])}return this._cancelDom},_setupSwipeBehavior:function(){f&&(this.element.ojHammer(b),this._on({swipedown:function(e){this._sheetMenuIsOpen&&"touch"===e.gesture.pointerType&&(this.__collapseAll(e,!0),this._focusLauncherAndDismiss(e))}}))},_setWhenReady:function(e){var t=this._whenReadyMediator;t&&(t.destroy(),delete this._whenReadyMediator),["open","close"].indexOf(e)<0||(this._whenReadyMediator=new i.PopupWhenReadyMediator(this.element,e,"ojMenu",this._IsCustomElement()))},_isOperationPending:function(e,t,i){var s=this._whenReadyMediator;return!!s&&s.isOperationPending(this,e,t,i)},_setTimer:function(e,t,i,s){var n=r.getContext(this.element[0]).getBusyContext().addBusyState({description:t}),o=function(){n&&(n(),n=null,s&&s())},a=this,l=setTimeout(function(){var t=e.bind(a)();t&&t instanceof Promise?t.then(o):o()},i||0);return function(){clearTimeout(l),o()}},_getBusyStateDescription:function(e){return"Menu with id '"+this.element.attr("id")+"' is busy "+e+"."},_getSubmenuBusyStateDescription:function(e){return this._getBusyStateDescription(e+" a submenu")},_NotifyDetached:function(){n.ZOrderUtils.getStatus(this.element)===n.ZOrderUtils.STATUS.OPEN&&this._closeAll(),this._super()}}),l.setDefaultOptions({ojMenu:{openOptions:l.createDynamicPropertyGetter(function(e){return{position:u.CustomElementUtils.isElementRegistered(e.element.tagName)?e.containers.indexOf("ojMenu")>=0?{my:{horizontal:"start",vertical:"top"},at:{horizontal:"end",vertical:"top"},offset:{x:0,y:0},collision:"flipfit"}:{my:{horizontal:"start",vertical:"top"},at:{horizontal:"start",vertical:"bottom"},offset:{x:0,y:0},collision:"flipfit"}:{my:"start top",at:"start bottom",collision:"flipfit"}}})}})}(),(p={properties:{disabled:{type:"boolean",value:!1},openOptions:{type:"object",properties:{display:{type:"string",enumValues:["auto","dropDown","sheet"],value:"auto"},initialFocus:{type:"string",enumValues:["firstItem","menu","none"],value:"menu"},launcher:{type:"string|Element"},position:{type:"object",properties:{at:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"]},vertical:{type:"string",enumValues:["bottom","center","top"]}}},collision:{type:"string",enumValues:["fit","flip","flipcenter","flipfit","none"],value:"flipfit"},my:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"],value:"start"},vertical:{type:"string",enumValues:["bottom","center","top"],value:"top"}}},of:{type:"string|object"},offset:{type:"object",properties:{x:{type:"number",value:0},y:{type:"number",value:0}}}}}}},translations:{type:"object",value:{},properties:{ariaFocusSkipLink:{type:"string"},labelCancel:{type:"string"}}}},methods:{close:{},getProperty:{},open:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAction:{},ojAnimateEnd:{},ojAnimateStart:{},ojBeforeOpen:{},ojClose:{},ojMenuAction:{},ojOpen:{}},extension:{}}).extension._WIDGET_NAME="ojMenu",n.CustomElementBridge.register("oj-menu",{metadata:p})}),define("ojs/ojvmenu",["exports","preact/jsx-runtime","ojs/ojmenu","preact"],function(e,t,i,s){"use strict";class n extends s.Component{constructor(e){super(e),this._rootRef=null}render(e){return t.jsx("div",Object.assign({style:{display:"none"},ref:e=>this._rootRef=e},{children:e.children}))}componentDidMount(){this._menuElement||(this._menuElement=this._getMenu(),null!==this._menuElement&&this._openMenu())}_getMenu(){return this._rootRef.childNodes[0]}_openMenu(){const e=this._getOpenOptions();this._menuElement.__openingContextMenu=!0;try{this._menuElement.open(this.props.eventObj.event,e),this._addCloseListener()}catch(e){throw e}finally{this._menuElement.__openingContextMenu=!1}}_addCloseListener(){this.props.onCloseCallback&&this._menuElement.addEventListener("ojClose",this.props.onCloseCallback)}_getOpenOptions(){const e=this.props.eventObj.eventType||"keyboard";return{launcher:this.props.launcherElement,position:Object.assign(Object.assign({},n._MENU_POSITION[e]),{of:"keyboard"===e?this.props.launcherElement:this.props.eventObj.event}),initialFocus:"menu"}}componentWillUnmount(){this._removeCloseListener()}_removeCloseListener(){this._menuElement&&this.props.onCloseCallback&&this._menuElement.removeEventListener("ojClose",this.props.onCloseCallback)}}n._MENU_POSITION={mouse:{my:"start top",at:"start bottom",collision:"flipfit"},touch:{my:"start>40 center",at:"start bottom",collision:"flipfit"},keyboard:{my:"start top",at:"start bottom",collision:"flipfit"}},e.VMenu=n,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojbutton2",["exports","preact/jsx-runtime","ojs/ojdomutils","ojs/ojgestureutils","ojs/ojvcomponent","preact","ojs/ojvmenu","ojs/ojvcomponent-binding","ojs/ojthemeutils"],function(e,t,i,s,n,o,r,a,l){"use strict";var h,d=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};e.Button2=h=class extends o.Component{constructor(e){super(e),this._rootRef=o.createRef(),this._handleContextMenuGesture=(e,t)=>{const i={event:e,eventType:t};e.preventDefault(),this.setState({contextMenuTriggerEvent:i})},this._handleTouchstart=e=>{this.setState({active:!0})},this._handleTouchend=e=>{this.setState({active:!1})},this._handleFocusIn=e=>{e.target===e.currentTarget&&this._handleFocus(e),this.setState({focus:!0}),this._rootRef.current&&this.focusInHandler(this._rootRef.current)},this._handleFocusOut=e=>{e.target===e.currentTarget&&this._handleBlur(e),this.setState({focus:!1}),this._rootRef.current&&this.focusOutHandler(this._rootRef.current)},this._handleMouseenter=e=>{i.recentTouchEnd()||(this===h._lastActive&&this.setState({active:!0}),this.setState({hover:!0}))},this._handleMouseleave=e=>{this.setState({hover:!1,active:!1})},this._handleMousedown=e=>{if(1===e.which&&!i.recentTouchEnd()){this.setState({active:!0}),h._lastActive=this;const e=()=>{h._lastActive=null,document.removeEventListener("mouseup",e,!0)};document.addEventListener("mouseup",e,!0)}},this._handleMouseup=e=>{this.setState({active:!1})},this._handleClick=e=>{var t,i;e.detail<=1&&(null===(i=(t=this.props).onOjAction)||void 0===i||i.call(t,{originalEvent:e}))},this._handleKeydown=e=>{32!==e.keyCode&&13!==e.keyCode||this.setState({active:!0})},this._handleKeyup=e=>{this.setState({active:!1})},this._handleFocus=e=>{var t,i;null===(i=null===(t=this._rootRef)||void 0===t?void 0:t.current)||void 0===i||i.dispatchEvent(new FocusEvent("focus",{relatedTarget:e.relatedTarget}))},this._handleBlur=e=>{var t;this.setState({active:!1}),null===(t=this._rootRef)||void 0===t||t.current.dispatchEvent(new FocusEvent("blur",{relatedTarget:e.relatedTarget}))},this._onCloseCallback=e=>{this.state.contextMenuTriggerEvent&&this.setState({contextMenuTriggerEvent:null})},this.state={},this.uniquePrefix=e.id?e.id+n.getUniqueId():n.getUniqueId()}render(e,i){const s=e.children;let o=this._processIcon(e.startIcon,"oj-button-icon oj-start"),r=this._processIcon(e.endIcon,"oj-button-icon oj-end"),a=e["aria-label"],l=e["aria-labelledby"],h=e["aria-describedby"];const d=a||l;let c=null,u=null,p=null,m=e.title;const _=e.label||s;_?(m=this.state.derivedTitle||m||e.label,"icons"===e.display&&(o||r)?e.label?(d||(a=e.label),c=t.jsx("span",Object.assign({ref:e=>this._defaultSlotRef=e},{children:c}))):(d||(p=this.uniquePrefix+"|text",l=p),c=t.jsx("span",Object.assign({ref:e=>this._defaultSlotRef=e,class:"oj-button-text oj-helper-hidden-accessible",id:p},{children:_}))):"label"===e.display?(e.startIcon&&(o=this._processIcon(e.startIcon,"oj-button-icon oj-helper-hidden oj-start")),e.endIcon&&(r=this._processIcon(e.endIcon,"oj-button-icon oj-helper-hidden oj-end")),d||(p=this.uniquePrefix+"|text",l=p),c=t.jsx("span",Object.assign({ref:e=>this._defaultSlotRef=e,class:"oj-button-text",id:p},{children:_}))):(d||(p=this.uniquePrefix+"|text",l=p),c=t.jsx("span",Object.assign({ref:e=>this._defaultSlotRef=e,class:"oj-button-text",id:p},{children:_})))):c=t.jsx("span",Object.assign({ref:e=>this._defaultSlotRef=e},{children:c}));const g=t.jsxs("div",Object.assign({class:"oj-button-label"},{children:[o,c,r]}));let f;e.disabled?f=t.jsx("button",Object.assign({class:"oj-button-button","aria-labelledby":l,"aria-describedby":h,"aria-label":a,disabled:!0},{children:g})):(u=this._handleClick,f=t.jsx("button",Object.assign({class:"oj-button-button",ref:e=>this._buttonRef=e,"aria-labelledby":l,"aria-describedby":h,"aria-label":a,onTouchStart:this._handleTouchstart,onTouchEnd:this._handleTouchend,onTouchCancel:this._handleTouchend,onMouseEnter:this._handleMouseenter,onMouseLeave:this._handleMouseleave,onMouseDown:this._handleMousedown,onMouseUp:this._handleMouseup,onfocusin:this._handleFocusIn,onfocusout:this._handleFocusOut,onKeyDown:this._handleKeydown,onKeyUp:this._handleKeyup},{children:g})));const v=this._getRootClasses(o,r);return t.jsxs(n.Root,Object.assign({class:v,id:e.id,title:m,onClick:u,ref:this._rootRef},{children:[f,this._renderContextMenu()]}))}_renderContextMenu(){return this.state.contextMenuTriggerEvent&&this.props.contextMenu?t.jsx(r.VMenu,Object.assign({eventObj:this.state.contextMenuTriggerEvent,launcherElement:this._buttonRef,onCloseCallback:this._onCloseCallback},{children:[this.props.contextMenu]})):null}_processIcon(e,i){let s;return Array.isArray(e)?s=e.map(e=>this._processIcon(e,i)):e&&(s=t.jsx("span",Object.assign({class:i},{children:e}))),s}_getRootClasses(e,t){let i=!0,s="oj-button "+h._chromingMap[this.props.chroming];return s+=" "+this._getDisplayOptionClass(e,t),this.props.disabled?(i=!1,s+=" oj-disabled"):(s+=" oj-enabled",this.state.hover&&(i=!1,s+=" oj-hover"),this.state.active&&(i=!1,s+=" oj-active")),i&&(s+=" oj-default"),s}_getDisplayOptionClass(e,t){const i=e&&t,s=e||t,n="icons"===this.props.display;let o;return o="label"===this.props.display?"oj-button-text-only":s?n?i?"oj-button-icons-only":"oj-button-icon-only":i?"oj-button-text-icons":e?"oj-button-text-icon-start":"oj-button-text-icon-end":"oj-button-text-only",o}_addMutationObserver(){if(this._mutationObserver)return;this._mutationObserver=new MutationObserver(()=>{const e=this._getTextContent();e!=this.state.derivedTitle&&this.setState({derivedTitle:e})}),this._mutationObserver.observe(this._defaultSlotRef,{subtree:!0,characterData:!0})}_needsContextMenuDetection(e){return e.contextMenu&&!e.disabled}componentDidMount(){this._updateDerivedTitle(),this._needsContextMenuDetection(this.props)&&s.startDetectContextMenuGesture(this._rootRef.current,this._handleContextMenuGesture),this._rootRef.current.addEventListener("touchstart",this._handleTouchstart,{passive:!0}),this._rootRef.current.addEventListener("touchend",this._handleTouchend,{passive:!1}),this._rootRef.current.addEventListener("touchcancel",this._handleTouchend,{passive:!0}),i.makeFocusable({applyHighlight:!0,setupHandlers:(e,t)=>{let s=i.getNoJQFocusHandlers(e,t);this.focusInHandler=s.focusIn,this.focusOutHandler=s.focusOut}})}componentDidUpdate(e){e.display!=this.props.display&&this._updateDerivedTitle(),this._updateContextMenuDetection(e)}_updateDerivedTitle(){const e=this.props;let t;"icons"!==e.display||!e.startIcon&&!e.endIcon||e.label||e.title||(t=this._getTextContent(),this._addMutationObserver()),t!=this.state.derivedTitle&&this.setState({derivedTitle:t})}_updateContextMenuDetection(e){const t=this._needsContextMenuDetection(e),i=this._needsContextMenuDetection(this.props);t!=i&&(i?s.startDetectContextMenuGesture(this._rootRef.current,this._handleContextMenuGesture):s.stopDetectContextMenuGesture(this._rootRef.current))}static getDerivedStateFromProps(e){return e.disabled?{contextMenuTriggerEvent:null}:null}_getTextContent(){let e=this._defaultSlotRef.textContent;return e=e.trim(),""!==e?e:null}componentWillUnmount(){this._mutationObserver&&(this._mutationObserver.disconnect(),this._mutationObserver=null),s.stopDetectContextMenuGesture(this._rootRef.current)}refresh(){this.setState({active:!1})}focus(){var e;null===(e=this._buttonRef)||void 0===e||e.focus()}blur(){var e;null===(e=this._buttonRef)||void 0===e||e.blur()}},e.Button2._chromingMap={solid:"oj-button-full-chrome",outlined:"oj-button-outlined-chrome",borderless:"oj-button-half-chrome",full:"oj-button-full-chrome",half:"oj-button-half-chrome",callToAction:"oj-button-cta-chrome",danger:"oj-button-danger-chrome oj-button-full-chrome"},e.Button2.defaultProps={disabled:!1,display:"all",chroming:l.getCachedCSSVarValues(["--oj-private-button-global-chroming-default"])[0]},e.Button2.metadata={slots:{"":{},startIcon:{},endIcon:{},contextMenu:{}},properties:{disabled:{type:"boolean"},display:{type:"string",enumValues:["all","icons","label"]},label:{type:"string"},translations:{type:"object|null"},chroming:{type:"string",enumValues:["borderless","callToAction","danger","full","half","outlined","solid"],binding:{consume:{name:"containerChroming"}}}},events:{ojAction:{bubbles:!0}},extension:{_OBSERVED_GLOBAL_PROPS:["id","title","aria-label","aria-labelledby","aria-describedby"]},methods:{refresh:{},focus:{},blur:{}}},e.Button2=h=d([n.customElement("oj-button")],e.Button2),Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojbutton",["ojs/ojoption","ojs/ojcore-base","jquery","ojs/ojdomutils","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojchildmutationobserver","ojs/ojlabelledbyutils","ojs/ojcustomelement-utils","ojs/ojbutton2"],function(e,t,i,s,n,o,r,a,l,h){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;var d={properties:{chroming:{type:"string",enumValues:["borderless","full","half","outlined","solid"]},disabled:{type:"boolean",value:!1},display:{type:"string",enumValues:["all","icons","label"],value:"all"},label:{type:"string"},translations:{type:"object",value:{}}},methods:{getProperty:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAction:{}},extension:{}};d.extension._WIDGET_NAME="ojButton",d.extension._TRACK_CHILDREN="nearestCustomElement",d.extension._GLOBAL_TRANSFER_ATTRS=["href","aria-label","aria-labelledby","aria-describedby"],t.CustomElementBridge.register("oj-menu-button",{metadata:d,innerDomFunction:function(e){return e.getAttribute("href")?"a":"button"}});var c={properties:{chroming:{type:"string",enumValues:["borderless","full","half","outlined","solid"]},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},display:{type:"string",enumValues:["all","icons","label"],value:"all"},focusManagement:{type:"string",enumValues:["none","oneTabstop"],value:"oneTabstop"},labelledBy:{type:"string"},translations:{type:"object",value:{}},value:{type:"any",writeback:!0}},methods:{getProperty:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};c.extension._WIDGET_NAME="ojButtonset",c.extension._ALIASED_PROPS={value:"checked"},t.CustomElementBridge.register("oj-buttonset-one",{metadata:c});var u={properties:{chroming:{type:"string",enumValues:["borderless","full","half","outlined","solid"]},describedBy:{type:"string"},disabled:{type:"boolean",value:!1},display:{type:"string",enumValues:["all","icons","label"],value:"all"},focusManagement:{type:"string",enumValues:["none","oneTabstop"],value:"oneTabstop"},labelledBy:{type:"string"},translations:{type:"object",value:{}},value:{type:"Array<any>",writeback:!0}},methods:{getProperty:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};if(u.extension._WIDGET_NAME="ojButtonset",u.extension._ALIASED_PROPS={value:"checked"},t.CustomElementBridge.register("oj-buttonset-many",{metadata:u}),t.ButtonLegacy){var p={properties:{chroming:{type:"string",enumValues:["borderless","callToAction","danger","full","half","outlined","solid"]},disabled:{type:"boolean",value:!1},display:{type:"string",enumValues:["all","icons","label"],value:"all"},translations:{type:"object",value:{}}},methods:{refresh:{},setProperty:{},getProperty:{},setProperties:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAction:{}},extension:{}};p.extension._WIDGET_NAME="ojButton",p.extension._TRACK_CHILDREN="nearestCustomElement",p.extension._GLOBAL_TRANSFER_ATTRS=["href","aria-label","aria-labelledby","aria-describedby"],t.CustomElementBridge.register("oj-button",{metadata:p,innerDomFunction:function(e){return e.getAttribute("href")?"a":"button"}})}!function(){var e,h,d="oj-button oj-component oj-enabled oj-default",c="oj-button-icons-only oj-button-icon-only oj-button-text-icons oj-button-text-icon-start oj-button-text-icon-end oj-button-text-only",u="oj-button-full-chrome oj-button-half-chrome oj-button-outlined-chrome oj-button-cta-chrome oj-button-danger-chrome",p={solid:"oj-button-full-chrome",outlined:"oj-button-outlined-chrome",borderless:"oj-button-half-chrome",full:"oj-button-full-chrome",half:"oj-button-half-chrome",callToAction:"oj-button-cta-chrome",danger:"oj-button-danger-chrome oj-button-full-chrome"},m={button:["ojButtonset","ojToolbar"],buttonset:["ojToolbar"]};function _(e,t){y(e,u),e.classList.add(p[t])}function g(e,t){var s,n=e.name,o=e.form;if(n){var r=":radio[name='"+(n=n.replace(/'/g,"\\'"))+"']:oj-button";s=t?t.filter(r):o?i(o).find(r):i(r,e.ownerDocument).filter(function(){return!this.form})}else s=(t?t.filter(e):i(e)).filter(":oj-button");return s}function f(e,t,i){var s=function(e,t,i){for(var s=0;s<i.length;++s){var n=i[s];if(t.indexOf(n)>=0)for(;;e=e.parentNode){var r=o.__GetWidgetConstructor(e,n);if(r)return r}}return null}(t,i,m[e]);return s?s("option","chroming"):n.getCachedCSSVarValues(["--oj-private-"+e+"-global-chroming-default"])[0]}function v(e,t){var i=e.className;if(i){for(var s=i.split(" "),n=t.split(" "),o=n.length;o>=0;o--)s.indexOf(n[o])>=0&&n.splice(o,1);n.length>0&&(e.className=i+" "+n.join(" "))}else e.className=t}function y(e,t){var i=e.className;if(i){for(var s=i.split(" "),n=t.split(" "),o=!1,r=0;r<n.length;r++){var a=s.indexOf(n[r]);a>=0&&(s.splice(a,1),o=!0)}o&&(e.className=s.join(" "))}}t.__registerWidget("oj.ojButton",i.oj.baseComponent,{defaultElement:"<button>",widgetEventPrefix:"oj",options:{chroming:"solid",disabled:!1,display:"all",label:null,icons:{start:null,end:null},menu:null,action:null},_InitOptions:function(e,t){this._super(e,t),this._IsCustomElement()&&this._processSlots(),this._initButtonTypes(),this._IsCustomElement()||"disabled"in t||this.option("disabled",!!this.element[0].disabled,{_context:{internalSet:!0}}),"label"in t||(this.keepDomLabel=!0,this.option("label","inputPush"===this.type?this.buttonElement.val():this.buttonElement[0].innerHTML,{_context:{internalSet:!0}})),this._IsCustomElement()||!this.options.menu||t.icons&&void 0!==t.icons.end||this.option("icons.end","oj-component-icon oj-button-menu-dropdown-icon",{_context:{writeback:!0,internalSet:!0}})},_ComponentCreate:function(){this._super(),this.menuEventNamespace=this.eventNamespace+"menu",this._initButtonTypes2(),this.hasTitle=!!this.rootElement.getAttribute("title");var t=this,n=this._isToggle;v(this.rootElement,d),_(this.rootElement,this.options.chroming);var o=function(){t.rootElement.classList.remove("oj-active"),t.rootElement.classList.remove("oj-hover"),t._toggleDefaultClasses()};if(this._touchStartHandler=function(){t._IsEffectivelyDisabled()||(t.rootElement.classList.add("oj-active"),t._toggleDefaultClasses(),t.document.one("touchend",o))},s.isTouchSupported()&&(this.buttonElement[0].addEventListener("touchstart",this._touchStartHandler,{passive:!0}),this.buttonElement.bind("touchend"+this.eventNamespace+" touchcancel"+this.eventNamespace,o)),this.buttonElement.bind("mouseenter"+this.eventNamespace,function(){t._IsEffectivelyDisabled()||t._isSelectedInButtonsetOne()||(t.rootElement.classList.add("oj-hover"),s.recentTouchEnd()||this===e&&t.rootElement.classList.add("oj-active"),t.rootElement.classList.remove("oj-default"),t.rootElement.classList.remove("oj-focus-only"))}).bind("mouseleave"+this.eventNamespace,function(){t.rootElement.classList.remove("oj-hover"),t._IsEffectivelyDisabled()||(t.rootElement.classList.remove("oj-active"),t._toggleDefaultClasses())}),this._disabledClickHandler=function(e){t._IsEffectivelyDisabled()&&(e.preventDefault(),e.stopImmediatePropagation())},this._ojActionClickHandler=function(e){t._trigger("action",e,{})},this._IsCustomElement()?(this.rootElement.addEventListener("click",this._disabledClickHandler,!0),this.rootElement.addEventListener("click",this._ojActionClickHandler,!1)):this.buttonElement[0].addEventListener("click",this._disabledClickHandler,!0),this._focusable({element:i(this.rootElement),applyHighlight:!0,afterToggle:function(){t._toggleDefaultClasses()}}),n&&(this.element.bind("change"+this.eventNamespace,function(e){t._applyCheckedStateFromDom(!0);var i=t._getEnclosingContainerComponent("buttonset"),s=i&&i._getCheckedFromDom(i.$buttons);i&&void 0!==s&&i.option("checked",s,{_context:{writeback:!0,originalEvent:e,internalSet:!0}})}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(){t._IsEffectivelyDisabled()||(h=this,t._isSelectedInButtonsetOne()||t.rootElement.classList.add("oj-active"),t.document.one("mouseup",function(){h=null,t.rootElement.classList.remove("oj-active")}))}).bind("mouseup"+this.eventNamespace,function(){t._IsEffectivelyDisabled()||(t.rootElement.classList.remove("oj-active"),this===h&&t.element.focus())})),"checkbox"===this.type)this.buttonElement.bind("click"+this.eventNamespace,function(){if(t._IsEffectivelyDisabled())return!1}),this.element.bind("keyup"+this.eventNamespace,function(e){e.keyCode===i.ui.keyCode.ENTER&&(t._IsEffectivelyDisabled()||t.element.click())});else if("radio"===this.type)this.buttonElement.bind("click"+this.eventNamespace,function(){if(t._IsEffectivelyDisabled())return!1}),this.element.bind("keyup"+this.eventNamespace,function(e){e.keyCode===i.ui.keyCode.ENTER&&(t.element[0].checked||t._IsEffectivelyDisabled()||(t.element[0].checked=!0,t.element.change(),t.element.click()))});else if(this.buttonElement.bind("mousedown"+this.eventNamespace,function(i){if(t._IsEffectivelyDisabled())return!1;1!==i.which||s.recentTouchEnd()||(t._isSelectedInButtonsetOne()||t.rootElement.classList.add("oj-active"),t.rootElement.classList.remove("oj-default"),t.rootElement.classList.remove("oj-focus-only"),e=this,t.document.one("mouseup",function(){e=null}))}).bind("mouseup"+this.eventNamespace,function(){if(t._IsEffectivelyDisabled())return!1;t.rootElement.classList.remove("oj-active"),t._toggleDefaultClasses()}).bind("keydown"+this.eventNamespace,function(e){if(t._IsEffectivelyDisabled())return e.keyCode===i.ui.keyCode.TAB||e.keyCode===i.ui.keyCode.LEFT||e.keyCode===i.ui.keyCode.RIGHT;var s=e.keyCode===i.ui.keyCode.SPACE,n="anchor"===t.type;n&&s&&e.preventDefault(),(s&&!n||e.keyCode===i.ui.keyCode.ENTER)&&(t._isSelectedInButtonsetOne()||t.rootElement.classList.add("oj-active"),t.rootElement.classList.remove("oj-default"),t.rootElement.classList.remove("oj-focus-only"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t.rootElement.classList.remove("oj-active"),t._toggleDefaultClasses()}),"anchor"===this.type){var r=this.buttonElement[0].getAttribute("tabindex");(null===r||isNaN(r))&&this.buttonElement[0].setAttribute("tabindex","0")}this.options.disabled&&this._manageAnchorTabIndex(!1,!0),this._updateEffectivelyDisabled();var a=t._getEnclosingContainerComponent("buttonset");this._IsCustomElement()||a&&a._IsCustomElement()?this._setDisplayOptionOnDom():this._handleLabelAndIconsAtCreateTime(),this._setupMenuButton(null),this._toggleDefaultClasses(),this._childMutationObserver&&this._childMutationObserver.observe()},_NotifyContextMenuGesture:function(e,t,s){this._OpenContextMenu(t,s,{position:{of:"keyboard"===s?i(this.rootElement):t}})},_addMutationObserver:function(){if(!this._childMutationObserver&&this._IsCustomElement()){var e=this;this._childMutationObserver=new r(this.rootElement,function(t){t.forEach(function(t){var i;if("childList"===t.type){var s=t.addedNodes&&t.addedNodes[0],n=t.target;if(s&&3===s.nodeType&&n&&1===n.nodeType&&n.classList.contains("oj-button-label")){e._childMutationObserver.disconnect(),i=!0;var o=e.buttonElement[0].querySelector(".oj-button-text");o&&(o.textContent=s.textContent),s.parentNode.removeChild(s)}}else"characterData"===t.type&&(e._childMutationObserver.disconnect(),i=!0);i&&(e._setDisplayOptionOnDom(),e._childMutationObserver.observe())})})}},_removeMutationObserver:function(){this._childMutationObserver&&(this._childMutationObserver.disconnect(),this._childMutationObserver=null)},_processSlots:function(){var e,t=this,s=this.element[0],n=s.parentNode,o="OJ-MENU-BUTTON"===n.tagName,r=l.CustomElementUtils.getSlotMap(n);e=o?["startIcon","","endIcon","menu"]:["startIcon","","endIcon"],i.each(e,function(e,t){r[t]&&""!==t&&i.each(r[t],function(e,t){s.appendChild(t)})});for(var a=n.children,h=a.length-1;h>=0;h--){var d=a[h];d!==s&&"contextMenu"!==d.getAttribute("slot")&&n.removeChild(d)}var c=l.CustomElementUtils.getSlotMap(s);i.each(e,function(e,n){c[n]&&i.each(c[n],function(e,o){if(s.appendChild(o),""===n){var r=o,a=r;3===r.nodeType&&(a=document.createElement("span"),r.parentNode.insertBefore(a,r),a.appendChild(r)),a.classList.add("oj-button-text"),t._setTextSpanIdAndLabelledBy(a)}else if("startIcon"===n)o.classList.add("oj-button-icon"),o.classList.add("oj-start");else if("endIcon"===n)o.classList.add("oj-button-icon"),o.classList.add("oj-end");else if("menu"===n&&(i(o).uniqueId(),t.menuSlot="#"+o.id,void 0===c.endIcon)){var l=document.createElement("span"),h="oj-button-menu-dropdown-icon";void 0===c.startIcon&&"icons"===t.options.display&&(h="oj-button-menu-icon-only-dropdown-icon"),l.className="oj-button-icon oj-end oj-component-icon "+h,l.setAttribute("slot","endIcon"),s.insertBefore(l,o)}})});var u=document.createElement("div");for(u.className="oj-button-label";s.hasChildNodes();)u.appendChild(s.firstChild);s.appendChild(u)},_getMenuNode:function(){return this._IsCustomElement()?this.menuSlot:this.options.menu},_initButtonTypes:function(){var e=this.element[0];if("INPUT"===e.tagName&&"checkbox"===e.type)this.type="checkbox",this._isToggle=!0;else if("INPUT"===e.tagName&&"radio"===e.type)this.type="radio",this._isToggle=!0;else if("INPUT"!==e.tagName||"button"!==e.type&&"submit"!==e.type&&"reset"!==e.type)if("BUTTON"===e.tagName)this.type="button";else{if("A"!==e.tagName)throw new Error("JET Button not supported on this element type");this.type="anchor"}else this.type="inputPush";if(this._isToggle){var t="label[for='"+this.element[0].getAttribute("id")+"']";this.buttonElement=this.element.siblings().filter(t)}else this.buttonElement=this.element},_initButtonTypes2:function(){var e=this.element[0];if(this._isToggle){this.buttonElement[0].classList.add("oj-button-label"),e.classList.add("oj-button-input"),e.classList.add("oj-helper-hidden-accessible"),e.setAttribute("data-oj-internal","");var t=document.createElement("span");this.element[0].parentNode.insertBefore(t,this.buttonElement[0]),t.appendChild(this.buttonElement[0]),t.appendChild(this.element[0]),this.rootElement=this.element[0].parentNode,this.rootElement.classList.add("oj-button-toggle"),e.checked&&(this.rootElement.classList.add("oj-selected"),this.rootElement.classList.remove("oj-default"),this.rootElement.classList.remove("oj-focus-only"))}else this._IsCustomElement()?(this.rootElement=this.element[0].parentNode,e.classList.add("oj-button-button")):(this.rootElement=this.element[0],this._IsCustomElement()||e.classList.add("oj-button-toggle"))},widget:function(){return i(this.rootElement)},_destroy:function(){this._removeMenuBehavior(this._getMenuNode()),this.buttonElement[0].removeEventListener("click",this._disabledClickHandler,!0),this.buttonElement[0].removeEventListener("click",this._ojActionClickHandler,!1),this.buttonElement[0].removeEventListener("touchstart",this._touchStartHandler,{passive:!0}),delete this._touchStartHandler;var e=this.element[0];e.classList.remove("oj-helper-hidden-accessible"),e.removeAttribute("aria-labelledby"),e.removeAttribute("aria-describedby"),this.element.removeUniqueId(),this.options.disabled&&this._manageAnchorTabIndex(!0,!1);var t=this._isToggle;t||y(this.rootElement,d+" oj-button-toggle oj-hover oj-active oj-selected "+c+" "+u);var i=this.buttonElement[0].querySelector(".oj-button-text");i&&(this.buttonElement[0].innerHTML=i.innerHTML),t?(this.buttonElement[0].classList.remove("oj-button-label"),s.unwrap(this.element)):this.hasTitle||this.rootElement.removeAttribute("title"),h===this.buttonElement[0]&&(h=null),this.buttonElement.off("blur"),this._removeMutationObserver()},_NotifyDetached:function(){this._super(),this._toggleDefaultClasses()},__setAncestorComponentDisabled:function(e){this._super(e),this._updateEffectivelyDisabled()},_updateEffectivelyDisabled:function(){var t=this.element[0],i=this._IsEffectivelyDisabled();if(i?(this.rootElement.classList.add("oj-disabled"),this.rootElement.classList.remove("oj-enabled")):(this.rootElement.classList.remove("oj-disabled"),this.rootElement.classList.add("oj-enabled")),"anchor"!==this.type?(t.disabled=i,this.rootElement.removeAttribute("aria-disabled")):(t.setAttribute("aria-disabled",i),this._IsCustomElement()&&this.rootElement.removeAttribute("aria-disabled")),i){var s=this.widget()[0].classList;s.remove("oj-active"),s.remove("oj-default"),s.remove("oj-focus-only"),s.remove("oj-hover"),s.remove("oj-focus"),s.remove("oj-focus-highlight"),e=null,this._dismissMenu(this._getMenuNode())}else this._toggleDefaultClasses()},_setOption:function(e,t,i){var s=this.options[e];switch(this._super(e,t,i),e){case"chroming":_(this.rootElement,t);break;case"disabled":if(this._manageAnchorTabIndex(s,t),this._updateEffectivelyDisabled(),!this._IsCustomElement()){var n=this._getEnclosingContainerElement("toolbar");n.length&&n.ojToolbar("refresh")}break;case"label":this._setLabelOption();break;case"display":"inputPush"!==this.type&&this._setDisplayOptionOnDom();break;case"icons":this._setIconsOption(!0);break;case"menu":this._setupMenuButton(s)}},refresh:function(){this._super(),this._ancestorDisabled&&!this._getEnclosingContainerElement("buttonset").length&&this.__setAncestorComponentDisabled(!1),_(this.rootElement,this.options.chroming)},_applyCheckedStateFromDom:function(e){"radio"===this.type?(e?g(this.element[0]):this.element).each(function(){var e=i(this).data("oj-ojButton");this.checked?(e.rootElement.classList.add("oj-selected"),e.rootElement.classList.remove("oj-default"),e.rootElement.classList.remove("oj-focus-only")):(e.rootElement.classList.remove("oj-selected"),e._toggleDefaultClasses())}):"checkbox"===this.type&&(this.element[0].checked?(this.rootElement.classList.add("oj-selected"),this.rootElement.classList.remove("oj-default"),this.rootElement.classList.remove("oj-focus-only")):(this.rootElement.classList.remove("oj-selected"),this._toggleDefaultClasses()))},_handleLabelAndIconsAtCreateTime:function(){if("inputPush"===this.type)this._setLabelOnDomOfSpanlessButton();else{var e=this._setLabelOnDomAtCreateTime(),t=this._setIconOnDom(!0),i=this._setIconOnDom(!1);this._setDisplayOptionOnDom(e,t,i)}},_setLabelOnDomAtCreateTime:function(){var e=this.buttonElement[0],t=document.createElement("span");if(t.className="oj-button-text",this.keepDomLabel)for(;e.hasChildNodes();)t.appendChild(e.firstChild);else e.innerHTML="",t.textContent=this.options.label;if("button"===this.type){var s=document.createElement("div");s.className="oj-button-label",s.appendChild(t),this.element[0].appendChild(s)}else e.appendChild(t);return"button"!==this.type&&"anchor"!==this.type||this.element[0].hasAttribute("aria-label")||this.element[0].hasAttribute("aria-labelledby")||this._setTextSpanIdAndLabelledBy(t),i(t)},_setTextSpanIdAndLabelledBy:function(e){i(e).uniqueId(),this.element[0].hasAttribute("aria-label")||this.element[0].hasAttribute("aria-labelledby")||this.element[0].setAttribute("aria-labelledby",e.getAttribute("id"))},_setLabelOption:function(){if("inputPush"===this.type)this._setLabelOnDomOfSpanlessButton();else{var e=this.buttonElement[0].querySelector(".oj-button-text");e.textContent=this.options.label,this._setDisplayOptionOnDom(i(e))}},_setLabelOnDomOfSpanlessButton:function(){this.options.label&&this.element.val(this.options.label)},_setIconsOption:function(){if("inputPush"!==this.type){var e=this._setIconOnDom(!0),t=this._setIconOnDom(!1);this._setDisplayOptionOnDom(void 0,e,t)}},_setIconOnDom:function(e){var t,i,s,n,o=this.buttonElement[0];"button"===this.type&&(o=this.element.children("div.oj-button-label")[0]),e?(t=".oj-button-icon.oj-start",i="oj-button-icon oj-start",s=this.options.icons.start,n="_lastStartIcon"):(t=".oj-button-icon.oj-end",i="oj-button-icon oj-end",s=this.options.icons.end,n="_lastEndIcon");var r,a,l=o.querySelectorAll(t);if(s)if(l.length){var h=this[n];for(r=0;r<l.length;r++)y(a=l[r],h),v(a,s)}else{var d=document.createElement("span");d.className=i+" "+s,e?o.insertBefore(d,o.firstChild):o.appendChild(d)}else for(r=0;r<l.length;r++)(a=l[r]).parentNode.removeChild(a);return this[n]=s,!!s},_setDisplayOptionOnDom:function(e,t,s){var n=this.buttonElement.children(".oj-button-label");if(!n.length){var o=this._getEnclosingContainerComponent("buttonset");n=this._IsCustomElement()||o&&o._IsCustomElement()?this.buttonElement.children("oj-option"):this.buttonElement}void 0===e&&(e=n.children(".oj-button-text")),void 0===t&&(t=!!this.options.icons.start||n.children("[slot='startIcon']").length),void 0===s&&(s=!!this.options.icons.end||n.children("[slot='endIcon']").length);var r,a=t&&s,l=t||s,h="icons"===this.options.display,d="label"===this.options.display;if(d)n.children("[slot='startIcon']")&&n.children("[slot='startIcon']")[0].classList.add("oj-helper-hidden"),n.children("[slot='endIcon']")&&n.children("[slot='endIcon']")[0].classList.add("oj-helper-hidden");else if(l&&h){if(e[0]&&e[0].classList.add("oj-helper-hidden-accessible"),!this.hasTitle){var u=e[0]?e[0].textContent:"";this.rootElement.setAttribute("title",i.trim(u))}this._addMutationObserver()}else e[0]&&e[0].classList.remove("oj-helper-hidden-accessible"),this.hasTitle||this.rootElement.removeAttribute("title"),this._removeMutationObserver();d&&(r="oj-button-text-only"),r=l?h?a?"oj-button-icons-only":"oj-button-icon-only":a?"oj-button-text-icons":t?"oj-button-text-icon-start":"oj-button-text-icon-end":"oj-button-text-only",y(this.rootElement,c),this.rootElement.classList.add(r)},_manageAnchorTabIndex:function(e,t){if(!e!=!t&&"anchor"===this.type&&!this._getEnclosingContainerElement("buttonset").length&&!this._getEnclosingContainerElement("toolbar").length){var i=this.element[0];if(t){var s=i.getAttribute("tabindex");this._oldAnchorTabIndex=this._isInteger(Number(s))?s:null,i.setAttribute("tabindex",-1)}else null==this._oldAnchorTabIndex?i.removeAttribute("tabindex"):i.setAttribute("tabindex",this._oldAnchorTabIndex)}},_isInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},_selectorMap:{buttonset:".oj-buttonset",toolbar:".oj-toolbar",buttonsetone:"oj-buttonset-one"},_constructorMap:{buttonset:"ojButtonset",toolbar:"ojToolbar"},_isSelectedInButtonsetOne:function(){return 1===this._getEnclosingContainerElement("buttonsetone").length&&this.rootElement.classList.contains("oj-selected")},_getEnclosingContainerElement:function(e){return i(this.rootElement).closest(this._selectorMap[e])},_getEnclosingContainerComponent:function(e){var t=this._getEnclosingContainerElement(e)[0],i=o.__GetWidgetConstructor(t,this._constructorMap[e]);return i&&i("instance")},_setupMenuButton:function(e){if(this._getMenuNode()&&"INPUT"===this.element[0].tagName)throw new Error("Menu Button functionality is not supported on input elements.");if(this._removeMenuBehavior(e),this._getMenuNode()){var t=this;this.element.attr("aria-haspopup",!0).attr("role","button").on("keydown"+this.menuEventNamespace,function(e){if(e.which===i.ui.keyCode.DOWN||e.which===i.ui.keyCode.ENTER||e.which===i.ui.keyCode.SPACE)return t._toggleMenu(e,"firstItem"),e.preventDefault(),!0;if(e.which===i.ui.keyCode.ESCAPE){var s=!t.rootElement.classList.contains("oj-selected");return t._dismissMenu(t._getMenuNode(),e),s}return!0}).on("click"+this.menuEventNamespace,function(e){var i=t._getMenu();return i.__spaceEnterDownInMenu||t._toggleMenu(e,"menu"),i.__spaceEnterDownInMenu=!1,e.preventDefault(),!0})}},_removeMenuBehavior:function(e){this.element.removeAttr("aria-haspopup").removeAttr("role").off(this.menuEventNamespace),this._dismissMenu(e),i(e).off(this.menuEventNamespace),this._menuListenerSet=!1},_getMenu:function(){var e=this._getMenuOnly(this._getMenuNode());if(!e)throw new Error('JET Button: "menu" option specified, but does not reference a valid JET Menu.');if(!this._menuListenerSet){var t,i=this;t=e._IsCustomElement()?"ojClose":"ojclose",e.widget().on(t+this.menuEventNamespace,function(e){i._menuDismissHandler(e)}),this._menuListenerSet=!0}return e},_getMenuOnly:function(e){var t=o.__GetWidgetConstructor(i(e)[0],"ojMenu");return t&&t("instance")},_toggleMenu:function(e,t){if(!this._IsEffectivelyDisabled()){var i=this._getMenu(),s=i.widget();this._menuVisible?this._dismissMenu(this._getMenuNode(),e):(i.open(e,{launcher:this.element,initialFocus:t}),s.is(":visible")&&(this._menuVisible=!0,s[0].getAttribute("aria-label")||s[0].getAttribute("aria-labelledby")||(this.element.uniqueId(),this._setAriaLabelledBy=!0,s[0].setAttribute("aria-labelledby",this.element[0].getAttribute("id"))),this.rootElement.classList.add("oj-selected"),this.rootElement.classList.remove("oj-default"),this.rootElement.classList.remove("oj-focus-only")))}},_dismissMenu:function(e,t){if(this._menuVisible){var i=this._getMenuOnly(e);i&&(i.__collapseAll(t,!0),i.__dismiss(t))}},_menuDismissHandler:function(){this._setAriaLabelledBy&&(i(this._getMenuNode()).removeAttr("aria-labelledby"),this._setAriaLabelledBy=!1),this.rootElement.classList.remove("oj-selected"),this._toggleDefaultClasses(),this._menuVisible=!1},_toggleDefaultClasses:function(){var e,t;if(i(this.rootElement).is(".oj-hover, .oj-active, .oj-selected, .oj-disabled"))e=!1,t=!1;else{var s=i(this.rootElement).is(".oj-focus");e=!s,t=s}e?this.rootElement.classList.add("oj-default"):this.rootElement.classList.remove("oj-default"),t?this.rootElement.classList.add("oj-focus-only"):this.rootElement.classList.remove("oj-focus-only")}}),t.__registerWidget("oj.ojButtonset",i.oj.baseComponent,{_items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a",widgetEventPrefix:"oj",options:{checked:null,chroming:"solid",display:"all",focusManagement:"oneTabstop",labelledBy:null,describedBy:null},_setCheckedOnDom:function(e,t){var s,n=i.type(e),o=this.element[0];if((s="OJ-BUTTONSET-MANY"===o.tagName||t.length>0&&t.filter("input[type=checkbox]").length===t.length)&&"array"!==n)throw new Error("Invalid 'checked' value set on JET Buttonset: "+e);if(!(this._setCheckedOnButtons(e,t,n,s)||null==e||this._IsCustomElement()&&t.length!==o.children.length))throw new Error("Invalid 'checked' value set on JET Buttonset: "+e)},_setCheckedOnButtons:function(e,t,i,s){var n=this._shallowCompare(e,t,s);return this._shouldDeepCompare(e,s,n)&&(n=this._deepCompare(e,t,s,n)),s?n===e.length:1===n},_shallowCompare:function(e,t,i){var s=this,n=0;return t.each(function(){var t=s._getInputValue(this);(i?e.indexOf(t)>-1:t===e)?(this.checked=!0,n+=1):this.checked=!1}),n},_shouldDeepCompare:function(e,t,i){return t?i!==e.length:!i},_deepCompare:function(e,t,i,s){var n=s,o=this;return t.each(function(){var t=o._getInputValue(this);if(i)for(var s=0;s<e.length;s++)o._deepCompareValues(t,e[s])&&(this.checked=!0,n+=1);else o._deepCompareValues(t,e)&&(this.checked=!0,n+=1)}),n},_deepCompareValues:function(e,s){return"object"===i.type(e)&&e.ojCompareValues?0===e.ojCompareValues(e,s):t.Object.compareValues(e,s)},_getInputValue:function(e){return this._IsCustomElement()?this._getOjOptionFromInput(e).value:e.value},_getOjOptionFromInput:function(e){return e.previousElementSibling.children[0]},_getCheckedFromDom:function(e){var t,i=null,s=null,n=this;return e.each(function(){if("input"!==this.tagName.toLowerCase())return t=void 0,!1;var e,o,r=this.type.toLowerCase();if("radio"===r)e=!0,o=this.name.toLowerCase();else{if("checkbox"!==r)return t=void 0,!1;e=!1,o=null}if(void 0!==t&&(e!==i||o!==s||i&&!s))return t=void 0,!1;var a=n._getInputValue(this);void 0===t?(t=e?this.checked?a:null:this.checked?[a]:[],i=e,s=o):this.checked&&(i?t=a:t.push(a))}),t},_CompareOptionValues:function(e,t,s){return"checked"===e?t===s||"array"===i.type(t)&&"array"===i.type(s)&&this._compareArraysAsSets(t,s):this._superApply(arguments)},_compareArraysAsSets:function(e,t){return!e.some(function(e){return t.indexOf(e)<0})&&!t.some(function(t){return e.indexOf(t)<0})},_removeNonOjOptions:function(){this.element.children(":not(oj-option)").remove()},_processOjOptions:function(){var e=this,t=this.element[0].querySelectorAll("oj-option");i.each(t,function(t,i){i.customOptionRenderer=e._customOptionRenderer.bind(e)})},_customOptionRenderer:function(e){this._removeOptionDecoration(e),this._addOptionDecoration(e)},_addOptionDecoration:function(e){this._addOptionClasses(e);var t="OJ-BUTTONSET-ONE"===this.element[0].tagName,s=t?"radio":"checkbox",n=e.value,o=e.disabled,r=document.createElement("input"),a=document.createElement("label");i(r).uniqueId(),r.value=n,r.type=s,r.disabled=o;var l=r.id;a.htmlFor=l,t&&(this._name||(this._name="_n_"+l),r.name=this._name),e.parentNode.insertBefore(a,e),a.appendChild(e),a.parentNode.insertBefore(r,a.nextElementSibling),this._setup(!1),this._setCheckedOnDom(this.options.checked,this.$buttons),this.$buttons.each(function(){i(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)})},_removeOptionDecoration:function(e){var t=e.parentNode;if("LABEL"===t.tagName){this._removeOptionClasses(e);var s=i(t).siblings(".oj-button-input");s.ojButton("destroy"),s.removeUniqueId(),s.remove(),t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t)}},_addOptionClasses:function(e){var t=l.CustomElementUtils.getSlotMap(e),i=t[""]?t[""]:null,s=t.startIcon?t.startIcon[0]:null,n=t.endIcon?t.endIcon[0]:null;if(s&&(s.classList.add("oj-button-icon"),s.classList.add("oj-start")),i)for(var o=0;o<i.length;o++){var r=i[o],a=r;3===r.nodeType&&(a=document.createElement("span"),r.parentNode.insertBefore(a,r),a.appendChild(r)),a.classList.add("oj-button-text")}n&&(n.classList.add("oj-button-icon"),n.classList.add("oj-end"))},_removeOptionClasses:function(e){var t=l.CustomElementUtils.getSlotMap(e),i=t[""]?t[""]:null,s=t.startIcon?t.startIcon[0]:null,n=t.endIcon?t.endIcon[0]:null;if(s&&(s.classList.remove("oj-button-icon"),s.classList.remove("oj-start")),i)for(var o=0;o<i.length;o++)i[o].classList.remove("oj-button-text");n&&(n.classList.remove("oj-button-icon"),n.classList.remove("oj-end"))},_InitOptions:function(e,t){if(this._super(e,t),this.$buttons=this.element.find(this._items),!("checked"in t)){this.initCheckedFromDom=!0;var s=this._getCheckedFromDom(this.$buttons);"array"!==i.type(s)&&"OJ-BUTTONSET-MANY"!==this.element[0].tagName||(this.options.checked=[]),void 0!==s&&this.option("checked",s,{_context:{internalSet:!0}})}},_ComponentCreate:function(){this._super();var e=this.element[0];e.setAttribute(o._OJ_CONTAINER_ATTR,this.widgetName),e.classList.add("oj-buttonset"),e.classList.add("oj-component"),this._setRole(this.options.focusManagement),this._IsCustomElement()&&(this._removeNonOjOptions(),this._processOjOptions()),this._setup(!0)},_NotifyContextMenuGesture:function(e,t,i){var s=this.element.find(":oj-button[tabindex=0]");this._OpenContextMenu(t,i,{launcher:s,position:{of:"keyboard"===i?s.ojButton("widget"):t}})},_propagateDisabled:function(e){var t=!!e;this.$buttons.each(function(){i(this).data("oj-ojButton").__setAncestorComponentDisabled(t)})},_setRole:function(e){var t=this.element[0];"oneTabstop"===e?t.setAttribute("role","toolbar"):t.removeAttribute("role")},_setOption:function(e,t,s){var n=this.options[e];if(this._superApply(arguments),"disabled"===e){if(this._propagateDisabled(t),this._refreshTabStop(),!this._IsCustomElement()){var o=i(this.element).closest(".oj-toolbar");o.length&&o.ojToolbar("refresh")}}else if("checked"===e)this._setCheckedOnDom(t,this.$buttons),this.$buttons.each(function(){i(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)});else if("focusManagement"===e)this._setRole(t);else if("chroming"===e)_(this.element[0],t),this.$buttons.ojButton("refresh");else if("display"===e)this.$buttons.ojButton("option",e,t);else if("labelledBy"===e){var r=this.element;this._labelledByUpdatedForSet(r[0].id,n,t,r)}else"describedBy"===e&&this._describedByUpdated(n,t)},refresh:function(){this._super(),this._IsCustomElement()&&this._processOjOptions(),this._setup(!1)},_setup:function(e){var t=this,s=this.element[0];this.isRtl="rtl"===this._GetReadingDirection(),_(s,this.options.chroming),!e||this.initCheckedFromDom||this._IsCustomElement()||this._setCheckedOnDom(this.options.checked,this.$buttons),e||(this.$buttons=this.element.find(this._items)),this.$buttons.length>1?s.classList.add("oj-buttonset-multi"):s.classList.remove("oj-buttonset-multi"),this.$buttons.filter(":oj-button").ojButton("refresh").each(function(){i(this).data("oj-ojButton")._applyCheckedStateFromDom(!1)}).end().not(":oj-button").ojButton({display:this.options.display}).end();for(var n=0,o=this.$buttons.length;n<o;n++){var r=this.$buttons.eq(n).ojButton("widget")[0];r.classList.remove("oj-buttonset-first"),r.classList.remove("oj-buttonset-last"),0===n?r.classList.add("oj-buttonset-first"):n===o-1&&r.classList.add("oj-buttonset-last")}this._propagateDisabled(this.options.disabled),"oneTabstop"===this.options.focusManagement&&(this.$buttons.unbind("keydown"+this.eventNamespace).bind("keydown"+this.eventNamespace,function(e){t._handleKeyDown(e,i(this))}).unbind("click"+this.eventNamespace).bind("click"+this.eventNamespace,function(){i(this).data("oj-ojButton")._IsEffectivelyDisabled()||t._setTabStop(i(this))}).unbind("focus"+this.eventNamespace).bind("focus"+this.eventNamespace,function(){t._setTabStop(i(this))}),this.$enabledButtons=this.$buttons.filter(function(){return!i(this).data("oj-ojButton")._IsEffectivelyDisabled()}),this._initTabindexes(e)),this.element.uniqueId(),this._labelledByUpdatedForSet(s.id,null,this.options.labelledBy,this.element);var a=this.options.describedBy;a&&this._describedByUpdated(a)},_labelledByUpdatedForSet:a._labelledByUpdatedForSet,_describedByUpdated:a._describedByUpdated,_GetContentElement:function(){return null!=this.$buttons||(this.$buttons=this.element.find(this._items)),this.$buttons},_refreshTabStop:function(){"oneTabstop"===this.options.focusManagement&&(this.$enabledButtons=this.$buttons.filter(function(){return!i(this).data("oj-ojButton")._IsEffectivelyDisabled()}),this._initTabindexes(!1))},_initTabindexes:function(e){var t,s=i(this._lastTabStop);this._lastTabStop=void 0,this.$buttons.attr("tabindex","0"),t=e||!s.is(this.$enabledButtons)?this.$enabledButtons.first():s,this._setTabStop(t)},_mapToTabbable:function(e){var t=this.$enabledButtons;return e.map(function(e,i){if("radio"!==i.type||i.checked||""===i.name)return i;var s=g(i,t).filter(":checked");return s.length?s[0]:i})},_setTabStop:function(e){var t=(e=this._mapToTabbable(e))[0];t!==this._lastTabStop&&(e[0]&&e[0].setAttribute("tabindex","0"),this._lastTabStop=t)},_handleKeyDown:function(e,t){switch(e.which){case i.ui.keyCode.UP:case i.ui.keyCode.DOWN:if("radio"!==t[0].getAttribute("type"))break;case i.ui.keyCode.LEFT:case i.ui.keyCode.RIGHT:e.preventDefault();var s=this.$enabledButtons,n=s.length;if(n<2)break;var o=(s.index(t)+(e.which===i.ui.keyCode.DOWN||e.which===i.ui.keyCode.RIGHT!==this.isRtl?1:-1)+n)%n;s.eq(o).focus()}},_destroy:function(){var e=this.element[0];y(e,"oj-buttonset oj-component "+u),e.removeAttribute(o._OJ_CONTAINER_ATTR),e.removeAttribute("role"),"oneTabstop"===this.options.focusManagement&&this.$buttons.attr("tabindex","0"),this.$buttons.map(function(){return i(this).ojButton("widget")[0]}).removeClass("oj-buttonset-first oj-buttonset-last").end().ojButton("destroy")}}),o.setDefaultOptions({ojButton:{chroming:o.createDynamicPropertyGetter(function(e){return f("button",e.element,e.containers)})},ojButtonset:{chroming:o.createDynamicPropertyGetter(function(e){return f("buttonset",e.element,e.containers)})}})}()}),define("ojs/ojtoolbar",["ojs/ojcore-base","jquery","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojlogger"],function(e,t,i,s,n){"use strict";var o;e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,e.__registerWidget("oj.ojToolbar",t.oj.baseComponent,{widgetEventPrefix:"oj",options:{chroming:"borderless"},_InitOptions:function(e,t){this._super(e,t),"disabled"in t&&n.warn("Caller attempted to set the 'disabled' option on Toolbar, but Toolbar does not support the 'disabled' option.  See API doc.")},_ComponentCreate:function(){this._super();var e=this.element[0];e.setAttribute(s._OJ_CONTAINER_ATTR,this.widgetName),e.classList.add("oj-toolbar"),e.classList.add("oj-component"),e.setAttribute("role","toolbar"),this._hasInitialFocusHandler=!1,this._setup()},_NotifyContextMenuGesture:function(e,t,i){var s=this.element.find(":oj-button[tabindex=0]");this._OpenContextMenu(t,i,{launcher:s,position:{of:"keyboard"===i?s.ojButton("widget"):t}})},_setOption:function(e,t){"disabled"!==e?(this._superApply(arguments),"chroming"===e&&this._refreshChildren()):n.warn("Caller attempted to set the 'disabled' option on Toolbar, but Toolbar does not support the 'disabled' option.  See API doc.  Ignoring the call.")},refresh:function(){this._super(),this._setup(),this._refreshTabindex()},_setup:function(){var e=this,i=this.element[0];if(this.isRtl="rtl"===this._GetReadingDirection(),this.$enabledButtons=t(),this._IsCustomElement())this._hasInitialFocusHandler||(this._focusinListener=function(t){e._handleInitialFocus(t.target)},i.addEventListener("focusin",this._focusinListener,!0),this._hasInitialFocusHandler=!0),this.topLevelChildren=i.querySelectorAll("oj-button, oj-menu-button, oj-buttonset-one, oj-buttonset-many"),this._refreshChildren();else{const i=":oj-button";this.$buttons=this.element.find(i).off("keydown"+this.eventNamespace).on("keydown"+this.eventNamespace,function(i){e._handleKeyDown(i,t(this))}).off("click"+this.eventNamespace).on("click"+this.eventNamespace,function(i){t(this).ojButton("option","disabled")||e._setTabStop(t(this))}).off("focus"+this.eventNamespace).on("focus"+this.eventNamespace,function(i){e._handleFocus(t(this))}),this.$buttonsets=this.element.find(":oj-buttonset").ojButtonset("refresh"),this.$topLevelButtons=this.$buttons.not(this.$buttonsets.find(i)).ojButton("refresh")}},_handleFocus:function(e){this._IsCustomElement()||0!==this.$enabledButtons.length?this._setTabStop(e):(this.$enabledButtons=this.$buttons.filter(function(){return!t(this).ojButton("option","disabled")&&t(this).is(":visible")}),this._initTabindexes(null==this._lastTabStop),this.$enabledButtons[0].focus())},_isButtonDisabled:function(e){var t;if("OJ-BUTTON"===e.tagName||"OJ-MENU-BUTTON"===e.tagName)t=e.disabled;else if(!(t=e.parentNode.disabled)){var i=e.querySelector("oj-option");t=i&&i.disabled}return t},_handleInitialFocus:function(e){var i=this,s=this.element[0];if(s.removeEventListener("focusin",this._focusinListener,!0),this._hasInitialFocusHandler=!1,this.topLevelChildren=s.querySelectorAll("oj-button, oj-menu-button, oj-buttonset-one, oj-buttonset-many"),!this._mutationObserver){var n=["OJ-BUTTON","OJ-MENU-BUTTON","OJ-BUTTONSET-ONE","OJ-BUTTONSET-MANY","OJ-OPTION"];this._disabledChangedListener=this.refresh.bind(this),this._mutationObserver=new MutationObserver(function(e){e.forEach(function(e){if("childList"===e.type){var t;if(e.addedNodes)for(t=0;t<e.addedNodes.length;t++)n.indexOf(e.addedNodes[t].nodeName)>=0&&e.addedNodes[t].addEventListener("disabledChanged",i._disabledChangedListener);if(e.removedNodes)for(t=0;t<e.removedNodes.length;t++)n.indexOf(e.removedNodes[t].nodeName)>=0&&e.removedNodes[t].removeEventListener("disabledChanged",i._disabledChangedListener)}})}),this._mutationObserver.observe(s,{childList:!0,subtree:!0})}s.querySelectorAll("oj-button, oj-menu-button, oj-buttonset-one, oj-buttonset-many, oj-option").forEach(function(e){e.removeEventListener("disabledChanged",i._disabledChangedListener),e.addEventListener("disabledChanged",i._disabledChangedListener)});var o=s.querySelectorAll("oj-button, oj-menu-button, oj-buttonset-one .oj-button, oj-buttonset-many .oj-button");if(this.$buttons=t(o).off("keydown"+this.eventNamespace).on("keydown"+this.eventNamespace,function(e){var s=t(this);i._handleKeyDown(e,s)}).off("click"+this.eventNamespace).on("click"+this.eventNamespace,function(e){var s=t(this);s.hasClass("oj-disabled")||i._setTabStop(s)}).off("focusin"+this.eventNamespace).on("focusin"+this.eventNamespace,function(e){var s=t(this);i._handleFocus(s)}),this._IsCustomElement()?this.$enabledButtons=this.$buttons.filter(function(){return!i._isButtonDisabled(this)&&t(this).is(":visible")}):this.$enabledButtons=this.$buttons.filter(function(){return!t(this).ojButton("option","disabled")&&t(this).is(":visible")}),this._initTabindexes(null==this._lastTabStop),this.$enabledButtons&&this.$enabledButtons.length>0)if(e)("INPUT"===e.nodeName?e.parentElement:e).focus();else{let e=this._getButtonFocusElem(this.$enabledButtons[0]);e&&e.focus()}},_refreshTabindex:function(){var e=this;this._IsCustomElement()?this.$buttons=t(this.element[0].querySelectorAll("oj-button, oj-menu-button, oj-buttonset-one .oj-button, oj-buttonset-many .oj-button")):this.$buttons=this.element.find(":oj-button"),void 0!==this.$buttons&&(this._IsCustomElement()?this.$enabledButtons=this.$buttons.filter(function(){return!e._isButtonDisabled(this)&&t(this).is(":visible")}):this.$enabledButtons=this.$buttons.filter(function(){return!t(this).ojButton("option","disabled")&&t(this).is(":visible")}),this._initTabindexes(null==this._lastTabStop))},_getButtonFocusElem:function(e){var t=e;if(void 0!==e&&this._IsCustomElement()){var i="button";e.classList.contains("oj-button-toggle")&&(i="input");for(var s=e.children,n=0;n<s.length;n++){var o=s[n];if(o.tagName.toLowerCase()===i){t=o;break}}}return t},_initTabindexes:function(e){var i,s=t(this._lastTabStop);if(this._lastTabStop=void 0,this._IsCustomElement())for(var n=0;n<this.$buttons.length;n++)this._getButtonFocusElem(this.$buttons[n]).setAttribute("tabindex","-1");else this.$buttons.attr("tabindex","-1");i=e||!s.is(this.$enabledButtons)?this.$enabledButtons.first():s,this._setTabStop(i)},_mapToTabbable:function(e){for(var i=[],s=0;s<this.$enabledButtons.length;s++)i.push(this._getButtonFocusElem(this.$enabledButtons[s]));var n=t(i);return e.map(function(e,t){if("radio"!==t.type||t.checked||""===t.name)return t;var i=function(e,t){var i,s=e.name;if(s){var n=":radio[name='"+(s=s.replace(/'/g,"\\'"))+"']:oj-button";i=t.filter(n)}else i=t.filter(e).filter(":oj-button");return i}(t,n).filter(":checked");return i.length?i[0]:t})},_setTabStop:function(e){var i=e,s=(i=this._IsCustomElement()?this._mapToTabbable(t(this._getButtonFocusElem(i[0]))):this._mapToTabbable(i))[0],n=this._lastTabStop;s!==n&&(t(n).attr("tabindex","-1"),i.attr("tabindex","0"),this._lastTabStop=s)},_handleKeyDown:function(e,i){switch(e.which){case t.ui.keyCode.UP:case t.ui.keyCode.DOWN:if("radio"!==i.attr("type"))break;case t.ui.keyCode.LEFT:case t.ui.keyCode.RIGHT:e.preventDefault(),this._IsCustomElement()?this.$enabledButtons=this.$buttons.filter(function(){return!t(this).hasClass("oj-disabled")&&t(this).is(":visible")}):this.$enabledButtons=this.$buttons.filter(function(){return!t(this).ojButton("option","disabled")&&t(this).is(":visible")});var s=this.$enabledButtons.length;if(s<2)break;var n=(this.$enabledButtons.index(i)+(e.which===t.ui.keyCode.DOWN||e.which===t.ui.keyCode.RIGHT^this.isRtl?1:-1)+s)%s;this._getButtonFocusElem(this.$enabledButtons.eq(n)[0]).focus()}},_destroy:function(){var e=this.element[0];e.classList.remove("oj-toolbar"),e.classList.remove("oj-component"),e.removeAttribute(s._OJ_CONTAINER_ATTR),e.removeAttribute("role"),this.$buttons.attr("tabindex","0"),this._refreshChildren()},_refreshChildren:function(){if(this._IsCustomElement())for(var e=0;e<this.topLevelChildren.length;e++){var t=this.topLevelChildren[e];"OJ-BUTTON"===t.tagName||"OJ-MENU-BUTTON"===t.tagName?s.__GetWidgetConstructor(this._getButtonFocusElem(t),"ojButton")&&t.refresh():"OJ-BUTTONSET-ONE"!==t.tagName&&"OJ-BUTTONSET-MANY"!==t.tagName||s.__GetWidgetConstructor(t,"ojButtonset")&&t.refresh()}else this.$buttonsets.ojButtonset("refresh"),this.$topLevelButtons.ojButton("refresh")}}),s.setDefaultOptions({ojToolbar:{chroming:s.createDynamicPropertyGetter(function(){return i.getCachedCSSVarValues(["--oj-private-toolbar-global-chroming-default"])[0]})}}),(o={properties:{chroming:{type:"string",enumValues:["borderless","full","half","outlined","solid"]},translations:{type:"object",value:{}}},methods:{getProperty:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}}).extension._WIDGET_NAME="ojToolbar",e.CustomElementBridge.register("oj-toolbar",{metadata:e.CollectionUtils.mergeDeep(o,{properties:{chroming:{binding:{provide:[{name:"containerChroming",default:e.ThemeUtils.getCachedCSSVarValues(["--oj-private-toolbar-global-chroming-default"])[0]}]}}}})})}),define("ojs/ojdialog",["ojs/ojpopupcore","ojs/ojbutton","jqueryui-amd/widgets/mouse","jqueryui-amd/widgets/draggable","jquery","ojs/ojcore-base","ojs/ojdomutils","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojanimation","ojs/ojfocusutils","ojs/ojcustomelement-utils","ojs/ojconfig"],function(e,t,i,s,n,o,r,a,l,h,d,c,u){"use strict";var p,m,_,g;n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,d=d&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d,n.widget("oj.ojResizable",{version:"1.0.0",widgetEventPrefix:"oj",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(e,t){var i=e;if("hidden"===n(i).css("overflow"))return!1;var s,o=t&&"left"===t?"scrollLeft":"scrollTop";return i[o]>0||(i[o]=1,s=i[o]>0,i[o]=0,s)},_create:function(){var e,t,i,s;this._super();var o=this,r=this.options,a=this.element.mouse.bind(this.element);if(a(),this.mouse=a("instance"),this.mouse._mouseCapture=function(e){return o._mouseCapture(e)},this.mouse._mouseStart=function(e){return o._mouseStart(e)},this.mouse._mouseDrag=function(e){return o._mouseDrag(e)},this.mouse._mouseStop=function(e){return this.element&&this.element.focus(),o._mouseStop(e)},this.element.addClass("oj-resizable"),n.extend(this,{originalElement:this.element,_proportionallyResizeElements:[],_helper:null}),this._initialResize=!0,this.handles=r.handles||(n(".oj-resizable-handle",this.element).length?{n:".oj-resizable-n",e:".oj-resizable-e",s:".oj-resizable-s",w:".oj-resizable-w",se:".oj-resizable-se",sw:".oj-resizable-sw",ne:".oj-resizable-ne",nw:".oj-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},t=0;t<e.length;t++)i=n.trim(e[t]),s=n("<div class='oj-resizable-handle oj-resizable-"+i+"'></div>"),this.handles[i]=".oj-resizable-"+i,this.element.append(s);var l=Object.keys(this.handles);for(t=0;t<l.length;t++){var h=l[t];this.handles[h].constructor===String&&(this.handles[h]=this.element.children(this.handles[h]).first().show())}this._handles=n(".oj-resizable-handle",this.element),this._handles.mouseover(function(){o.resizing||(this.className&&(s=this.className.match(/oj-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=s&&s[1]?s[1]:"se")}),this.mouse._mouseInit()},_destroy:function(){this.mouse&&this.mouse._mouseDestroy();try{this.mouse.destroy(),this.mouse=null}catch(e){}var e;return e=this.originalElement,n(e).removeClass("oj-resizable oj-resizable-disabled oj-resizable-resizing").removeData("resizable").removeData("oj-resizable").unbind(".resizable").find(".oj-resizable-handle").remove(),this},_mouseCapture:function(e){for(var t=!1,i=Object.keys(this.handles),s=0;s<i.length;s++){var o=n(this.handles[i[s]])[0];(o===e.target||n.contains(o,e.target))&&(t=!0)}return!this.options.disabled&&t},_mouseStart:function(e){var t,i,s,o=this.options,r=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".oj-draggable")&&a.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),t=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),o.containment&&(t+=n(o.containment).scrollLeft()||0,i+=n(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:t,top:i},this.size={width:a.width(),height:a.height()},this.originalSize={width:a.width(),height:a.height()},this.originalPosition={left:t,top:i},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio=this.originalSize.width/this.originalSize.height||1,s=n(".oj-resizable-"+this.axis).css("cursor"),n("body").css("cursor","auto"===s?this.axis+"-resize":s),a.addClass("oj-resizable-resizing"),this._propagate("start",e),this._alsoresize_start(e),this._containment_start(e),!0},_mouseDrag:function(e){var t,i=this.helper,s={},o=this.originalMousePosition,r=this.axis,a=e.pageX-o.left||0,l=e.pageY-o.top||0,h=this._change[r];return this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height},!!h&&(t=h.apply(this,[e,a,l]),this._updateVirtualBoundaries(e.shiftKey),e.shiftKey&&(t=this._updateRatio(t,e)),t=this._respectSize(t,e),this._updateCache(t),this._propagate("resize",e),this._alsoresize_resize(e,this.ui()),this._containment_resize(e,this.ui()),this.position.top!==this.prevPosition.top&&(s.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(s.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(s.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(s.height=this.size.height+"px"),i.css(s),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),n.isEmptyObject(s)||this._trigger("resize",e,this.ui()),!1)},_mouseStop:function(e){return this.resizing=!1,n("body").css("cursor","auto"),this.element.removeClass("oj-resizable-resizing"),this._propagate("stop",e),this._alsoresize_stop(e),this._containment_stop(e),!1},_updateVirtualBoundaries:function(e){var t,i,s,n,o,r=this.options;o={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0},e&&(t=o.minHeight*this.aspectRatio,s=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),s>o.minHeight&&(o.minHeight=s),i<o.maxWidth&&(o.maxWidth=i),n<o.maxHeight&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=e,i=this.position,s=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=i.left+(s.width-t.width),t.top=null),"nw"===n&&(t.top=i.top+(s.height-t.height),t.left=i.left+(s.width-t.width)),t},_respectSize:function(e){var t=e,i=this._vBoundaries,s=this.axis,n=this._isNumber(t.width)&&i.maxWidth&&i.maxWidth<t.width,o=this._isNumber(t.height)&&i.maxHeight&&i.maxHeight<t.height,r=this._isNumber(t.width)&&i.minWidth&&i.minWidth>t.width,a=this._isNumber(t.height)&&i.minHeight&&i.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,d=/sw|nw|w/.test(s),c=/nw|ne|n/.test(s);return r&&(t.width=i.minWidth),a&&(t.height=i.minHeight),n&&(t.width=i.maxWidth),o&&(t.height=i.maxHeight),r&&d&&(t.left=l-i.minWidth),n&&d&&(t.left=l-i.maxWidth),a&&c&&(t.top=h-i.minHeight),o&&c&&(t.top=h-i.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,s,n,o=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(n=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(s[t],10)||0);n.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element;this.elementOffset=e.offset(),this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize;return{top:this.originalPosition.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(e,t,i){return n.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},sw:function(e,t,i){return n.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,t,i]))},ne:function(e,t,i){return n.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},nw:function(e,t,i){return n.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,t,i]))}},_propagate:function(e,t){"resize"!==e&&this._trigger(e,t,this.ui())},_alsoresize_start:function(){var e=this.options,t=function(e){n(e).each(function(){var e=n(this);e.data("oj-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?t(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],t(e.alsoResize)):n.each(e.alsoResize,function(e){t(e)})},_alsoresize_resize:function(e,t){var i=this.options,s=this.originalSize,o=this.originalPosition,r={height:this.size.height-s.height||0,width:this.size.width-s.width||0,top:this.position.top-o.top||0,left:this.position.left-o.left||0},a=function(e,i){n(e).each(function(){var e,s=n(this),o=n(this).data("oj-resizable-alsoresize"),a={};e=i&&i.length?i:s.parents(t.originalElement[0]).length?["width","height"]:["width","height","top","left"],n.each(e,function(e,t){var i=(o[t]||0)+(r[t]||0);i&&i>=0&&(a[t]=i)}),s.css(a)})};"object"!=typeof i.alsoResize||i.alsoResize.nodeType?a(i.alsoResize,null):n.each(i.alsoResize,function(e,t){a(e,t)})},_alsoresize_stop:function(){n(this).removeData("oj-resizable-alsoresize")},_containment_start:function(){var e,t,i,s,o,r,a,l,h=this,d=h.options,c=h.element,u=d.containment;(l=u instanceof n?u.get(0):/parent/.test(u)?c.parent().get(0):u)&&(h.containerElement=n(l),/document/.test(u)||u===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:n(document),left:0,top:0,width:n(document).width(),height:n(document).height()||document.body.parentNode.scrollHeight}):(e=n(l),t=[],n(["Top","Right","Left","Bottom"]).each(function(i,s){t[i]=h._num(e.css("padding"+s))}),h.containerOffset=e.offset(),h.containerPosition=e.position(),h.containerSize={height:e.innerHeight()-t[3],width:e.innerWidth()-t[1]},i=h.containerOffset,s=h.containerSize.height,o=h.containerSize.width,r=h._hasScroll(l,"left")?l.scrollWidth:o,a=h._hasScroll(l)?l.scrollHeight:s,h.parentData={element:l,left:i.left,top:i.top,width:r,height:a}))},_containment_resize:function(e,t){var i,s,n,o,r=this.options,a=this.containerOffset,l=this.position,h=e.shiftKey,d={top:0,left:0},c=this.containerElement,u=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=a),l.left<(this._helper?a.left:0)&&(this.size.width+=this._helper?this.position.left-a.left:this.position.left-d.left,h&&(this.size.height=this.size.width/this.aspectRatio,u=!1),this.position.left=r.helper?a.left:0),l.top<(this._helper?a.top:0)&&(this.size.height+=this._helper?this.position.top-a.top:this.position.top,h&&(this.size.width=this.size.height*this.aspectRatio,u=!1),this.position.top=this._helper?a.top:0),this.offset.left=this.parentData.left+this.position.left,this.offset.top=this.parentData.top+this.position.top,i=Math.abs((this._helper?this.offset.left-d.left:this.offset.left-a.left)+this.sizeDiff.width),s=Math.abs((this._helper?this.offset.top-d.top:this.offset.top-a.top)+this.sizeDiff.height),n=this.containerElement.get(0)===this.element.parent().get(0),o=/relative|absolute/.test(this.containerElement.css("position")),n&&o&&(i-=Math.abs(this.parentData.left)),i+this.size.width>=this.parentData.width&&(this.size.width=this.parentData.width-i,h&&(this.size.height=this.size.width/this.aspectRatio,u=!1)),s+this.size.height>=this.parentData.height&&(this.size.height=this.parentData.height-s,h&&(this.size.width=this.size.height*this.aspectRatio,u=!1)),u||(this.position.left=t.prevPosition.left,this.position.top=t.prevPosition.top,this.size.width=t.prevSize.width,this.size.height=t.prevSize.height)},_containment_stop:function(){var e=this.options,t=this.containerOffset,i=this.containerPosition,s=this.containerElement,o=n(this.helper),r=o.offset(),a=o.outerWidth()-this.sizeDiff.width,l=o.outerHeight()-this.sizeDiff.height;this._helper&&!e.animate&&/relative/.test(s.css("position"))&&n(this).css({left:r.left-i.left-t.left,width:a,height:l}),this._helper&&!e.animate&&/static/.test(s.css("position"))&&n(this).css({left:r.left-i.left-t.left,width:a,height:l})},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition,prevSize:this.prevSize,prevPosition:this.prevPosition}}}),p="oj-dialog-body",m="oj-dialog-footer",_="oj-dialog-header",o.__registerWidget("oj.ojDialog",n.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{cancelBehavior:"icon",dragAffordance:"title-bar",initialVisibility:"hide",modality:"modal",position:{my:{horizontal:"center",vertical:"center"},offset:{x:0,y:0},at:{horizontal:"center",vertical:"center"},of:"window",collision:"fit",using:function(e){var t=n(this).css(e).offset().top;t<0&&n(this).css("top",e.top-t)}},resizeBehavior:"resizable",role:"dialog",dialogTitle:null,title:null,beforeClose:null,beforeOpen:null,close:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null,animateStart:null,animateEnd:null},_ComponentCreate:function(){this._super();var e=this;if(this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this._IsCustomElement()||(this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this.element.removeAttr("title")),this.element.hide(),this.element.uniqueId(),this.element.addClass("oj-dialog oj-component"),this.element.attr({tabIndex:-1}),this._IsCustomElement()&&this.element[0].hasAttribute("role")||this.element.attr("role",this.options.role),this._on(this.element,{keydown:this._keydownHandler.bind(this)}),this.userDefinedDialogHeader=!1,this._createContainer(),!this._IsCustomElement())for(var t=this.element.children(),i=0;i<t.length;i++){var s=n(t[i]);s.is(".oj-dialog-header")?(this.userDefinedDialogHeader=!0,this._userDefinedHeader=s,this._userDefinedHeaderDiv=t[i],this._dialogContainer.appendChild(this._userDefinedHeader[0]),l.subtreeAttached(this._userDefinedHeader)):s.is(".oj-dialog-body")?(this._createContentDiv(),this._uiDialogContent=n(this._contentDiv),this._contentDiv.appendChild(t[i]),l.subtreeAttached(t[i]),this._dialogContainer.appendChild(this._contentDiv),l.subtreeAttached(this._contentDiv),this._uiDialogBody=s,this._uiDialogBodyDiv=t[i]):s.is(".oj-dialog-footer")&&(this._uiDialogFooter=s,this._uiDialogFooterDiv=t[i],this._dialogContainer.appendChild(this._uiDialogFooter[0]),l.subtreeAttached(this._uiDialogFooter))}this._IsCustomElement()&&this._processSlottedChildren(),this.element[0].appendChild(this._dialogContainer),l.subtreeAttached(this._dialogContainer),this.userDefinedDialogHeader?(this._userDefinedTitleDiv=this._userDefinedHeaderDiv.querySelector(".oj-dialog-title"),this._userDefinedTitle=n(this._userDefinedTitleDiv),null!==this._userDefinedTitleDiv&&void 0!==this._userDefinedTitleDiv&&(this._userDefinedTitle.uniqueId(),this.element.attr({"aria-labelledby":this._userDefinedTitle.attr("id")}))):this._createTitlebar(),this._uiDialogContent||(this._createContentDiv(),this._uiDialogContent=n(this._contentDiv),this._userDefinedHeader?this._dialogContainer.insertBefore(this._contentDiv,this._userDefinedHeaderDiv.nextSibling):this._dialogContainer.insertBefore(this._contentDiv,this._uiDialogTitlebarDiv.nextSibling),l.subtreeAttached(this._contentDiv)),this._setupFocus(this.element);var r=this.options;r.position=o.PositionUtils.coerceToJet(r.position),this._IsCustomElement()&&(this._titleMutationObserver=new MutationObserver(function(t){t.forEach(function(t){"attributes"===t.type&&"title"===t.attributeName&&(e._uiDialogTitleDiv.textContent=t.target.getAttribute(t.attributeName))})}),this._titleMutationObserver.observe(this.element[0],{attributes:!0,attributeFilter:["title"]}))},_createContainer:function(){this._dialogContainer=document.createElement("div"),this._dialogContainer.classList.add("oj-dialog-container")},_createHeaderSlot:function(){this._headerSlot=document.createElement("div"),this._headerSlot.classList.add(_),this._dialogContainer.appendChild(this._headerSlot),l.subtreeAttached(this._headerSlot),this.userDefinedDialogHeader=!0,this._userDefinedHeaderDiv=this._headerSlot,this._userDefinedHeader=n(this._headerSlot)},_createFooterSlot:function(){this._footerSlot=document.createElement("div"),this._dialogContainer.appendChild(this._footerSlot),l.subtreeAttached(this._footerSlot),this._uiDialogFooterDiv=this._footerSlot,this._uiDialogFooter=n(this._footerSlot)},_createContentDiv:function(){this._contentDiv=document.createElement("div"),this._contentDiv.classList.add("oj-dialog-content","oj-dialog-default-content")},_createBodySlot:function(){this._createContentDiv(),this._dialogContainer.appendChild(this._contentDiv),l.subtreeAttached(this._contentDiv),this._bodySlot=document.createElement("div"),this._bodySlot.classList.add("oj-dialog-body-wrapper"),this._contentDiv.appendChild(this._bodySlot),this._uiDialogContent=n(this._contentDiv),this._uiDialogBodyDiv=this._bodySlot,this._uiDialogBody=n(this._bodySlot)},_GetContextMenu:function(){return this._IsCustomElement()?this._contextmenuSlot&&this._contextmenuSlot.length>0?this._contextmenuSlot[0]:this._super():null},_processSlottedChildren:function(){null!=this._footerSlot&&this.element[0].removeChild(this._footerSlot),null!=this._headerSlot&&this.element[0].removeChild(this._headerSlot),null!=this._bodySlot&&this.element[0].removeChild(this._bodySlot),null!=this._contextmenuSlot&&this.element[0].removeChild(this._contextmenuSlot);var e,t,i=c.CustomElementUtils.getSlotMap(this.element[0]),s=Object.keys(i);for(t=0;t<s.length;t++)"header"!==(e=s[t])&&"footer"!==e&&"body"!==e&&""!==e&&"contextMenu"!==e&&i[e].parentNode.removeChild(i[e]);var n=Object.prototype.hasOwnProperty;n.call(i,"header")&&this._createHeaderSlot(),(n.call(i,"body")||n.call(i,""))&&this._createBodySlot(),n.call(i,"footer")&&this._createFooterSlot(),n.call(i,"contextMenu")&&(this._contextmenuSlot=i.contextMenu);var o=this._bodySlot;for(t=0;t<s.length;t++){switch(e=s[t]){case"header":o=this._headerSlot;break;case"footer":o=this._footerSlot;break;case"body":case"":o=this._bodySlot}var r=i[e];if(null!=r)for(var a=0;a<r.length;a++)switch(o.appendChild(r[a]),e){case"header":break;case"footer":o=this._footerSlot,i[e][a].classList.add(m);break;case"body":case"":o=this._bodySlot,i[e][a].classList.add(p)}}},_AfterCreateEvent:function(){"show"===this.options.initialVisibility&&this.open()},_destroy:function(){this._off(this.element,"keydown"),o.ZOrderUtils.getStatus(this.element)===o.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._setWhenReady("none"),this._destroyResizable(),this.element.hasClass("oj-draggable")&&(this.element.draggable("destroy"),this.element.removeClass("oj-draggable")),this._destroyCloseButton(),this.userDefinedDialogHeader&&this._userDefinedTitle.removeUniqueId(),this._uiDialogBody&&this._uiDialogBody.insertAfter(this._uiDialogContent),this._uiDialogContent.remove(),this._uiDialogBody=null,this._uiDialogContent=null,this.element.removeUniqueId().removeClass("oj-dialog oj-component").css(this.originalCss),this.element.stop(!0,!0),this._IsCustomElement()||this.originalTitle&&this.element.attr("title",this.originalTitle),this._uiDialogTitlebar&&(this._uiDialogTitlebar.remove(),this._uiDialogTitlebar=null),delete this._popupServiceEvents,this._super()},disable:n.noop,enable:n.noop,close:function(e){if(!this._isOperationPending("close",[e])){var t=o.ZOrderUtils.getStatus(this.element);if(t===o.ZOrderUtils.STATUS.OPEN)if(o.ZOrderUtils.setStatus(this.element,o.ZOrderUtils.STATUS.BEFORE_CLOSE),!1!==this._trigger("beforeClose",e)||this._ignoreBeforeCloseResultant){if(this._setWhenReady("close"),this._focusedElement=null,"modal"===this.options.modality){var i=Array.prototype.forEach,s=this.element[0].querySelectorAll(".oj-helper-element-in-dialog-with-accesskey");i.call(s,function(e){e.classList.remove("oj-helper-element-in-dialog-with-accesskey")});var n=document.querySelectorAll(".oj-helper-element-with-accesskey");i.call(n,function(e){e.setAttribute("accesskey",e.getAttribute("data-ojAccessKey")),e.removeAttribute("data-ojAccessKey"),e.classList.remove("oj-helper-element-with-accesskey")})}var r={};r[o.PopupService.OPTION.POPUP]=this.element,r[o.PopupService.OPTION.CONTEXT]={closeEvent:e},o.PopupService.getInstance().close(r)}else o.ZOrderUtils.setStatus(this.element,t)}},_beforeCloseHandler:function(e){var t=e[o.PopupService.OPTION.POPUP],i=this._isFullDisplay(),s=this._isSheetDisplay();this._unregisterResizeListener(t[0]),this._destroyResizable(),s&&this._disableBodyOverflow();var n,r=(a.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).animation;if(r&&(s&&!i&&r.sheet?n=r.sheet.close:r.normal?n=r.normal.close:r.close&&(n=r.close)),!this._ignoreBeforeCloseResultant&&n)return h.startAnimation(t[0],"close",n,this).then(function(){t.hide()});t.hide()},_afterCloseHandler:function(e){var t,i=e[o.PopupService.OPTION.CONTEXT];if(this._restoreBodyOverflow(),!this.opener.filter(":focusable").focus().length){var s=this.opener.parents().filter(":focusable");s.length>0?s[0].focus():n(this.document[0].activeElement).blur()}i&&(t=i.closeEvent),this._trigger("close",t)},isOpen:function(){var e=o.ZOrderUtils.getStatus(this.element);return e===o.ZOrderUtils.STATUS.OPENING||e===o.ZOrderUtils.STATUS.OPEN||e===o.ZOrderUtils.STATUS.BEFORE_CLOSE||e===o.ZOrderUtils.STATUS.CLOSING},open:function(e){if(!this._isOperationPending("open",[e])){var t=o.ZOrderUtils.getStatus(this.element);if(t===o.ZOrderUtils.STATUS.OPEN||t===o.ZOrderUtils.STATUS.UNKNOWN||t===o.ZOrderUtils.STATUS.CLOSE)if(this._isDefaultPosition=!this._hasPositionAttribute(),o.ZOrderUtils.setStatus(this.element,o.ZOrderUtils.STATUS.BEFORE_OPEN),!1!==this._trigger("beforeOpen",e)){if(t===o.ZOrderUtils.STATUS.OPEN)return o.ZOrderUtils.setStatus(this.element,t),void this._focusTabbable();this._setWhenReady("open"),this.userDefinedDialogHeader?void 0!==this.closeButton&&null!==this.closeButton||"icon"!==this.options.cancelBehavior||this._createCloseButton(this._userDefinedHeaderDiv):this._createTitlebarCloseButton(),this.opener=n(this.document[0].activeElement);var i=this._isSheetDisplay();i&&this.element[0].classList.add("oj-dialog-sheet"),!i&&"title-bar"===this.options.dragAffordance&&n.fn.draggable&&this._makeDraggable();var s="rtl"===this._GetReadingDirection(),r=this.options.position;if(i&&(r=this._setSheetPosition(this.options.position)),r=o.PositionUtils.coerceToJqUi(r),r=o.PositionUtils.normalizeHorizontalAlignment(r,s),"modal"===this.options.modality){var a=Array.prototype.forEach,l=this.element[0].querySelectorAll("[accesskey]");a.call(l,function(e){e.classList.add("oj-helper-element-in-dialog-with-accesskey")});var h=document.querySelectorAll("[accesskey]");a.call(h,function(e){e.classList.contains("oj-helper-element-in-dialog-with-accesskey")||(e.classList.add("oj-helper-element-with-accesskey"),e.setAttribute("data-ojAccessKey",e.getAttribute("accesskey")),e.removeAttribute("accesskey"))})}var d={};d[o.PopupService.OPTION.POPUP]=this.element,d[o.PopupService.OPTION.LAUNCHER]=this.opener,d[o.PopupService.OPTION.POSITION]=r,d[o.PopupService.OPTION.MODALITY]=this.options.modality,d[o.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),d[o.PopupService.OPTION.LAYER_SELECTORS]="oj-dialog-layer",d[o.PopupService.OPTION.LAYER_LEVEL]=o.PopupService.LAYER_LEVEL.TOP_LEVEL,d[o.PopupService.OPTION.CUSTOM_ELEMENT]=this._IsCustomElement(),o.PopupService.getInstance().open(d)}else o.ZOrderUtils.setStatus(this.element,t)}},_beforeOpenHandler:function(e){var t=e[o.PopupService.OPTION.POPUP],i=e[o.PopupService.OPTION.POSITION],s=this._isSheetDisplay();s&&this._disableBodyOverflow(),t.show();var n=this._isFullDisplay();n&&this.element[0].classList.add("oj-dialog-full"),t.position(i),this._registerResizeListener(this.element[0]),t.parent().addClass("oj-animate-open");var r,l=(a.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).animation;if(l&&(s&&!n&&l.sheet?r=l.sheet.open:l.normal?r=l.normal.open:l.open&&(r=l.open)),r)return h.startAnimation(t[0],"open",r,this)},_afterOpenHandler:function(e){e[o.PopupService.OPTION.POPUP].parent().removeClass("oj-animate-open"),this._restoreBodyOverflow(),this._makeResizable(),this._trigger("open"),this._focusTabbable()},refresh:function(){this._super()},_unregisterResizeListener:function(e){e&&this._resizeHandler&&(r.removeResizeListener(e,this._resizeHandler),this._resizeHandler=null)},_registerResizeListener:function(e){e&&(null==this._resizeHandler&&(this._resizeHandler=this._handleResize.bind(this)),r.addResizeListener(e,this._resizeHandler,100,!0))},_handleResize:function(){o.ZOrderUtils.getStatus(this.element)===o.ZOrderUtils.STATUS.OPEN&&this._adjustPosition()},_focusTabbable:function(){this.GetFocusElement().focus(),this._trigger("focus")},GetFocusElement:function(){var e=null;return!0===this._titleBarMousedown?this.element[0]:(null!=(e=this.element.find("[autofocus]"))&&e.length||null==(e=d.getFirstTabStop(this._contentDiv)))&&(null!=e&&e.length||!this._uiDialogFooter||!this._uiDialogFooter.length||null==(e=d.getFirstTabStop(this._uiDialogFooterDiv)))?(null!=e&&e.length||this.closeButton&&(e=this.closeButton),null!=e&&e.length||(e=this.element),e[0]):e},_keydownHandler:function(e){if("none"!==this.options.cancelBehavior&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===n.ui.keyCode.ESCAPE)return e.preventDefault(),e.stopImmediatePropagation(),void this.close(e);var t;e.keyCode===n.ui.keyCode.TAB&&(e.shiftKey?(d.isFirstActiveElement(this.element)||document.activeElement===this.element[0])&&null!=(t=d.getLastTabStop(this.element))&&(t.focus(),e.preventDefault()):(d.isLastActiveElement(this.element)||document.activeElement===this.element[0])&&null!=(t=d.getFirstTabStop(this.element))&&(t.focus(),e.preventDefault()))},_setupFocus:function(e){var t=this;this._focusable({applyHighlight:!0,setupHandlers:function(i,s){t._on(e,{focus:function(e){i(n(e.currentTarget))},blur:function(e){s(n(e.currentTarget))}})}})},_disableBodyOverflow:function(){document.body.classList.add("oj-dialog-sheet-animating")},_restoreBodyOverflow:function(){document.body.classList.remove("oj-dialog-sheet-animating")},_destroyCloseButton:function(){null!==this.closeButtonDiv&&void 0!==this.closeButtonDiv&&(this.closeButtonDiv.parentElement&&(l.subtreeDetached(this.closeButtonDiv),this.closeButtonDiv.parentElement.removeChild(this.closeButtonDiv)),this.closeButton=null),this._headerSlot&&this._headerSlot.classList.remove("oj-dialog-header-close"),this._uiDialogTitlebarDiv&&this._uiDialogTitlebarDiv.classList.remove("oj-dialog-header-close")},_createCloseButton:function(e){if(this._IsCustomElement()){this.closeButtonDiv=document.createElement("oj-button"),this.closeButtonDiv.classList.add("oj-dialog-header-close-wrapper"),this.closeButtonDiv.setAttribute("data-oj-binding-provider","none"),this.closeButtonDiv.setAttribute("display","icons"),this.closeButtonDiv.setAttribute("chroming","half");var t=document.createElement("span");t.textContent=this.getTranslatedString("labelCloseIcon");var i=document.createElement("span");i.className="oj-fwk-icon oj-fwk-icon-cross",i.setAttribute("slot","startIcon"),this.closeButtonDiv.appendChild(i),this.closeButtonDiv.appendChild(t),e.appendChild(this.closeButtonDiv),l.subtreeAttached(this.closeButtonDiv),this.closeButton=n(this.closeButtonDiv)}this._IsCustomElement()||(this.closeButton=n("<button><\button>").addClass("oj-dialog-header-close-wrapper"),this.closeButton.ojButton({display:"icons",chroming:"half",label:this.getTranslatedString("labelCloseIcon"),icons:{start:"oj-component-icon oj-fwk-icon-cross"}}).appendTo(e),this.closeButtonDiv=this.closeButton[0]),this._on(this.closeButton,{click:function(e){e.preventDefault(),e.stopImmediatePropagation(),this.close(e)}}),this._headerSlot&&this._headerSlot.classList.add("oj-dialog-header-close"),this._uiDialogTitlebarDiv&&this._uiDialogTitlebarDiv.classList.add("oj-dialog-header-close")},_createTitlebarCloseButton:function(){void 0!==this.closeButton&&null!==this.closeButton||"icon"!==this.options.cancelBehavior||this._createCloseButton(this._uiDialogTitlebarDiv),this._on(this._uiDialogTitlebar,{mousedown:function(e){var t=r.isAncestorOrSelf(this.closeButtonDiv,e.target);this._titleBarMousedown=!0,t||this.element.focus()},mouseup:function(){this._titleBarMousedown=null}})},_createTitlebar:function(){this._uiDialogTitlebarDiv=document.createElement("div"),this._uiDialogTitlebarDiv.classList.add(_),this._dialogContainer.insertBefore(this._uiDialogTitlebarDiv,this._dialogContainer.firstChild),l.subtreeAttached(this._uiDialogTitlebarDiv),this._uiDialogTitlebar=n(this._uiDialogTitlebarDiv),this._uiDialogTitleDiv=document.createElement("h1"),this._uiDialogTitleDiv.classList.add("oj-dialog-title"),n(this._uiDialogTitleDiv).uniqueId(),this._uiDialogTitlebarDiv.appendChild(this._uiDialogTitleDiv),l.subtreeAttached(this._uiDialogTitleDiv),this._title(this._uiDialogTitleDiv),this.element.attr({"aria-labelledby":this._uiDialogTitleDiv.id})},_title:function(e){var t=e;this._IsCustomElement()?this._IsCustomElement()&&(this.options.dialogTitle?t.textContent=this.options.dialogTitle:this.element.attr("title")?t.textContent=this.element.attr("title"):t.innerHTML="&#160;"):(this.options.title||(t.innerHTML="&#160;"),t.textContent=this.options.title)},_makeDraggable:function(){var e=this,t=this.options;function i(e){return{position:e.position,offset:e.offset}}this.element.draggable({addClasses:!1,handle:".oj-dialog-header",containment:"document",start:function(t,s){n(this).addClass("oj-dialog-dragging"),e._positionDescendents(),e._trigger("dragStart",t,i(s))},drag:function(t,s){e._positionDescendents(),e._trigger("drag",t,i(s))},stop:function(s,o){var r=o.offset.left-e.document.scrollLeft(),a=o.offset.top-e.document.scrollTop();t.position={my:{horizontal:"left",vertical:"top"},at:{horizontal:"left",vertical:"top"},offset:{x:r>=0?r:0,y:a>=0?a:0},of:window},n(this).removeClass("oj-dialog-dragging"),e._positionDescendents(),e._trigger("dragStop",s,i(o))}}),this.element.addClass("oj-draggable")},_destroyResizable:function(){this._resizableComponent&&this._resizableComponent("instance")&&(this._resizableComponent("destroy"),delete this._resizableComponent)},_makeResizable:function(){if(this._destroyResizable(),"resizable"===this.options.resizeBehavior){var e=this;this._resizableComponent=this.element.ojResizable.bind(this.element);var t=Math.max(r.getCSSLengthAsFloat(this.element.css("min-width")),10),i=Math.max(r.getCSSLengthAsFloat(this.element.css("min-height")),10),s=r.getCSSLengthAsFloat(this.element.css("max-width")),o=r.getCSSLengthAsFloat(this.element.css("max-height"));s=0===s?null:s,o=0===o?null:o,this._resizableComponent({minWidth:t,minHeight:i,maxWidth:s,maxHeight:o,cancel:".oj-dialog-content",containment:"document",handles:"n,e,s,w,se,sw,ne,nw",start:function(t,i){e._isResizing=!0,n(this).addClass("oj-dialog-resizing"),e._trigger("resizeStart",t,a(i))},resize:function(t,i){e._trigger("resize",t,a(i))},stop:function(t,i){e._isResizing=!1,n(this).removeClass("oj-dialog-resizing"),e._trigger("resizeStop",t,a(i))}})}function a(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}},_position:function(){var e="rtl"===this._GetReadingDirection(),t=this.options.position;this._isSheetDisplay()&&(t=this._setSheetPosition(t)),t=o.PositionUtils.coerceToJqUi(t),t=o.PositionUtils.normalizeHorizontalAlignment(t,e),this.element.position(t),this._positionDescendents()},_positionDescendents:function(){o.PopupService.getInstance().triggerOnDescendents(this.element,o.PopupService.EVENT.POPUP_REFRESH)},_adjustPosition:function(){var e=this.element.hasClass("oj-draggable"),t=this.element.hasClass("oj-resizable");e||t||this.element.width()>window.innerWidth||this.element.height()>window.innerHeight?this._positionDescendents():this._position()},_isSheetDisplay:function(){if(this._isDefaultPosition){var e=a.parseJSONFromFontFamily("oj-theme-json").behavior,t="phone"===u.getDeviceRenderMode();if(e.includes("redwood")&&t)return!0}return!1},_isFullDisplay:function(){if(!this._isSheetDisplay())return!1;var e=window.innerHeight,t=window.innerWidth,i=this.element[0].offsetHeight,s=this.element[0].offsetWidth;return i>=.95*e&&s>=.95*t},_hasPositionAttribute:function(){for(var e=this.element[0].attributes,t=0;t<e.length;t++)if(e[t].name.startsWith("position"))return!0;return!1},_setSheetPosition:function(e){var t=n.extend({},e);return t.my.vertical="bottom",t.at.vertical="bottom",t.of=window,t},_setOption:function(e,t,i){var s;if("disabled"!==e)switch(this._super(e,t,i),e){case"dragAffordance":(s=this.element.hasClass("oj-draggable"))&&"none"===t&&(this.element.draggable("destroy"),this.element.removeClass("oj-draggable")),this._isSheetDisplay()||s||"title-bar"!==t||this._makeDraggable();break;case"position":this._isDefaultPosition=!1;var r=this.options;return r.position=o.PositionUtils.coerceToJet(t,r.position),void this._position();case"resizeBehavior":o.ZOrderUtils.getStatus(this.element)===o.ZOrderUtils.STATUS.OPEN&&this._makeResizable();break;case"title":case"dialogTitle":this.userDefinedDialogHeader?this._title(this._userDefinedHeaderDiv.querySelector(".oj-dialog-title")):this._title(this._uiDialogTitlebarDiv.querySelector(".oj-dialog-title"));break;case"role":this.element.attr("role",t);break;case"modality":if(o.ZOrderUtils.getStatus(this.element)===o.ZOrderUtils.STATUS.OPEN){var a={};a[o.PopupService.OPTION.POPUP]=this.element,a[o.PopupService.OPTION.MODALITY]=t,o.PopupService.getInstance().changeOptions(a)}break;case"cancelBehavior":"none"===t||"escape"===t?this._destroyCloseButton():"icon"===t&&(this.userDefinedDialogHeader?(this._destroyCloseButton(),this._createCloseButton(this._userDefinedHeaderDiv),this._userDefinedTitleDiv=this._userDefinedHeaderDiv.querySelector(".oj-dialog-title"),this._userDefinedTitle=n(this._userDefinedTitleDiv)):(this._destroyCloseButton(),this._createCloseButton(this._uiDialogTitlebarDiv),this.standardTitleDiv=this._uiDialogTitlebarDiv.querySelector(".oj-dialog-title"),this.standardTitle=n(this.standardTitleDiv)))}},getNodeBySubId:function(e){if(null===e)return this.element?this.element[0]:null;function t(e){for(var t=[],i=/\w|_|-/,s=0;s<e.length;s++){var n=e.substring(s,s+1);i.test(n)?t.push(n):t.push("\\"+n)}return t.join("")}var i=e.subId;if(!this._IsCustomElement()||i!==m&&i!==p){var s,n;switch(i){case _:case"oj-dialog-content":case m:return s=this.element[0].nodeName+'[id="'+t(this.element.attr("id"))+'"] > .oj-dialog-container > ',s+="."+i,(n=this.element.parent().find(s))&&0!==n.length?n[0]:null;case"oj-resizable-n":case"oj-resizable-e":case"oj-resizable-s":case"oj-resizable-w":case"oj-resizable-se":case"oj-resizable-sw":case"oj-resizable-ne":case"oj-resizable-nw":return s=this.element[0].nodeName+'[id="'+t(this.element.attr("id"))+'"] > ',s+="."+i,(n=this.element.parent().find(s))&&0!==n.length?n[0]:null;case"oj-dialog-close-icon":case"oj-dialog-close":return null;case p:return s=this.element[0].nodeName+'[id="'+t(this.element.attr("id"))+'"] > ',s+=".oj-dialog-container > .oj-dialog-content > ",s+="."+i,(n=this.element.parent().find(s))&&0!==n.length?n[0]:null;case"oj-dialog-header-close-wrapper":return s=this.element[0].nodeName+'[id="'+t(this.element.attr("id"))+'"] > ',s+=".oj-dialog-container > .oj-dialog-header > ",s+="."+i,(n=this.element.parent().find(s))&&0!==n.length?n[0]:null}}else{if(i===p)return this._uiDialogBodyDiv.querySelector(".oj-dialog-body");if(i===m)return this._uiDialogFooterDiv.querySelector(".oj-dialog-footer")}return null},getSubIdByNode:function(e){if(null!=e){var t=n(e);if(t.hasClass(_))return{subId:_};if(t.hasClass(m))return{subId:m};if(t.hasClass("oj-dialog-content"))return{subId:"oj-dialog-content"};if(t.hasClass("oj-dialog-header-close-wrapper"))return{subId:"oj-dialog-header-close-wrapper"};if(t.hasClass("oj-resizable-n"))return{subId:"oj-resizable-n"};if(t.hasClass("oj-resizable-e"))return{subId:"oj-resizable-e"};if(t.hasClass("oj-resizable-s"))return{subId:"oj-resizable-s"};if(t.hasClass("oj-resizable-w"))return{subId:"oj-resizable-w"};if(t.hasClass("oj-resizable-se"))return{subId:"oj-resizable-se"};if(t.hasClass("oj-resizable-sw"))return{subId:"oj-resizable-sw"};if(t.hasClass("oj-resizable-ne"))return{subId:"oj-resizable-ne"};if(t.hasClass("oj-resizable-nw"))return{subId:"oj-resizable-nw"}}return null},_surrogateRemoveHandler:function(){var e=this.element;o.ZOrderUtils.getStatus(e)===o.ZOrderUtils.STATUS.OPEN&&e.remove()},_getPopupServiceEvents:function(){if(!this._popupServiceEvents){var e={};e[o.PopupService.EVENT.POPUP_CLOSE]=this._closeImplicitly.bind(this),e[o.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),e[o.PopupService.EVENT.POPUP_REFRESH]=this._adjustPosition.bind(this),e[o.PopupService.EVENT.POPUP_BEFORE_OPEN]=this._beforeOpenHandler.bind(this),e[o.PopupService.EVENT.POPUP_AFTER_OPEN]=this._afterOpenHandler.bind(this),e[o.PopupService.EVENT.POPUP_BEFORE_CLOSE]=this._beforeCloseHandler.bind(this),e[o.PopupService.EVENT.POPUP_AFTER_CLOSE]=this._afterCloseHandler.bind(this),this._popupServiceEvents=e}return this._popupServiceEvents},_closeImplicitly:function(){this._ignoreBeforeCloseResultant=!0,this.close(),delete this._ignoreBeforeCloseResultant},_setWhenReady:function(t){var i=this._whenReadyMediator;i&&(i.destroy(),delete this._whenReadyMediator),["open","close"].indexOf(t)<0||(this._whenReadyMediator=new e.PopupWhenReadyMediator(this.element,t,"ojDialog",this._IsCustomElement()))},_isOperationPending:function(e,t){var i=this._whenReadyMediator;return!!i&&i.isOperationPending(this,e,e,t)},_NotifyDetached:function(){o.ZOrderUtils.getStatus(this.element)===o.ZOrderUtils.STATUS.OPEN&&this._closeImplicitly(),this._super()}}),l.setDefaultOptions({ojDialog:{resizeBehavior:l.createDynamicPropertyGetter(function(){return(a.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).resizeBehavior}),cancelBehavior:l.createDynamicPropertyGetter(function(){return(a.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).cancelBehavior}),dragAffordance:l.createDynamicPropertyGetter(function(){return(a.parseJSONFromFontFamily("oj-dialog-option-defaults")||{}).dragAffordance})}}),(g={properties:{cancelBehavior:{type:"string",enumValues:["escape","icon","none"]},dialogTitle:{type:"string"},dragAffordance:{type:"string",enumValues:["none","title-bar"]},initialVisibility:{type:"string",enumValues:["hide","show"],value:"hide"},modality:{type:"string",enumValues:["modal","modeless"],value:"modal"},position:{type:"object",properties:{at:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"],value:"center"},vertical:{type:"string",enumValues:["bottom","center","top"],value:"center"}}},collision:{type:"string",enumValues:["fit","flip","flipfit","none"],value:"fit"},my:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"],value:"center"},vertical:{type:"string",enumValues:["bottom","center","top"],value:"center"}}},of:{type:"string|object",value:"window"},offset:{type:"object",properties:{x:{type:"number",value:0},y:{type:"number",value:0}}}}},resizeBehavior:{type:"string",enumValues:["none","resizable"]},translations:{type:"object",value:{},properties:{labelCloseIcon:{type:"string"}}}},methods:{close:{},getProperty:{},isOpen:{},open:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateEnd:{},ojAnimateStart:{},ojBeforeClose:{},ojBeforeOpen:{},ojClose:{},ojFocus:{},ojOpen:{},ojResize:{},ojResizeStart:{},ojResizeStop:{}},extension:{}}).extension._WIDGET_NAME="ojDialog",g.extension._CONTROLS_SUBTREE_HIDDEN=!0,o.CustomElementBridge.register("oj-dialog",{metadata:g})}),define("ojs/ojoffcanvas",["exports","ojs/ojcore-base","jquery","hammerjs","ojs/ojcontext","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojlogger","ojs/ojdomutils","ojs/ojfocusutils","ojs/ojjquery-hammer","ojs/ojpopupcore"],function(e,t,i,s,n,o,r,a,l,h,d,c){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,h=h&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h;const u={};t._registerLegacyNamespaceProp("OffcanvasUtils",u),u._DATA_EDGE_KEY="oj-offcanvasEdge",u._DATA_OFFCANVAS_KEY="oj-offcanvas",u._DATA_MEDIA_QUERY_KEY="oj-mediaQueryListener",u._DATA_HAMMER_KEY="oj-offcanvasHammer",u.SELECTOR_KEY="selector",u.CONTENT_KEY="content",u.EDGE_START="start",u.EDGE_END="end",u.EDGE_TOP="top",u.EDGE_BOTTOM="bottom",u.DISPLAY_MODE_KEY="displayMode",u.DISPLAY_MODE_PUSH="push",u.DISPLAY_MODE_OVERLAY="overlay",u.DISPLAY_MODE_REFLOW="reflow",u.MODALITY_KEY="modality",u.MODALITY_NONE="none",u.MODALITY_MODAL="modal",u.DISMISS_HANDLER_KEY="_dismissHandler",u.OPEN_PROMISE_KEY="_openPromise",u.CLOSE_PROMISE_KEY="_closePromise",u.GLASS_PANE_KEY="_glassPane",u.SURROGATE_KEY="_surrogate",u.ANIMATE_WRAPPER_KEY="_animateWrapper",u.ANIMATE_KEY="_animate",u.SURROGATE_ATTR="data-oj-offcanvas-surrogate-id",u.OUTER_WRAPPER_SELECTOR="oj-offcanvas-outer-wrapper",u.OPEN_SELECTOR="oj-offcanvas-open",u.TRANSITION_SELECTOR="oj-offcanvas-transition",u.REFLOW_WRAPPER_SELECTOR="oj-offcanvas-pin",u.REFLOW_TRANSITION_SELECTOR="oj-offcanvas-pin-transition",u.GLASSPANE_SELECTOR="oj-offcanvas-glasspane",u.GLASSPANE_DIM_SELECTOR="oj-offcanvas-glasspane-dim",u.VETO_BEFOREOPEN_MSG="ojbeforeopen veto",u.VETO_BEFORECLOSE_MSG="ojbeforeclose veto",u._shiftSelector={start:"oj-offcanvas-shift-start",end:"oj-offcanvas-shift-end",top:"oj-offcanvas-shift-down",bottom:"oj-offcanvas-shift-up"},u._drawerSelector={start:"oj-offcanvas-start",end:"oj-offcanvas-end",top:"oj-offcanvas-top",bottom:"oj-offcanvas-bottom"},u._getDisplayMode=function(e){var t=e[u.DISPLAY_MODE_KEY];return t!==u.DISPLAY_MODE_OVERLAY&&t!==u.DISPLAY_MODE_PUSH&&t!==u.DISPLAY_MODE_REFLOW&&(t=o.getCachedCSSVarValues(["--oj-private-off-canvas-global-display-mode-default"])[0]),t},u._getDrawer=function(e){return i(e[u.SELECTOR_KEY])},u._isModal=function(e){return e[u.MODALITY_KEY]===u.MODALITY_MODAL},u._isOpen=function(e){return e.hasClass(u.OPEN_SELECTOR)},u._getOuterWrapper=function(e){return e.closest("."+u.OUTER_WRAPPER_SELECTOR)},u._getAnimateWrapper=function(e){var t=u._getDrawer(e);return u._noInnerWrapper(e)||e[u.DISPLAY_MODE_KEY]===u.DISPLAY_MODE_OVERLAY?t:e[u.ANIMATE_WRAPPER_KEY]?t.closest("."+e[u.ANIMATE_WRAPPER_KEY]):t.parent()},u._getShiftSelector=function(e){var t=u._shiftSelector[e];if(!t)throw new Error("Invalid edge: "+e);return t},u._isRTL=function(){return"rtl"===l.getReadingDirection()},u._setTransform=function(e,t){e.css({"-webkit-transform":t,transform:t})},u._getTranslationX=function(e,t,i){var s=e===u.EDGE_END;return(u._isRTL()||i)&&(s=!s),"translate3d("+(s?"-":"")+t+", 0, 0)"},u._setTranslationX=function(e,t,i){u._setTransform(e,u._getTranslationX(t,i,!1))},u._getTranslationY=function(e,t){return"translate3d(0, "+(e===u.EDGE_BOTTOM?"-":"")+t+", 0)"},u._setTranslationY=function(e,t,i){u._setTransform(e,u._getTranslationY(t,i))},u._getTranslationY2=function(e,t){return"translate3d(0, "+(t?"-":"")+e+", 0)"},u._setAnimateClass=function(e,t,i,s,n){t.addClass(u.TRANSITION_SELECTOR),u._setTransform(t,s),i.addClass(u.TRANSITION_SELECTOR),u._setTransform(i,n)},u._saveEdge=function(e){var t=e.edge,s=u._getDrawer(e);return t&&t.length||(t=s.hasClass("oj-offcanvas-start")?u.EDGE_START:s.hasClass("oj-offcanvas-end")?u.EDGE_END:s.hasClass("oj-offcanvas-top")?u.EDGE_TOP:s.hasClass("oj-offcanvas-bottom")?u.EDGE_BOTTOM:u.EDGE_START),i.data(s[0],u._DATA_EDGE_KEY,t),t},u._getEdge=function(e){return i.data(e[0],u._DATA_EDGE_KEY)},u._toggleClass=function(e,t,i){var s=e[u.DISPLAY_MODE_KEY],n=u._getDrawer(e),o=u.OPEN_SELECTOR,r=s===u.DISPLAY_MODE_OVERLAY?u.TRANSITION_SELECTOR+" oj-offcanvas-overlay":u.TRANSITION_SELECTOR;if(i)n.addClass(o),void 0===e[u.ANIMATE_KEY]&&t.addClass(r);else{e.makeFocusable&&l.makeFocusable({element:n,remove:!0});var a=e.tabindex;void 0===a?n.removeAttr("tabindex"):n.attr("tabindex",a),n.removeClass(o),t.removeClass(r)}},u._setFocus=function(e){var t,i=e,s=u._getDrawer(i),n=s.find("[autofocus]");if(0===n.length&&(n=s.find(":tabbable")),0===n.length){var o=s.attr("tabindex");void 0!==o&&(i.tabindex=o),s.attr("tabindex","-1"),t=s,l.makeFocusable({element:s,applyHighlight:!0}),i.makeFocusable=!0}else t=n[0];h.focusElement(t)},u._isAutoDismiss=function(e){return"none"!==e.autoDismiss},u._calcTransitionTime=function(e){for(var t=e.css("transitionProperty").split(","),i=e.css("transitionDelay").split(","),s=e.css("transitionDuration").split(","),n=0,o=0;o<t.length;o++){var r=s[o%s.length],a=r.indexOf("ms")>-1?parseFloat(r):1e3*parseFloat(r);if(a>0){var l=i[o%i.length],h=l.indexOf("ms")>-1?parseFloat(l):1e3*parseFloat(l);n=Math.max(n,h+a)}}return n+100},u._onTransitionEnd=function(e,t){var i,s="transitionend.oc webkitTransitionEnd.oc",n=function(){i&&(clearTimeout(i),i=null),e.off(s,n),t(e)};e.on(s,n),i=setTimeout(n,u._calcTransitionTime(e))},u._closeWithCatch=function(e){u.close(e).catch(function(e){a.warn("Offcancas close failed: "+e)})},u._registerCloseHandler=function(e){var s=e;if(u._unregisterCloseHandler(s),u._isAutoDismiss(s)){var n=u._getDrawer(s),o=function(e){var o=e.target;l.isChromeEvent(e)||"focus"===e.type&&!i(o).is(":focusable")||(null!=i.data(n[0],u._DATA_OFFCANVAS_KEY)?t.ZOrderUtils.hasModalDialogOpen()||l.isLogicalAncestorOrSelf(n[0],o)||u._closeWithCatch(s):u._unregisterCloseHandler(s))};s[u.DISMISS_HANDLER_KEY]=o;var r=document.documentElement;l.isTouchSupported()&&r.addEventListener("touchstart",o,{passive:!0,capture:!0}),r.addEventListener("mousedown",o,!0),r.addEventListener("focus",o,!0)}u._registerSwipeHandler(s)},u._unregisterCloseHandler=function(e){var t=e,i=t[u.DISMISS_HANDLER_KEY];if(i){var s=document.documentElement;l.isTouchSupported()&&s.removeEventListener("touchstart",i,{passive:!0,capture:!0}),s.removeEventListener("mousedown",i,!0),s.removeEventListener("focus",i,!0),delete t[u.DISMISS_HANDLER_KEY],t[u.DISMISS_HANDLER_KEY]=null}u._unregisterSwipeHandler(t)},u._registerSwipeHandler=function(e){if(l.isTouchSupported()){var t,n,o,r=e,a=r[u.SELECTOR_KEY],h=i(a),d=u._getEdge(h);d===u.EDGE_START&&!u._isRTL()||d===u.EDGE_END&&u._isRTL()?(n={recognizers:[[s.Swipe,{direction:s.DIRECTION_LEFT}]]},t="swipeleft"):d===u.EDGE_START&&u._isRTL()||d===u.EDGE_END&&!u._isRTL()?(n={recognizers:[[s.Swipe,{direction:s.DIRECTION_RIGHT}]]},t="swiperight"):d===u.EDGE_TOP?(n={recognizers:[[s.Swipe,{direction:s.DIRECTION_UP}]]},t="swipeup"):d===u.EDGE_BOTTOM&&(n={recognizers:[[s.Swipe,{direction:s.DIRECTION_DOWN}]]},t="swipedown"),o=h.ojHammer(n).on(t,function(e){e.target===h[0]&&(e.preventDefault(),u._closeWithCatch(r))}),i.data(i(a)[0],u._DATA_HAMMER_KEY,{event:t,hammer:o})}},u._unregisterSwipeHandler=function(e){var t=u._getDrawer(e);if(t.length>0){var s=i.data(t[0],u._DATA_HAMMER_KEY);s&&s.hammer.off(s.event)}},u._isFixed=function(e){return u._getOuterWrapper(e).hasClass("oj-offcanvas-page")},u._isReflow=function(e){return e[u.DISPLAY_MODE_KEY]===u.DISPLAY_MODE_REFLOW},u._noInnerWrapper=function(e){return e[u.CONTENT_KEY]||u._isFixed(u._getDrawer(e))||u._isReflow(e)},u._toggleOuterWrapper=function(e,s,n){var o=u._getEdge(s),r=u._getShiftSelector(o),a=u._getOuterWrapper(s);t.Assert.assertPrototype(a,i);var l=a.hasClass(r);return n||a.toggleClass(r,!l),l},u._afterCloseHandler=function(e){var t=u._getAnimateWrapper(e);if(""===t.get(0).style.transform){u._unregisterCloseHandler(e);var s=u._getDrawer(e),n=u._isReflow(e),o=null;try{o=i.data(s[0],u._DATA_OFFCANVAS_KEY)}catch(e){}o===e&&(n?s.removeClass(u.OPEN_SELECTOR+" "+u.REFLOW_TRANSITION_SELECTOR):u._toggleClass(e,t,!1),u._removeModality(e),n&&u._getOuterWrapper(s).removeClass(u.REFLOW_WRAPPER_SELECTOR),s.trigger("ojclose",e),i.removeData(s[0],u._DATA_OFFCANVAS_KEY))}},u._setVisible=function(e,t,s){var n=i(e),o=!!t;o&&u._isOpen(n)&&u._close(e,!1),n.toggleClass(u._drawerSelector[s],!o)},u.setupResponsive=function(e){var t=e.query;if(null!==t){var s=e[u.SELECTOR_KEY],n=window.matchMedia(t),o=u._saveEdge(e),r=function(e){u._setVisible(s,e.matches,o)};n.addListener(r),u._setVisible(s,n.matches,o),i.data(i(s)[0],u._DATA_MEDIA_QUERY_KEY,{mqList:n,mqListener:r})}},u.tearDownResponsive=function(e){var t=u._getDrawer(e),s=i.data(t[0],u._DATA_MEDIA_QUERY_KEY);s&&(s.mqList.removeListener(s.mqListener),i.removeData(t[0],u._DATA_MEDIA_QUERY_KEY))},u._openPush=function(e,s,n,o){var r=u._getDrawer(e),a=i(e[u.CONTENT_KEY]);t.Assert.assertPrototype(a,i);var l,h=!0,d=e.size,c=function(t){t.removeClass(u.TRANSITION_SELECTOR),h?h=!1:(o!==u.EDGE_END&&o!==u.EDGE_BOTTOM||u._setFocus(e),r.trigger("ojopen",e),u._registerCloseHandler(e),s(!0))};r.addClass(u.OPEN_SELECTOR),window.setTimeout(function(){o===u.EDGE_START||o===u.EDGE_END?(void 0===d&&(d=r.outerWidth(!0)+"px"),l=u._getTranslationX(o,d,!1)):(void 0===d&&(d=r.outerHeight(!0)+"px"),u._setTransform(r,u._getTranslationY2(d,o===u.EDGE_TOP)),l=u._getTranslationY2(d,o!==u.EDGE_TOP)),window.setTimeout(function(){u._setAnimateClass(e,r,a,"translate3d(0, 0, 0)",l),u._toggleOuterWrapper(e,r,!1),u._onTransitionEnd(a,c),u._onTransitionEnd(r,c)},0)},0),u._applyModality(e,r),o!==u.EDGE_START&&o!==u.EDGE_TOP||u._setFocus(e)},u._openOverlay=function(e,t,i,s){var n=u._getDrawer(e);u._toggleClass(e,n,!0);var o=e.size;o&&(s===u.EDGE_START||s===u.EDGE_END?u._setTransform(n,u._getTranslationX(s,o,!0)):u._setTransform(n,u._getTranslationY(s,o))),window.setTimeout(function(){u._toggleOuterWrapper(e,n,!1)},20),u._applyModality(e,n),s!==u.EDGE_START&&s!==u.EDGE_TOP||u._setFocus(e),u._onTransitionEnd(n,function(){n.removeClass(u.TRANSITION_SELECTOR),s!==u.EDGE_END&&s!==u.EDGE_BOTTOM||u._setFocus(e),n.trigger("ojopen",e),u._registerCloseHandler(e),t(!0)})},u._closePush=function(e,t,s,n,o){var r=i(e[u.CONTENT_KEY]),a=!0,l=function(){a||(r.removeClass(u.TRANSITION_SELECTOR),u._setTransform(r,""),u._afterCloseHandler(e),t(!0)),a=!1};u._setTransform(n,""),u._setTransform(r,""),u._toggleOuterWrapper(e,n,!1),u._isModal(e)&&e[u.GLASS_PANE_KEY].removeClass(u.GLASSPANE_DIM_SELECTOR),o?(r.addClass(u.TRANSITION_SELECTOR),n.addClass(u.TRANSITION_SELECTOR),u._onTransitionEnd(n,l),u._onTransitionEnd(r,l)):(a=!1,l())},u._closeOverlay=function(e,t,i,s,n){var o=function(){u._afterCloseHandler(e),t(!0)};u._toggleOuterWrapper(e,s,!1),u._isModal(e)&&e[u.GLASS_PANE_KEY].removeClass(u.GLASSPANE_DIM_SELECTOR),n?(s.addClass(u.TRANSITION_SELECTOR),u._onTransitionEnd(s,o)):o()},u._openOldDrawer=function(e,s,n,o,r){var a,l=u._getDrawer(e),h=u._getAnimateWrapper(e);t.Assert.assertPrototype(h,i),u._toggleClass(e,h,!0),o===u.EDGE_START||o===u.EDGE_END?(a=l.outerWidth(!0)+"px",r===u.DISPLAY_MODE_PUSH&&u._setTranslationX(h,o,a)):(a=l.outerHeight(!0)+"px",r===u.DISPLAY_MODE_PUSH&&u._setTranslationY(h,o,a)),window.setTimeout(function(){u._toggleOuterWrapper(e,l,!1)},10),u._applyModality(e,l),o!==u.EDGE_START&&o!==u.EDGE_TOP||u._setFocus(e),u._onTransitionEnd(h,function(){h.removeClass(u.TRANSITION_SELECTOR),o!==u.EDGE_END&&o!==u.EDGE_BOTTOM||u._setFocus(e),l.trigger("ojopen",e),u._registerCloseHandler(e),s(!0)})},u._closeOldDrawer=function(e,t,i,s,n){var o=e[u.DISPLAY_MODE_KEY],r=u._getAnimateWrapper(e),a=function(){u._afterCloseHandler(e),t(!0)};o===u.DISPLAY_MODE_PUSH&&u._setTransform(r,""),u._toggleOuterWrapper(e,s,!1),u._isModal(e)&&e[u.GLASS_PANE_KEY].removeClass(u.GLASSPANE_DIM_SELECTOR),n?(r.addClass(u.TRANSITION_SELECTOR),u._onTransitionEnd(r,a)):a()},u.open=function(e){var s,o=u._getDrawer(e),a=i.data(o[0],u._DATA_OFFCANVAS_KEY);if(a){if(a[u.CLOSE_PROMISE_KEY])return a[u.CLOSE_PROMISE_KEY];if(a[u.OPEN_PROMISE_KEY])return a[u.OPEN_PROMISE_KEY]}var l=!1,h=new Promise(function(r,a){t.Assert.assertPrototype(o,i);var h=u._saveEdge(e),d=i.Event("ojbeforeopen");if(o.trigger(d,e),!1===d.result)return a(u.VETO_BEFOREOPEN_MSG),void(l=!0);var c=u._getDisplayMode(e),p=u._isReflow(e);!p||h!==u.EDGE_TOP&&h!==u.EDGE_BOTTOM||(c=u.DISPLAY_MODE_PUSH);var m=i.extend({},e);if(m[u.DISPLAY_MODE_KEY]=c,i.data(o[0],u._DATA_OFFCANVAS_KEY,m),e[u.CONTENT_KEY]){if(!u._noInnerWrapper(e))throw new Error("Error: Both main content selector and the inner wrapper <div class='oj-offcanvas-inner-wrapper'> are provided. Please remove the inner wrapper.");var _=n.getContext(o[0]).getBusyContext();s=_.addBusyState({description:"The offcanvas selector ='"+e[u.SELECTOR_KEY]+"' doing the open animation."}),p||(c===u.DISPLAY_MODE_PUSH?u._openPush(m,r,a,h):u._openOverlay(m,r,a,h))}else u._openOldDrawer(m,r,a,h,c)});if(h=h.then(function(e){return s&&s(),e},function(e){throw s&&s(),e}),!l){var d=i.data(o[0],u._DATA_OFFCANVAS_KEY);d&&(d[u.OPEN_PROMISE_KEY]=h,r.subtreeShown(o[0]))}return h},u.close=function(e){return u._close(e[u.SELECTOR_KEY],void 0===e[u.ANIMATE_KEY])},u._close=function(e,s){var o=i(e);t.Assert.assertPrototype(o,i);var a,l=i.data(o[0],u._DATA_OFFCANVAS_KEY);if(l&&l[u.CLOSE_PROMISE_KEY])return l[u.CLOSE_PROMISE_KEY];var h=!1,d=new Promise(function(t,r){if(u._isOpen(o)){null==l&&t(!0),e!==l[u.SELECTOR_KEY]&&t(!0),u._toggleOuterWrapper(l,o,!0)||t(!0);var d=i.Event("ojbeforeclose");if(o.trigger(d,l),!1===d.result)return r(u.VETO_BEFORECLOSE_MSG),void(h=!0);if(s){var c=n.getContext(o[0]).getBusyContext();a=c.addBusyState({description:"The offcanvas selector ='"+l[u.SELECTOR_KEY]+"' doing the close animation."})}var p=l[u.DISPLAY_MODE_KEY];l[u.CONTENT_KEY]?p===u.DISPLAY_MODE_PUSH?u._closePush(l,t,r,o,s):u._closeOverlay(l,t,r,o,s):u._closeOldDrawer(l,t,r,o,s)}else t(!0)});return d=d.then(function(e){return a&&a(),e},function(e){throw a&&a(),e}),h||(l=i.data(o[0],u._DATA_OFFCANVAS_KEY))&&(l[u.CLOSE_PROMISE_KEY]=d,r.subtreeHidden(o[0])),d},u.toggle=function(e){var s=u._getDrawer(e);return t.Assert.assertPrototype(s,i),u._isOpen(s)?u.close(e):u.open(e)},u._addGlassPane=function(e){var t=i("<div>");return t.addClass(u.GLASSPANE_SELECTOR),t.attr("role","presentation"),t.attr("aria-hidden","true"),t.appendTo(e.parent()),t.on("keydown keyup keypress mousedown mouseup mouseover mouseout click focusin focus",function(e){e.stopPropagation(),e.preventDefault()}),t},u._createSurrogate=function(e){var t,s=i("<span></span>").css("display","none").attr("aria-hidden","true"),n=e.attr("id");return n?(t=[n,"surrogate"].join("_"),s.attr("id",t)):t=s.uniqueId(),s.insertBefore(e),e.attr(u.SURROGATE_ATTR,t),s},u._swapOrder=function(e,t){e[u.SURROGATE_KEY]=u._createSurrogate(t),t.appendTo(t.parent())},u._restoreOrder=function(e){var t=u._getDrawer(e),i=e[u.SURROGATE_KEY];t&&i&&t.attr(u.SURROGATE_ATTR)===i.attr("id")&&(t.insertAfter(i),t.removeAttr(u.SURROGATE_ATTR),i.remove())},u._applyModality=function(e,t){var s=e;u._isModal(s)&&(s[u.GLASS_PANE_KEY]=u._addGlassPane(t),u._swapOrder(s,t),i(s[u.CONTENT_KEY]).attr("aria-hidden","true"),window.setTimeout(function(){s[u.GLASS_PANE_KEY].addClass(u.GLASSPANE_DIM_SELECTOR)},0))},u._removeModality=function(e){u._isModal(e)&&(e[u.GLASS_PANE_KEY].remove(),u._restoreOrder(e),i(e[u.CONTENT_KEY]).removeAttr("aria-hidden"))},u.setupPanToReveal=function(e){var o,r,a,l,h,d,c,p,m,_,g,f,v,y,E=e;if(null==i(E).attr("oj-data-pansetup")){i(E).attr("oj-data-pansetup","true"),E.displayMode="push",o=u._getDrawer(E),a=u._getOuterWrapper(o),h={touchAction:"pinch-zoom",recognizers:[[s.Pan,{direction:s.DIRECTION_HORIZONTAL}]]};var b=t.AgentUtils.getAgentInfo();b.os!==t.AgentUtils.OS.IOS&&b.os!==t.AgentUtils.OS.ANDROID||(h.inputClass=s.TouchInput),d=!1,null==(g=E.edge)&&(g=o.hasClass("oj-offcanvas-start")?"start":"end"),y=u._isRTL(),i(a).ojHammer(h).on("panstart",function(e){switch(c=null,e.gesture.direction){case s.DIRECTION_LEFT:Math.abs(e.gesture.deltaY)<Math.abs(e.gesture.deltaX)&&(c=y?"end":"start");break;case s.DIRECTION_RIGHT:Math.abs(e.gesture.deltaY)<Math.abs(e.gesture.deltaX)&&(c=y?"start":"end")}null!==c&&(e.gesture.angle<0&&(e.gesture.deltaX<-100||e.gesture.deltaY<-100)||(p={direction:c,distance:Math.abs(e.gesture.deltaX)},m=i.Event("ojpanstart"),o.trigger(m,p),m.isDefaultPrevented()||(n.getContext(a.get(0)).getBusyContext().whenReady().then(function(){null==(r=E.size)&&(r=o.outerWidth(),E.size=r),r>0?d=!0:u._toggleClass(E,l,!1)}),E._closePromise=null,(l=u._getAnimateWrapper(E)).off(".oc"),u._toggleClass(E,l,!0),e.gesture.srcEvent.stopPropagation(),e.gesture.srcEvent.preventDefault(),e.stopPropagation())))}).on("panmove",function(e){d&&(_=e.gesture.deltaX,"start"===c&&_>0&&!y||"start"===c&&_<0&&y||"end"===c&&_<0&&!y||"end"===c&&_>0&&y?u._setTranslationX(l,g,"0px"):(_=Math.abs(_),o.css("width",_),l.removeClass(u.TRANSITION_SELECTOR),u._setTranslationX(l,g,_+"px"),p={direction:c,distance:_},m=i.Event("ojpanmove"),o.trigger(m,p),e.gesture.srcEvent.stopPropagation(),e.stopPropagation()))}).on("panend",function(e){if(d){if(d=!1,_=Math.abs(e.gesture.deltaX),p={distance:_},m=i.Event("ojpanend"),o.trigger(m,p),e.stopPropagation(),!m.isDefaultPrevented())return u._animateWrapperAndDrawer(l,o,g,r,E),i.data(o[0],u._DATA_OFFCANVAS_KEY,E),i.data(o[0],u._DATA_EDGE_KEY,g),void u._registerCloseHandler(E);if("translate3d(0px, 0px, 0px)"===l[0].style.transform)return u._toggleClass(E,l,!1),l.removeClass(u.TRANSITION_SELECTOR),void o.trigger("ojclose",E);f="transitionend webkitTransitionEnd otransitionend oTransitionEnd",v=function(){u._toggleClass(E,l,!1),l.removeClass(u.TRANSITION_SELECTOR),l.off(f,v),o.trigger("ojclose",E)},l.on(f,v),l.addClass(u.TRANSITION_SELECTOR),u._setTranslationX(l,"start","0px")}})}},u._animateWrapperAndDrawer=function(e,i,s,n,o){var r,a,l,h,d,c,p,m,_,g,f,v;if(e.removeClass(u.TRANSITION_SELECTOR),r=Math.round(1e3/60),"none"!==(a=e.css("transform"))){l=a.split("(")[1].split(")")[0].split(",");var y=t.AgentUtils.getAgentInfo(),E="ie"===y.browser&&11===y.browserVersion?12:4;h=parseInt(l[E],10),d=h,c="end"===s?0-n:n,u._isRTL()&&(c=0-c),m=Math.max(1,Math.abs(c-h)/(400/r)),_=(new Date).getTime(),g=function(){d===h||""!==e.get(0).style.transform?(f=(new Date).getTime(),v=Math.max(m,m*Math.max((f-_)/r)),_=f,h<c?h=Math.min(c,h+v):h>c&&(h=Math.max(c,h-v)),u._setTranslationX(e,s,Math.abs(h)+"px"),i.css("width",Math.abs(h)+"px"),h===c?(window.cancelAnimationFrame(p),e.addClass(u.TRANSITION_SELECTOR),i.trigger("ojopen",o)):p=window.requestAnimationFrame(g)):window.cancelAnimationFrame(p)},p=window.requestAnimationFrame(g)}},u.tearDownPanToReveal=function(e){var t=u._getDrawer(e),s=u._getOuterWrapper(t);i(s).off("panstart panmove panend")};const p=u.close,m=u.open,_=u.setupResponsive,g=u.setupPanToReveal,f=u.tearDownResponsive,v=u.tearDownPanToReveal,y=u.toggle,E=u._getOuterWrapper;e._getOuterWrapper=E,e.close=p,e.open=m,e.setupPanToReveal=g,e.setupResponsive=_,e.tearDownPanToReveal=v,e.tearDownResponsive=f,e.toggle=y,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojkeyboardfocus-utils",["exports","jquery","ojs/ojcore-base","ojs/ojpopupcore","ojs/ojdomutils"],function(e,t,i,s,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;const o='input, select, button, a[href], textarea, object, [tabIndex]:not([tabIndex="-1"]), [tabindex]:not([tabindex="-1"])',r=function(e){return!(0===e.offsetHeight||0===e.offsetWidth||"hidden"===window.getComputedStyle(e).visibility)},a=function(e){var t=[];let i=e.querySelectorAll('[data-oj-tabmod], input, select, button, a[href], textarea, object, [tabIndex]:not([tabIndex="-1"]), [tabindex]:not([tabindex="-1"])');for(var s=0;s<i.length;s++){var n=i[s];!n.disabled&&r(n)&&t.push(n)}return t},l=function(e,t){var s=[],n=i.AgentUtils.getAgentInfo(),a=!0;if(i.AgentUtils.BROWSER.IE===n.browser&&null==e.parentNode&&(a=!1),a)for(var l=e.querySelectorAll(o),h=l.length,d=0;d<h;d++){var c=l[d];if(!c.disabled&&(t||r(c)))c.tabIndex>=0&&s.push(c)}return s},h=function(e){var t=e.getAttribute("aria-readonly");e.setAttribute("data-oj-ariareadonlymod",t),e.removeAttribute("aria-readonly")},d=function(e){var t=e.tabIndex;e.setAttribute("data-oj-tabmod",t),e.tabIndex=-1};e.checkVisibility=r,e.disableAllFocusableElements=function(e,t,i){for(var s=[],n=l(e,!0),o=0;o<n.length;o++)t&&n[o]===document.activeElement||(d(n[o]),s.push(n[o])),i&&n[o].hasAttribute("aria-readonly")&&h(n[o]);return s},e.disableElement=d,e.enableAllFocusableElements=function(e){for(var t=e.querySelectorAll("[data-oj-tabmod]"),i=0;i<t.length;i++){var s=parseInt(t[i].getAttribute("data-oj-tabmod"),10);if(t[i].removeAttribute("data-oj-tabmod"),t[i].tabIndex=s,t[i].hasAttribute("data-oj-ariareadonlymod")){var n=t[i].getAttribute("data-oj-ariareadonlymod");t[i].removeAttribute("data-oj-ariareadonlymod"),t[i].setAttribute("aria-readonly",n)}}return t},e.getActionableElementsInNode=a,e.getFocusableElementsInNode=l,e.getLogicalChildPopup=function(e){for(var s=i.ZOrderUtils.findOpenPopups(),o=0;o<s.length;o++){var r=s[o].firstElementChild,a=n.getLogicalParent(t(r));if(null!=a&&t(e).has(a.get(0)).length>0&&i.ZOrderUtils.getStatus(r)===i.ZOrderUtils.STATUS.OPEN)return r}return null},e.isActionableElement=function(e){var t=e.parentNode;if(null!=t)for(var i=a(t),s=0;s<i.length;s++)if(i[0]===e)return!0;return!1},Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojdatacollection-common",["exports","ojs/ojcore-base","ojs/ojdomutils","ojs/ojlogger","ojs/ojkeyboardfocus-utils"],function(e,t,i,s,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const o=function(){};o._DATA_OJ_TABMOD="data-oj-tabmod",o._FOCUSABLE_ELEMENTS_TAG=["input","select","button","a","textarea","object"],o.CHECKVIEWPORT_THRESHOLD=3,o.getFocusableElementsInNode=function(e,t){return n.getFocusableElementsInNode(e,t)},o.checkVisibility=function(e){return n.checkVisibility(e)},o.disableElement=function(e){n.disableElement(e)},o.disableAllFocusableElements=function(e,t,i){return n.disableAllFocusableElements(e,t,i)},o.enableAllFocusableElements=function(e){return n.enableAllFocusableElements(e)},o.isFromDefaultSelector=function(e){return e.target.classList.contains("oj-selectorbox")},o.getActionableElementsInNode=function(e){return n.getActionableElementsInNode(e)},o.isElementOrAncestorFocusable=function(e,t){return!(null==e||t&&t(e))&&(!!e.hasAttribute(o._DATA_OJ_TABMOD)||(e.tabIndex>=0||(o._FOCUSABLE_ELEMENTS_TAG.indexOf(e.tagName.toLowerCase())>-1||o.isElementOrAncestorFocusable(e.parentElement,t))))},o.handleActionableTab=function(e,t){var i=o.getFocusableElementsInNode(t);return i.length>0&&e.target===i[i.length-1]&&(i[0].focus(),!0)},o.handleActionablePrevTab=function(e,t){var i=o.getFocusableElementsInNode(t);return i.length>0&&e.target===i[0]&&(i[i.length-1].focus(),!0)},o.isEventClickthroughDisabled=function(e,t){for(var i=e.target;null!=i&&i!==t;){if(o.isClickthroughDisabled(i))return!0;i=i.parentNode}return!1},o.isClickthroughDisabled=function(e){return"disabled"===e.dataset.ojClickthrough},o.getDefaultScrollBarWidth=function(e){var t;if(e&&e.style){var i=e.style.visibility,s=e.style.position,n=e.style.overflowY,o=e.style.height,r=e.style.width;e.style.visibility="hidden",e.style.position="absolute",e.style.overflowY="hidden",e.style.height="50px",e.style.width="50px";var a=e.offsetWidth-e.clientWidth;e.style.overflowY="scroll",t=e.offsetWidth-e.clientWidth-a,e.style.width=r,e.style.height=o,e.style.overflowY=n,e.style.position=s,e.style.visibility=i}return t},o.disableDefaultBrowserStyling=function(e){e.setAttribute("x-ms-format-detection","none")},o.applyMergedInlineStyles=function(e,t,i){var s=o.convertStringToStyleObj(i),n=o.convertStringToStyleObj(t),r=Object.assign({},s,n);o.applyStyleObj(e,r)},o.convertStringToStyleObj=function(e){var t={};if(e.split)for(var i=e.split(";"),s=0;s<i.length;s++){var n=i[s];if(""!==n){var o=n.split(":");2===o.length&&(t[o[0].trim()]=o[1].trim())}}return t},o.applyStyleObj=function(e,t){for(var i=Object.keys(t),s=Object.values(t),n=0;n<i.length;n++)e.style[i[n]]=s[n]},o.isMobileTouchDevice=function(){var e=t.AgentUtils.getAgentInfo();return e.os===t.AgentUtils.OS.IOS||e.os===t.AgentUtils.OS.ANDROID||e.os===t.AgentUtils.OS.WINDOWSPHONE},o.getNoJQFocusHandlers=function(e,t){return i.getNoJQFocusHandlers(e,t)},o.areKeySetsEqual=function(e,i){if(e===i)return!0;var s,n,o=e.isAddAll();if(o!==i.isAddAll())return!1;if(o?(s=e.deletedValues(),n=i.deletedValues()):(s=e.values(),n=i.values()),s.size!==n.size)return!1;for(var r=s.values(),a=n.values(),l=r.next(),h=a.next();!l.done;){if(!t.KeyUtils.equals(l.value,h.value))return!1;l=r.next(),h=a.next()}return!0},o.KEYBOARD_KEYS={_SPACEBAR:" ",_SPACEBAR_IE:"SpaceBar",_SPACEBAR_CODE:32,_ENTER:"Enter",_ENTER_CODE:13,_UP:"ArrowUp",_UP_IE:"Up",_UP_CODE:38,_DOWN:"ArrowDown",_DOWN_IE:"Down",_DOWN_CODE:40,_LEFT:"ArrowLeft",_LEFT_IE:"Left",_LEFT_CODE:37,_RIGHT:"ArrowRight",_RIGHT_IE:"Right",_RIGHT_CODE:39,_HOME:"Home",_HOME_CODE:36,_END:"End",_END_CODE:35,_TAB:"Tab",_TAB_CODE:9,_ESCAPE:"Escape",_ESCAPE_IE:"Esc",_ESCAPE_CODE:27,_F2:"F2",_F2_CODE:113,_NUM5_KEY:"5",_NUM5_KEY_CODE:53,_LETTER_A:"a",_LETTER_A_UPPERCASE:"A",_LETTER_A_CODE:65,_META:"Meta",_META_CODE:91},o.isEnterKeyEvent=function(e){return e===o.KEYBOARD_KEYS._ENTER||e===o.KEYBOARD_KEYS._ENTER_CODE},o.isSpaceBarKeyEvent=function(e){return e===o.KEYBOARD_KEYS._SPACEBAR||e===o.KEYBOARD_KEYS._SPACEBAR_IE||e===o.KEYBOARD_KEYS._SPACEBAR_CODE},o.isEscapeKeyEvent=function(e){return e===o.KEYBOARD_KEYS._ESCAPE||e===o.KEYBOARD_KEYS._ESCAPE_IE||e===o.KEYBOARD_KEYS._ESCAPE_CODE},o.isTabKeyEvent=function(e){return e===o.KEYBOARD_KEYS._TAB||e===o.KEYBOARD_KEYS._TAB_CODE},o.isF2KeyEvent=function(e){return e===o.KEYBOARD_KEYS._F2||e===o.KEYBOARD_KEYS._F2_CODE},o.isHomeKeyEvent=function(e){return e===o.KEYBOARD_KEYS._HOME||e===o.KEYBOARD_KEYS._HOME_CODE},o.isEndKeyEvent=function(e){return e===o.KEYBOARD_KEYS._END||e===o.KEYBOARD_KEYS._END_CODE},o.isArrowUpKeyEvent=function(e){return e===o.KEYBOARD_KEYS._UP||e===o.KEYBOARD_KEYS._UP_IE||e===o.KEYBOARD_KEYS._UP_CODE},o.isArrowDownKeyEvent=function(e){return e===o.KEYBOARD_KEYS._DOWN||e===o.KEYBOARD_KEYS._DOWN_IE||e===o.KEYBOARD_KEYS._DOWN_CODE},o.isArrowLeftKeyEvent=function(e){return e===o.KEYBOARD_KEYS._LEFT||e===o.KEYBOARD_KEYS._LEFT_IE||e===o.KEYBOARD_KEYS._LEFT_CODE},o.isArrowRightKeyEvent=function(e){return e===o.KEYBOARD_KEYS._RIGHT||e===o.KEYBOARD_KEYS._RIGHT_IE||e===o.KEYBOARD_KEYS._RIGHT_CODE},o.isNumberFiveKeyEvent=function(e){return e===o.KEYBOARD_KEYS._NUM5_KEY||e===o.KEYBOARD_KEYS._NUM5_KEY_CODE},o.isLetterAKeyEvent=function(e){return e===o.KEYBOARD_KEYS._LETTER_A||e===o.KEYBOARD_KEYS._LETTER_A_UPPERCASE||e===o.KEYBOARD_KEYS._LETTER_A_CODE},o.isMetaKeyEvent=function(e){return e===o.KEYBOARD_KEYS._META||e===o.KEYBOARD_KEYS._META_CODE},o.getAddEventKeysResult=function(e,t,i){var s,n,r,a,l;function h(e,t){return{key:e,index:t}}var d=e.slice(),c=[];t.keys.forEach(function(e){c.push(e)});var u=[],p=t.addBeforeKeys?t.addBeforeKeys:t.afterKeys;null!=p&&p.forEach(function(e){u.push(e)});var m=t.indexes;if(u.length===c.length)for(var _=0;c.length!==_;)for(_=c.length,s=c.length-1;s>=0;s--)r=c[s],o.containsKey(d,r)||(null!=(n=u[s])?-1!==(l=o._indexOfKey(d,n))&&(d.splice(l,0,r),u.splice(s,1),c.splice(s,1)):i&&(d.push(r),u.splice(s,1),c.splice(s,1)));else if(null!=m&&m.length===c.length){var g=[];for(s=0;s<c.length;s++)if(r=c[s],!o.containsKey(d,r))if(null!=(a=m[s])){for(var f=!1,v=0;v<g.length;v++)if(g[v].index>a){g.splice(v,0,h(r,a)),f=!0;break}f||g.push(h(r,a))}else i&&d.push(r);for(s=0;s<g.length;s++){var y=g[s];y.index<d.length?d.splice(y.index,0,y.key):y.index===d.length&&i&&d.push(y.key)}}else i&&c.forEach(function(e){d.push(e)});return d},o.containsKey=function(e,i){for(var s=0;s<e.length;s++)if(t.KeyUtils.equals(e[s],i))return!0;return!1},o._indexOfKey=function(e,i){for(var s=0;s<e.length;s++)if(t.KeyUtils.equals(e[s],i))return s;return-1},o.calculateOffsetTop=function(e,t){for(var i=0,s=t;s&&s!==e&&e.contains(s);)i+=s.offsetTop,s=s.offsetParent;return i},o.getLogicalChildPopup=function(e){return n.getLogicalChildPopup(e)},o.isElementIntersectingScrollerBounds=function(e,t){var i,s,n,o;if(t===document.documentElement)i=0,s=document.documentElement.clientHeight,n=0,o=document.documentElement.clientWidth;else{var r=t.getBoundingClientRect();i=r.top,s=r.bottom,n=r.left,o=r.right}var a=e.getBoundingClientRect();return a.top<=s&&a.bottom>=i&&a.left<=o&&a.right>=n},o.getEventDetail=function(e,t){return new Promise(i=>{if(t.data&&t.metadata)i(t);else{const n=e.getCapability("fetchByKeys");n&&"lookup"===n.implementation?e.fetchByKeys({keys:new Set(t.keys),scope:"global"}).then(e=>{t.data=[],t.metadata=[],t.keys.forEach(i=>{const s=e.results.get(i);t.data.push(s.data),t.metadata.push(s.metadata)}),i(t)},e=>{s.error("Error fetching event detail due to fetchByKeys: "+e),i(null)}):(s.error("Error fetching event detail due to fetchByKeys: capability"),i(null))}})};const r=o.applyMergedInlineStyles,a=o.applyStyleObj,l=o.areKeySetsEqual,h=o.containsKey,d=o.convertStringToStyleObj,c=o.disableElement,u=o.disableAllFocusableElements,p=o.disableDefaultBrowserStyling,m=o.enableAllFocusableElements,_=o.getActionableElementsInNode,g=o.getAddEventKeysResult,f=o.getDefaultScrollBarWidth,v=o.isElementOrAncestorFocusable,y=o.isIterateAfterDoneNotAllowed=function(e){if(e&&e.getCapability){var t=e.getCapability("fetchFirst");if(t&&"notAllowed"===t.iterateAfterDone)return!0}return!1},E=o.getFocusableElementsInNode,b=o.getLogicalChildPopup,S=o.getNoJQFocusHandlers,C=o.handleActionablePrevTab,I=o.handleActionableTab,j=o.isArrowDownKeyEvent,T=o.isArrowLeftKeyEvent,O=o.isArrowRightKeyEvent,w=o.isArrowUpKeyEvent,A=o.isClickthroughDisabled,x=o.isEndKeyEvent,D=o.isEnterKeyEvent,L=o.isEscapeKeyEvent,P=o.isEventClickthroughDisabled,N=o.isFromDefaultSelector,R=o.isF2KeyEvent,M=o.isHomeKeyEvent,k=o.isMobileTouchDevice,F=o.isSpaceBarKeyEvent,B=o.isTabKeyEvent,H=o.isNumberFiveKeyEvent,K=o.isLetterAKeyEvent,U=o.isMetaKeyEvent,V=o.KEYBOARD_KEYS,G=o.CHECKVIEWPORT_THRESHOLD,z=o.calculateOffsetTop,W=o.isElementIntersectingScrollerBounds,Y=o.getEventDetail,q=o.isRequestIdleCallbackSupported=function(){return null!=window.requestIdleCallback&&null!=window.cancelIdleCallback&&null!=window.IdleDeadline};e.CHECKVIEWPORT_THRESHOLD=G,e.KEYBOARD_KEYS=V,e.applyMergedInlineStyles=r,e.applyStyleObj=a,e.areKeySetsEqual=l,e.calculateOffsetTop=z,e.containsKey=h,e.convertStringToStyleObj=d,e.disableAllFocusableElements=u,e.disableDefaultBrowserStyling=p,e.disableElement=c,e.enableAllFocusableElements=m,e.getActionableElementsInNode=_,e.getAddEventKeysResult=g,e.getDefaultScrollBarWidth=f,e.getEventDetail=Y,e.getFocusableElementsInNode=E,e.getLogicalChildPopup=b,e.getNoJQFocusHandlers=S,e.handleActionablePrevTab=C,e.handleActionableTab=I,e.isArrowDownKeyEvent=j,e.isArrowLeftKeyEvent=T,e.isArrowRightKeyEvent=O,e.isArrowUpKeyEvent=w,e.isClickthroughDisabled=A,e.isElementIntersectingScrollerBounds=W,e.isElementOrAncestorFocusable=v,e.isEndKeyEvent=x,e.isEnterKeyEvent=D,e.isEscapeKeyEvent=L,e.isEventClickthroughDisabled=P,e.isF2KeyEvent=R,e.isFromDefaultSelector=N,e.isHomeKeyEvent=M,e.isIterateAfterDoneNotAllowed=y,e.isLetterAKeyEvent=K,e.isMetaKeyEvent=U,e.isMobileTouchDevice=k,e.isNumberFiveKeyEvent=H,e.isRequestIdleCallbackSupported=q,e.isSpaceBarKeyEvent=F,e.isTabKeyEvent=B,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojdomscroller",["ojs/ojcore-base","jquery","ojs/ojdatacollection-common","ojs/ojlogger"],function(e,t,i,s){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const n=function(e,i,s){s=s||{},this._data=i,this._asyncIterator=s.asyncIterator,this._element=t(e)[0],this._contentElement=s.contentElement,this._fetchSize=s.fetchSize,this._fetchSize=this._fetchSize>0?this._fetchSize:25,this._maxCount=s.maxCount,this._maxCount=this._maxCount>0?this._maxCount:500,this._rowCount=s.initialRowCount>0?s.initialRowCount:0,this._successCallback=s.success,this._requestCallback=s.request,this._errorCallback=s.error,this._isOverflowCallback=s.isOverflow,this._beforeFetchCallback=s.beforeFetch,this._beforeScrollCallback=s.beforeScroll,this._localKeyValidator=s.localKeyValidator,this._registerDataSourceEventListeners(),this._fetchTrigger=s.fetchTrigger,(null==this._fetchTrigger||isNaN(this._fetchTrigger))&&(this._fetchTrigger=0),this._initialScrollTop=this._element.scrollTop,this._lastFetchTrigger=0,this._isScrollTriggeredByMouseWheel=!1,this._checkViewportCount=0,this._fetchThreshold=.25;var n=this._getScrollEventElement();this._scrollEventListener=function(){this._beforeScrollCallback&&this._beforeScrollCallback();var e=this._element.scrollTop,t=this._element.clientHeight,i=this._element.scrollHeight-t;i>0&&(this._contentElement?this._handleExternalScrollerScrollTop(e,t):this._handleScrollerScrollTop(e,i))}.bind(this),n.addEventListener("scroll",this._scrollEventListener),this._wheelEventListener=function(){this._isScrollTriggeredByMouseWheel=!0}.bind(this),n.addEventListener("wheel",this._wheelEventListener,{passive:!0}),this._mouseDownEventListener=function(){this._isScrollTriggeredByMouseWheel=!1}.bind(this),n.addEventListener("mousedown",this._mouseDownEventListener)};return n.prototype.setAsyncIterator=function(e){this._asyncIterator=e},n.prototype.setFetchTrigger=function(e){null!=e&&!isNaN(e)&&e>=0&&(this._fetchTrigger=e)},n.prototype._getScrollEventElement=function(){return this._element===document.body||this._element===document.documentElement?window:this._element},n.prototype.destroy=function(){this._unregisterDataSourceEventListeners();var e=this._getScrollEventElement();e&&(e.removeEventListener("scroll",this._scrollEventListener),e.removeEventListener("wheel",this._wheelEventListener,{passive:!0}),e.removeEventListener("mousedown",this._mouseDownEventListener))},n.prototype.checkViewport=function(e){return this._asyncIterator&&this._element.clientHeight>0&&(e||!this.isOverflow()||this._isEndReached())&&(this._checkViewportCount+=1,this._checkViewportCount===i.CHECKVIEWPORT_THRESHOLD&&s.warn("Viewport not satisfied after multiple fetch, make sure the component is height constrained or specify a scroller."),this._beforeFetchCallback(this._element.scrollTop,!0))?this._fetchMoreRows():(this._checkViewportCount=0,Promise.resolve(null))},n.prototype._doFetch=function(e){var t=this;if(this._beforeFetchCallback(e-this._fetchTrigger,!1)){this._lastFetchTrigger=e;var i=t._isScrollTriggeredByMouseWheel;this._fetchPromise=this._fetchMoreRows().then(function(e){t._successCallback&&(e.isMouseWheel=i,t._successCallback(e),t._fetchPromise=null,t._nextFetchTrigger=void 0)},function(e){t._errorCallback&&(t._errorCallback(e),t._fetchPromise=null,t._nextFetchTrigger=void 0)})}else this._nextFetchTrigger=void 0},n.prototype._handleExternalScrollerScrollTop=function(e,t){if(!this._fetchPromise&&this._asyncIterator){var i=this._contentElement.getBoundingClientRect();i.bottom-this._fetchTrigger-i.height*this._fetchThreshold<=t&&this._doFetch(e)}},n.prototype._handleScrollerScrollTop=function(e,t){!this._fetchPromise&&this._asyncIterator&&(t!==this._lastMaxScrollTop&&(this._nextFetchTrigger=Math.max(0,(t-this._fetchTrigger-e)/2),this._lastMaxScrollTop=t),null!=this._nextFetchTrigger&&e-this._lastFetchTrigger>this._nextFetchTrigger)?this._doFetch(e):t-e<1&&e>this._fetchTrigger&&(this._fetchPromise?this._asyncIterator?null!=this._requestCallback&&this._requestCallback():null!=this._errorCallback&&this._errorCallback():this._asyncIterator&&this._doFetch(e))},n.prototype.isOverflow=function(){if(this._isOverflowCallback)return this._isOverflowCallback();var t=(this._contentElement?this._contentElement.scrollHeight:this._element.scrollHeight)-(this._element.clientHeight+this._fetchTrigger);return 1===t&&e.AgentUtils.getAgentInfo().browser===e.AgentUtils.BROWSER.EDGE&&(t=0),t>0},n.prototype._isEndReached=function(){return this._element.scrollHeight-this._element.clientHeight-this._element.scrollTop<Math.max(1,this._fetchTrigger)},n.prototype._fetchMoreRows=function(){if(!this._fetchPromise){var e=this._maxCount-this._rowCount;if(e>0){var t=this;if(this._asyncIterator)return this._fetchPromise=this._asyncIterator.next().then(function(i){var s=i;if(t._fetchPromise=null,null!=s&&null!=s.value){var n=s.value.data.length;n>0&&(t._rowCount+=n,e<=n&&(s.maxCount=t._maxCount,s.maxCountLimit=!0,n>e&&(s.value.data=s.value.data.slice(0,e),s.value.metadata=s.value.metadata.slice(0,e),null!=s.value.fetchParameters&&(s.value.fetchParameters.size=e)))),(s.done||s.maxCountLimit)&&(t._asyncIterator=null)}return Promise.resolve(s)}),this._fetchPromise}return this._asyncIterator=null,Promise.resolve({maxCount:this._maxCount,maxCountLimit:!0})}return this._fetchPromise},n.prototype._handleDataRowMutateEvent=function(e){if(null!=this._asyncIterator){var t,i,s,n=this;null!=e.detail.add&&(null!=(t=e.detail.add).indexes?i=t.indexes:null!=t.addBeforeKeys?s=t.addBeforeKeys:null!=t.afterKeys&&(s=t.afterKeys),this._handleDataRowAddedOrRemoved(s,i,function(){n._rowCount+=1})),null!=e.detail.remove&&(null!=(t=e.detail.remove).indexes?i=t.indexes:null!=t.keys&&(s=t.keys),this._handleDataRowAddedOrRemoved(s,i,function(){n._rowCount-=1}))}},n.prototype._handleDataRowAddedOrRemoved=function(e,t,i){if(t)for(var s=0;s<t.length;s++){var n=t[s];void 0!==n&&this._rowCount>0&&n<=this._rowCount&&i()}else if(e){var o=this._localKeyValidator;null!=o&&e.forEach(function(e){o(e)&&i()})}},n.prototype._registerDataSourceEventListeners=function(){var e,t,i=this._data;if(null!=i)for(this._unregisterDataSourceEventListeners(),this._dataProviderEventHandlers=[],this._dataProviderEventHandlers.push({eventType:"mutate",eventHandler:this._handleDataRowMutateEvent.bind(this)}),e=0;e<this._dataProviderEventHandlers.length;e++)(t=i.addEventListener(this._dataProviderEventHandlers[e].eventType,this._dataProviderEventHandlers[e].eventHandler))&&(this._dataProviderEventHandlers[e].eventHandler=t)},n.prototype._unregisterDataSourceEventListeners=function(){var e,t=this._data;if(null!=this._dataProviderEventHandlers&&null!=t)for(e=0;e<this._dataProviderEventHandlers.length;e++)t.removeEventListener(this._dataProviderEventHandlers[e].eventType,this._dataProviderEventHandlers[e].eventHandler)},n}),define("ojs/ojdataproviderscroller",["exports","ojs/ojcore-base","jquery","ojs/ojcontext","ojs/ojdatacollection-common","ojs/ojconfig","ojs/ojanimation","ojs/ojlogger","ojs/ojdomscroller","ojs/ojset","ojs/ojmap"],function(e,t,i,s,n,o,r,a,l,h,d){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,l=l&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l,h=h&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h,d=d&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d;var c=function(e,t,i){this.m_root=t,this.m_widget=e,this.m_fetching=!1,this.setDataProvider(i),this.Init()};t.Object.createSubclass(c,t.Object,"DataProviderContentHandler"),c.prototype.Init=function(){c.superclass.Init.call(this)},c.prototype.notifyShown=function(){},c.prototype.notifyAttached=function(){},c.prototype.cleanItems=function(e,t){if(void 0===e&&(e=this.getTemplateEngine()),void 0===t&&(t=this.m_root),e&&t)for(var i=t.childNodes,s=0;s<i.length;s++)e.clean(i[s])},c.prototype.Destroy=function(e){null!=this.m_superRoot&&(this.m_root=this.m_superRoot),this.cleanItems(),e&&i(this.m_root).empty(),this._destroySparkles(),this.m_widget=null,this.m_root=null,this.m_superRoot=null},c.prototype.IsReady=function(){return!this.m_fetching},c.prototype.setRootAriaProperties=function(){this.shouldUseGridRole()?this.m_root.setAttribute("role","grid"):this.IsHierarchical()?this.m_root.setAttribute("role","tree"):this.m_root.setAttribute("role","listbox")},c.prototype.RenderContent=function(){this.signalTaskStart("rendering content"),this.setRootAriaProperties(),this.fetchRows(!1),this.signalTaskEnd()},c.prototype.GetKey=function(e){return e.key},c.prototype.FindElementByKey=function(e){for(var i=this.m_root.querySelectorAll("."+this.m_widget.getItemElementStyleClass()+", .oj-listview-temp-item.oj-listview-card-animated"),s=0;s<i.length;s++){var n=i[s];if((e==this.GetKey(n)||t.Object.compareValues(e,this.GetKey(n)))&&!n.classList.contains("oj-listview-item-remove")&&!n.classList.contains("oj-drop"))return n}return null},c.prototype.getDataProvider=function(){return this.m_dataProvider},c.prototype.setDataProvider=function(e){this._removeDataSourceEventListeners(),null!=e&&(this.m_handleModelMutateEventListener=this.handleModelMutateEvent.bind(this),this.m_handleModelRefreshEventListener=this.handleModelRefreshEvent.bind(this),e.addEventListener("mutate",this.m_handleModelMutateEventListener),e.addEventListener("refresh",this.m_handleModelRefreshEventListener)),this.m_dataProvider=e},c.prototype._removeDataSourceEventListeners=function(){var e=this.getDataProvider();null!=e&&(e.removeEventListener("mutate",this.m_handleModelMutateEventListener),e.removeEventListener("refresh",this.m_handleModelRefreshEventListener),t.TableDataSourceAdapter&&e instanceof t.TableDataSourceAdapter&&e.destroy())},c.prototype.loadTemplateEngine=function(){return null!=this.m_widget.getItemTemplate()&&null==this.m_widget._getItemRenderer()?new Promise(e=>{const t={customElement:this.m_widget._GetCustomElement()};o.__getTemplateEngine(t).then(t=>{this.m_engine=t,e(t)},e=>{throw new Error("Error loading template engine: "+e)})}):Promise.resolve(null)},c.prototype.getTemplateEngine=function(){return this.m_engine},c.prototype.fetchRows=function(e){this.m_widget.showStatusText()},c.prototype.GetChildElementTagName=function(){return"LI"},c.prototype.GetReferenceNode=function(e,t){if(-1===t)return null;var s=i(e).children("."+this.m_widget.getItemElementStyleClass()+", ."+this.m_widget.getEmptyTextStyleClass()+", .oj-listview-temp-item");return t===s.length?null:s[t]},c.prototype.addItem=function(e,t,s,n,o,r,a){var l=document.createElement(this.GetChildElementTagName());i(l).uniqueId();var h=this.GetReferenceNode(e,t);this.m_widget.BeforeInsertItem&&this.m_widget.BeforeInsertItem(),e.insertBefore(l,h);var d=i(e).children().index(l);return this._addOrReplaceItem(l,d,e,t,s,n,o,r,!1,a)},c.prototype.replaceItem=function(e,t,s,n,o,r,a){this.signalTaskStart("replace item");var l=e.parentNode,h=i(l).children().index(e),d=document.createElement(this.GetChildElementTagName());return o&&o.clean(e),i(e).replaceWith(d),this._addOrReplaceItem(d,h,l,t,s,n,o,r,a)},c.prototype._addOrReplaceItem=function(e,t,s,n,o,r,a,l,h,d,c){null==l&&(l=this.afterRenderItem.bind(this));var u,p=this.createContext(t,o,r,e,d),m=this.m_widget._getItemRenderer(),_=this.m_widget.getItemTemplate(),g=!1;if(null!=m){var f=m.call(this,p);null!=f&&(null===f.parentNode||f.parentNode instanceof DocumentFragment?e.appendChild(f):null!=f.parentNode||f.toString&&((u=document.createElement("span")).appendChild(document.createTextNode(f.toString())),e.appendChild(u)))}else if(null!=_&&null!=a){var v=this.m_widget.GetRootElement()[0],y=this.GetBindingContext(p),E=this.m_widget.getAs?this.m_widget.getAs():null,b=a.execute(v,_,y,E);if(c)g=c(b);else for(var S=this.GetChildElementTagName(),C=0;C<b.length;C++){if(b[C].tagName===S){s.replaceChild(b[C],e),g=!0;break}e.appendChild(b[C])}}else(u=document.createElement("span")).appendChild(document.createTextNode(null==o?"":o.toString())),e.appendChild(u);var I=s.children?s.children[t]:this._getItemFromDocumentFragment(s,t);return p.parentElement=I,i.data(I,"data",o),i.data(I,"metadata",d),l(I,p,g,h)},c.prototype._getItemFromDocumentFragment=function(e,t){for(var i=0,s=e.childNodes,n=0;n<s.length;n++){var o=s[n];if(!o)break;if(1===o.nodeType){if(i===t)return o;i+=1}}return null},c.prototype.GetBindingContext=function(e){var t={};return t.data=e.data,t.index=e.index,t.key=e.key,t.componentElement=e.componentElement,t.item={data:e.data,metadata:e.metadata},t},c.prototype.afterRenderItem=function(e,t){e.key=t.key;var s=i(e);s.uniqueId();var n,o=this.m_widget.getGroupItemStyleClass();if(n=e.firstElementChild&&e.firstElementChild.classList.contains(o)?this.m_widget.getSingleFocusableElement(i(e.firstElementChild)):this.m_widget.getSingleFocusableElement(s),this.shouldUseGridRole())if(null==t.leaf||t.leaf)if(this.isCardLayout())n.attr("role","gridcell");else if(s.attr("role","row"),n!==s)n.attr("role","gridcell");else{if(0===n.children().length)n.get(0).innerHTML="<div role='gridcell' class='oj-listview-cell-element'></div>";else{var r=document.createElement("div");for(r.setAttribute("role","gridcell"),r.className="oj-listview-cell-element";n[0].firstChild;)r.appendChild(n[0].firstChild);n[0].appendChild(r)}}else s.attr("role","presentation");else n.attr("role",this.IsHierarchical()?"treeitem":"option"),n!==s&&s.attr("role","presentation");return n.addClass(this.m_widget.getFocusedElementStyleClass()),this.isFocusable(t)||s.addClass("oj-skipfocus"),s.addClass(this.m_widget.getItemElementStyleClass()),Promise.resolve(!0)},c.prototype.getMetadata=function(e,t,i,s){var n=i.context;return null==n&&(n={}),null==n.index&&(n.index=e),null==n.key&&(n.key=t),n},c.prototype.handleModelMutateEvent=function(e){null!=this.m_root&&this.m_widget.isAvailable()&&(null!=e.detail.remove&&this.handleModelRemoveEvent(e),null!=e.detail.add&&this.handleModelAddEvent(e),null!=e.detail.update&&this.handleModelChangeEvent(e),this.getValidatedEventDetailPromise&&this.getValidatedEventDetailPromise.then(()=>{null!=this.m_widget&&(e.detail.remove&&this.handleModelRemoveEvent(e),this.getValidatedEventDetailPromise=null)}))},c.prototype.handleModelRefreshEvent=function(e){},c.prototype._pushToEventQueue=function(e){null==this.m_eventQueue&&(this.m_eventQueue=[]),this.m_eventQueue.push(e)},c.prototype._processEventQueue=function(){var e;if(null!=this.m_eventQueue&&this.m_eventQueue.length>0){for(var t=0;t<this.m_eventQueue.length;t++)if("refresh"===(e=this.m_eventQueue[t].event).type&&(null==e.detail||null==e.detail.keys))return void this.handleModelRefreshEvent(e);"mutate"===(e=this.m_eventQueue.shift().event).type?this.handleModelMutateEvent(e):"refresh"===e.type&&e.detail&&e.detail.keys&&this.handleModelRefreshEvent(e)}},c.prototype._clearEventQueue=function(){null!=this.m_eventQueue&&(this.m_eventQueue.length=0)},c.prototype.addItemsForModelInsert=function(e,t,i,s,n){},c.prototype.getIndex=function(e,t){if(null==e||0===e.length||t>=e.length)return-1;var s=e[t],n=this.FindElementByKey(s);return null!=n?i(n.parentNode).children().index(n):-1},c.prototype._getMaxCount=function(){return this.m_widget.options.scrollPolicyOptions.maxCount},c.prototype._handleScrollerMaxRowCount=function(){a.info("ScrollPolicyOptions max count has been reached.")},c.prototype.truncateIfOverMaxCount=function(e,t){const i=e.data.length,s=i+t,n=this._getMaxCount()-s;n<0&&(e.data.splice(n,i),e.metadata.splice(n,i),this._handleScrollerMaxRowCount())},c.prototype.getValidatedEventDetail=function(e){const t=this.m_widget._addComponentBusyState("validating mutation add event detail");return n.getEventDetail(this.getDataProvider(),e).then(e=>{if(null===e)return t(),null;const i="."+this.m_widget.getItemElementStyleClass(),s=this.m_root.querySelectorAll(i);return this.truncateIfOverMaxCount(e,s.length),t(),e})},c.prototype.handleModelAddEvent=function(e){if(this.IsReady()){this.signalTaskStart("handling model add event"),this.m_superRoot&&0===this.m_root.childNodes.length&&this.m_superRoot.appendChild(this.m_root.parentNode);var t,i,s=e.detail.add,n=s.data,o=[];s.keys.forEach(function(e){o.push(e)});var r=!0;void 0!==s.addBeforeKeys?i=s.addBeforeKeys:void 0!==s.afterKeys&&(i=s.afterKeys,r=!1),i&&(t=[],i.forEach(function(e){t.push(e)}));var a=s.parentKeys,l=s.indexes,h=s.metadata;null!=n&&null!=o&&o.length>0&&n.length>0&&o.length===n.length&&(null==l||l.length===n.length)?(this.addItemsForModelInsert(n,l,o,a,r,t,h),this.signalTaskEnd()):(null==n||null==h)&&null!=o&&o.length>0?this.getValidatedEventDetailPromise=this.getValidatedEventDetail(e.detail.add).then(e=>{null!=this.m_widget?(null!=e&&null!=e.data&&(n=e.data,h=e.metadata,n.length>0&&o.length===n.length&&(null==l||l.length===n.length)&&this.addItemsForModelInsert(n,l,o,a,r,t,h)),this.signalTaskEnd()):this.signalTaskEnd()}):this.signalTaskEnd()}else this._pushToEventQueue({type:e.type,event:e})},c.prototype.afterRenderItemForInsertEvent=function(e,t,n){this.signalTaskStart("after render item from model insert event"),e.setAttribute("data-oj-context",""),this.afterRenderItem(e,t,n);var o=i(e),r=e.className;e._className=r,e.className="oj-listview-temp-item oj-listview-item-add-remove-transition";var a=this.isCardLayout();a&&(e.className=e.className+" oj-listview-card-animated "+this.m_widget.getItemStyleClass()),this.shouldUseGridRole()||o.children().wrapAll("<div></div>");var l=o.children().first();if(a||(l[0].className=r),l[0].key=e.key,this.shouldUseGridRole()){if(!a){var h=l[0].firstElementChild;h&&h.classList.add("oj-listview-cell-element")}}else l.attr("role",e.getAttribute("role")),o[0].hasAttribute("aria-selected")&&l.attr("aria-selected",e.getAttribute("aria-selected"));var d=this;return e.style.opacity=0,new Promise(function(i){s.getContext(e).getBusyContext().whenReady().then(function(){if(null!=d.m_widget){d.signalTaskStart("kick off animation for insert item");var s=e.className;e.style.opacity="",d.m_widget.StartAnimation(e,"add").then(function(){e.removeAttribute("data-oj-context"),d._handleAddTransitionEnd(t,e,s),i(!0)}),d.signalTaskEnd()}else i(!0)})})},c.prototype._handleAddTransitionEnd=function(e,t,s){if(null!=this.m_widget&&null!=t.parentNode){var n=s.split(" "),o=t.className.split(" "),r=t.classList.contains("oj-focus")&&t.classList.contains("oj-focus-highlight"),a=t.classList.contains("oj-selected"),l=t.classList.contains("oj-listview-card-animated");if(t.className=t._className,r&&(t.classList.add("oj-focus"),t.classList.add("oj-focus-highlight")),a&&t.classList.add("oj-selected"),l&&t.classList.add("oj-listview-card-animated"),o.forEach(function(e){-1===n.indexOf(e)&&t.classList.add(e)}),this.shouldUseGridRole()){if(!this.isCardLayout()){var h=t.firstElementChild;if(h){t._className.split(" ").forEach(function(e){h.classList.remove(e)}),h.classList.add("oj-listview-cell-element");var d=h.firstElementChild;d&&d.classList.remove("oj-listview-cell-element")}}}else i(t).children().children().unwrap();this.m_widget.itemInsertComplete(t,e),this.signalTaskEnd()}else this.signalTaskEnd()},c.prototype.handleModelRemoveEvent=function(e){var t=this,i=e.detail.remove.keys;if(null==i||0===i.size)return!1;if(!this.IsReady())return this._pushToEventQueue({type:e.type,event:e}),!1;this.signalTaskStart("handling model remove event");var s=null!=e.detail.add?e.detail.add.keys:new Set,n=[],o=[];if(i.forEach(function(e){var i=s.has(e);i||n.push(e);var r=t.FindElementByKey(e);null!=r?(t.signalTaskStart("handling model remove event for item: "+e),r.classList.add("oj-listview-item-remove"),r.parentNode.classList.contains("oj-listview-temp-item")&&(r=r.parentNode),o.push(t.removeItem(r,i)),t.signalTaskEnd()):a.log("handleModelRemoveEvent: cannot find item with key "+e)}),this.isSelectionEnabled()){if(n.length>0){var r=this.m_widget.options.selected,l=r.delete(n);if(r!==l){var h=[];l.values&&l.values().forEach(function(e){h.push(t.FindElementByKey(e))}),this.m_widget._setSelectionOption(l,null,h)}}s.size>0&&this.m_widget.resetInitialSelectionStateValidated()}return this.handleRemoveItemsPromises(o),this.signalTaskEnd(),!0},c.prototype.handleRemoveItemsPromises=function(e){},c.prototype.removeItem=function(e,t){var s=this;this.signalTaskStart("removing an item");var n=document.activeElement,o=e.contains(n),r=i(e).get(0),a=r.className;i(r).children().wrapAll("<div class='"+a+"'></div>"),r.className="oj-listview-item-add-remove-transition oj-listview-item-remove",r.children[0].key=e.key,this.signalTaskStart("kick off animation to remove an item"),this.m_widget.disableResizeListener();var l=this.m_widget.StartAnimation(r,"remove");return l.then(function(){s.handleRemoveTransitionEnd(e,o,t),s.m_widget&&s.m_widget.enableResizeListener()},function(){s.m_widget&&s.m_widget.enableResizeListener()}),this.signalTaskEnd(),l},c.prototype.handleRemoveTransitionEnd=function(e,t,s){if(null!=this.m_widget){var n=i(e),o=n.parent();if(0!==o.length){var r=this.m_widget.itemRemoveComplete(n.get(0),t,s),a=this.getTemplateEngine();a&&a.clean(n.get(0)),n.remove(),this.m_widget.ClearCache(),0===o.get(0).childElementCount&&this.m_widget.renderComplete(!0),this.isSelectionEnabled()&&this.m_widget.enforceSelectionRequired(),r&&t&&!this.m_root.contains(document.activeElement)&&this.m_root.focus(),this.signalTaskEnd()}else this.signalTaskEnd()}else this.signalTaskEnd()},c.prototype.handleModelChangeEvent=function(e){this.signalTaskStart("handling model update event");var t=e.detail.update,i=t.data,s=[];t.keys.forEach(function(e){s.push(e)});var n,o=this.getTemplateEngine(),r=()=>{for(var e=t.indexes,r=0;r<s.length;r++){this.m_widget.updateSelectedKeyData(s[r],i[r]);var a=this.FindElementByKey(s[r]);if(null!=a){void 0===n&&a.contains(document.activeElement)&&(n=a),this.signalTaskStart("handling model update event for item: "+s[r]);var l=null==e?-1:e[r];this.replaceItem(a,l,i[r],this.getMetadata(l,s[r],i[r],a.parentNode),o,this.afterRenderItemForChangeEvent.bind(this),null!=n),this.signalTaskEnd(),null!=n&&(n=null)}}this.m_widget.ClearCache()};null==i?this.getValidatedEventDetailPromise=this.getValidatedEventDetail(t).then(e=>{null!=this.m_widget?(null!=e&&(i=e.data,r()),this.signalTaskEnd()):this.signalTaskEnd()}):(r(),this.signalTaskEnd())},c.prototype.afterRenderItemForChangeEvent=function(e,t,i,s){var n=this;this.signalTaskStart("after render item for model change event"),this.afterRenderItem(e,t,i),this.m_widget.StartAnimation(e,"update").then(function(){n._handleReplaceTransitionEnd(e,s)}),this.signalTaskEnd()},c.prototype._handleReplaceTransitionEnd=function(e,t){null!=this.m_widget?(i(e).removeClass("oj-listview-item-add-remove-transition"),t&&this.m_widget.restoreCurrentItemFocus(e),this.signalTaskEnd()):this.signalTaskEnd()},c.prototype.createContext=function(e,t,i,s,n){var o={};o.parentElement=s,o.index=e,o.data=t,o.component=this.m_widget.getWidgetConstructor(),o.datasource=this.getDataProvider(),(o=this.m_widget._FixRendererContext(o)).metadata=n;for(var r=Object.keys(i),a=0;a<r.length;a++){var l=r[a];o[l]=i[l]}return o},c.prototype.isSelectionEnabled=function(){return this.m_widget._isSelectionEnabled()},c.prototype.isFocusable=function(e){return this.m_widget.getItemFocusable(e)},c.prototype.isSelectable=function(e){return this.m_widget.getItemSelectable(e)},c.prototype.isCardLayout=function(){return this.m_widget.isCardLayout()},c.prototype.shouldUseGridRole=function(){return this.m_widget.ShouldUseGridRole()},c.prototype.isAsyncRendering=function(){return!1},c.prototype.signalTaskStart=function(e){this.m_widget&&this.m_widget.signalTaskStart("DataSource ContentHandler "+e)},c.prototype.signalTaskEnd=function(){this.m_widget&&this.m_widget.signalTaskEnd()},c.prototype.isSkeletonSupport=function(){return this.m_widget.isSkeletonSupport()},c.prototype.getRootElementHeight=function(){return isNaN(this.m_height)&&(this.m_height=this.m_widget.GetRootElement()[0].offsetHeight),this.m_height},c.prototype.getDefaultSkeletonDimension=function(){if(null==this.m_defaultSkeletonDim){var e=this.m_widget.GetRootElement()[0],t=this.createSkeleton(!0);t.style.display="block",t.style.visibility="hidden",e.appendChild(t);var i={width:t.offsetWidth,height:t.offsetHeight};return e.removeChild(t),i.height>0&&i.width>0&&(this.m_defaultSkeletonDim=i),i}return this.m_defaultSkeletonDim},c.prototype.createSkeleton=function(e){return this.createSkeletonItem()},c.prototype.createSkeletonItem=function(){var e=document.createElement("li");e.setAttribute("role","presentation");var t=document.createElement("div");return e.className="oj-listview-item oj-listview-item-layout",this.m_widget._isGridlinesVisible()||e.classList.add("gridline-hidden"),t.className="oj-listview-cell-element oj-listview-skeleton oj-listview-skeleton-line-height oj-animation-skeleton",e.appendChild(t),e},c.prototype.animateShowContent=function(e,t,n){return new Promise(function(o){var a=null!=this.m_superRoot?this.m_superRoot:this.m_root,l=a.querySelector(".oj-listview-skeleton-container");if(null!=l){e.appendChild(t);var h=Array.from(e.children),d=[];h.forEach(function(e){if(e!==l.parentNode){e.style.opacity=0,e.setAttribute("data-oj-context","");var t=s.getContext(e).getBusyContext().whenReady();d.push(t)}}),Promise.all(d).then(function(){null!=this.m_widget?r.fadeOut(l,{duration:"100ms"}).then(function(){if(null!=this.m_widget){var t=l.parentNode;t.classList.contains("oj-listview-initial-skeletons")?a.removeChild(t):l.querySelectorAll(".oj-listview-skeleton").forEach(function(e){var t=e.parentNode;t&&l===t.parentNode&&l.removeChild(t)}),e.style.opacity=0,h.forEach(function(e){e!==l.parentNode&&(e.style.opacity=1,e.removeAttribute("data-oj-context"))}),setTimeout(function(){r.fadeIn(e,{duration:"150ms",persist:"all"}).then(function(){0===parseInt(e.style.opacity,10)&&(e.style.opacity=1)})},0),o(!1)}else o(!1)}.bind(this)):o(!1)}.bind(this))}else n&&i(e).empty(),e.appendChild(t),o(!1)}.bind(this))},c.prototype._destroySparkles=function(){this.m_sparklesObserver&&(this.m_sparklesObserver.disconnect(),this.m_sparklesObserver=null),this.m_sparkles&&(this.m_sparkles.remove(),this.m_sparkles=null)},c.prototype._debounce=function(e,t){let i=null;return(...s)=>{clearTimeout(i),i=setTimeout(()=>e(...s),t)}},c.prototype.handleSuggestions=function(e){for(var t=0,i=0;i<e.length;i++)void 0!==e[i].suggestion&&(t+=1);return t},c.prototype.getItems=function(e,t){var i=e.querySelectorAll(".oj-listview-item-element");return Array.prototype.slice.call(i,0,t)},c.prototype.renderSparkles=function(e){if(void 0===e&&(e=this.m_root.querySelectorAll("[data-oj-suggestion]")),null!=e&&0!==e.length){if(null==this.m_sparkles){var t=document.createElement("li");t.className="oj-listview-sparkles",t.setAttribute("role","presentation"),this.m_sparkles=t}if(null==this.m_sparklesObserver){var i=new Map;this.m_sparklesObserver=new ResizeObserver(this._debounce(e=>{var t=!1;e.forEach(e=>{var s=i.get(e.target);null!=s&&Math.abs(s-e.contentRect.height)>1&&(t=!0),i.set(e.target,e.contentRect.height)}),t&&this.m_widget&&this.renderSparkles()},100))}for(var s=0,n=0;n<e.length;n++)s+=e[n].offsetHeight,e[n].dataset.ojSuggestion="true",this.m_sparklesObserver.unobserve(e[n]),this.m_sparklesObserver.observe(e[n]),n===e.length-1&&e[n].classList.add("oj-listview-last-suggestion");this.m_sparkles.style.top=this.m_root.offsetTop+"px",this.m_sparkles.style.height=s+"px",this.m_sparkles.style.display="block",null==this.m_sparkles.parentNode&&this.m_root.insertBefore(this.m_sparkles,this.m_root.firstElementChild)}else this._destroySparkles()};var u=function(e,t,i){u.superclass.constructor.call(this,e,t,i)};t.Object.createSubclass(u,c,"IteratingDataProviderContentHandler"),u.prototype.Init=function(){u.superclass.Init.call(this),this.m_currentEvents=[]},u.prototype.IsHierarchical=function(){return!1},u.prototype.IsReady=function(){return!this.m_fetching&&null==this.m_idleCallback},u.prototype._hasPendingInsertKeys=function(){return null!=this.m_insertOutOfRangeKeys&&this.m_insertOutOfRangeKeys.size>0},u.prototype._destroyDomScroller=function(){null!=this.m_domScroller&&(this.m_domScroller.destroy(),this.m_domScroller=null),this._removeLoadingIndicator(),this.m_widget&&this.m_widget.unmergeScrollListener()},u.prototype.Destroy=function(e){u.superclass.Destroy.call(this,e),this._removeDataSourceEventListeners(),this._destroyDomScroller(),this._cancelIdleCallback(),this.m_loadingIndicator=null,this.m_viewportCheckPromise=null,this.m_checkViewportPromise=null},u.prototype._cancelIdleCallback=function(){null!=this.m_idleCallback&&(n.isRequestIdleCallbackSupported()?(window.cancelIdleCallback(this.m_idleCallback),window.cancelAnimationFrame(this.m_idleCallback)):window.cancelAnimationFrame(this.m_idleCallback),this.m_idleCallback=null)},u.prototype.shouldHandleResize=function(){return this._isLoadMoreOnScroll()},u.prototype.HandleResize=function(e,t){if(this._isLoadMoreOnScroll()&&null==this.m_animationPromise){var i=this.m_width,s=this.m_height;this.m_height=t,this.m_width=e,this.m_colCount=void 0;var n=this.isCardLayout();if(n&&this.isSkeletonSupport()&&i!==e)if(null!=this.m_loadingIndicator)this._adjustLoadMoreSkeletons(this._getRootElementWidth(!0));else null!=this.m_root.querySelector(".oj-listview-skeleton-container")&&this.renderInitialSkeletons();(t>s||n&&e>i)&&this.checkViewport()}},u.prototype.notifyShown=function(){this.m_widget&&this.m_suggestions>0&&this.renderSparkles(this.getItems(this.m_root,this.m_suggestions)),this._isLoadMoreOnScroll()&&this.checkViewport()},u.prototype.notifyAttached=function(){if(null!=this.m_domScroller){var e=this._getFetchTrigger();if(null!=e){var t=this._getFetchTrigger();e!==t&&this.m_domScroller.setFetchTrigger(t),this.checkViewport()}}},u.prototype.setRootAriaProperties=function(){u.superclass.setRootAriaProperties.call(this);var e=this;this.shouldUseGridRole()&&this._isLoadMoreOnScroll()&&this.getDataProvider().getTotalSize().then(function(t){e.m_root&&e.m_root.setAttribute("aria-rowcount",-1===t?e._getMaxCount():t)})},u.prototype.unsetRootAriaProperties=function(){u.superclass.unsetRootAriaProperties.call(this),this.m_root.removeAttribute("aria-rowcount")},u.prototype._isLoadMoreOnScroll=function(){return this.m_widget.isLoadMoreOnScroll()},u.prototype._getFetchSize=function(){return Math.max(0,this.m_widget.options.scrollPolicyOptions.fetchSize)},u.prototype._getScroller=function(){return this.m_widget._getScroller()},u.prototype._getScrollerOffsetTop=function(){if(void 0===this._scrollerOffsetTop){var e=this._getScroller();e===this.m_widget.GetRootElement()[0]?this._scrollerOffsetTop=0:this._scrollerOffsetTop=n.calculateOffsetTop(e,this.m_root)}return this._scrollerOffsetTop},u.prototype._getFetchTrigger=function(){return void 0===this._fetchTrigger&&(this._fetchTrigger=this._getLoadingIndicatorHeight()),this._fetchTrigger},u.prototype._getLoadingIndicatorHeight=function(){var e;if(this.isSkeletonSupport()){var t=this.getDefaultSkeletonDimension().height;if(this.isCardLayout()){var s=this._getCardDimension();e=null!=s?s.height:t}else e=u.LOAD_MORE_SKELETONS_ROW_COUNT*t}else{var n=i(document.createElement("div"));n.addClass(this.m_widget.getItemStyleClass()).css({visibility:"hidden",overflow:"hidden",position:"absolute"});var o=i(document.createElement("div"));o.addClass("oj-icon oj-listview-loading-icon"),n.append(o),i(this.m_widget.GetRootElement()).append(n),e=n.get(0).offsetHeight,n.remove()}return e},u.prototype._adjustSkeletonCardContent=function(e,t,i){e.style.width=t+"px",e.style.height=i+"px"},u.prototype._createSkeletonCard=function(){var e=document.createElement("li");e.setAttribute("role","presentation");var t=document.createElement("div");return e.className="oj-listview-skeleton-card",t.className="oj-listview-skeleton oj-listview-skeleton-card-content oj-animation-skeleton",e.appendChild(t),e},u.prototype.createSkeleton=function(e){var t;if(this.isCardLayout())if(e)void 0===this.m_defaultItemSkeleton&&(this.m_defaultItemSkeleton=this._createSkeletonCard()),t=this.m_defaultItemSkeleton;else{if(void 0===this.m_defaultLoadMoreSkeleton){var i=this._createSkeletonCard(),s=this._getCardDimension();s&&this._adjustSkeletonCardContent(i,s.width,s.height),this.m_defaultLoadMoreSkeleton=i}t=this.m_defaultLoadMoreSkeleton}else void 0===this.m_defaultItemSkeleton&&(this.m_defaultItemSkeleton=this.createSkeletonItem()),t=this.m_defaultItemSkeleton;return t.cloneNode(!0)},u.prototype._getScrollbarWidth=function(){if(isNaN(this.m_scrollbarWidth)){var e=this.m_widget.GetRootElement()[0],t=document.createElement("div");e.appendChild(t),this.m_scrollbarWidth=Math.max(0,n.getDefaultScrollBarWidth(t)),e.removeChild(t)}return this.m_scrollbarWidth},u.prototype._getRootElementWidth=function(e){return isNaN(this.m_width)&&(this.m_width=this.m_widget.GetRootElement()[0].offsetWidth),e?this.m_width-this._getScrollbarWidth():this.m_width},u.prototype.renderInitialSkeletons=function(){this.m_superRoot&&(this.m_root=this.m_superRoot,this.m_superRoot=null),i(this.m_root).empty();var e=this.getRootElementHeight(),t=0,s=this.getDefaultSkeletonDimension();if(s.width>0&&s.height>0)if(this.isCardLayout()){var n=this.getMargin(),o=this._getRootElementWidth(),r=Math.max(1,Math.floor(o/(s.width+n)));t=Math.max(1,Math.floor(e/(s.height+n)))*r}else t=Math.max(1,Math.floor(e/s.height));var a=document.createElement("li");a.setAttribute("role","presentation"),a.classList.add("oj-listview-initial-skeletons");var l=document.createElement("ul");l.setAttribute("role","presentation"),l.className=this.m_widget.getGroupStyleClass()+" oj-listview-skeleton-container";for(var h=0;h<t;h++)l.appendChild(this.createSkeleton(!0));a.appendChild(l),this.m_root.appendChild(a)},u.LOAD_MORE_SKELETONS_ROW_COUNT=3,u.prototype._adjustLoadMoreSkeletons=function(e,t){var i=this._getCardDimension();if(null!=i&&0!==i.width){if(!t){var s=this.getMargin();if(0===Math.floor(e/(i.width+s))-this.m_loadingIndicator.get(0).firstElementChild.childElementCount)return}this.m_loadingIndicator.get(0).parentNode.removeChild(this.m_loadingIndicator.get(0)),null!=this.m_fillerSkeletons&&this.m_fillerSkeletons.parentNode.removeChild(this.m_fillerSkeletons),this.m_loadingIndicator=null,this.m_fillerSkeletons=null,this.m_defaultLoadMoreSkeleton=void 0,this._appendLoadingIndicator()}},u.prototype.getMargin=function(){if(void 0===this.m_margin){var e=document.createElement("li");e.className=this.m_widget.getItemStyleClass(),this.m_root.appendChild(e);var t=window.getComputedStyle(e);this.m_margin=parseInt(t.marginRight,10),this.m_root.removeChild(e)}return this.m_margin},u.prototype._getCardDimension=function(){if(void 0===this.m_cardDim){var e=this.m_root.querySelector("."+this.m_widget.getItemElementStyleClass());if(e){var t={width:e.offsetWidth,height:e.offsetHeight};return t.width>0&&t.height>0&&(this.m_cardDim=t),t}}return this.m_cardDim},u.prototype._renderSkeletons=function(e){var t=this.createLoadingIndicator();t.setAttribute("role","presentation"),t.classList.add("oj-listview-skeleton-container");var i=document.createElement("ul");i.setAttribute("role","presentation"),i.className=this.isCardLayout()?"oj-listview-skeleton-card-group":"oj-listview-group",t.appendChild(i);for(var s=0;s<e;s++)i.appendChild(this.createSkeleton(!1));return t},u.prototype._fillEmptySpaceWithSkeletons=function(){var e=this._getCardDimension();if(null!=e&&0!==e.width){var t=this.m_root.lastElementChild,i=e.width+this.getMargin(),s=this._getRootElementWidth(!0),n=Math.floor((s-t.offsetLeft-i)/i);if(n>0){var o=this._renderSkeletons(n);o.style.visibility="hidden",this.m_root.appendChild(o),this.m_fillerSkeletons=o}}},u.prototype._createLoadMoreSkeletons=function(){var e;if(this.isCardLayout()){var t=this._getRootElementWidth(!0),i=this._getCardDimension(),s=void 0===i?this.getDefaultSkeletonDimension().width:i.width;e=0===s?0:Math.floor(t/(s+this.getMargin()))}else e=u.LOAD_MORE_SKELETONS_ROW_COUNT;return this._renderSkeletons(e)},u.prototype._createLoadMoreIcon=function(){var e=i(this.createLoadingIndicator());e.uniqueId().attr("role","presentation").addClass(this.m_widget.getItemStyleClass()).addClass("oj-listview-loading-icon-container");var t=i(document.createElement("div"));return t.addClass("oj-icon oj-listview-loading-icon"),e.append(t),e.get(0)},u.prototype.createLoadingIndicator=function(){return document.createElement("li")},u.prototype._appendLoadingIndicator=function(){if(null==this.m_loadingIndicator)if(this.m_appendLoadingindicator=!0,this.isSkeletonSupport()&&this.isCardLayout()&&null!=this._getCardDimension()&&0===this._getCardDimension().width){var e=this;s.getContext(this.m_root).getBusyContext().whenReady().then(function(){e.m_appendLoadingindicator&&e._doAppendLoadingIndicator()})}else this._doAppendLoadingIndicator()},u.prototype._doAppendLoadingIndicator=function(){this.isSkeletonSupport()&&this.isCardLayout()&&this._fillEmptySpaceWithSkeletons();var e=this.isSkeletonSupport()?this._createLoadMoreSkeletons():this._createLoadMoreIcon();e.style.visibility="hidden",this.m_root.appendChild(e),this.m_loadingIndicator=i(e),this.m_appendLoadingindicator=!1},u.prototype._removeLoadingIndicator=function(){null!=this.m_loadingIndicator&&this.m_loadingIndicator.remove(),this.m_loadingIndicator=null,null!=this.m_fillerSkeletons&&this.m_fillerSkeletons.remove(),this.m_fillerSkeletons=null,this.m_appendLoadingindicator=!1},u.prototype.hasMoreToFetch=function(){return null!=this.m_loadingIndicator},u.prototype.getLoadingIndicator=function(){return null!=this.m_loadingIndicator?this.m_loadingIndicator.get(0):null},u.prototype.afterRenderItem=function(e,t,s){u.superclass.afterRenderItem.call(this,e,t,s),i(e).addClass(this.m_widget.getItemStyleClass()),!s&&this.m_widget.getItemLayoutStyleClass&&e.classList.add(this.m_widget.getItemLayoutStyleClass()),this.isSelectionEnabled()&&this.isSelectable(t)&&this.m_widget.getFocusItem(i(e)).attr("aria-selected",!1),this._isLoadMoreOnScroll()&&!this.isCardLayout()&&i(e).attr("aria-rowindex",t.index+1),this.m_widget.itemRenderComplete(e,t)},u.prototype._prepareRootElement=function(){this.m_superRoot?(i(this.m_superRoot).empty(),this.m_root=this.m_superRoot,this.m_superRoot=null):null==this.m_root.querySelector(".oj-listview-skeleton-container")&&i(this.m_root).empty();if(this.shouldUseGridRole()&&this.isCardLayout()){var e=document.createElement("li");e.classList.add("oj-listview-group-container");var t=document.createElement("ul");e.appendChild(t),i(e).attr("role","presentation").css("width","100%"),i(t).attr("role","row").addClass(this.m_widget.getGroupStyleClass()),this.m_root.appendChild(e),this.m_superRoot=this.m_root,this.m_root=t}},u.prototype._setFetching=function(e){this.shouldUseGridRole()&&(null==this.m_superRoot?this.m_root:this.m_superRoot).setAttribute("aria-busy",e);this.m_fetching=e},u.prototype._containsKey=function(e,i){for(var s=0;s<i.length;s++)if(t.KeyUtils.equals(i[s].key,e))return!0;return!1},u.prototype.fetchRows=function(e){var i=0;if(this.signalTaskStart("fetching rows"),this.IsReady()){var s=this;this._setFetching(!0),u.superclass.fetchRows.call(this,e);var n=this.m_widget.getScrollToKey(),o=this.loadTemplateEngine();this.signalTaskStart("first fetch"),this._clientId=this._clientId||Symbol();var r={clientId:this._clientId};r.size=this._isLoadMoreOnScroll()?this._getFetchSize():-1,this.m_dataProviderAsyncIterator=this.getDataProvider().fetchFirst(r)[Symbol.asyncIterator]();var a=this.m_dataProviderAsyncIterator.next();s.fetchSize=r.size;var l=function(e,t,i){var n=i;return(null==i||s._containsKey(i,t))&&(n=null),e[0].done||null==n&&(-1!==s.fetchSize||"function"==typeof s.getDataProvider().getPageCount)?e:s.m_dataProviderAsyncIterator.next().then(function(t){return e[0].done=t.done,e[0].value.data=e[0].value.data.concat(t.value.data),e[0].value.metadata=e[0].value.metadata.concat(t.value.metadata),l(e,t.value.metadata,n)},function(e){s._handleFetchError(e),s.signalTaskEnd()})};return Promise.all([a,o,n]).then(function(e){return l(e,e[0].value.metadata,e[2])},function(e){return s._handleFetchError(e),s.signalTaskEnd(),Promise.reject(e)}).then(function(e){if(e){if(null==s.m_widget)return;var n=e[0],o=e[1],r=s.getDataProvider();t.TableDataSourceAdapter&&r instanceof t.TableDataSourceAdapter&&(i=r.offset),0===i&&(o&&s.cleanItems(o),s.isSkeletonSupport()&&s.m_widget.hideStatusText(),s._prepareRootElement()),s._handleFetchedData(n,o,0===i)}},function(){}),void this.signalTaskEnd()}this.signalTaskEnd()},u.prototype._handleFetchError=function(e){if(a.error(e),this._setFetching(!1),null!=this.m_widget){var t=this.m_root.querySelector(".oj-listview-initial-skeletons");null!=t&&t.parentNode.removeChild(t),this._isLoadMoreOnScroll()&&this._removeLoadingIndicator(),this.m_widget.renderComplete(!0)}else a.info("handleFetchError: widget has already been destroyed")},u.prototype._renderItemsWhenIdle=function(e,i,s,o,r,a){var l,h=this;0!==e.length&&0!==i.length?n.isRequestIdleCallbackSupported()?(r&&t.AgentUtils.getAgentInfo().engine===t.AgentUtils.ENGINE.BLINK&&(l={timeout:100}),this.m_idleCallback=window.requestIdleCallback(function(t){for(var n=t.timeRemaining(),r=0,l=document.createDocumentFragment();(n>r||t.didTimeout)&&0!==e.length&&0!==i.length;){var c=e.shift(),u=null!=a?a.shift():null,p=i.shift();h.addItem(l,-1,c,h.getMetadata(s,p,c),o,null,u),s+=1,r=n-t.timeRemaining(),n=t.timeRemaining()}d(l)},l)):this.m_idleCallback=window.requestAnimationFrame(function(){var t=document.createDocumentFragment(),n=e.shift(),r=null!=a?a.shift():null,l=i.shift();h.addItem(t,-1,n,h.getMetadata(s,l,n),o,null,r),s+=1,d(t)}):window.requestAnimationFrame(function(){h.m_idleCallback&&(h._appendLoadingIndicator(),h.afterItemsInserted(!1,!0),h.signalTaskEnd()),h.m_idleCallback=null});function d(t){window.requestAnimationFrame(function(){null!=h.m_widget&&(h.m_root.appendChild(t),h._renderItemsWhenIdle(e,i,s,o,r,a))})}},u.prototype._isOverflow=function(){return this._getScroller()!==this.m_widget.getListContainer()[0]?this._isOverflowCheckForCustomScroller():this._isOverflowCheckForDefaultScroller()},u.prototype._isOverflowCheckForDefaultScroller=function(){if(this._isLoadMoreOnScroll()){var e=this._getScroller(),i=null==this.m_loadingIndicator?0:this._getLoadingIndicatorHeight(),s=e.scrollHeight-(e.clientHeight+i);return 1===s&&t.AgentUtils.getAgentInfo().browser===t.AgentUtils.BROWSER.EDGE&&(s=0),s>0}return!1},u.prototype._isOverflowCheckForCustomScroller=function(){var e=this._getScroller();if(e!==document.documentElement){var t=null==this.m_loadingIndicator?0:this._getLoadingIndicatorHeight();return this.m_root.clientHeight+this._getScrollerOffsetTop()-t>e.clientHeight}return this._isLastItemNotInViewport()},u.prototype._isLastItemNotInViewport=function(){for(var e,t=this.m_root.children,i=this.m_widget.getItemElementStyleClass(),s=t.length-1;s>=0;s--)if(t[s].classList.contains(i)){e=t[s];break}return!!e&&!n.isElementIntersectingScrollerBounds(e,this._getScroller())},u.prototype._removeDuplicateItems=function(e){if(this._hasPendingInsertKeys()){var t=this,i=new Map;this.m_root.querySelectorAll("."+this.m_widget.getItemElementStyleClass()).forEach(function(e){"LI"!==e.tagName&&(e=e.parentNode);var s=t.GetKey(e);null!=s&&i.set(s,e)});var s=new d(i);e.forEach(function(e){var t=s.get(e);t&&t.parentNode&&t.parentNode.removeChild(t)})}},u.prototype._handleFetchSuccess=function(e,t,i,s,n,o,r){if(null==this.m_widget)return Promise.resolve(!0);this._removeDuplicateItems(t);var a=this.m_root.querySelectorAll("."+this.m_widget.getItemElementStyleClass()).length;if(a>0&&!i&&this._isLastItemNotInViewport()&&null==this.m_widget.m_scrollPosition){this.signalTaskStart("render items during idle time");var l=null!=o?o.slice(0):null;return this._renderItemsWhenIdle(e.slice(0),t.slice(0),a,s,n,l),Promise.resolve(!0)}for(var h=document.createDocumentFragment(),d=0;d<e.length;d++){var c=e[d],u=t[d],p=this._isFetchFromInsert(u)?this.afterRenderItemForInsertEvent.bind(this):null;this.addItem(h,-1,c,this.getMetadata(a,u,c),s,p,null!=o?o[d]:null),a+=1}return this.animateShowContent(this.m_root,h,r)},u.prototype.handleDomScrollerFetchedData=function(e){null!=e?(this.signalTaskStart("handle results from DomScroller"),this._removeLoadingIndicator(),this.IsReady()&&this.signalTaskStart("dummy task"),this.isCardLayout()&&this.m_superRoot&&0===this.m_root.childNodes.length&&this.m_root.parentNode&&this.m_superRoot.appendChild(this.m_root.parentNode),this._handleFetchedData(e,this.getTemplateEngine(),!1),e.value&&e.value.data?this._hasPendingInsertKeys()||this.m_widget.updateStatusFetchEnd(e.value.data.length):e.maxCountLimit&&(this._handleScrollerMaxRowCount(),this.signalTaskEnd()),this.m_widget.m_scrollHeight=null,this.signalTaskEnd()):this._removeLoadingIndicator()},u.prototype._registerDomScroller=function(){var e=this,t={fetchSize:this._getFetchSize(),fetchTrigger:this._getFetchTrigger(),maxCount:this._getMaxCount(),asyncIterator:this.m_dataProviderAsyncIterator,initialRowCount:this.m_root.childElementCount,success:function(t){e.signalTaskEnd(),e.handleDomScrollerFetchedData(t),null!=e.m_root&&null!=t.value||(e.signalTaskEnd(),null!=e.m_root&&e.m_widget.renderComplete(!0))},error:function(){e.signalTaskEnd(),e.signalTaskEnd()},localKeyValidator:function(t){return!!e.m_widget&&null!=e.m_widget.FindElementByKey(t)},beforeFetch:function(t,i){return e.handleBeforeFetch(),e.m_viewportCheckPromise=null,null==e.m_idleCallback&&(i||(e.signalTaskStart("starts high-water mark scrolling"),e.m_widget.updateStatusFetchStart()),!0)},beforeScroll:this.m_widget.mergeScrollListener()},i=this._getScroller();i!==this.m_widget.getListContainer()[0]&&(t.contentElement=this.m_root,i===document.documentElement&&(t.isOverflow=this._isLastItemNotInViewport.bind(this))),this.m_domScroller=new l(i,this.getDataProvider(),t)},u.prototype.handleBeforeFetch=function(){this.m_loadingIndicator&&(this.m_loadingIndicator.get(0).style.visibility="visible"),this.m_fillerSkeletons&&(this.m_fillerSkeletons.style.visibility="visible")},u.prototype._clearEventQueue=function(){null!=this.m_eventQueue&&(this.m_eventQueue.length=0)},u.prototype.handleModelMutateEvent=function(e){void 0!==this.m_dataProviderAsyncIterator&&u.superclass.handleModelMutateEvent.call(this,e)},u.prototype.handleModelAddEvent=function(e){this.m_currentEvents.push(e);var t=u.superclass.handleModelAddEvent.call(this,e);return t||this.m_currentEvents.pop(),t},u.prototype.GetReferenceNode=function(e,t){var i=u.superclass.GetReferenceNode.call(this,e,t);return null==i&&null!=this.m_loadingIndicator?this.m_loadingIndicator.get(0):i},u.prototype._getMaxIndexForInsert=function(){var e=Number.MAX_VALUE;if(n.isIterateAfterDoneNotAllowed(this.getDataProvider())&&!this.hasMoreToFetch())return e;if(this._isLoadMoreOnScroll()){e=i(this.m_root).children("li."+this.m_widget.getItemElementStyleClass()).length;var t=this.m_root.querySelectorAll(".oj-listview-temp-item"),s=this.m_root.querySelectorAll(".oj-listview-temp-item.oj-listview-item-remove");e=Math.max(0,e+t.length-s.length)}return e},u.prototype.addItemsForModelInsert=function(e,t,i,s,o,r,a){for(var l=this._getMaxIndexForInsert(),d=this.getTemplateEngine(),c=[],u=0;u<e.length;u++)if(null==this.FindElementByKey(i[u])){var p;if(this.signalTaskStart("handling model add event for item: "+i[u]),null!=t?p=t[u]:(p=this.getIndex(r,u))>-1?p=o?p:p+1:this._isLoadMoreOnScroll()&&(n.isIterateAfterDoneNotAllowed(this.getDataProvider())&&!this.hasMoreToFetch()||(p=l)),p<l){var m=this.addItem(this.m_root,p,e[u],this.getMetadata(p,i[u],e[u]),d,this.afterRenderItemForInsertEvent.bind(this),null!=a?a[u]:null);m&&c.push(m),l+=1}else null==this.m_insertOutOfRangeKeys&&(this.m_dataProvider.createOptimizedKeySet?this.m_insertOutOfRangeKeys=this.m_dataProvider.createOptimizedKeySet():this.m_insertOutOfRangeKeys=new h),this.m_insertOutOfRangeKeys.add(i[u]);this.signalTaskEnd()}if(c.length<e.length&&(null==this.m_domScroller?this._isLoadMoreOnScroll()&&this._registerDomScroller():this.m_domScroller.setAsyncIterator(this.m_dataProviderAsyncIterator)),0===c.length)this.m_currentEvents.pop(),0===this.m_currentEvents.length&&this.afterItemsInserted(!0,!0);else{var _=this;Promise.all(c).then(function(){_.m_widget&&(_.m_currentEvents.pop(),0===_.m_currentEvents.length&&_.afterItemsInserted(!0,!0))})}},u.prototype._isFetchFromInsert=function(e){return null!=this.m_insertOutOfRangeKeys&&this.m_insertOutOfRangeKeys.has(e)},u.prototype.handleModelRemoveEvent=function(e){this.m_currentEvents.push(e);var t=u.superclass.handleModelRemoveEvent.call(this,e);t?null==this.m_root.querySelector("li."+this.m_widget.getItemElementStyleClass())&&this.m_loadingIndicator&&(this.m_loadingIndicator.get(0).style.display="none"):this.m_currentEvents.pop();return t},u.prototype.handleRemoveItemsPromises=function(e){if(0===e.length)this.m_currentEvents.pop();else{var t=this;Promise.all(e).then(function(){t.m_widget&&(t.m_currentEvents.pop(),0===t.m_currentEvents.length&&t.checkViewport())})}},u.prototype.handleModelRefreshEvent=function(e){null!=this.m_root&&(this._cancelIdleCallback(),this.IsReady()?(this.signalTaskStart("handling model reset event"),this._clearEventQueue(),this.m_widget.ClearCache(!0),this._destroyDomScroller(),this.m_widget.adjustScrollPositionValueOnFetch(),this.m_widget.resetFocusBeforeRefresh(),this.fetchRows(!0),this.signalTaskEnd()):this._pushToEventQueue({type:e.type,event:e}))},u.prototype._handleFetchedData=function(e,t,i){if(null!=this.m_root&&null!=e.value){var n=e.value.data,o=e.value.metadata,r=0;i&&!this.isCardLayout()&&(r=this.handleSuggestions(o));var l=o.map(function(e){return e.key});n.length===l.length&&this._handleFetchSuccess(n,l,e.done||e.maxCountLimit,t,e.isMouseWheel,o,i).then(function(t){if(null!=this.m_widget){var n=null!=l&&0===l.length;if(this._isLoadMoreOnScroll()&&(e.done?this.m_domScroller&&this._destroyDomScroller():(n&&a.info("handleFetchedData: zero data returned while done flag is false"),t||e.maxCountLimit||(null==this.m_domScroller&&(this._registerDomScroller(),this.getRootElementHeight()),n&&!this.m_domScroller.isOverflow()||this._appendLoadingIndicator()))),this.m_suggestions=r,r>0)s.getContext(this.m_root).getBusyContext().whenReady().then(()=>{this.m_widget&&this.m_suggestions===r&&this.renderSparkles(this.getItems(this.m_root,r))});e.maxCountLimit&&this._handleScrollerMaxRowCount(),this.fetchEnd(t,!n||!e.done,i),n||this.disableAllTabbableElements()}}.bind(this))}},u.prototype.disableAllTabbableElements=function(){var e=this.m_root.childElementCount;this.m_root.lastElementChild&&"presentation"===this.m_root.lastElementChild.getAttribute("role")&&(e-=1);var t=this;s.getContext(this.m_root).getBusyContext().whenReady().then(function(){if(null!=t.m_root)for(var i=t.m_root.children,s=0;s<e;s++)i[s]&&t.m_widget.disableAllTabbableElements(i[s])})},u.prototype.afterItemsInserted=function(e,t){if(this.m_widget){var i=this,n=this.m_widget.renderComplete(t);if(n&&n.then(function(){i.m_animationPromise=null}),this.m_animationPromise=n,this._processEventQueue(),e)if(this.m_widget.ojContext._IsCustomElement()){var o=s.getContext(i.m_root).getBusyContext().whenReady();o.then(function(){null!=i.m_widget&&(i.isCardLayout()&&void 0===i.m_cardDim&&null!=i.m_loadingIndicator&&i._adjustLoadMoreSkeletons(i._getRootElementWidth(!0),!0),null!=i.m_viewportCheckPromise&&null==i.checkViewport(n)&&i._clearInsertOutOfRangeKeys())}),i.m_viewportCheckPromise=o}else null==this.checkViewport()&&this._clearInsertOutOfRangeKeys()}},u.prototype.fetchEnd=function(e,t,i){this._setFetching(!1),e||this.afterItemsInserted(t,!i),this.signalTaskEnd()},u.prototype._checkHorizontalViewport=function(){if(this.isCardLayout()){for(var e,t=this.m_root.children,i=this.m_widget.getItemElementStyleClass(),s=t.length-1;s>=0;s--)if(t[s].classList.contains(i)){e=t[s];break}if(e){var n=this._getScroller(),o=n===this.m_root?this.getRootElementHeight():n.clientHeight;if(n===document.documentElement){var r=e.getBoundingClientRect();if(r.top<=o&&r.top+r.height>=0)return this.handleBeforeFetch(),this.m_domScroller._fetchMoreRows()}else{var a=n.scrollTop,l=e.offsetTop,h=n===this.m_root?0:this._getScrollerOffsetTop();if(l>a&&l<a+o-h)return this.handleBeforeFetch(),this.m_domScroller._fetchMoreRows()}}}return null},u.prototype._clearInsertOutOfRangeKeys=function(){null!=this.m_insertOutOfRangeKeys&&this.m_insertOutOfRangeKeys.clear()},u.prototype.checkViewport=function(e){var t,i=this;return this.m_checkViewportPromise?null:(this.signalTaskStart("checking viewport"),null!=this.m_domScroller&&this.IsReady()&&(null!=(t=this.m_domScroller.checkViewport())?(this.signalTaskStart("got promise from checking viewport"),t.then(function(s){if(null!=i.m_widget){if(null!=s)i.m_checkViewportPromise=null,i.handleDomScrollerFetchedData(s);else{var n=function(){null!=(t=i._checkHorizontalViewport())?(i.signalTaskStart("got promise from checking horizontal viewport"),t.then(function(e){i.m_checkViewportPromise=null,null!=i.m_widget&&null!=e&&i.handleDomScrollerFetchedData(e),i.signalTaskEnd()},null)):i.m_checkViewportPromise=null};e?(i.signalTaskStart("wait for animation to complete"),e.then(function(){i.signalTaskEnd(),null!=i.m_widget&&null!=i.m_domScroller&&n()})):n()}i.signalTaskEnd()}i._clearInsertOutOfRangeKeys()},null)):this._clearInsertOutOfRangeKeys(),this.m_checkViewportPromise=t),this.signalTaskEnd(),t)},e.DataProviderContentHandler=c,e.IteratingDataProviderContentHandler=u,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojindexer",["exports","ojs/ojcore-base","ojs/ojtranslation","jquery","hammerjs","ojs/ojcontext","ojs/ojjquery-hammer","ojs/ojcomponentcore","ojs/ojdomutils"],function(e,t,i,s,n,o,r,a,l){"use strict";var h;t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,(h={properties:{data:{type:"object"},translations:{type:"object",value:{},properties:{ariaDisabledLabel:{type:"string"},ariaInBetweenText:{type:"string"},ariaKeyboardInstructionText:{type:"string"},ariaOthersLabel:{type:"string"},ariaTouchInstructionText:{type:"string"},indexerCharacters:{type:"string"},indexerOthers:{type:"string"}}}},methods:{getProperty:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}}).extension._WIDGET_NAME="ojIndexer",h.extension._INNER_ELEM="ul",h.extension._GLOBAL_TRANSFER_ATTRS=["aria-label","aria-labelledby"],t.CustomElementBridge.register("oj-indexer",{metadata:h});const d=function(){};t._registerLegacyNamespaceProp("IndexerModel",d),d.SECTION_OTHERS={id:"__others__",label:i.getTranslatedString("oj-ojIndexer.indexerOthers")},t.__registerWidget("oj.ojIndexer",s.oj.baseComponent,{defaultElement:"<ul>",version:"1.2",widgetEventPrefix:"oj",options:{data:null},_ComponentCreate:function(){this._super(),this._setup()},_AfterCreate:function(){this._super(),this._createIndexerContent(),this._setAriaProperties(),this._createInstructionText()},_destroy:function(){this._super();var e=this._getIndexerContainer();this._unregisterResizeListener(e),this._unregisterTouchHandler(e),this._unsetAriaProperties(),this.element.removeClass("oj-component-initnode"),l.unwrap(this.element,e)},_setOption:function(e,t){this._superApply(arguments),"data"===e&&this.refresh()},_SetupResources:function(){this._super();var e=this._getIndexerContainer()[0];this._registerResizeListener(e),this._registerTouchHandler(e)},_ReleaseResources:function(){this._super();var e=this._getIndexerContainer()[0];this._unregisterResizeListener(e),this._unregisterTouchHandler(e),this._resolveBusyState()},_resolveBusyState:function(){this.busyStateResolve&&(this.busyStateResolve(null),this.busyStateResolve=null)},widget:function(){return this._getIndexerContainer()},refresh:function(){this._super(),this.element.empty(),this._createIndexerContent(),this._setAriaProperties(),this.m_current=null},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;if("oj-indexer-section"===e.subId)for(var t=e.section,i=this.element.children("li"),n=0;n<i.length;n++){var o=i.get(n);if(s(o).data("data-range")===t)return o;var r=s(o).data("data-includes");if(null!=r)for(var a=0;a<r.length;a++)if(r[a]===t)return o}return null},getSubIdByNode:function(e){if(null!=e){var t=s(e).data("data-range");if(null!=t)return{subId:"oj-indexer-section",section:t}}return null},_setAriaProperties:function(){this.element.attr("role","slider").attr("aria-orientation","vertical").attr("aria-describedby",this.element.prop("id")+":desc").attr("aria-valuemin",0).attr("aria-valuemax",Math.max(0,this.element.children().length-1))},_unsetAriaProperties:function(){this.element.removeAttr("role").removeAttr("aria-orientation").removeAttr("aria-describedby").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuetext")},_createInstructionText:function(){var e;e=l.isTouchSupported()?"ariaTouchInstructionText":"ariaKeyboardInstructionText";var t=s(document.createElement("div"));t.prop("id",this.element.prop("id")+":desc"),t.addClass("oj-helper-hidden-accessible").text(this.getTranslatedString(e)),this._getIndexerContainer().append(t)},_getIndexerContainer:function(){return null==this.m_container&&(this.m_container=this._createIndexerContainer()),this.m_container},_createIndexerContainer:function(){var e;return this.OuterWrapper?e=s(this.OuterWrapper):(e=s(document.createElement("div")),this.element.parent()[0].replaceChild(e[0],this.element[0])),e.addClass("oj-indexer oj-component"),e.prepend(this.element),e},_createIndexerContent:function(){var e=this._getIndexerModel();if(null!=e){var t,i=this.element,s=e.getIndexableSections();e.getMissingSections&&(t=e.getMissingSections());var n=this.getTranslatedString("indexerOthers"),o=this.widget().outerHeight(),r=this._createItem(s[0],t);i.append(r),this._getIndexerContainer().removeClass("oj-indexer-abbr"),null==this.m_itemHeight&&(this.m_itemHeight=r.outerHeight());var a=Math.max(1,this.m_itemHeight),l=Math.floor(o/a),h=Math.floor((s.length+1)/l)+1;h>1&&this._getIndexerContainer().addClass("oj-indexer-abbr");for(var d=1+h;d<s.length;d=d+h+1){if(h>1){var c=this._createSeparator(s,d-h,d-1);i.append(c)}else d-=1;var u=s[d],p=this._createItem(u,t);i.append(p)}var m=this._createItem(s[s.length-1],t);i.append(m);var _=this._createItem(n);_.attr("data-others","true"),i.append(_),null==this.m_height&&(this.m_height=o)}},_createItem:function(e,t){var i=e.label?e.label:e,n=s(document.createElement("li"));return n.data("data-range",e).text(i),null!=t&&t.indexOf(e)>-1&&n.addClass("oj-disabled"),n},_createSeparator:function(e,t,i){var n=[],o=s(document.createElement("li"));o.addClass("oj-indexer-ellipsis").data("data-range",e[t+Math.round((i-t)/2)]);for(var r=t;r<=i;r++)n.push(e[r]);return o.data("data-includes",n),o},_setup:function(){var e=this;this.element.uniqueId().addClass("oj-component-initnode").attr("tabIndex",0),this._on(this.element,{click:function(t){e._handleClick(t)},keydown:function(t){e._handleKeyDown(t)},focus:function(t){e._handleFocus(t)},blur:function(t){e._handleBlur(t)}}),this._focusable({applyHighlight:!0,setupHandlers:function(t,i){e._focusInHandler=t,e._focusOutHandler=i}})},_handleClick:function(e){var t;0===e.button&&(t=s(e.target),this._setCurrent(t))},_handleFocus:function(e){this._getIndexerContainer().addClass("oj-focus-ancestor"),null==this.m_current?this._setFocus(this.element.children("li").first()):this._setFocus(this.m_current)},_handleBlur:function(e){this._getIndexerContainer().removeClass("oj-focus-ancestor")},_handleKeyDown:function(e){var t,i=!1;switch(e.keyCode){case 38:t=this.m_current.prev();break;case 40:t=this.m_current.next();break;case 13:this._setCurrent(this.m_current),i=!0}null!=t&&t.length>0&&(i=!0,this._setFocus(t)),i&&e.preventDefault()},_setFocus:function(e){null!=this.m_current&&this._focusOutHandler(this.m_current),this._focusInHandler(e),this._updateAriaProperties(e),this.m_current=e},_getIndexerModel:function(){var e=this.option("data");if(null!=e&&(void 0===e.setSection||void 0===e.getIndexableSections))throw new Error("Invalid IndexerModel");return e},_setCurrent:function(e){var t=e.data("data-range");e.attr("data-others")&&(t=d.SECTION_OTHERS),this._setCurrentSection(t)},_setCurrentSection:function(e){var t=this,i=o.getContext(this.element[0]).getBusyContext();this.busyStateResolve=i.addBusyState({description:"setCurrentSection"}),this._getIndexerModel().setSection(e).then(function(e){if(null!=e){var i=t._findItem(e);null!=i&&t._setFocus(i)}t._resolveBusyState()},function(){t._resolveBusyState()})},_updateAriaProperties:function(e){var t=e.data("data-includes"),i="";if(null!=t){if(t.length>0){var s=t[0].label?t[0].label:t[0],n=t[t.length-1].label?t[t.length-1].label:t[t.length-1];i=this.getTranslatedString("ariaInBetweenText",{first:s,second:n})}}else{var o=e.data("data-range");i=o===d.SECTION_OTHERS?this.getTranslatedString("ariaOthersLabel"):o}e.hasClass("oj-disabled")&&(i=i+". "+this.getTranslatedString("ariaDisabledLabel")),this.element.attr("aria-valuetext",i),this.element.attr("aria-valuenow",e.index())},_findItem:function(e){for(var t=this.element.children(),i=0;i<t.length;i++){var n=t.get(i),o=s(n).data("data-range"),r=s(n).data("data-includes");if(null!=o&&o===e||null!=r&&r.indexOf(e)>-1)return s(n)}return null},_unregisterResizeListener:function(e){e&&this._resizeHandler&&l.removeResizeListener(e,this._resizeHandler)},_registerResizeListener:function(e){e&&(null==this._resizeHandler&&(this._resizeHandler=this._handleResize.bind(this)),l.addResizeListener(e,this._resizeHandler))},_unregisterTouchHandler:function(e){this.hammer&&(this.hammer.off("panstart panmove panend"),s(e).ojHammer("destroy")),this.hammer=null},_registerTouchHandler:function(e){var t,i,o,r,a,l=this,h={recognizers:[[n.Pan,{direction:n.DIRECTION_VERTICAL}]]};this.hammer=s(e).ojHammer(h).on("panstart",function(e){var n=e.gesture.target;t=l.element[0].getBoundingClientRect().left+5,i=n.getBoundingClientRect().top,l._setCurrent(s(n)),o=n,r=s(n).data("data-range"),a=i}).on("panmove",function(e){var n=a;a=i+e.gesture.deltaY;var h=document.elementFromPoint(t,a);if(null!=h){var d,c,u=a-n;if(o===h){if(null!=(d=s(h).data("data-includes"))){var p=d.indexOf(r);c=null,u>0&&p<d.length-1?c=d[p+1]:u<0&&p>0&&(c=d[p-1]),null!=c&&(r=c,l._setCurrentSection(c))}}else s(h).data("data-range")&&(c=null,null!=(d=s(h).data("data-includes"))&&(u>0&&h===o.nextElementSibling?c=d[0]:u<0&&h===o.previousElementSibling&&(c=d[d.length-1])),null==c&&(c=s(h).data("data-range")),o=h,r=c,l._setCurrentSection(r))}}).on("panend",function(){o=null,r=null,a=null})},_handleResize:function(e,t){t>0&&t!==this.m_height&&(this.refresh(),this.m_height=t)}});const c=function(e){this.listview=e,this.Init()};t._registerLegacyNamespaceProp("ListViewIndexerModel",c),t.Object.createSubclass(c,t.EventSource,"oj.ListViewIndexerModel"),c.prototype.getIndexableSections=function(){return this.listview.ojContext.getTranslatedString("indexerCharacters").split("|")},c.prototype.getMissingSections=function(){return null==this.missingSections&&(this.missingSections=this._getMissingSections()),this.missingSections},c.prototype._getMissingSections=function(){var e,t=[],i=this.listview._getGroupItemsCache(),n=this.getIndexableSections();for(e=0;e<n.length;e++){var o=n[e],r=!1;i.each(function(){var e=s(this).text();return!(e.length>0&&e.charAt(0)===o)||(r=!0,!1)}),r||t.push(o)}return t},c.prototype.setSection=function(e){return e===d.SECTION_OTHERS?this._setOtherSection():this._setSection(e)},c.prototype._setOtherSection=function(){var e=this.getIndexableSections(),t=this;return new Promise(function(i){var n=null;t.listview._getGroupItemsCache().each(function(){for(var t=s(this).text(),i=0;i<e.length;i++){var o=e[i];if(0===t.indexOf(o))return!0}return n=this,!1}),n?(t.listview._scrollToGroupHeader(n),i(d.SECTION_OTHERS)):i(null)})},c.prototype._setSection=function(e){var t=this.getIndexableSections(),i=t.indexOf(e),s=this;return new Promise(function(e){if(-1===i)e(null);else{for(var n=null;i<t.length;i++){var o=t[i],r=s._findGroupHeader(o);if(null!=r){s.listview._scrollToGroupHeader(r),n=o;break}}e(n)}})},c.prototype._findGroupHeader=function(e){var t;return this.listview._getGroupItemsCache().each(function(){return 0!==s(this).text().indexOf(e)||(t=this,!1)}),t},e.ListViewIndexerModel=c,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojlistview",["require","ojs/ojcore-base","jquery","ojs/ojcustomelement","ojs/ojdataproviderscroller","ojs/ojcontext","ojs/ojconfig","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojdatacollection-common","ojs/ojanimation","ojs/ojlogger","ojs/ojkeyset","ojs/ojmap","ojs/ojdomutils","ojs/ojdataprovideradapter","ojs/ojcustomelement-utils","ojs/ojkeyboardfocus-utils","ojs/ojindexer"],function(e,t,i,s,n,o,r,a,l,h,d,c,u,p,m,_,g,f,v){"use strict";var y;t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,p=p&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p,(y={properties:{as:{type:"string",value:""},currentItem:{type:"any",writeback:!0},data:{type:"object",extension:{webelement:{exceptionStatus:[{type:"unsupported",since:"13.0.0",description:"Data sets from a DataProvider cannot be sent to WebDriverJS; use ViewModels or page variables instead."}]}}},display:{type:"string",enumValues:["card","list"],value:"list"},dnd:{type:"object",properties:{drag:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},drag:{type:"function"},dragEnd:{type:"function"},dragStart:{type:"function"}}}}},drop:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}}}},reorder:{type:"object",properties:{items:{type:"string",enumValues:["disabled","enabled"],value:"disabled"}}}}},drillMode:{type:"string",enumValues:["collapsible","none"],value:"collapsible"},expanded:{type:"KeySet",writeback:!0},firstSelectedItem:{type:"object",writeback:!0,readOnly:!0,value:{key:null,data:null}},gridlines:{type:"object",properties:{item:{type:"string",enumValues:["hidden","visible","visibleExceptLast"],value:"visible"}}},groupHeaderPosition:{type:"string",enumValues:["static","sticky"],value:"sticky"},item:{type:"object",properties:{focusable:{type:"boolean|function",value:!0},renderer:{type:"function"},selectable:{type:"boolean|function",value:!0}}},scrollPolicy:{type:"string",enumValues:["auto","loadAll","loadMoreOnScroll"],value:"auto"},scrollPolicyOptions:{type:"Object<string, number>",properties:{fetchSize:{type:"number",value:25},maxCount:{type:"number",value:500},scroller:{type:"Element|string"}}},scrollPosition:{type:"object",writeback:!0,value:{x:0,y:0},properties:{index:{type:"number"},key:{type:"any"},offsetX:{type:"number"},offsetY:{type:"number"},parent:{type:"any"},x:{type:"number"},y:{type:"number"}}},scrollToKey:{type:"string",enumValues:["always","auto","capability","never"],value:"auto"},selected:{type:"KeySet",writeback:!0},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["multiple","none","single"],value:"none"},selectionRequired:{type:"boolean",value:!1},translations:{type:"object",value:{},properties:{accessibleNavigateSkipItems:{type:"string"},accessibleReorderAfterItem:{type:"string"},accessibleReorderBeforeItem:{type:"string"},accessibleReorderInsideItem:{type:"string"},accessibleReorderTouchInstructionText:{type:"string"},indexerCharacters:{type:"string"},labelCopy:{type:"string"},labelCut:{type:"string"},labelPaste:{type:"string"},labelPasteAfter:{type:"string"},labelPasteBefore:{type:"string"},msgFetchCompleted:{type:"string"},msgFetchingData:{type:"string"},msgItemsAppended:{type:"string"},msgNoData:{type:"string"}}}},methods:{getContextByNode:{},getDataForVisibleItem:{},getIndexerModel:{},getProperty:{},refresh:{},scrollToItem:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateEnd:{},ojAnimateStart:{},ojBeforeCollapse:{},ojBeforeCurrentItem:{},ojBeforeExpand:{},ojCollapse:{},ojCopy:{},ojCut:{},ojExpand:{},ojItemAction:{},ojPaste:{},ojReorder:{}},extension:{}}).extension._WIDGET_NAME="ojListView",y.extension._INNER_ELEM="ul",y.extension._GLOBAL_TRANSFER_ATTRS=["aria-label","aria-labelledby"],t.CustomElementBridge.register("oj-list-view",{metadata:y});const E=function(e,t){this.m_widget=e,this.m_root=t};t._registerLegacyNamespaceProp("StaticContentHandler",E),t.Object.createSubclass(E,t.Object,"oj.StaticContentHandler"),E.prototype.Init=function(){E.superclass.Init.call(this)},E.prototype.Destroy=function(){this.m_root.hasAttribute("role")&&(this.restoreContent(this.m_root,0),this.unsetRootAriaProperties())},E.prototype.IsReady=function(){return!0},E.prototype.notifyShown=function(){},E.prototype.notifyAttached=function(){},E.prototype.RenderContent=function(){var e=this.m_root;if(this.shouldUseGridRole()&&this.isCardLayout()&&!this.IsHierarchical()&&i(e).children("li").length>0){i(this.m_root).children().wrapAll("<li role='presentation'><ul role='row' class='"+this.m_widget.getGroupStyleClass()+"'></ul></li>");var t=i(this.m_root).children("li").first().get(0);t.style.width="100%",t.classList.add("oj-listview-group-container"),e=t.firstElementChild}this.modifyContent(e,0),this.setRootAriaProperties(),this.m_widget.renderComplete(!1);var s=this;o.getContext(e).getBusyContext().whenReady().then(function(){if(null!=e)for(var t=i(e).find("li."+s.m_widget.getItemElementStyleClass()),n=0;n<t.length;n++)s.m_widget.disableAllTabbableElements(t[n])})},E.prototype.Expand=function(e,t){var s="."+this.m_widget.getGroupStyleClass(),n=i(e).children(s)[0];i(n).css("display",""),t.call(null,n)},E.prototype.Collapse=function(e){e.get(0).style.display="none"},E.prototype.IsHierarchical=function(){return null==this.m_hier&&(this.m_hier=i(this.m_root).children("li").children("ul").length>0),this.m_hier},E.prototype.restoreContent=function(e,t){var s=this.m_widget.getGroupStyleClass(),n=this.m_widget.getGroupCollapseStyleClass(),o=this.m_widget.getGroupExpandStyleClass(),r=this.m_widget.getGroupItemStyleClass(),a=this.m_widget.getItemStyleClass(),l=this.m_widget.getItemElementStyleClass(),h=null;this.m_widget.getItemLayoutStyleClass&&(h=this.m_widget.getItemLayoutStyleClass());var d=e.firstElementChild;d&&d.classList.contains("oj-listview-group-container")&&i(d).children().unwrap().children().unwrap();for(var c=e.children,u=0;u<c.length;u++){var p=i(c[u]);if(p.hasClass(l)){this.unsetAriaProperties(p.get(0)),p.hasClass("oj-listview-card")&&(p.removeClass("oj-listview-card").removeClass("oj-listview-card-animated"),p[0].style.opacity="unset",p[0].style.transform="unset"),p.removeClass(l).removeClass(a).removeClass(h).removeClass(this.m_widget.getDepthStyleClass(t)).removeClass("gridline-hidden").removeClass("oj-listview-item").removeClass("oj-listview-item-element").removeClass("oj-skipfocus").removeClass("oj-focus").removeClass("oj-hover").removeClass("oj-expanded").removeClass("oj-collapsed").removeClass("oj-selected");var m=p.children("ul");if(m.length>0){p.children("."+r).children().unwrap(),this.shouldUseGridRole()&&this.unsetGroupAriaProperties(p),p.children(".oj-component-icon").remove();var _=i(m[0]);_.removeClass(s).removeClass(o).removeClass(n).removeAttr("role"),this.restoreContent(_[0],t+1)}}}},E.prototype.modifyContent=function(e,t){for(var s=this.m_widget.getItemStyleClass(),n=this.m_widget.getItemElementStyleClass(),o=this.m_widget.getGroupStyleClass(),r=this.m_widget.getGroupItemStyleClass(!0),a=this.m_widget.getGroupCollapseStyleClass(),l=this.m_widget.getCollapseIconStyleClass(),h=this.m_widget.getFocusedElementStyleClass(),d=e.children,c=this.m_widget.isExpandable(),u=0;u<d.length;u++){var p=i(d[u]),m=this.createContext(p);this.setAriaProperties(p,m),p.uniqueId().addClass(n),t>0&&p.addClass(this.m_widget.getDepthStyleClass(t)),this.isFocusable(m)||p.addClass("oj-skipfocus");var _=p.children("ul");if(_.length>0){this.m_hier=!0,p.children(":not(ul)").wrapAll("<div></div>");var g=p.children().first();g.addClass(r);var f=this.getItemsCount(_[0]);if(f>0){if(p.hasClass(h)?(p.removeClass(h),g.addClass(h).attr("aria-expanded","false")):(g.attr("role","presentation"),g.find("."+h).attr("aria-expanded","false")),c){p.addClass("oj-collapsed"),g.uniqueId();var v=document.createElement("a");i(v).attr("role","button").attr("aria-labelledby",g.get(0).id).addClass("oj-component-icon oj-clickable-icon-nocontext").addClass(l),g.prepend(v)}}else g.addClass("oj-empty");this.shouldUseGridRole()&&this.setGroupAriaProperties(g,f);var y,E=i(_[0]);y=this.shouldUseGridRole()?this.isCardLayout()?"row":"presentation":"group",E.addClass(o).addClass(a).attr("role",y).css("display","none"),this.modifyContent(E[0],t+1)}else p.addClass(s);this.m_widget._isSelectionEnabled()&&this.isSelectable(m)&&this.m_widget.getFocusItem(p).attr("aria-selected",!1),this.m_widget.itemRenderComplete(p[0],m)}},E.prototype.setRootAriaProperties=function(){this.shouldUseGridRole()?this.m_root.setAttribute("role","grid"):this.IsHierarchical()?this.m_root.setAttribute("role","tree"):this.m_root.setAttribute("role","listbox")},E.prototype.unsetRootAriaProperties=function(){this.m_root.removeAttribute("role")},E.prototype.getItemsCount=function(e){return i(e).children("li").length},E.prototype.createContext=function(e){var t={};if(t.key=e.attr("id"),t.parentElement=e.children().first()[0],t.index=e.index(),t.data=e[0],t.component=this.m_widget.getWidgetConstructor(),t=this.m_widget._FixRendererContext(t),this.IsHierarchical()){t.leaf=0===e.children("ul").length;var i=e.parents("li."+this.m_widget.getItemElementStyleClass());t.depth=i.length,0===i.length?t.parentKey=null:t.parentKey=i.first().attr("id")}return t},E.prototype.setAriaProperties=function(e,t){var i=this.m_widget.getSingleFocusableElement(e);this.shouldUseGridRole()?null==t.leaf||t.leaf?this.isCardLayout()?i.attr("role","gridcell"):(e.attr("role","row"),i!==e?i.attr("role","gridcell"):i.children().wrapAll("<div role='gridcell' class='oj-listview-cell-element'></div>")):(e.attr("role","presentation"),i!==e&&i.attr("role","gridcell")):(i.attr("role",this.IsHierarchical()?"treeitem":"option"),i!==e&&e.attr("role","presentation")),i.addClass(this.m_widget.getFocusedElementStyleClass())},E.prototype.setGroupAriaProperties=function(e,t){var i=this.m_widget.getFocusedElementStyleClass();e.get(0).removeAttribute("aria-expanded"),e.removeClass(i),e.attr("role","row"),e.children().wrapAll("<div role='gridcell' aria-expanded='false' class='oj-listview-cell-element "+i+"'></div>"),this.isCardLayout()&&t>1&&e.children().first().attr("aria-colspan",t)},E.prototype.unsetGroupAriaProperties=function(e){e.children("div").first().children().unwrap()},E.prototype.unsetAriaProperties=function(e){h.enableAllFocusableElements(e);var t,s=this.m_widget.getGroupItemStyleClass(!0),n=this.m_widget.getFocusedElementStyleClass(),o=e.firstElementChild;if(o&&i(o).hasClass(s)){if(0===(t=i(o).children("."+n).first()).length)return}else t=this.m_widget.getSingleFocusableElement(i(e));t.removeAttr("role"),t.removeAttr("aria-selected"),t.removeAttr("aria-expanded"),t.removeClass(this.m_widget.getFocusedElementStyleClass()),this.shouldUseGridRole()&&!this.isCardLayout()&&(t!==e?(i(e).removeAttr("role"),t.children().first().children().unwrap()):t.children().first().children().unwrap().children().unwrap())},E.prototype.GetKey=function(e){return i(e).attr("id")},E.prototype.FindElementByKey=function(e){return document.getElementById(e)},E.prototype.isFocusable=function(e){return this.m_widget.getItemFocusable(e)},E.prototype.isSelectable=function(e){return this.m_widget.getItemSelectable(e)},E.prototype.isCardLayout=function(){return this.m_widget.isCardLayout()},E.prototype.shouldUseGridRole=function(){return this.m_widget.ShouldUseGridRole()},E.prototype.createKeyMap=function(e){var t=new p;return e?(e.forEach(function(e,i){t.set(i,e)}),t):t},E.prototype.createKeySet=function(e){return new u.KeySet(e)};const b=function(e,t,i){b.superclass.constructor.call(this,e,t,i)};t._registerLegacyNamespaceProp("TreeDataProviderContentHandler",b),t.Object.createSubclass(b,n.DataProviderContentHandler,"oj.TreeDataProviderContentHandler"),b.NUM_CHILD_SKELETONS=3,b.prototype.Init=function(){b.superclass.Init.call(this),this.m_childDataProviders=new p,this.m_fetchCalls=new Set},b.prototype.IsHierarchical=function(){return!0},b.prototype._getChildDataProvider=function(e){if(null===e)return this.getDataProvider();var t=this.m_childDataProviders.get(e);return null==t&&(t=this.getDataProvider().getChildDataProvider(e))&&this.m_childDataProviders.set(e,t),t},b.prototype.fetchRows=function(e){this.signalTaskStart("fetching rows"),b.superclass.fetchRows.call(this,e),this.m_fetchCalls.clear(),this._fetchChildren(null,this.m_root,null),this.signalTaskEnd()},b.prototype._fetchChildren=function(e,t,s,n){var o=this;this.signalTaskStart("fetching children from parent: "+e);var r=this.loadTemplateEngine();if(null!=e){var a=t.parentNode.firstElementChild.firstElementChild.firstElementChild;if(a){a=i(a);var l=this.m_widget.getCollapseIconStyleClass();if(a.hasClass(l)){var h=this.isSkeletonSupport()?this.m_widget.getExpandIconStyleClass():this.m_widget.getExpandingIconStyleClass();a.removeClass(l).addClass(h)}}}this.m_fetching=!0,null!=e&&this.m_fetchCalls.add(e),this._clientId=this._clientId||Symbol();var d={clientId:this._clientId,size:-1};this.signalTaskStart("first fetch");var c=this._getChildDataProvider(e).fetchFirst(d)[Symbol.asyncIterator](),u=c.next(),p=function(i){return i[0].done?i:c.next().then(function(e){return i[0].done=e.done,i[0].value.data=i[0].value.data.concat(e.value.data),i[0].value.metadata=i[0].value.metadata.concat(e.value.metadata),p(i)},function(i){null!=e&&o.m_fetchCalls.delete(e),n&&n(i),o._handleFetchError(i,t),o.signalTaskEnd()})};Promise.all([u,r]).then(function(e){return p(e)},function(i){null!=e&&o.m_fetchCalls.delete(e),o._handleFetchError(i,t),o.signalTaskEnd()}).then(function(i){if(i){if(null==o.m_widget)return void o.signalTaskEnd();var n=i[0],r=i[1];r&&o.cleanItems(r,t),o._handleFetchSuccess(n,e,t,s,r),o.signalTaskEnd()}}),this.signalTaskEnd()},b.prototype._getAtomicFetchChildPromise=function(){var e=this;return new Promise(function(t,i){e.m_fetchResolve=t})},b.prototype._handleFetchSuccess=function(e,t,s,n,o){var r=this;if(null!=this.m_widget&&null!=e.value){this.signalTaskStart("handling successful fetch"),this.m_fetching=!1,null!=t&&this.m_fetchCalls.delete(t);var a=e.value.data,l=e.value.metadata,h=0;this.isCardLayout()||null!=t||(h=this.handleSuggestions(l));var d=l.map(function(e){return e.key});if(a.length===d.length){for(var c=0,u=document.createDocumentFragment(),p=0;p<a.length;p++){var m=a[p];this.addItem(u,-1,m,this.getMetadata(c,d[p],m,s),o,null,l[p]),c+=1}if(null==this.m_fetchResolve&&this.shouldUseGridRole()?this.m_fetchCalls.size>0?(this.m_widget.signalTaskStart("Animating in content"),this._getAtomicFetchChildPromise().then(function(){this.animateShowContent(s,u,!0).then(function(){this.m_widget&&(this.m_widget.signalTaskEnd(),this.renderSparkles(this.getItems(s,h))),g()}.bind(this))}.bind(this))):(this.m_widget.signalTaskStart("Animating in content"),this.animateShowContent(s,u,!0).then(function(){this.m_widget&&(this.m_widget.signalTaskEnd(),h&&this.renderSparkles(this.getItems(s,h))),g()}.bind(this))):(i(s).empty(),s.appendChild(u),this.shouldUseGridRole()?null!=n&&n.call(null,s):g()),this.shouldUseGridRole()&&this.isCardLayout()&&null!=t&&c>0){var _=s.parentNode.firstElementChild.firstElementChild;i(_).attr("aria-colspan",c+1)}}0===this.m_fetchCalls.size&&null!=this.m_fetchResolve&&(this.m_fetchResolve(),this.m_fetchResolve=null),this.m_initialized=!0,this.signalTaskEnd()}function g(){r.m_widget&&(null!=n&&n.call(null,s),r.m_widget.renderComplete(!1),r._processEventQueue())}},b.prototype.getMetadata=function(e,t,i,s){var n=b.superclass.getMetadata.call(this,e,t,i,s),o=this._getChildDataProvider(t);n.leaf=null===o,n.parentKey=null,s&&s!==this.m_root&&s.parentElement&&(n.parentKey=this.GetKey(s.parentElement));for(var r=0,a=s;a&&a!==this.m_root;)a=a.parentElement.parentElement,r+=1;return n.depth=r,n},b.prototype.GetBindingContext=function(e){var t=b.superclass.GetBindingContext.call(this,e);return t.depth=e.depth,t.leaf=e.leaf,t.parentKey=e.parentKey,t},b.prototype.afterRenderItem=function(e,t,s){this.signalTaskStart("after rendering an item"),b.superclass.afterRenderItem.call(this,e,t,s);var n=this.m_widget.getGroupStyleClass(),o=this.m_widget.getItemStyleClass(),r=this.m_widget.getGroupItemStyleClass(!0),a=this.m_widget.getGroupCollapseStyleClass(),l=this.m_widget.getCollapseIconStyleClass(),h=this.m_widget.getFocusedElementStyleClass();if(e=i(e),!1===t.leaf){null==e.get(0).querySelector("."+r)&&e.children().wrapAll("<div></div>"),e.hasClass(h)?e.removeClass(h).children().first().addClass(h).attr("aria-expanded","false"):e.children().first().attr("role","presentation").find("."+h).attr("aria-expanded","false");var d=e.children().first();if(d.uniqueId().addClass(r),this.m_widget.isExpandable()&&!e.hasClass("oj-expanded")&&!e.hasClass("oj-collapsed")){e.addClass("oj-collapsed");var c=document.createElement("a");i(c).addClass("oj-component-icon oj-clickable-icon-nocontext").addClass(l),d.prepend(c)}if(this.shouldUseGridRole()&&(d.get(0).removeAttribute("aria-expanded"),d.removeClass(h),d.attr("role","row"),d.children().wrapAll("<div role='gridcell' aria-expanded='false' class='oj-listview-cell-element "+h+"'></div>")),null==e.get(0).querySelector("."+n)){var u,p=document.createElement("ul");u=this.shouldUseGridRole()?this.isCardLayout()?"row":"presentation":"group",i(p).addClass(n).addClass(a).attr("role",u),e.append(p)}}else!0===t.leaf&&(e.addClass(o),!s&&this.m_widget.getItemLayoutStyleClass&&e.addClass(this.m_widget.getItemLayoutStyleClass()));this.m_widget._isSelectionEnabled()&&this.isSelectable(t)&&this.m_widget.getFocusItem(e).attr("aria-selected",!1),t.depth>0&&e.addClass(this.m_widget.getDepthStyleClass(t.depth)),this.m_widget.itemRenderComplete(e[0],t),this.signalTaskEnd()},b.prototype._handleFetchError=function(e,t){if(null!=this.m_widget){c.error(e),this.m_fetching=!1,t&&this._destroySkeletons(t);var i=this.m_root.querySelector(".oj-listview-initial-skeletons");null!=i&&i.parentNode.removeChild(i),0===this.m_fetchCalls.size&&null!=this.m_fetchResolve&&(this.m_fetchResolve(),this.m_fetchResolve=null),this.m_widget.renderComplete(!0)}else c.info("handleFetchError: widget has already been destroyed")},b.prototype.Expand=function(e,t){this.signalTaskStart("expanding an item");var i,s=this.GetKey(e[0]),n=e.children("ul")[0];this.isSkeletonSupport()&&(i=setTimeout(function(){this._renderExpandSkeletons(n)}.bind(this),this.m_widget._getShowStatusDelay())),this._fetchChildren(s,n,function(e){i&&clearTimeout(i),t(e),n.classList.remove("oj-listview-skeleton-container")},function(){this._handleFetchError()}.bind(this)),this.signalTaskEnd()},b.prototype.Collapse=function(e){var t=this.getTemplateEngine();t&&t.clean(e.get(0)),e.empty()},b.prototype.addItemsForModelInsert=function(e,t,i,s,n,o,r){for(var a=this.getTemplateEngine(),l=0;l<e.length;l++){this.signalTaskStart("handling model add event for item: "+i[l]);var h,d=this.m_root;void 0!==s&&(d=null==s[l]?this.m_root:this.FindElementByKey(s[l]))&&d!==this.m_root&&(d=d.lastElementChild),null!=t?h=t[l]:(h=this.getIndex(o,l))>-1&&(h=n?h:h+1),this.addItem(d,h,e[l],this.getMetadata(h,i[l],e[l],d),a,this.afterRenderItemForInsertEvent.bind(this),null!=r?r[l]:null),this.signalTaskEnd()}this.m_widget.renderComplete(!0)},b.prototype.afterRenderItemForInsertEvent=function(e,t,i){!1===t.leaf?this.afterRenderItem(e,t,i):b.superclass.afterRenderItemForInsertEvent.call(this,e,t,i)},b.prototype.removeItem=function(e,t){var i=e.key;i&&this.m_childDataProviders.delete(i),b.superclass.removeItem.call(this,e,t)},b.prototype._isExpandedGroupItem=function(e){return"none"===this.m_widget.GetOption("drillMode")||e.classList.contains("oj-expanded")},b.prototype._replaceGroupItemCallback=function(e,t,i,s){this.shouldUseGridRole()?this.m_widget.itemRenderComplete(e,t):this.afterRenderItem(e,t,i,s)},b.prototype._replaceGroupItem=function(e,t,s,n,o,r){var a=this.m_widget.getGroupItemStyleClass(!1),l=e.querySelector("."+a),h=this.shouldUseGridRole();if(l){var d=h?l.firstElementChild:l,c=d.lastElementChild;if(c){o&&o.clean(l),d.removeChild(c);var u=e.parentNode,p=i(u).children().index(e),m=this.GetChildElementTagName();this._addOrReplaceItem(e,p,u,t,s,n,o,this._replaceGroupItemCallback.bind(this),r,null,function(e){for(var t=0;t<e.length;t++){if(e[t].tagName===m&&!h)return l.innerHTML=e[t].innerHTML,!0;d.appendChild(e[t])}return!1})}}},b.prototype.replaceItem=function(e,t,i,s,n,o,r){var a=e.key;a&&this.m_childDataProviders.delete(a),!s.leaf&&this._isExpandedGroupItem(e)?this._replaceGroupItem(e,t,i,s,n,r):b.superclass.replaceItem.call(this,e,t,i,s,n,o,r)},b.prototype._handleChildRefresh=function(e){var t=this.getTemplateEngine(),i=this.m_widget.getGroupStyleClass(),s=this.m_widget.getGroupItemStyleClass();e.forEach(function(e){var n=this.FindElementByKey(e);if(null!=n&&this._isExpandedGroupItem(n)){var o=n.querySelector("."+i),r=n.querySelector("."+s);if(null!=o&&null!=r){null!=t&&t.clean(o),o.innerHTML="",this.m_childDataProviders.delete(e);var a=r.querySelector("[aria-expanded]");a&&a.setAttribute("aria-expanded","false"),this.m_widget.itemRenderComplete(n,{key:e,data:null})}}}.bind(this))},b.prototype.handleModelRefreshEvent=function(e){null!=this.m_root&&(this.IsReady()?e.detail&&e.detail.keys?this._handleChildRefresh(e.detail.keys):(this.signalTaskStart("handling model refresh event"),this._clearEventQueue(),this.m_widget.ClearCache(!0),this.m_childDataProviders.clear(),this.m_widget.resetFocusBeforeRefresh(),this.fetchRows(!0),this.signalTaskEnd()):this._pushToEventQueue({type:e.type,event:e}))},b.prototype.renderInitialSkeletons=function(){this.m_superRoot&&(this.m_root=this.m_superRoot,this.m_superRoot=null),i(this.m_root).empty();var e=this.getRootElementHeight(),t=this.getDefaultSkeletonDimension(),s=0;if(t.width>0&&t.height>0){var n=t.height*(1+b.NUM_CHILD_SKELETONS);s=Math.ceil(e/n)}var o=document.createElement("li");o.setAttribute("role","presentation"),o.classList.add("oj-listview-initial-skeletons");var r=document.createElement("ul");r.setAttribute("role","presentation"),r.classList.add(this.m_widget.getGroupStyleClass()),r.classList.add("oj-listview-skeleton-container");for(var a=0;a<s;a++){r.appendChild(this.createSkeletonItem());var l=document.createElement("li");l.setAttribute("role","presentation");var h=document.createElement("ul");h.setAttribute("role","presentation"),h.classList.add("oj-listview-child-skeleton"),l.appendChild(h),h.appendChild(this.createSkeletonItem()),h.appendChild(this.createSkeletonItem()),h.appendChild(this.createSkeletonItem()),r.appendChild(l)}o.appendChild(r),this.m_root.appendChild(o)},b.prototype._renderExpandSkeletons=function(e){e.style.maxHeight="none";for(var t=0;t<b.NUM_CHILD_SKELETONS;t++)e.appendChild(this.createSkeletonItem());e.classList.add("oj-listview-skeleton-container"),e.setAttribute("data-oj-initial-height",this._getExpandSkeletonHeight(e))},b.prototype._destroySkeletons=function(e){i(e).empty(),e.classList.remove("oj-listview-skeleton-container")},b.prototype._getExpandSkeletonHeight=function(e){return null!=this.m_expandSkeletonHeight&&0!==this.m_expandSkeletonHeight||(this.m_expandSkeletonHeight=e.offsetHeight),this.m_expandSkeletonHeight};var S=function(){this.createKeyMap=function(e){var t=new p;return e?(e.forEach(function(e,i){t.set(i,e)}),t):t},this.createKeySet=function(e){return new u.KeySet(e)}};S.call(E.prototype),S.call(b.prototype),S.call(n.IteratingDataProviderContentHandler.prototype);const C=function(){C.superclass.constructor.call(this)};t._registerLegacyNamespaceProp("_ojListViewExpandedKeySet",C),t.Object.createSubclass(C,t.ExpandedKeySet,"ListViewExpandedKeySet");const I=function(e,s){var n=function(){};return t.Object.createSubclass(n,e,""),n.prototype=i.extend(n.prototype,s),n}(Object,{LEFT_KEY:37,RIGHT_KEY:39,DOWN_KEY:40,UP_KEY:38,TAB_KEY:9,ENTER_KEY:13,ESC_KEY:27,F2_KEY:113,SPACE_KEY:32,STATE_EXPANDED:0,STATE_COLLAPSED:1,STATE_NONE:2,MINIMUM_ITEM_HEIGHT:20,init:function(e){var s=this;this.readinessStack=[],this.element=e.element,this.ojContext=e.ojContext,this.OuterWrapper=e.OuterWrapper,this.options=e,this.element.uniqueId().addClass(this.GetStyleClass()+" oj-component-initnode"),this.OuterWrapper&&this.element[0].setAttribute("data-oj-context",""),this.signalTaskStart("Initializing"),this._rootTabIndexSet=!1,this.SetRootElementTabIndex();var n=this.GetDnDContext();n&&(this.m_dndContext=n,this.ojContext._on(this.element,{dragstart:function(e){return n._handleDragStart(e)},dragenter:function(e){return n._handleDragEnter(e)},dragover:function(e){return n._handleDragOver(e)},dragleave:function(e){return n._handleDragLeave(e)},dragend:function(e){return s.m_preActive=!1,n._handleDragEnd(e)},drag:function(e){return n._handleDrag(e)},drop:function(e){return s.m_preActive=!1,n._handleDrop(e)}})),this._touchStartListener=function(e){e.originalEvent||(e=i.Event(e)),s.touchStartEvent=e,s.HandleMouseDownOrTouchStart(e)},this.ojContext._IsCustomElement()?this.element[0].addEventListener("touchstart",this._touchStartListener,{passive:!0}):this.ojContext._on(this.element,{touchstart:this._touchStartListener}),this.ojContext._on(this.element,{click:function(e){s.HandleMouseClick(e),s.touchStartEvent=null},touchend:function(e){s.touchStartEvent&&e.changedTouches.length&&(document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY)!==s.touchStartEvent.target&&(s.touchStartEvent=null));s.HandleTouchEndOrCancel(e)},touchcancel:function(e){s.touchStartEvent=null,s.HandleTouchEndOrCancel(e)},mousedown:function(e){0===e.button?s._recentTouch()||s.HandleMouseDownOrTouchStart(e):s.m_preActive=!0},mouseup:function(e){s._handleMouseUpOrPanMove(e),s.m_preActive=!1},mouseout:function(e){s._handleMouseOut(e)},mouseover:function(e){s._handleMouseOver(e)},keydown:function(e){s.HandleKeyDown(e)},keyup:function(e){s.HandleKeyUp(e)},ojpanmove:function(e){s._handleMouseUpOrPanMove(e)}}),this.ojContext._on(this.ojContext.element,{focus:function(e){s.HandleFocus(e)},blur:function(e){s.HandleBlur(e)}}),t.AgentUtils.getAgentInfo().browser===t.AgentUtils.BROWSER.FIREFOX&&this._isComponentFocusable()&&(this._rootTabIndexSet=!0,this.getListContainer().attr("tabIndex",-1)),this.ojContext._on(this.ojContext.element,{focusin:function(e){s.HandleFocus(e)},focusout:function(e){s.HandleFocusOut(e)}}),this.ojContext._focusable({applyHighlight:s.ShouldApplyHighlight(),recentPointer:s.RecentPointerCallback(),setupHandlers:function(e,t){s._focusInHandler=e,s._focusOutHandler=t}})},isAvailable:function(){return null!=this.m_contentHandler},_initContentHandler:function(){this.signalTaskStart("Initialize ContentHandler");var e=this,t=function(t){e.m_contentHandler=t,t.RenderContent(),e.signalTaskEnd(),e._registerResizeListener(e.getListContainer()[0]),e._registerScrollHandler()},i=this.GetOption("data");null!=i?this.CreateDataContentHandler(i).then(t,function(){e.signalTaskEnd()}):(this._removeNoData(),t(new E(this,this.element[0])))},setupResources:function(){this.ojContext.document.bind("touchend.ojlistview touchcancel.ojlistview",this.HandleTouchEndOrCancel.bind(this)),this._syncSelectionWithKeySet(),this._initContentHandler(),this._updateGridlines()},releaseResources:function(){this.ojContext.document.off(".ojlistview"),this.DestroyContentHandler(!0),this._unregisterResizeListener(this.getListContainer()),this._unregisterScrollHandler(),this.SetRootElementTabIndex(),this._resetState()},_isSelectedOptionExposed:function(){return this.ShouldUseGridRole()},_syncSelectionWithKeySet:function(){var e=this.GetOption("selection"),t=this.GetOption("selected");if(this._isSelectedOptionExposed()&&t&&(t.isAddAll()||t.values&&t.values().size>0))return e=[],t.isAddAll()?(e.inverted=!0,t.deletedValues().forEach(function(t){e.push(t)})):t.values().forEach(function(t){e.push(t)}),void this.SetOption("selection",e,{_context:{internalSet:!0},changed:!0});var i=!1;null==t&&(t=new u.KeySetImpl,i=!0),e.length>0&&t.values&&0===t.values().size&&(t=t.add(e),i=!0),i&&this.SetOption("selected",t,{_context:{internalSet:!0},changed:!0})},afterCreate:function(){this._buildList(),this.signalTaskEnd()},_isAnimateCards:function(){return this.isCardDisplayMode()&&this.m_contentHandler&&!this.m_contentHandler.IsHierarchical()},refresh:function(){var e=this.element[0].querySelectorAll(".oj-listview-card");if(e.length>0){var t=this;this.signalTaskStart("Exit animation"),this._applyExitAnimation(e).then(function(){t._refresh(),t.signalTaskEnd()})}else this._refresh()},_applyExitAnimation(e){var t,i=this;return e.forEach(function(e){t=i.StartAnimation(e,"cardExit")}),t},_refresh:function(){this._resetInternal(),this.signalTaskStart("Refresh"),this.SetAriaProperties(),this._initContentHandler(),this._updateGridlines(),this.resetFocusBeforeRefresh(),this.signalTaskEnd()},resetFocusBeforeRefresh:function(){this.m_active=null,this.SetRootElementTabIndex(),this.element[0].contains(document.activeElement)&&this.element[0].focus()},whenReady:function(){return this.readyPromise},destroy:function(){this.element.removeClass(this.GetStyleClass()+" oj-component-initnode"),this._unregisterResizeListener(this.getListContainer()),this._resetInternal(),m.unwrap(this.element,this.getListContainer())},_isScrollToKey:function(){var e=this.GetOption("scrollToKey");if("never"===e)return!1;if("always"===e)return!0;var i=this.GetOption("data");if(null==i||!t.DataProviderFeatureChecker.isDataProvider(i))return!0;if(i.getCapability){var s=i.getCapability("fetchFirst");if(s&&"immediate"===s.iterationSpeed)return!0}return!1},adjustScrollPositionValueOnFetch:function(){var e=null==this.GetOption("scrollPosition")?{}:this.GetOption("scrollPosition"),t=this.GetOption("selection");this._isSelectionEnabled()&&t.length>0&&this._isScrollToKey()?null!=this.m_selectionFrontier&&this.m_selectionFrontier.length>0?e.key=this.GetKey(this.m_selectionFrontier[0]):e.key=t[0]:(e.y=0,e.key=null,e.index=0),e.x=0,e.offsetX=0,e.offsetY=0,this.SetOption("scrollPosition",e,{_context:{internalSet:!0},changed:!1})},_clearBusyState:function(){if(this.readinessStack&&this.readinessStack.length>0)for(c.warn("ListView did not end with a clean state, this could happen if ListView is detached before fetch is complete.  State: "+this.readinessStack);this.readinessStack.length>0;)this.signalTaskEnd()},_resetInternal:function(){this.UnsetAriaProperties(),this._cleanupTabbableElementProperties(this.element),this.DestroyContentHandler(),this._resetState()},_resetState:function(){this.m_active=null,this.m_isExpandAll=null,this.m_disclosing=null,this.m_itemHeight=null,this.m_keyElemMap=null,this.m_clientHeight=null,this.m_scrollHeight=null,this.m_clientWidth=null,this.m_scrollWidth=null,this.m_closestParent=null,this.m_gridlinesVisible=null,this.m_gridlinePlaceholder=null,this.m_scroller=null,this.m_initialSelectionStateValidated=null,this.m_validatedSelectedKeyData=null,this.m_selectionFrontier=null,this.ClearCache(),this._clearFocusoutTimeout(),this._clearFocusoutBusyState(),this._clearScrollPosBusyState(),null!=this.m_dndContext&&this.m_dndContext.reset()},notifyAttached:function(){null!=this.m_contentHandler&&this.m_contentHandler.IsReady()&&(this.syncScrollPosition(),this.m_contentHandler.notifyAttached())},notifyDetached:function(){this.getListContainer().removeClass("oj-focus-ancestor"),null!=this.m_active&&i(this.m_active.elem).removeClass("oj-focus oj-focus-highlight"),null!=this.m_hoverItem&&this._unhighlightElem(this.m_hoverItem,"oj-hover")},notifyShown:function(){null!=this.m_contentHandler&&this.m_contentHandler.IsReady()&&(this.syncScrollPosition(),this._clearAccInfoText(),this.m_contentHandler.notifyShown())},getNodeBySubId:function(e){var t;if(null==e)return this.element[0];var s=e.subId;if("oj-listview-disclosure"===s||"oj-listview-icon"===s){if(null!=(t=e.key)){var n=this.FindElementByKey(t);if(null!=n){var o=i(n).find(".oj-clickable-icon-nocontext").first();if(this._isExpandCollapseIcon(o))return o.get(0)}}}else if("oj-listview-item"===s&&null!=(t=e.key))return this.FindElementByKey(t);return null},getSubIdByNode:function(e){if(null!=e&&this._isExpandCollapseIcon(e)){var t=this.FindItem(e);if(null!=t&&t.length>0){var i=this.GetKey(t[0]);if(null!=i)return{subId:"oj-listview-disclosure",key:i}}}return null},getContextByNode:function(e){var t=this.FindItem(e);if(null!=t&&t.length>0){var i=this.GetKey(t[0]);if(null!=i){var s=t.parent(),n={subId:"oj-listview-item",key:i,index:s.children("."+this.getItemElementStyleClass()).index(t)};return s.get(0)!==this.element.get(0)&&(n.parent=s.parent().get(0)),t.children().first().hasClass(this.getGroupItemStyleClass())?n.group=!0:n.group=!1,n}}return null},getDataForVisibleItem:function(e){var t,s=e.key;if(null!=s&&(t=this.FindElementByKey(s)),null==t){var n=e.index,o=e.parent;o=null==o?this.element.get(0):i(o).children("ul."+this.getGroupStyleClass()).first(),t=i(o).children("li").get(n)}return null!=t&&i(t).hasClass(this.getItemStyleClass())?this._getDataForItem(t):null},_getDataForItem:function(e){return null==this.GetOption("data")?e:i.data(e,"data")},_getMetadataForItem:function(e){return i.data(e,"metadata")},ShouldRegisterResizeListener:function(e){return e&&this.m_contentHandler&&this.m_contentHandler.HandleResize&&this.m_contentHandler.shouldHandleResize&&this.m_contentHandler.shouldHandleResize()},_unregisterResizeListener:function(e){e&&this._resizeHandler&&m.removeResizeListener(e,this._resizeHandler)},_registerResizeListener:function(e){this._unregisterResizeListener(e),this.ShouldRegisterResizeListener(e)&&(null==this._resizeHandler&&(this._resizeHandler=this.HandleResize.bind(this)),m.addResizeListener(e,this._resizeHandler))},disableResizeListener:function(){var e=this.getListContainer()[0];this._unregisterResizeListener(e)},enableResizeListener:function(){var e=this.getListContainer()[0];this._registerResizeListener(e)},GetDnDContext:function(){var e=this.GetOption("dnd");if(!(null===e||null===e.drag&&null===e.drop&&e.reorder&&"disabled"===e.reorder.items))return void 0!==t.ListViewDndContext?new t.ListViewDndContext(this):void 0},HandleResize:function(e,t){e>0&&t>0&&null!=this.m_contentHandler&&this.m_contentHandler.HandleResize&&this.m_contentHandler.HandleResize(e,t),this.m_clientHeight=null,this.m_scrollHeight=null,this.m_clientWidth=null,this.m_scrollWidth=null},ShouldApplyHighlight:function(){return!0},RecentPointerCallback:function(){return function(){return!1}},ShouldRefresh:function(e){return null!=e.data||null!=e.drillMode||null!=e.groupHeaderPosition||null!=e.item||null!=e.scrollPolicy||null!=e.scrollPolicyOptions||null!=e.gridlines||null!=e.display},_isKeySet:function(e){return void 0!==e.isAddAll&&(void 0!==e.values||void 0!==e.deletedValues)},_shouldExpand:function(e,t){return this._isKeySet(t)?t.has(e):!this.ojContext._IsCustomElement()&&"all"===t||!!Array.isArray(t)&&t.indexOf(e)>-1},setOptions:function(e,t){if(this.ShouldRefresh(e))return!0;if(null!=e.expanded&&this.m_contentHandler.IsHierarchical()){this._collapsedKeys=void 0;var s=e.expanded;this.signalTaskStart("Set expanded option"),this._ignoreExpanded=!0;try{for(var n="."+this.getGroupItemStyleClass(),o=this.element.find(n),r=0;r<o.length;r++){var a=o[r],l=this.GetKey(a.parentNode);this._shouldExpand(l,s)?this.expandKey(l,!0,!0,!0,!1):this.collapseKey(l,!0,!0,!1)}}finally{this._ignoreExpanded=void 0,this.signalTaskEnd()}}if(null!=e.currentItem){var h=this.FindElementByKey(e.currentItem);if(null!=h&&(h=i(h),!this.SkipFocus(h))){var d=document.activeElement;d&&this.element.get(0).contains(d)?this.ActiveAndFocus(h,null):this._setActive(h,null,!0)}}else null===e.currentItem&&(this.UnhighlightActive(),this.m_active&&this.m_active.elem&&this.m_active.elem.get(0).classList.remove("oj-listview-current-item"),this.m_active=null,this.SetRootElementTabIndex());if(this.HandleSelectionOption(e),null!=e.selectionMode&&(this.SetAriaProperties(),this.UpdateItemAriaProperties(e.selectionMode)),null!=e.scrollTop){var c=this._getScroller(),u=e.scrollTop;null==u||isNaN(u)||(c.scrollTop=u)}return null!=e.scrollPosition&&(this.syncScrollPosition(e.scrollPosition),delete e.scrollPosition),this._shouldDragSelectedItems()&&null!=this.m_active&&null!=e.dnd&&null!=e.dnd.reorder&&("enabled"===e.dnd.reorder.items?this.m_dndContext._setItemDraggable(this.m_active.elem):"disabled"===e.dnd.reorder.items&&this.m_dndContext._unsetItemDraggable(this.m_active.elem)),!1},_isFirstSelectedItem:function(e){var i=this.GetOption("firstSelectedItem");return i&&t.KeyUtils.equals(i.key,e)},_setFirstSelectedItem:function(e,t){var i={key:e,data:t};this.SetOption("firstSelectedItem",i,{_context:{originalEvent:null,internalSet:!0},changed:!0})},_updateFirstSelectedItem:function(e){var t;if(e.isAddAll())for(var i=this._getItemsCache(),s=0;s<i.length;s++){var n=this.m_contentHandler.GetKey(i[s]);if(e.has(n)){t=n;break}}else t=e.values().values().next().value;if(null!=t){var o=this._getLocalData(t);this._setFirstSelectedItem(t,o)}},updateSelectedKeyData:function(e,t){this._isFirstSelectedItem(e)&&this._setFirstSelectedItem(e,t),this.m_validatedSelectedKeyData&&this.m_validatedSelectedKeyData.has(e)&&this.m_validatedSelectedKeyData.set(e,t)},HandleSelectionOption:function(e){if(null!=e.selection||null!=e.selected){var t=e.selected;if(null!=t&&t.isAddAll()){for(var i=this._getItemsCache(),s=0;s<i.length;s++){var n=this.m_contentHandler.GetKey(i[s]);t.has(n)?this._applySelection(i[s],n):this._unhighlightElem(i[s],"oj-selected")}e.selection=u.KeySetUtils.toArray(t)}else{var o,r=null!=t?t.values():e.selection,a=this._cloneSelection(r);if(this._validateAndUpdateSelection(a),e.selection=a,t=(t=(t=this.GetOption("selected")).clear()).add(a),e.selected=t,this.m_selectionFrontier){var l=this.GetKey(this.m_selectionFrontier.get(0));o=t.has(l)?this.m_selectionFrontier:void 0}this._clearSelection(!1,o);for(var h=0;h<a.length;h++){var d=this.FindElementByKey(a[h]);null!=d&&("LI"!==d.tagName&&d.parentElement&&d.parentElement.classList.contains("oj-listview-temp-item")&&(d=d.parentElement),this._applySelection(d,a[h]))}}null!=t&&this._updateFirstSelectedItem(t)}},Trigger:function(e,t,i){return this.ojContext._trigger(e,t,i)},SetOption:function(e,t,i){this.ojContext.option(e,t,i)},GetOption:function(e){return this.ojContext.option(e)},_getBusyDescription:function(e){return"The component identified by '"+(this.ojContext._IsCustomElement()?this.GetRootElement().attr("id"):this.element.attr("id"))+"', "+e},signalTaskStart:function(e){var t=this;if(this.readinessStack){if(0===this.readinessStack.length){this.readyPromise=new Promise(function(e){t.readyResolve=e});var i=o.getContext(this.element[0]).getBusyContext(),s=null!=e?{description:this._getBusyDescription(e)}:{};t.busyStateResolve=i.addBusyState(s)}this.readinessStack.push(null!=e?e:"unknown task")}},signalTaskEnd:function(){this.readinessStack&&this.readinessStack.length>0&&(this.readinessStack.pop(),0===this.readinessStack.length&&(this.readyResolve(null),this.busyStateResolve(null),this.busyStateResolve=null))},isReady:function(){return null==this.busyStateResolve},throwError:function(e){if(this.readinessStack)for(;this.readinessStack.length>0;)this.signalTaskEnd();throw e},getItems:function(e){var t=this,s=[];return i.each(e,function(e,i){var n=t.FindElementByKey(i);null!=n&&s.push(n)}),s},isCardDisplayMode:function(){return"card"===this.GetOption("display")},isCardLayout:function(){return!!(this.ojContext._IsCustomElement()?this.GetRootElement():this.element).hasClass("oj-listview-card-layout")||this.isCardDisplayMode()},ShouldUseGridRole:function(){return!0},ShouldUpdateScrollPosition:function(){return this.ShouldUseGridRole()&&this.ojContext._IsCustomElement()},DestroyContentHandler:function(e){null!=this.m_contentHandler&&(this.m_contentHandler.Destroy(e),delete this.m_contentHandler,this.m_contentHandler=null),this._clearBusyState()},CreateDataContentHandler:function(i){var s;if(this.showStatusText(),void 0!==t.TableDataSource&&i instanceof t.TableDataSource)s=new n.IteratingDataProviderContentHandler(this,this.element[0],new t.TableDataSourceAdapter(i));else{if(void 0!==t.TreeDataSource&&i instanceof t.TreeDataSource){var o=new Promise(function(t,i){e(["ojs/ojtreedataprovideradapter"],function(e){t(function(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}),t.default=e,t}(e))},i)});if(!o)throw new Error("Error adapting a TreeDataSource");return o.then(e=>new b(this,this.element[0],new e.default(i)))}t.DataProviderFeatureChecker.isTreeDataProvider(i)?s=new b(this,this.element[0],i):t.DataProviderFeatureChecker.isDataProvider(i)?s=new n.IteratingDataProviderContentHandler(this,this.element[0],i):this.throwError("Invalid data or missing module")}return Promise.resolve(s)},UpdateActiveDescendant:function(e){this.element.attr("aria-activedescendant",e.attr("id"))},SetAriaProperties:function(){this._isMultipleSelection()?this.element.attr("aria-multiselectable",!0):this._isSelectionEnabled()&&this.element.attr("aria-multiselectable",!1)},UnsetAriaProperties:function(){this.element.removeAttr("aria-activedescendant").removeAttr("aria-multiselectable")},UpdateItemAriaProperties:function(e){var t,s=this;"none"===e?(this.element.removeAttr("aria-multiselectable"),t=function(e){s.getFocusItem(e).removeAttr("aria-selected")}):("single"===e?this.element.attr("aria-multiselectable",!1):this.element.attr("aria-multiselectable",!0),t=function(e){var t=s.getFocusItem(e),i=t.parent();t.attr("aria-selected",i.hasClass("oj-selected"))});for(var n=this._getItemsCache(),o=0;o<n.length;o++)t(i(n[o]))},_buildList:function(e){var t=this.getListContainer();this.SetAriaProperties(),this.m_elementOffset=this.element.get(0).offsetTop;var i=this._buildStatus();t.append(i),this.m_status=i;var s=this._buildAccInfo();t.append(s),this.m_accInfo=s,this._buildFocusCaptureDiv(t[0])},_buildStatus:function(){var e=i(document.createElement("div"));e.addClass("oj-icon").addClass(this.getLoadingStatusIconStyleClass());var t=i(document.createElement("div"));return t.addClass(this.getStatusMessageStyleClass()).addClass(this.getStatusStyleClass()).attr({id:this._createSubId("status"),role:"status"}),t.append(e),t},_buildAccInfo:function(){var e=i(document.createElement("div"));return e.addClass("oj-helper-hidden-accessible").attr({id:this._createSubId("info"),role:"status"}),e},_buildFocusCaptureDiv:function(e){if(!h.isMobileTouchDevice()){var t=document.createElement("div");t.setAttribute("tabindex","-1"),t.classList.add("oj-helper-hidden-accessible"),t.innerHTML="&nbsp",e.insertBefore(t,this.element[0]),t.addEventListener("focus",()=>{this.element[0].focus()})}},_setAccInfoText:function(e){""!==e&&this.m_accInfo.text()!==e&&this.m_accInfo.text(e)},_clearAccInfoText:function(){this.m_accInfo.text("")},updateStatusFetchStart:function(){var e=this.ojContext.getTranslatedString("msgFetchingData");this._setAccInfoText(e)},updateStatusFetchEnd:function(e){var t;t=0===e?this.ojContext.getTranslatedString("msgFetchCompleted"):this.ojContext.getTranslatedString("msgItemsAppended",{count:e}),this._setAccInfoText(t)},isSkeletonSupport:function(){return!(!this.ShouldUseGridRole()||!this.m_contentHandler.renderInitialSkeletons)&&"skeleton"===this._getOptionDefaults().loadIndicator},_showLoadingIcon:function(){var e=this.ojContext.getTranslatedString("msgFetchingData"),t=this.getListContainer();this.m_status.attr("aria-label",e).css("left",Math.max(0,t.outerWidth()/2-this.m_status.outerWidth()/2)).css("top",Math.max(0,t.outerHeight()/2-this.m_status.outerHeight()/2)).show();var i=this.m_status.get(0).offsetHeight,s=t.get(0).offsetHeight,n=t.get(0).style.minHeight,o=parseInt(n,10);isNaN(o)&&(o=0),s<i&&o<i&&(t.css("minHeight",Math.max(s,i+this.getListContainerBorderWidth())),isNaN(o)||t.get(0).setAttribute("data-oj-min-height",n))},_showLoadingSkeleton:function(){this.m_contentHandler.renderInitialSkeletons()},showStatusText:function(){var e=this;this.m_showStatusTimeout||(this.m_showStatusTimeout=setTimeout(function(){i(document.getElementById(e._createSubId("empty"))).remove(),null!=e.m_contentHandler&&(e.isSkeletonSupport()?e._showLoadingSkeleton():e._showLoadingIcon()),e.m_showStatusTimeout=null},this._getShowStatusDelay()))},_getShowStatusDelay:function(){var e=this._getOptionDefaults(),t=m.getCSSTimeUnitAsMillis(e.showIndicatorDelay);return isNaN(t)?0:t},hideStatusText:function(){this.m_showStatusTimeout&&(clearTimeout(this.m_showStatusTimeout),this.m_showStatusTimeout=null),this.m_status.hide();var e=this.getListContainer().get(0);e.hasAttribute("data-oj-min-height")&&(e.style.minHeight=e.getAttribute("data-oj-min-height"),e.removeAttribute("data-oj-min-height"))},GetRootElement:function(){return this.getListContainer()},getListContainer:function(){return null==this.m_container&&(this.m_container=this._createListContainer()),this.m_container},_createListContainer:function(){var e;return this.OuterWrapper?e=i(this.OuterWrapper):(e=i(document.createElement("div")),this.element.parent()[0].replaceChild(e[0],this.element[0])),e.addClass(this.GetContainerStyleClass()).addClass("oj-component"),e.prepend(this.element),e},_getEmptyText:function(){return this.ojContext.getTranslatedString("msgNoData")},_buildEmptyText:function(){var e=this._getEmptyText(),t=document.createElement("li");t.setAttribute("role","row"),t.id=this._createSubId("empty"),t.className=this.getEmptyTextStyleClass()+" "+this.getEmptyTextMarkerClass();var i=document.createElement("span");return i.setAttribute("role","gridcell"),i.textContent=e,t.appendChild(i),t},GetState:function(e){var t=this.getFocusItem(e).attr("aria-expanded");return"true"===t?this.STATE_EXPANDED:"false"===t?this.STATE_COLLAPSED:this.STATE_NONE},SetState:function(e,t){var i=this.isExpandable();t===this.STATE_EXPANDED?(this.getFocusItem(e).attr("aria-expanded","true"),i&&e.removeClass("oj-collapsed").addClass("oj-expanded")):t===this.STATE_COLLAPSED&&(this.getFocusItem(e).attr("aria-expanded","false"),i&&e.removeClass("oj-expanded").addClass("oj-collapsed"))},_getItemOption:function(e,t,i){var s=this.GetOption("item")[e];return"function"==typeof s&&i?s.call(this,t):s},getItemFocusable:function(e){return this._getItemOption("focusable",e,!0)},getItemSelectable:function(e){return this.getItemFocusable(e)&&this._getItemOption("selectable",e,!0)},_getItemRenderer:function(){var e=this._getItemOption("renderer",null,!1);return"function"!=typeof e?null:this._WrapCustomElementRenderer(e)},getItemTemplate:function(){if(void 0===this.m_template&&(this.m_template=null,this.ojContext._IsCustomElement())){var e=this.GetSlotMap().itemTemplate;e&&e.length>0&&"template"===e[0].tagName.toLowerCase()&&(this.m_template=e[0])}return this.m_template},getAs:function(){return this.GetOption("as")},GetSlotMap:function(){return g.CustomElementUtils.getSlotMap(this.GetRootElement()[0])},itemInsertComplete:function(e,t){this.m_clientHeight=null,this.m_scrollHeight=null},BeforeInsertItem:function(){},itemRemoveComplete:function(e,s,n){var o=!1;if(null!=this.m_active&&t.Object.compareValues(this.m_active.key,this.GetKey(e))&&(this._setActionableMode(!1,!0),!n)){let t=null,n=this._getItemsCache().toArray();n=n.filter(e=>!e.classList.contains("oj-skipfocus"));const r=n.findIndex(t=>e.contains(t));if(-1===r)this.SetOption("currentItem",null);else{const i=e.closest("ul.oj-listview-group"),s=n[r+1],o=n[r-1];i&&s&&o&&s.closest("ul")!==i&&o.closest("ul")===i?t=o:(t=s,null!=t&&(t.classList.contains(this.getItemElementStyleClass())||t.classList.contains("oj-listview-temp-item"))||(t=o,null!=t&&t.classList.contains(this.getItemElementStyleClass())||this.SetOption("currentItem",null)))}null!=t&&(t.classList.contains(this.getItemElementStyleClass())||t.classList.contains("oj-listview-temp-item"))&&(this.SetCurrentItem(i(t),null,!s),o=!0)}return null!=e&&e.id&&null!=this.m_keyElemMap&&this.m_keyElemMap.delete(e.id),this.m_clientHeight=null,this.m_scrollHeight=null,o},itemRenderComplete:function(e,t){null!=this.m_dndContext&&this.m_dndContext.itemRenderComplete(e);var s=t.key;if(this._isSelectionEnabled()){var n,o=this.GetOption("selected"),r=o.has(s);this.IsSelectable(e)?(r&&(this._applySelection(e,s),this._isMultipleSelection()||o.values().size>1&&(n=this.FindElementByKey(s),o=o.clear().add([s]),this._setSelectionOption(o,null,n,t.data))),o.values&&0===o.values().size&&this._isSelectionRequired()&&(this._applySelection(e,s),o=o.clear().add([s]),this._setSelectionOption(o,null,[e],t.data))):r&&!o.isAddAll()&&(n=[],(o=o.delete([s])).values().forEach(function(e){n.push(this.FindElementByKey(e))},this),this._setSelectionOption(o,null,n))}var a=this;if(this.m_contentHandler.IsHierarchical()&&null==this._ignoreExpanded&&this.GetState(i(e))===this.STATE_COLLAPSED){var l=this.GetOption("expanded");this._isExpandAll(s)?(this.ojContext._IsCustomElement()||null==this._collapsedKeys)&&this.ExpandItem(i(e),null,!1,null,!1,!1,!1):!this.ojContext._IsCustomElement()&&Array.isArray(l)?i.each(l,function(t,n){n!==s||null!=a._collapsedKeys&&-1!==a._collapsedKeys.indexOf(n)||a.ExpandItem(i(e),null,!1,null,!1,!1,!1)}):l.has&&l.has(s)&&this.ExpandItem(i(e),null,!1,null,!1,!1,!1)}null!=this.m_active&&s===this.m_active.key&&null!=this.m_active.elem&&e!==this.m_active.elem.get(0)&&(this.m_active.elem=i(e))},_addNoData:function(){if(this.ojContext._IsCustomElement()){var e=this.GetSlotMap().noData;if(e&&e.length>0&&"template"===e[0].tagName.toLowerCase()){var t=document.createElement("li");t.setAttribute("role","row"),t.id=this._createSubId("empty"),t.classList.add("oj-listview-no-data-container"),t.classList.add("oj-listview-no-data-item");var i=document.createElement("div");i.setAttribute("role","gridcell"),i.setAttribute("tabIndex","0"),i.classList.add("oj-listview-no-data-container"),t.appendChild(i);var s=this.element;s.addClass("oj-listview-no-data-container"),s.append(t);var n=this;this.signalTaskStart("run no data template");const o={customElement:this._GetCustomElement()};return void r.__getTemplateEngine(o).then(function(t){t.execute(n.GetRootElement(),e[0],{},null).forEach(function(e){i.appendChild(e)}),n.m_engine=t,n.signalTaskEnd()},function(e){throw n.signalTaskEnd(),new Error("Error loading template engine: "+e)})}}this.element.append(this._buildEmptyText())},_removeNoData:function(){this.element.removeClass("oj-listview-no-data-container");var e=document.getElementById(this._createSubId("empty"));e&&(this.m_engine&&this.m_engine.clean(e),e.parentNode.removeChild(e))},resetInitialSelectionStateValidated:function(){this.m_initialSelectionStateValidated=!1},renderComplete:function(e){var t=this;if(this.hideStatusText(),this._removeNoData(),this.m_items=null,this.m_groupItems=null,this.m_scrollHeight=null,this._isEmptyGrid()&&this.element[0].removeChild(this.element[0].children[0]),this._isEmpty())return this._addNoData(),this.Trigger("ready",null,{}),null;var s=this.GetOption("currentItem");if(null!=s){var n=this.FindElementByKey(s);if(null==n)this.SetOption("currentItem",null);else if(null==this.m_active&&!this.SkipFocus(i(n))){var o=document.activeElement;o&&this.element.get(0).contains(o)?this.ActiveAndFocus(i(n),null):this._setActive(i(n),null,!0)}}if(this.getListContainer().hasClass("oj-focus-ancestor")&&null==this.m_active&&null==s&&!this._isTouchSupport()&&this._initFocus(),this.m_scrollAndFetch=void 0,null==this.m_scrollPosition&&(e||this.m_ticking)||this.syncScrollPosition(),!this.m_initialSelectionStateValidated&&this._isSelectionEnabled()&&this._isSelectionRequired()){var r=this.GetOption("selection").slice(0);this._validateAndUpdateSelection(r),this.m_initialSelectionStateValidated=!0}if(this._isSelectionEnabled()){var a=this.GetOption("firstSelectedItem");if(null==a||null==a.key){var l=this.GetOption("selected");null!=l&&this._updateFirstSelectedItem(l)}}if(null!=this.m_gridlinePlaceholder&&null!=this.m_gridlinePlaceholder.parentNode&&this.m_gridlinePlaceholder.parentNode.removeChild(this.m_gridlinePlaceholder),(void 0===this.m_contentHandler.hasMoreToFetch||this.m_contentHandler.hasMoreToFetch&&!this.m_contentHandler.hasMoreToFetch())&&this._shouldRenderGridlineForLastItem()){var h=document.createElement("li");h.setAttribute("role","presentation"),h.className="oj-listview-gridline-placeholder",this.element[0].appendChild(h),this.m_gridlinePlaceholder=h}var c=null;if(this._isAnimateCards()){var u=null==this.element[0].querySelector(".oj-listview-card-animated"),p=0,m=this._getCardEntranceAnimationDelay();u&&this.element[0].classList.add("oj-animation-host-viewport"),this.element[0].querySelectorAll(".oj-listview-card:not(.oj-listview-card-animated)").forEach(function(e){if(e.classList.add("oj-listview-card-animated"),u){var i=t.getAnimationEffect("cardEntrance");i&&i.forEach(function(e){e.delay=p+"ms"}),c=t.StartAnimation(e,"cardEntrance",i),p=Math.min(1e3,p+m)}else d.fadeIn(e,{duration:"150ms"});c&&c.then(function(){t.element[0].classList.remove("oj-animation-host-viewport")})})}return this.Trigger("ready",null,{}),c},_getCardEntranceAnimationDelay:function(){var e=this._getOptionDefaults(),t=parseInt(e.cardAnimationDelay,10);return isNaN(t)?0:t},_getLocalKeys:function(){for(var e=[],t=this._getItemsCache(),i=0;i<t.length;i++)e.push(this.GetKey(t[i]));return e},_validateAndUpdateSelection:function(e){if(this._isSelectionRequired()&&e.length>0){var t=e.length,i=this._validateSelection(e);if(i)this.signalTaskStart("validating selection-required keys"),i.then(function(e){var t=this.GetOption("selected").clear().add(e);this._setSelectionOption(t,null,null,null),this.enforceSelectionRequired(),this.signalTaskEnd()}.bind(this));else if(t!==e.length){var s=this.GetOption("selected").clear().add(e);this._setSelectionOption(s,null,null,null),this.enforceSelectionRequired()}}},_validateSelection:function(e){this.m_validatedSelectedKeyData=null;var t=e,i=this._getLocalKeys(),s=[];if(e.forEach(function(e){-1===i.indexOf(e)&&s.push(e)}),s.length>0){var n=this._fetchValidRowKeyData(s);if(n)return n.then(function(e){this.m_validatedSelectedKeyData=e.validKeyData,e.validKeys.forEach(function(e){s.splice(s.indexOf(e),1)});for(var i=t.length-1;i>=0;i--)s.indexOf(t[i])>-1&&t.splice(i,1);return t}.bind(this));for(var o=t.length-1;o>=0;o--)s.indexOf(t[o])>-1&&t.splice(o,1)}return null},_fetchValidRowKeyData:function(e){var t=this.m_contentHandler.getDataProvider();if(t&&t.getCapability){var i=t.getCapability("fetchByKeys");if(i&&"lookup"===i.implementation)return new Promise(function(i){t.fetchByKeys({keys:new Set(e),scope:"global"}).then(function(e){var t=[],s=new p;e.results.forEach(function(e,i){t.push(i),s.set(i,e.data)}),i({validKeys:t,validKeyData:s})},function(){i({validKeys:[],validData:new Map})})})}return null},_isEmptyGrid:function(){return this.ShouldUseGridRole()&&this.isCardLayout()&&!this.m_contentHandler.IsHierarchical()&&this.element[0].children[0]&&0===this.element[0].children[0].children[0].childElementCount},_setScrollY:function(e,t){var i=e.scrollTop;return c.info("Setting scroll y: "+t+" initial scrollTop: "+i),this._skipScrollUpdate||this._setScrollPosBusyState(),this._skipScrollUpdate=!0,e.scrollTop=t,this._handlePinGroupHeader(),c.info("scrollTop after updating: "+e.scrollTop),i!==e.scrollTop||(c.info("scrollPosBusyState getting clear"),this._clearScrollPosBusyState(),!1)},_setScrollX:function(e,t){this._skipScrollUpdate=!0,m.setScrollLeft(e,t)},_getScrollX:function(e){return Math.abs(e.scrollLeft)},getScrollToKey:function(){var e=this.GetOption("scrollPosition");if(e){var t=e.key;if(t){var i=this;return new Promise(function(e){var s=i._validateKeyForScroll(t,!0);null==s?e(null):s.then(function(i){e(i?t:null)})})}}return Promise.resolve(null)},_validateKeyForScroll:function(e,t){var i=this;if(!this._isScrollToKey())return null;if(!t&&null!=this.FindElementByKey(e))return Promise.resolve(!0);if(this.m_contentHandler instanceof n.IteratingDataProviderContentHandler){var s=this.m_contentHandler.getDataProvider();if(s.containsKeys)return new Promise(function(t){var n=new Set;n.add(e),i.signalTaskStart("Checking for keys"),s.containsKeys({keys:n}).then(function(e){t(e.results.size>0),i.signalTaskEnd()},function(){i.signalTaskEnd(),t(!1)})})}return null},_getScrollHeight:function(){return null==this.m_scrollHeight&&(this.m_scrollHeight=this._getScroller().scrollHeight),this.m_scrollHeight},_getClientHeight:function(){return null==this.m_clientHeight&&(this.m_clientHeight=this._getScroller().clientHeight),this.m_clientHeight},_getScrollWidth:function(){return null==this.m_scrollWidth&&(this.m_scrollWidth=this._getScroller().scrollWidth),this.m_scrollWidth},_getClientWidth:function(){return null==this.m_clientWidth&&(this.m_clientWidth=this._getScroller().clientWidth),this.m_clientWidth},_isScrollable:function(){return this._isScrollableY()||this._isScrollableX()},_isScrollableX:function(){return Math.abs(this._getScrollWidth()-this._getClientWidth())>1},_isScrollableY:function(){var e=0;if(this.m_contentHandler.getLoadingIndicator){var t=this.m_contentHandler.getLoadingIndicator();null!=t&&(e=t.offsetHeight)}var i=this._getScroller(),s=i.scrollHeight,n=i.clientHeight;return Math.abs(s-n)-e>1},syncScrollPosition:function(e,t){var i,s,n,o,r=this;if(this.ShouldUseGridRole()&&(t=void 0===t||t,this._isScrollable())){if(this.ShouldUpdateScrollPosition()){if(null!=this.m_scrollPosition?e=this.m_scrollPosition:void 0===e&&(e=this.GetOption("scrollPosition")),t&&null!=e.key){var a=this._validateKeyForScroll(e.key,!1);return void(a&&a.then(function(t){null!=r.m_contentHandler&&(t||delete e.key,r.syncScrollPosition(e,!1))}))}if(s=(i=this._getScrollCoordinates(e)).x,n=i.y,isNaN(s)&&isNaN(n))return void(null!=this.m_scrollPosition&&(this.SetOption("scrollPosition",this._getCurrentScrollPosition(o),{_context:{originalEvent:null,internalSet:!0}}),this.signalTaskEnd(),this.m_scrollPosition=null))}void 0===i&&(n=this.GetOption("scrollTop"));var l=this._getScroller();if(o=l.scrollTop,!isNaN(s)&&isNaN(n)||!isNaN(s)&&n===o&&s!==this._getScrollX(l,s)){if(!this._isScrollableX())return void this._clearOutstandingScrollPosition();this._setScrollX(l,s);var h=this.GetOption("scrollPosition"),d={x:s=this._getScrollX(l),y:h.y,index:h.index,key:h.key,offsetX:s,offsetY:h.offsetY};h.parent&&(d.parent=h.parent),this.SetOption("scrollPosition",d,{_context:{originalEvent:null,internalSet:!0}})}else if(Math.abs(o-n)>=1){var c=!1;if(this._isScrollableY()&&(c=this._setScrollY(l,n)),!isNaN(s)&&s!==this._getScrollX(l,s)&&this._isScrollableX()&&(this._setScrollX(l,s),c=!0),!c)return this.m_scrollPosition&&this.SetOption("scrollPosition",this._getCurrentScrollPosition(o),{_context:{originalEvent:null,internalSet:!0}}),void this._clearOutstandingScrollPosition();if(o=l.scrollTop,Math.abs(o-n)>=1&&this.m_contentHandler.hasMoreToFetch&&this.m_contentHandler.hasMoreToFetch())return null==this.m_scrollPosition&&this.signalTaskStart("Scroll position needs to resolve further"),this.m_scrollAndFetch=!0,void(this.m_scrollPosition=e);this.SetOption("scrollPosition",this._getCurrentScrollPosition(o),{_context:{originalEvent:null,internalSet:!0}})}else e&&(null==e.key||isNaN(e.index))&&this.SetOption("scrollPosition",this._getCurrentScrollPosition(o),{_context:{originalEvent:null,internalSet:!0}});this._clearOutstandingScrollPosition()}},_clearOutstandingScrollPosition:function(){null!=this.m_scrollPosition&&(this.signalTaskEnd(),this.m_scrollPosition=null)},restoreCurrentItemFocus:function(e){this._isInViewport(e)&&this._setActive(i(e),null,!0)},ClearCache:function(e){this.m_items=null,this.m_groupItems=null,e&&null!=this.m_keyElemMap&&this.m_keyElemMap.clear()},getMinimumCountForViewport:function(){var e=this._getItemHeight(),t=this._getClientHeight();return!isNaN(e)&&e>0?Math.ceil(t/e):1},_isInViewport:function(e){return h.isElementIntersectingScrollerBounds(e,this._getScroller())},_getAnimatedActions:function(){return["add","remove","update","expand","collapse"]},StartAnimation:function(e,t,i){if(this._getAnimatedActions().indexOf(t)>-1&&!this._isInViewport(e))return Promise.resolve(null);var s,n;if(null==i&&(i=this.getAnimationEffect(t)),"expand"===t){var o=e.getAttribute("data-oj-initial-height");if(null!=o&&!isNaN(o)){(i=Object.assign({},i)).startMaxHeight=o+"px";var r=e.offsetHeight;r<o&&(n=e.style.maxHeight,s=e.style.height,e.style.maxHeight="none",e.style.height=o+"px",i.effect="collapse",i.endMaxHeight=r+"px"),e.removeAttribute("data-oj-initial-height")}}var a=d.startAnimation(e,t,i,this.ojContext);return void 0!==s&&a.then(function(){e.style.height=s,e.style.maxHeight=n}),a},notifyContextMenuGesture:function(e,t,s){if(null==this.element[0].querySelector(".oj-listview-no-data-item")&&this.IsNodeEditableOrClickable(i(t.target)))return!1;var n=i(t.target).closest("."+this.getItemElementStyleClass());n.length>0&&!this.SkipFocus(i(n[0]))&&this.SetCurrentItem(i(n[0]),null);var r={launcher:this.ojContext.element,initialFocus:"menu"};if("keyboard"===s){var a=null!=this.m_active?this.m_active.elem:this.element;r.position={my:"start top",at:"start bottom",of:a}}null==this.ojContext._GetContextMenu()?o.getContext(e).getBusyContext().whenReady().then(function(){this.PrepareContextMenu(n),this.ojContext._OpenContextMenu(t,s,r)}.bind(this)):(this.PrepareContextMenu(n),this.ojContext._OpenContextMenu(t,s,r))},PrepareContextMenu:function(e){var t=this.ojContext._GetContextMenu();null!=this.m_dndContext&&t&&this.m_dndContext.prepareContextMenu(t)},IsElementEditableOrClickable:function(e){return null!=e.prop("nodeName").match(/^INPUT|SELECT|OPTION|BUTTON|^A\b|TEXTAREA/)},IsNodeEditableOrClickable:function(e){for(;null!=e&&e[0]!==this.element[0]&&"LI"!==e.prop("nodeName");)if(3===e[0].nodeType)e=e.parent();else{var t=e.attr("tabIndex"),i=e.attr("data-oj-tabindex");if(null!=t&&t>=0&&!e.hasClass(this.getFocusedElementStyleClass())&&!e.hasClass("oj-listview-cell-element"))return!0;if(this.IsElementEditableOrClickable(e)&&(-1!==t||-1!==i))return!0;e=e.parent()}return!1},disableAllTabbableElements:function(e,t){var s=i(e);(s.hasClass(this.getItemStyleClass())||(s=i(s.get(0).firstElementChild)),s.children().first().hasClass("oj-listview-cell-element")&&(s=i(s.get(0).firstElementChild)),s[0])&&i(h.disableAllFocusableElements(s[0],t)).each(function(){i(this).removeAttr("data-first").removeAttr("data-last")})},_disableAllTabbableElementsBeforeItem:function(e){for(var t=this._getItemsCache(),i=t.index(e),s=0;s<=i;s++)this.disableAllTabbableElements(t[s],!0)},_disableAllTabbableElementsAfterItem:function(e){var t=this._getItemsCache(),i=t.index(e);if(-1!==i)for(var s=i;s<=t.length-1;s++)this.disableAllTabbableElements(t[s],!0)},_enableAllTabbableElements:function(e){var t=i(h.enableAllFocusableElements(e[0]));(t=t.filter(":visible")).first().attr("data-first","true"),t.last().attr("data-last","true")},_cleanupTabbableElementProperties:function(e){h.enableAllFocusableElements(e[0]).forEach(function(e){e.removeAttribute("data-first"),e.removeAttribute("data-last")})},SkipFocus:function(e){return e.hasClass("oj-skipfocus")},GetFocusElement:function(){if(this.getListContainer().hasClass("oj-focus-ancestor")){if(this.m_active)return this.getFocusItem(this.m_active.elem)[0];var e=this.element.children("."+this.getEmptyTextStyleClass()).first();if(e.length>0&&0===e.attr("tabIndex"))return e[0]}return this.element[0]},_isFocusBlurTriggeredByDescendent:function(e){return void 0===e.relatedTarget||!(null==e.relatedTarget||!i.contains(this.ojContext.element.get(0),e.relatedTarget))},HandleFocus:function(e){if(this._clearFocusoutTimeout(),this._clearFocusoutBusyState(),this.getListContainer().addClass("oj-focus-ancestor"),null==this.m_active){var t=this.FindItem(i(e.target));this.m_preActive||this._isFocusBlurTriggeredByDescendent(e)||null!=t&&0!==t.length&&!this.SkipFocus(t)||this._initFocus(e)}else this.m_preActive||e.target!==this.ojContext.element[0]||this._isFocusBlurTriggeredByDescendent(e)||(this._makeFocusable(this.m_active.elem),this.HighlightActive(),this._focusItem(this.m_active.elem)),this.RemoveRootElementTabIndex(),this._setTabIndex(this.m_active.elem)},restoreFocusAfterDrag:function(){null==this.m_active?this._initFocus(null):(this._makeFocusable(this.m_active.elem),this.HighlightActive(),this._focusItem(this.m_active.elem),this.RemoveRootElementTabIndex()),this.m_active&&this.m_active.elem.removeClass("oj-focus-highlight")},_initFocus:function(e){for(var t=this._getItemsCache(),s=0;s<t.length;s++){var n=i(t[s]);if(!this.SkipFocus(n)){this.SetCurrentItem(n,e);break}}if(0===t.length){var o=this.element.children("."+this.getEmptyTextStyleClass()).first();o.length>0&&(o.attr("tabIndex",0),o.focus(),this.RemoveRootElementTabIndex())}},HandleFocusOut:function(e){this.HandleBlur(e)},_supportRelatedTargetOnBlur:function(){var e=t.AgentUtils.getAgentInfo();return!(e.browser===t.AgentUtils.BROWSER.FIREFOX&&parseInt(e.browserVersion,10)<48)},_isExtraBlurEvent:function(e){var i=t.AgentUtils.getAgentInfo();return null==e.relatedTarget&&i.browser===t.AgentUtils.BROWSER.IE&&e.target===this.ojContext.element.get(0)},_clearFocusoutTimeout:function(){this._focusoutTimeout&&(clearTimeout(this._focusoutTimeout),this._focusoutTimeout=null)},_setFocusoutBusyState:function(){this._focusoutResolveFunc||(this._focusoutResolveFunc=this._addComponentBusyState("is handling focusout."))},_setScrollPosBusyState:function(){this.ojContext._IsCustomElement()?this._scrollPosResolveFunc||(this._scrollPosResolveFunc=this._addComponentBusyState("is waiting for scroll handler.")):this.signalTaskStart("waiting for scroll handler")},_addComponentBusyState:function(e){var t=o.getContext(this.element[0]).getBusyContext(),i={description:"The component identified by '"+this.element[0].id+"' "+e};return t.addBusyState(i)},_clearFocusoutBusyState:function(){this._focusoutResolveFunc&&(this._focusoutResolveFunc(),this._focusoutResolveFunc=null)},_clearScrollPosBusyState:function(){this.ojContext._IsCustomElement()?this._scrollPosResolveFunc&&(this._scrollPosResolveFunc(),this._scrollPosResolveFunc=null):this.signalTaskEnd()},HandleBlur:function(e){if(this._clearFocusoutTimeout(),this._isExpandCollapseIcon(e.target)&&this._focusOutHandler(i(e.target)),this._isActionableMode()){if(null!=f.getLogicalChildPopup(this.getListContainer()))return;this._setFocusoutBusyState(),this._focusoutTimeout=setTimeout(function(){null!=this.m_active&&this.m_active.elem.get(0).contains(document.activeElement)||this._doBlur(),this._clearFocusoutBusyState()}.bind(this),100)}else this._isFocusBlurTriggeredByDescendent(e)||this.m_preActive||null!=this.m_active&&this.m_active.elem.get(0).contains(document.activeElement)||this._doBlur()},_doBlur:function(){if(this._isActionableMode()&&this._exitActionableMode(),this.getListContainer().removeClass("oj-focus-ancestor"),this.UnhighlightActive(),null!=this.m_active)this._resetTabIndex(this.m_active.elem),this._removeSkipItemAriaLabel(this.m_active.elem);else{var e=this.element.children("."+this.getEmptyTextStyleClass()).first();e.length>0&&e.removeAttr("tabIndex")}this.SetRootElementTabIndex()},_handleMouseOut:function(e){var t=this.FindItem(e.target);null!=t&&(this.m_hoverItem=null,this._unhighlightElem(t,"oj-hover"))},_handleMouseOver:function(e){if(!(!this._isShowHover()||this._recentTouch()||this.m_dndContext&&this.m_dndContext.isDndInProgress())){var t=this.FindItem(e.target);null==t||this.SkipFocus(t)||(this.m_hoverItem=t,this._highlightElem(t,"oj-hover"))}},_isShowHover:function(){return this._isSelectionEnabled()},_recentTouch:function(){return Date.now()-this._lastTouch<500},HandleKeyDown:function(e){if(this.isExpandable()){var t=e.key||e.keyCode;if("ArrowLeft"===t||"Left"===t||t===this.LEFT_KEY||"ArrowRight"===t||"Right"===t||t===this.RIGHT_KEY){var i=this.m_active.elem;if("ArrowLeft"===t||"Left"===t||t===this.LEFT_KEY){if(this.GetState(i)===this.STATE_EXPANDED)return void this.CollapseItem(i,e,!0,this.m_active.key,!0,!0)}else if(this.GetState(i)===this.STATE_COLLAPSED)return void this.ExpandItem(i,e,!0,this.m_active.key,!0,!0,!0)}}var s=this.HandleSelectionOrActiveKeyDown(e);null!=this.m_dndContext&&(s=s||this.m_dndContext.HandleKeyDown(e)),!0===s&&(e.preventDefault(),e.stopPropagation()),this.m_keyProcessed=s},HandleKeyUp:function(e){var t=e.key||e.keyCode;"Escape"!==t&&"Esc"!==t&&t!==this.ESC_KEY||!this.m_keyProcessed||e.stopPropagation(),this.m_keyProcessed=void 0},_handleMouseUpOrPanMove:function(e){this.m_preActiveItem&&this._unhighlightElem(this.m_preActiveItem,"oj-focus"),null!=this.m_dndContext&&this.m_dragger&&this.m_dragger.get(0)!==e.target&&(this.m_dndContext._unsetDraggable(this.m_dragger),this.m_dragger=null)},_isNodeFocusable:function(e){var t=this.getItemElementStyleClass();return h.isElementOrAncestorFocusable(e,function(e){return e.classList.contains(t)||e.classList.contains("oj-listview-cell-element")})},HandleMouseDownOrTouchStart:function(e){var t=i(e.target);null!=this.m_dndContext&&(this.m_dndContext._setDraggable(t),this.m_dragger=t);var s=this.FindItem(t);null!=s&&s.length>0&&this._isLegacyClickthroughDisabled(e,s.get(0))&&(this.m_preActive=!0,s=null),null==s||0===s.length||this.SkipFocus(s)||t.hasClass("oj-listview-drag-handle")||(this.m_preActive=!0,this.getListContainer().hasClass("oj-focus-ancestor")||this.getListContainer().addClass("oj-focus-ancestor"),this.m_preActiveItem=s,this._highlightElem(s,"oj-focus"),this._makeFocusable(s),!this.element[0].contains(document.activeElement)||s.get(0).contains(document.activeElement)||this._isNodeFocusable(t[0])||this._focusItem(s),this.RemoveRootElementTabIndex(),null!=this.m_active&&this.m_active.elem.get(0)!==s.get(0)&&this._resetTabIndex(this.m_active.elem),e.originalEvent.touches&&e.originalEvent.touches.length>0&&(this.m_touchPos={x:e.originalEvent.changedTouches[0].pageX,y:e.originalEvent.changedTouches[0].pageY}),this._isInputElement(t.get(0))&&this._enterActionableMode(s))},HandleTouchEndOrCancel:function(e){if(null!=this.m_preActiveItem&&(this._unhighlightElem(this.m_preActiveItem,"oj-focus"),null!=this.m_touchPos)){var t=this.m_preActiveItem.offset(),i=this.getAnimationEffect("pointerUp");i.offsetX=this.m_touchPos.x-t.left+"px",i.offsetY=this.m_touchPos.y-t.top+"px";var s,n=this.m_preActiveItem.children("."+this.getGroupItemStyleClass());s=n.length>0?n.get(0):this.getFocusItem(this.m_preActiveItem).get(0);var o=e.target;if(s)for(var r=s.querySelectorAll("input, select, button, a, textarea, object, [tabIndex]:not([tabIndex='-1']), [data-oj-tabmod]"),a=0;a<r.length;a++)if(r[a].contains(o)){s=null;break}null!=s&&this.StartAnimation(s,"pointerUp",i),this.m_touchPos=null}this._lastTouch=Date.now(),this._handleMouseOut(e)},_enterActionableMode:function(e){var t=void 0===e?this.m_active.elem:e;t&&(this.disableAllTabbableElements(t),this._enableAllTabbableElements(t),t.find("[data-first]").length>0&&this._setActionableMode(!0))},_exitActionableMode:function(){this._setActionableMode(!1),this.m_active&&this.disableAllTabbableElements(this.m_active.elem)},HandleMouseClick:function(e){if(0===e.button){var t=this.getCollapseIconStyleClass(),s=this.getExpandIconStyleClass(),n=i(e.target);if(n.hasClass(s))this._collapse(e),e.preventDefault();else if(n.hasClass(t))this._expand(e),e.preventDefault();else{var o=this.FindItem(n);if(null==o||0===o.length)return;if(this._isLegacyClickthroughDisabled(e,o[0]))return;if(this.SkipFocus(o))return void this._handleHeaderClick(e,n,o);this._isActionableMode()&&null!=this.m_active&&this.m_active.elem.get(0)!==o.get(0)&&!this._isInputElement(n.get(0))&&this._exitActionableMode(),this.getListContainer().hasClass("oj-focus-ancestor")||this.getListContainer().addClass("oj-focus-ancestor");var r=this._isClickthroughDisabled(e,o);if(!r&&this._isSelectionEnabled()&&this.IsSelectable(o[0])){var a=e.originalEvent.sourceCapabilities&&e.originalEvent.sourceCapabilities.firesTouchEvents;(this._isTouchSupport()&&(a||null!=this.touchStartEvent&&this.touchStartEvent.target===e.target)?this._handleTouchSelection(o,e):this.HandleClickSelection(o,e))||this.HandleClickActive(o,e),this.ShouldUseGridRole()&&e.target===o.get(0)&&this._focusItem(o),this._shouldDragSelectedItems()&&this.m_dndContext.setSelectionDraggable()}else this.HandleClickActive(o,e);r||(this._fireActionEvent(o.get(0),e),this._handleHeaderClick(e,n,o))}}},_handleHeaderClick:function(e,t,i){var s=this.getGroupItemStyleClass();this.isExpandable()&&t.closest("."+s)&&(this.GetState(i)===this.STATE_COLLAPSED?this._expand(e):this.GetState(i)===this.STATE_EXPANDED&&this._collapse(e))},_fireActionEvent:function(e,t){if(!this._isActionableMode()){var i={context:{key:this.GetKey(e),data:this._getDataForItem(e),metadata:this._getMetadataForItem(e)}};this.Trigger("itemAction",t,i)}},_shouldDragSelectedItems:function(){return null!=this.m_dndContext&&!this.m_dndContext.shouldDragCurrentItem()},_isTouchSupport:function(){return m.isTouchSupported()},_isNonWindowTouch:function(){return this._isTouchSupport()&&t.AgentUtils.getAgentInfo().os!==t.AgentUtils.OS.WINDOWS},_ctrlEquivalent:function(e){return m.isMetaKeyPressed(e)},_createSubId:function(e){return[this.element.attr("id"),e].join(":")},FindItem:function(e){return i(e).hasClass(this.getGroupStyleClass())?null:i(e).closest("."+this.getItemElementStyleClass())},_isLegacyClickthroughDisabled:function(e,t){for(var i=e.target;null!=i&&i!==t;){if(i.classList.contains("oj-clickthrough-disabled"))return!0;i=i.parentNode}return!1},_isClickthroughDisabled:function(e,t){return t.length>0&&h.isEventClickthroughDisabled(e,t.get(0))},getListContainerBorderWidth:function(){return null==this.m_borderWidth&&(this.m_borderWidth=parseInt(this.getListContainer().css("border-top-width"),10)+parseInt(this.getListContainer().css("border-bottom-width"),10)),this.m_borderWidth},scrollToItem:function(e){var t=e.key;if(null!=t){var s=this.FindElementByKey(t);if(null!=s)if(i(s).hasClass(this.getItemStyleClass()))this._scrollToVisible(s);else{var n=i(s).children("."+this.getGroupItemStyleClass()).first();this._scrollToGroupHeader(n.get(0))}}},_scrollToVisible:function(e){var t,s,n=0,o=this.getListContainer()[0],r=o.scrollTop,a=o.offsetHeight;if(e.classList.contains(this.getItemStyleClass()))t=e.offsetTop,s=e.offsetHeight;else if(e.children.length>0){var l=e.children[0];l.classList.contains(this.getGroupItemStyleClass())&&(t=l.offsetTop,s=l.offsetHeight)}if(!isNaN(t)&&!isNaN(s)){if(null!=this.m_groupItemToPin){var h=parseInt(this.m_groupItemToPin.style.top,10),d=i(this.m_groupItemToPin).outerHeight();t<=h&&h<t+s?n=(s+t-h)/2:t>=h&&t<h+d&&(n=(h+d-t)/2)}else if(null!=this.m_closestParent){var c=this.m_closestParent.firstElementChild;c.classList.contains("oj-sticky")&&(n=c.offsetTop+c.offsetHeight-t)}if(t>=r&&t+s<=r+a)n>0&&(o.scrollTop=r-n);else{var u=Math.max(0,Math.min(t-n,Math.abs(t+s-a)));u>r&&(u+=this.getListContainerBorderWidth()),o.scrollTop=u}}},GetKey:function(e){return this.m_contentHandler.GetKey(e)},FindElementByKey:function(e){if(null!=this.m_keyElemMap){var t=this.m_keyElemMap.get(e);if(null!=t)return document.getElementById(t)}return this.m_contentHandler?this.m_contentHandler.FindElementByKey(e):null},GetIndexOf:function(e,i){for(var s=0;s<e.length;s++)if(i===e[s]||t.Object.compareValues(i,e[s]))return s;return-1},_isExpandCollapseIcon:function(e){return i(e).hasClass(this.getExpandIconStyleClass())||i(e).hasClass(this.getCollapseIconStyleClass())},_isGridlinesVisible:function(){if(null==this.m_gridlinesVisible){var e=this.GetOption("gridlines");if(null==e)return!0;this.m_gridlinesVisible="hidden"!==e.item}return this.m_gridlinesVisible},_isTopBottomGridlinesVisible:function(){var e=this._getOptionDefaults().gridlines;return e?{top:e.top,bottom:e.bottom}:{top:!0,bottom:!0}},_updateGridlines:function(){var e=this.GetRootElement()[0];this._isGridlinesVisible()?e.classList.remove("oj-listview-gridlines-hidden"):e.classList.add("oj-listview-gridlines-hidden");var t=this._isTopBottomGridlinesVisible();e.classList.remove("gridline-top-hidden"),e.classList.remove("gridline-bottom-hidden"),"hidden"===t.top&&e.classList.add("gridline-top-hidden"),"hidden"===t.bottom&&e.classList.add("gridline-bottom-hidden")},_shouldRenderGridlineForLastItem:function(){if(this.isCardLayout())return!1;var e=this.GetOption("gridlines");if(null!=e){var t=this._isTopBottomGridlinesVisible();if("visible"===e.item&&"hidden"===t.bottom)return!0}return!1},IsArrowKey:function(e){return this.isCardLayout()?"ArrowUp"===e||"Up"===e||e===this.UP_KEY||"ArrowDown"===e||"Down"===e||e===this.DOWN_KEY||"ArrowLeft"===e||"Left"===e||e===this.LEFT_KEY||"ArrowRight"===e||"Right"===e||e===this.RIGHT_KEY:"ArrowUp"===e||"Up"===e||e===this.UP_KEY||"ArrowDown"===e||"Down"===e||e===this.DOWN_KEY},_getItemsCache:function(){if(null==this.m_items){var e=this.getGroupCollapseStyleClass(),t="."+this.getItemElementStyleClass()+":visible";this.m_items=this.element.find(t).filter(function(){if(i(this).parent().hasClass(e))return!i(this).parent().parent().hasClass("oj-collapsed");if("LI"!==this.tagName){var t=this.parentElement;if(t&&t.classList.contains("oj-animate-remove"))return!1}return!0}).map(function(e,t){var i=t.parentElement;return i&&(i.classList.contains("oj-animate-add")||i.classList.contains("oj-listview-temp-item"))?i:t})}return this.m_items},_handleLastItemKeyboardFocus:function(e){var t=e.get(0).nextElementSibling;if(null==t||!i(t).hasClass(this.getItemElementStyleClass())){if(this.m_contentHandler.IsHierarchical()&&e.parent().hasClass(this.getGroupStyleClass())&&null!=e.parent().parent().get(0).nextElementSibling)return;var s=this._getScroller(),n=this._getScrollHeight();s.scrollTop<n&&(s.scrollTop=n)}},HandleArrowKeys:function(e,t,s){if(!this.m_contentHandler.IsReady())return!0;var n;n=!t||this.m_isNavigate?this.m_active.elem:this.m_selectionFrontier;var o=!1;switch(e){case this.UP_KEY:case"Up":case"ArrowUp":this.isCardLayout()&&i(n).hasClass(this.getItemStyleClass())?this._gotoItemAbove(n,t,s):this._gotoPrevItem(n,t,s),o=!0;break;case this.DOWN_KEY:case"Down":case"ArrowDown":this.isCardLayout()&&i(n).hasClass(this.getItemStyleClass())?this._gotoItemBelow(n,t,s):this._gotoNextItem(n,t,s),o=!0;break;case this.LEFT_KEY:case"Left":case"ArrowLeft":case this.RIGHT_KEY:case"Right":case"ArrowRight":this.isCardLayout()&&("rtl"===this.ojContext._GetReadingDirection()&&(e="ArrowLeft"===e||"Left"===e||e===this.LEFT_KEY?"ArrowRight":"ArrowLeft"),"ArrowLeft"===e||"Left"===e||e===this.LEFT_KEY?this._gotoPrevItem(n,t,s):this._gotoNextItem(n,t,s),o=!0)}return o},_gotoNextItem:function(e,t,s){var n=this._getItemsCache(),o=n.index(e)+1;if(o<n.length){for(var r=i(n[o]);this.SkipFocus(r);){if((o+=1)===n.length)return;r=i(n[o])}t?(this._extendSelection(r,s),this.m_isNavigate=!1):(this.SetCurrentItem(r,s),this.m_isNavigate=!0),this._handleLastItemKeyboardFocus(r)}},_gotoPrevItem:function(e,t,s){var n=this._getItemsCache(),o=n.index(e)-1;if(o>=0){for(var r=i(n[o]);this.SkipFocus(r);){if((o-=1)<0)return;r=i(n[o])}t?(this._extendSelection(r,s),this.m_isNavigate=!1):(this.SetCurrentItem(r,s),this.m_isNavigate=!0)}},_getColumnCount:function(e){var t,i;return e.each(function(e){var s=this.offsetTop;if(void 0===i)i=s;else if(i!==s)return!1;t=e}),t+1},_updateSkipItemAriaLabel:function(e,t){var s=this._createSubId("extra_info");if(null==this.m_skipAriaLabelText){var n=i(document.createElement("div"));n.addClass("oj-helper-hidden-accessible").attr("id",s),this.getListContainer().append(n),this.m_skipAriaLabelText=n}this.m_skipAriaLabelText.text(this.ojContext.getTranslatedString("accessibleNavigateSkipItems",{numSkip:t}));var o=this.getFocusItem(e);o.uniqueId().attr("aria-labelledby",s+" "+o.prop("id"))},_removeSkipItemAriaLabel:function(e){var t=this.getFocusItem(e);t.length>0&&t.get(0).removeAttribute("aria-labelledby")},_gotoItemAbove:function(e,t,s){var n,o;if(e.hasClass(this.getItemElementStyleClass())){var r=e.parent(),a=r.children("li."+this.getItemElementStyleClass()),l=this._getColumnCount(a),h=a.index(e),d=h-l;if(d<0?r.hasClass(this.getGroupStyleClass())&&r.parent().hasClass(this.getItemElementStyleClass())&&(n=r.parent(),o=h):(n=i(a.get(d)),o=l-1),n&&n.length>0){if(this.SkipFocus(n))return;t?(this._extendSelection(n,s),this.m_isNavigate=!1):(null!=o&&o>0&&this._updateSkipItemAriaLabel(n,o),this.SetCurrentItem(n,s),this.m_isNavigate=!0)}}else this._gotoPrevItem(e)},_gotoItemBelow:function(e,t,s){var n,o;if(e.hasClass(this.getItemElementStyleClass())){var r=e.parent(),a=r.children("li."+this.getItemElementStyleClass()),l=this._getColumnCount(a),h=a.index(e),d=h+l;if(d>=a.length){var c=Math.ceil(a.length/l);o=a.length-1-h,h<Math.max(0,(c-1)*l)?(n=a.last(),o-=1):r.hasClass(this.getGroupStyleClass())&&(n=r.parent().next("li."+this.getItemElementStyleClass()))}else n=i(a.get(d)),o=l-1;if(n.length>0){if(this.SkipFocus(n))return;t?(this._extendSelection(n,s),this.m_isNavigate=!1):(null!=o&&o>0&&this._updateSkipItemAriaLabel(n,o),this.SetCurrentItem(n,s),this.m_isNavigate=!0),this._handleLastItemKeyboardFocus(n)}}else this._gotoNextItem(e)},_isActionableMode:function(){return"actionable"===this.m_keyMode},_setActionableMode:function(e,t){this.m_keyMode=e?"actionable":"navigation",e||t||this.element[0].focus()},getFocusItem:function(e){if(!e.hasClass(this.getFocusedElementStyleClass()))return i(e.find("."+this.getFocusedElementStyleClass()).first());if(this.ShouldUseGridRole()&&"row"===e.attr("role")){var t=e.children(".oj-listview-cell-element").first();return 0===t.length?e.children().first():t}return e},SetRootElementTabIndex:function(){this._isComponentFocusable()&&this.element.attr("tabIndex",0)},RemoveRootElementTabIndex:function(){this.element.removeAttr("tabIndex")},_isComponentFocusable:function(){var e=this.ojContext._IsCustomElement()?this.GetRootElement():this.element;return this._rootTabIndexSet||-1!==parseInt(e.attr("tabIndex"),10)},_setTabIndex:function(e){this._isComponentFocusable()&&this.getFocusItem(e).attr("tabIndex",0)},_resetTabIndex:function(e){var t=!0;"presentation"===e.attr("role")&&(t=!1);var i=this.getFocusItem(e);t?i.removeAttr("tabIndex"):i.attr("tabIndex",-1)},_makeFocusable:function(e){this._setTabIndex(e)},getSingleFocusableElement:function(e){return e},_setCurrentItemOption:function(e,t,s){var n={item:this.ojContext._IsCustomElement()?s:i(s)};this.SetOption("currentItem",e,{_context:{originalEvent:t,internalSet:!0,extraData:n},changed:!0})},_setActive:function(e,t,i){var s;if(null!=e){var n=e[0],o=this.GetKey(n);if(null==this.m_active||o!==this.m_active.key){var r={key:o,item:e};return null!=this.m_active&&(r.previousKey=this.m_active.key,r.previousItem=this.m_active.elem,this._shouldDragSelectedItems()&&this._isTouchSupport()&&this.m_dndContext._unsetDraggable(r.previousItem),this._removeSkipItemAriaLabel(r.previousItem)),!!this.Trigger("beforeCurrentItem",t,r)&&(null!=this.m_active&&this.m_active.elem&&this.m_active.elem.get(0).classList.remove("oj-listview-current-item"),s={key:o,elem:e},this.m_active=s,this._shouldDragSelectedItems()&&this._isTouchSupport()&&this.m_dndContext._setDraggable(e),e.get(0).classList.add("oj-listview-current-item"),void 0!==i&&i||(this._makeFocusable(e),this.HighlightActive(),(null==t||t.originalEvent&&"click"!==t.originalEvent.type)&&this._focusItem(e),this.RemoveRootElementTabIndex(),r.previousItem&&this._resetTabIndex(r.previousItem)),!0)}o===this.m_active.key&&(s={key:o,elem:e},this.m_active=s,void 0!==i&&i||(this._makeFocusable(e),this.RemoveRootElementTabIndex(),this._focusItem(e)))}else this.m_active=null;return!1},_focusItem:function(e){var t=this.getFocusItem(e).get(0);t&&t.focus()},HighlightActive:function(){if(null!=this.m_active&&this.getListContainer().hasClass("oj-focus-ancestor")){var e=this.m_active.elem;this._highlightElem(e,"oj-focus")}},UnhighlightActive:function(){null!=this.m_active&&this._unhighlightElem(this.m_active.elem,"oj-focus")},HandleClickActive:function(e,t){var s=null!=this.m_active?this.m_active.elem.get(0):null;null==s||i(s).hasClass(this.getItemStyleClass())||(s=s.firstElementChild),null!=t&&null!=s&&s!==t.target&&s.contains(t.target)||this.SetCurrentItem(e,t,!this.ShouldUseGridRole()||t.target!==e.get(0))},SetCurrentItem:function(e,t,i){this.ActiveAndFocus(e,t,i)&&this._setCurrentItemOption(this.GetKey(e[0]),t,e.get(0))},ActiveAndFocus:function(e,t,i){this._scrollToVisible(e[0]),this.UnhighlightActive();var s=this._setActive(e,t,i);return this.HighlightActive(),s},enforceSelectionRequired:function(){if(this._isSelectionEnabled()&&this._isSelectionRequired()){var e=this.GetOption("selection");(null==e||0===e.length&&!0!==e.inverted)&&this._selectFirstSelectableItem()}},_getFirstSelectableItem:function(){var e=this.element[0].querySelector(".oj-listview-cell-element[aria-selected]");return null==e?null:e.parentNode},_selectFirstSelectableItem:function(){var e=this._getFirstSelectableItem();if(e){var t=this.m_contentHandler.GetKey(e);if(null!=t){this._applySelection(e,t);var i=this.GetOption("selected");this._setSelectionOption(i.clear().add([t]),null,[e])}}},_isSelectionEnabled:function(){return"none"!==this.GetOption("selectionMode")},_isSelectionRequired:function(){return this.GetOption("selectionRequired")},_isMultipleSelection:function(){return"multiple"===this.GetOption("selectionMode")},IsSelectable:function(e){return this.getFocusItem(i(e)).get(0).hasAttribute("aria-selected")},_cloneSelection:function(e){var t=[];return e.forEach(function(e){t.push(e)}),t},_getLocalData:function(e){var t=this.getDataForVisibleItem({key:e});return null==t&&this.m_validatedSelectedKeyData&&(t=this.m_validatedSelectedKeyData.get(e)),t},_setSelectionOption:function(e,s,n,o){var r={key:null,data:null},a=u.KeySetUtils.toArray(e),l=this.GetOption("firstSelectedItem");null!=l&&(0===a.length&&null!=l.key||a[0]!==l.key&&!t.Object.compareValues(a[0],l.key)?(a.length>0&&(r={key:a[0],data:null!=o?o:this._getLocalData(a[0])}),this.SetOption("firstSelectedItem",r,{_context:{originalEvent:s,internalSet:!0},changed:!0})):void 0===l.data&&(null==o&&(o=this._getLocalData(a[0])),r={key:l.key,data:o},this.SetOption("firstSelectedItem",r,{_context:{originalEvent:null,internalSet:!0},changed:!0})));var h={items:this.ojContext._IsCustomElement()?n:i(null==n?{}:n)};this.SetOption("selected",e,{_context:{originalEvent:s,internalSet:!0,extraData:h},changed:!0}),this.SetOption("selection",a,{_context:{originalEvent:s,internalSet:!0,extraData:h},changed:!0})},_unhighlightSelection:function(){if(null!=this.m_keyElemMap){var e=this,t=this.GetOption("selected");if(t.isAddAll())for(var i=this._getItemsCache(),s=0;s<i.length;s++)e._unhighlightElem(i[s],"oj-selected");else t.values().forEach(function(t){var i=e.FindElementByKey(t);null!=i&&e._unhighlightElem(i,"oj-selected")})}},_highlightElem:function(e,t){this.HighlightUnhighlightElem(e,t,!0)},_unhighlightElem:function(e,t){this.HighlightUnhighlightElem(e,t,!1)},HighlightUnhighlightElem:function(e,t,s){var n=i(e);"oj-selected"===t&&this.getFocusItem(n).attr("aria-selected",s?"true":"false");var o=n.children("."+this.getGroupItemStyleClass());o.length>0&&(n=i(o[0])),"oj-focus"===t?s?"actionable"!==this.m_keyMode&&this._focusInHandler(n):this._focusOutHandler(n):s?n.addClass(t):n.removeClass(t)},HandleClickSelection:function(e,t){this._scrollToVisible(e[0]);var i=this._ctrlEquivalent(t),s=t.shiftKey,n=!0;return this._isMultipleSelection()?i||s?!i&&s?n=this._extendSelection(e,t):this._augmentSelectionAndFocus(e,t):n=this.SelectAndFocus(e,t):n=this.SelectAndFocus(e,t,i),n},_handleTouchSelection:function(e,t){var i=!0;return this._isMultipleSelection()?t.shiftKey?i=this._extendSelection(e,t):this._augmentSelectionAndFocus(e,t):i=this.SelectAndFocus(e,t,!0),i},_clearSelection:function(e,t){if(this._unhighlightSelection(),e)if(this._isSelectionRequired())this._selectFirstSelectableItem();else{var i=this.GetOption("selected");i=i.clear(),this._setSelectionOption(i,null,null)}this.m_selectionFrontier=void 0===t?null:t},SelectAndFocus:function(e,t,i){var s=this.GetKey(e[0]),n=this.GetOption("selected"),o=n.has(s);if(o&&n.values&&1===n.values().size&&this._isSelectionRequired())return!1;var r="redwood"===a.parseJSONFromFontFamily("oj-theme-json").behavior;return!o||!i&&r?(this._clearSelection(!1),this._augmentSelectionAndFocus(e,t,n.clear())):this._clearSelection(!0),!0},_extendSelection:function(e,t){return null!=this.m_active&&(this.m_selectionFrontier!==e&&(this._unhighlightElem(e,"oj-focus"),this._extendSelectionRange(this.m_active.elem,e,t),!0))},_extendSelectionRange:function(e,t,i,s){!0===s?this._clearSelection(!1,this.m_selectionFrontier):this._clearSelection(!1,t),this._highlightRange(e,t,i),this.HighlightActive(),this._scrollToVisible(t[0])},_highlightRange:function(e,t,i){var s,n,o=this.GetOption("selected").clear(),r=[],a=this._getItemsCache(),l=a.index(e),h=a.index(t);l>h?(s=h,n=l):(s=l,n=h);for(var d=s;d<=n;d++){var c=a[d];if(this.IsSelectable(c)){var u=this.m_contentHandler.GetKey(c);this._applySelection(c,u),o=o.add([u]),r.push(c)}}this._setSelectionOption(o,i,r)},_applySelection:function(e,t){null==this.m_keyElemMap&&(this.m_keyElemMap=this.m_contentHandler.createKeyMap()),this.m_keyElemMap.set(t,i(e).attr("id")),this._highlightElem(e,"oj-selected")},_augmentSelectionAndFocus:function(e,t,s){var n=e,o=this.GetKey(e[0]);null==s&&(s=this.GetOption("selected"));var r=null!=this.m_active?this.m_active.elem.get(0):null;(null==r||i(r).hasClass(this.getItemStyleClass())||(r=r.firstElementChild),null==t||null!=r&&r!==t.target&&r.contains(t.target))||(this.UnhighlightActive(),this._setActive(n,t)&&this._setCurrentItemOption(o,t,n.get(0)),this.HighlightActive());if(null!=(r=null!=this.m_active?this.m_active.elem.get(0):null)&&r===n.get(0)){if(s.has(o)){if(s.values&&1===s.values().size&&this._isSelectionRequired())return;this._unhighlightElem(e,"oj-selected"),s=s.delete([o])}else this.m_selectionFrontier=e,this._applySelection(e,o),s=s.add([o]);var a=[];s.values&&s.values().forEach(function(e){a.push(this.FindElementByKey(e))},this),this._setSelectionOption(s,t,a)}else null!=s&&0===s.values().size&&this._setSelectionOption(s,t,[])},ToggleSelection:function(e,t,i){var s=this.GetOption("selected"),n=this.m_active.elem,o=this.m_active.key;if(s.has(o)){if(i||1===s.values().size&&this._isSelectionRequired())return;this._unhighlightElem(n,"oj-selected"),0===(s=s.delete([o])).values().size&&(this.m_selectionFrontier=null)}else this.IsSelectable(n[0])&&(t||(this._clearSelection(!1),s=s.clear()),this.m_selectionFrontier=n,this._applySelection(n,o),s=s.add([o]));var r=[];s.values().forEach(function(e){r.push(this.FindElementByKey(e))},this),this._setSelectionOption(s,e,r)},_isInputElement:function(e){return null!=e.nodeName.match(/^INPUT|SELECT|OPTION|TEXTAREA/)&&!e.readOnly},HandleSelectionOrActiveKeyDown:function(e){var t,s,n,o=!1;if(null==this.m_active||e.isDefaultPrevented())return!1;var r=e.key||e.keyCode,a=this.m_active.elem;if(this._isActionableMode()){if("Escape"===r||"Esc"===r||r===this.ESC_KEY||"F2"===r||r===this.F2_KEY)this._exitActionableMode(),this.HighlightActive(),this._focusItem(a),this._setTabIndex(a),o=!0;else if("Tab"===r||r===this.TAB_KEY){var l=this.getFocusItem(a).get(0);if(o=e.shiftKey?h.handleActionablePrevTab(e,l):h.handleActionableTab(e,l),!e.shiftKey&&o||e.shiftKey&&!o){var d=h.getFocusableElementsInNode(l)[0];d&&this._isExpandCollapseIcon(d)&&this._focusInHandler(i(d))}}}else"F2"===r||r===this.F2_KEY?(e.stopPropagation(),this._enterActionableMode(),(n=a.find("[data-first]")).length>0&&(n[0].focus(),this._isExpandCollapseIcon(n)&&this._focusInHandler(n),a.hasClass(this.getItemStyleClass())||(a=a.children("."+this.getGroupItemStyleClass()).first()),a.removeClass("oj-focus-highlight"))):" "!==r&&"Spacebar"!==r&&r!==this.SPACE_KEY||!this._isSelectionEnabled()||this._isInputElement(e.target)?"Enter"===r||r===this.ENTER_KEY?(this._isSelectionEnabled()&&this.ToggleSelection(e,!1,!0),this._fireActionEvent(a.get(0),e)):this.IsArrowKey(r)?(t=this._ctrlEquivalent(e),s=e.shiftKey,t||(o=this.HandleArrowKeys(r,s&&this._isSelectionEnabled()&&this._isMultipleSelection(),e))):"Tab"!==r&&r!==this.TAB_KEY||(e.shiftKey?this._disableAllTabbableElementsBeforeItem(a):this._disableAllTabbableElementsAfterItem(a)):(t=this._ctrlEquivalent(e),(s=e.shiftKey)&&!t&&null!=this.m_selectionFrontier&&this._isMultipleSelection()?this._extendSelectionRange(this.m_selectionFrontier,this.m_active.elem,e,!0):this.ToggleSelection(e,t&&!s&&this._isMultipleSelection(),!1),o=!0);return o},_isDisclosing:function(e){return!(!e||!this.m_disclosing)&&this.m_disclosing.indexOf(e)>-1},_setDisclosing:function(e,t){if(null!=e)if(null==this.m_disclosing&&(this.m_disclosing=[]),t)this.m_disclosing.push(e);else for(var i=this.m_disclosing.indexOf(e);i>-1;)this.m_disclosing.splice(i,1),i=this.m_disclosing.indexOf(e)},_getOptionDefaults:function(){return null==this.defaultOptions&&(this.defaultOptions=this.getStyleValues()),null==this.defaultOptions?(c.error("Cannot find oj-list-view option defaults, which might be caused by missing JET css file"),{}):this.defaultOptions},getAnimationEffect:function(e){var t=this._getOptionDefaults().animation;return null==t?null:t[e]},isExpandable:function(){return"none"!==this.GetOption("drillMode")},_isExpandAll:function(e){var t=this.GetOption("expanded");if("auto"===t){if(!this.isExpandable())return!0}else if("all"===t)return!0;return!!t.isAddAll&&(!this.isExpandable()&&t instanceof C||t.isAddAll()&&t.has(e))},expandKey:function(e,t,s,n,o){var r=this.FindElementByKey(e);null!=r&&this.ExpandItem(i(r),null,o,e,t,n,s)},_expand:function(e){var t=this.FindItem(e.target);null!=t&&t.length>0&&(this.SetCurrentItem(t,e),this.ExpandItem(t,e,!0,null,!0,!0,!0))},ExpandItem:function(e,t,i,s,n,o,r){if(this.GetState(e)===this.STATE_COLLAPSED&&(null==s&&(s=this.GetKey(e[0])),!i||!this._isDisclosing(s))){var a={item:e,key:s};if(r)if(!this.Trigger("beforeExpand",t,a)&&n)return;if(this.signalTaskStart("Expand item: "+s),i&&this._setDisclosing(s,!0),this.m_contentHandler.Expand(e,function(e){this._expandSuccess(e,i,t,a,o)}.bind(this)),this.m_items=null,null!=t&&t.stopPropagation(),!this.ojContext._IsCustomElement()&&null!=this._collapsedKeys){var l=this._collapsedKeys.indexOf(s);-1!==l&&this._collapsedKeys.splice(l,1)}this.signalTaskEnd()}},_expandSuccess:function(e,t,s,n,o){var r=this;this.signalTaskStart("Handle results from successful expand"),e.key=n.key;var a=this.AnimateExpand(i(e),t,s),l=e.parentNode;l=i(l),this.SetState(l,this.STATE_EXPANDED);var h=this.getCollapseIconStyleClass(),d=this.getExpandIconStyleClass(),c=this.getExpandingIconStyleClass(),u=this.getGroupItemStyleClass();l.children("."+u).find("."+h+", ."+c).removeClass(h).removeClass(c).addClass(d),o&&a.then(function(){if(r.ojContext._IsCustomElement()){var t=r.GetOption("expanded");if(r._isKeySet(t)&&!t.has(e.key)){var i=t.add([e.key]);r.SetOption("expanded",i,{_context:{originalEvent:s,internalSet:!0},changed:!0})}}r.Trigger("expand",s,n)}),a.then(function(){r.m_clientHeight=null,r.m_scrollHeight=null,r.signalTaskEnd()})},_adjustAncestorsMaxHeight:function(e,t){e.parentsUntil("ul.oj-component-initnode","ul."+this.getGroupStyleClass()).each(function(){var e=parseInt(i(this).css("maxHeight"),10);e>0&&i(this).css("maxHeight",e+t+"px")})},AnimateExpand:function(e,t,s){var n,r=0,a=this,l=new Promise(function(e){n=e});if(t){var h=e.get(0);h.setAttribute("data-oj-context",""),o.getContext(h).getBusyContext().whenReady().then(function(){a.isAvailable()&&(h.removeAttribute("data-oj-context"),a.signalTaskStart("Animate expand of group item"),e.css("maxHeight","100%"),e.children().each(function(){r+=i(this).outerHeight(!0)}),a._isNonWindowTouch()&&a._adjustAncestorsMaxHeight(e,r),e.css("maxHeight",r+"px"),a.signalTaskStart("Kick off expand animation"),a.StartAnimation(h,"expand").then(function(){a._handleExpandTransitionEnd(e,n)}),a.signalTaskEnd())})}else e.css("maxHeight",""),this.AnimateExpandComplete(e),n(null);return l},_handleExpandTransitionEnd:function(e,t){this._isNonWindowTouch()||e.css("maxHeight",""),this.AnimateExpandComplete(e),t(null),this.signalTaskEnd()},AnimateExpandComplete:function(e){e.removeClass(this.getGroupCollapseStyleClass()).addClass(this.getGroupExpandStyleClass()),this._setDisclosing(e[0].key,!1)},collapseKey:function(e,t,s,n){var o=this.FindElementByKey(e);null!=o&&this.CollapseItem(i(o),null,n,e,t,s)},_collapse:function(e){var t=this.FindItem(e.target);null!=t&&t.length>0&&(this.SetCurrentItem(t,e),this.CollapseItem(t,e,!0,null,!0,!0))},CollapseItem:function(e,t,i,s,n,o){var r=this;if(this.GetState(e)===this.STATE_EXPANDED&&(null==s&&(s=this.GetKey(e[0])),!i||!this._isDisclosing(s))){var a={item:e,key:s};if(!!this.Trigger("beforeCollapse",t,a)||!n){this.signalTaskStart("Collapse item: "+s),i&&this._setDisclosing(s,!0);var l=this.AnimateCollapse(e,s,i,t);this.SetState(e,this.STATE_COLLAPSED);var h=this.getCollapseIconStyleClass(),d=this.getExpandIconStyleClass();e.find("."+d).first().removeClass(d).addClass(h),this.m_items=null,null!=t&&t.stopPropagation(),o&&l.then(function(){if(null!=t&&r.ojContext._IsCustomElement()){var e=r.GetOption("expanded");if(r._isKeySet(e)){var i=e.delete([s]);r.SetOption("expanded",i,{_context:{originalEvent:t,internalSet:!0},changed:!0})}}r.Trigger("collapse",t,a)}),this.ojContext._IsCustomElement()||(null==this._collapsedKeys&&(this._collapsedKeys=[]),-1===this._collapsedKeys.indexOf(s)&&this._collapsedKeys.push(s)),l.then(function(){r.m_clientHeight=null,r.m_scrollHeight=null,r.signalTaskEnd()})}}},AnimateCollapse:function(e,t,s,n){var o,r=0,a=this,l=new Promise(function(e){o=e}),h=e.children("ul").first();if(h[0].key=t,s){this.signalTaskStart("Animate collapse"),h.children().each(function(){r+=i(this).outerHeight()}),h.css("maxHeight",r+"px");var d=this.getAnimationEffect("collapse");d.persist="all",this.signalTaskStart("Kick off collapse animation");var c=h.get(0);this.StartAnimation(c,"collapse",d).then(function(){a._handleCollapseTransitionEnd(h,o)}),this.signalTaskEnd()}else h.css("maxHeight","0px"),this.AnimateCollapseComplete(h),o(null);return l},_handleCollapseTransitionEnd:function(e,t){this.AnimateCollapseComplete(e),t(null),this.signalTaskEnd()},AnimateCollapseComplete:function(e){e.removeClass(this.getGroupExpandStyleClass()).addClass(this.getGroupCollapseStyleClass()),null!=this.m_contentHandler&&this.m_contentHandler.Collapse(e),this._setDisclosing(e[0].key,!1)},getExpanded:function(){var e=[],t=this;return this._getItemsCache().each(function(){var s=i(this);t.GetState(s)===t.STATE_EXPANDED&&e.push(t.GetKey(s[0]))}),e},getWidgetConstructor:function(){return l.__GetWidgetConstructor(this.element)},GetContainerStyleClass:function(){return this._isNonWindowTouch()?"oj-listview oj-listview-container-touch":"oj-listview oj-listview-container"},GetStyleClass:function(){return"oj-listview-element"},getItemStyleClass:function(){return this.isCardDisplayMode()?"oj-listview-card":"oj-listview-item"},getItemLayoutStyleClass:function(){return this.isCardLayout()?null:"oj-listview-item-layout"},getFocusedElementStyleClass:function(){return"oj-listview-focused-element"},getItemElementStyleClass:function(){return"oj-listview-item-element"},getGroupItemStyleClass:function(e){return e&&this._isPinGroupHeader()&&this._isPositionStickySupported()?"oj-listview-group-item oj-sticky":"oj-listview-group-item"},getGroupStyleClass:function(){return this.isCardDisplayMode()?"oj-listview-card-group":"oj-listview-group"},getGroupExpandStyleClass:function(){return""},getGroupCollapseStyleClass:function(){return this.getGroupExpandStyleClass()},getCollapseIconStyleClass:function(){return"oj-listview-collapse-icon"},getExpandIconStyleClass:function(){return"oj-listview-expand-icon"},getExpandingIconStyleClass:function(){return"oj-listview-expanding-icon"},getEmptyTextStyleClass:function(){return"oj-listview-no-data-message"},getEmptyTextMarkerClass:function(){return"oj-listview-empty-text"},getDepthStyleClass:function(e){return""},getStyleValues:function(){const e={};return Object.entries(I._CSS_Vars).forEach(([t,i])=>{e[t]="animation"===t||"gridlines"===t?I.getComplexCSSVariable(i):a.getCachedCSSVarValues([i])[0]}),e},getLoadingStatusIconStyleClass:function(){return"oj-listview-loading-icon"},getStatusMessageStyleClass:function(){return"oj-listview-status-message"},getStatusStyleClass:function(){return"oj-listview-status"},_isPositionStickySupported:function(){var e=t.AgentUtils.getAgentInfo().browser;return e!==t.AgentUtils.BROWSER.IE&&e!==t.AgentUtils.BROWSER.EDGE},_preventMouseWheelOverscroll:function(e,t){var i=t.originalEvent.deltaY;if(!isNaN(i)&&void 0!==this.m_contentHandler.hasMoreToFetch){var s=e.scrollTop;if(i>0){var n=this._getScrollHeight();this.m_contentHandler.hasMoreToFetch()&&s+this._getClientHeight()+Math.abs(i)>=n&&(e.scrollTop=n,t.preventDefault())}else s>0&&s+i<=0&&(e.scrollTop=0,t.preventDefault())}},_getScrollEventElement:function(){var e=this._getScroller();return e===document.body||e===document.documentElement?window:e},_findClosestElementToTop:function(e,t,s){var n,o=t?this._getItemsCache():i(this._getRootNodeForItems()).children("li."+this.getItemElementStyleClass());if(null==o||0===o.length)return null;var r=this.GetOption("scrollPosition");if(Math.abs(r.y-e)<this.MINIMUM_ITEM_HEIGHT&&null!=r.key&&!isNaN(r.index))if(t){var a=this.FindElementByKey(r.key);null!=a&&(n=o.index(a))}else n=r.index;isNaN(n)&&(n=Math.floor(e/s)),n=Math.min(Math.max(n,0),o.length-1);var l,h=Math.max(e,0),d=o[n],c=h-(l=0===n?0:d.offsetTop),u={index:n,elem:d,offsetTop:l,offset:c};if(Math.abs(c)<1)return u;var p=c>0;p?n+=1:n-=1;for(var m=!1;!m&&n>=0&&n<o.length;){if(l=(d=o[n]).offsetTop,m=(c=Math.abs(h-l))<1||(p?h<=l:h>=l)){(c<1||!p)&&(u={index:n,elem:d,offsetTop:l,offset:c});break}p&&u.offsetTop===l||(u={index:n,elem:d,offsetTop:l,offset:c}),p?n+=1:n-=1}return m||(n=p?o.length-1:0,u.index=n,u.elem=o[n]),u},_getRootNodeForItems:function(){return this.isCardLayout()?this.element.get(0).firstElementChild.firstElementChild:this.element.get(0)},_getItemHeight:function(){var e;null==this.m_itemHeight&&(this.m_contentHandler.IsHierarchical()?(e=this.element.children("li."+this.getItemElementStyleClass()).first()).length>0&&(this.m_itemHeight=e.get(0).firstElementChild.offsetHeight):(e=i(this._getRootNodeForItems()).children("li."+this.getItemElementStyleClass()).first()).length>0&&(this.m_itemHeight=e.get(0).offsetHeight));return this.m_itemHeight},_getCurrentScrollPosition:function(e){var t={},s=this._getScroller();void 0===e&&(e=s.scrollTop),t.x=this._getScrollX(s),t.y=e;var n=this.m_contentHandler.IsHierarchical(),o=this._getItemHeight();if(!isNaN(o)&&o>0){var r=this._findClosestElementToTop(e,n,o);if(null!=r){var a=r.elem;if(n){var l,h=a.parentNode;h!==this.element.get(0)?(this.m_closestParent=h.parentNode,t.parent=this.GetKey(this.m_closestParent),l=this.m_closestParent.firstElementChild):l=r.elem.firstElementChild,t.key=this.GetKey(r.elem),t.index=i(h).children().index(a),l&&l.classList.contains("oj-sticky")&&(this.m_stuckHeader&&this.m_stuckHeader!==l&&this.m_stuckHeader.classList.remove("oj-stuck"),l.classList.add("oj-stuck"),this.m_stuckHeader=l)}else t.index=r.index,t.key=this.GetKey(r.elem);t.offsetY=r.offset,t.offsetX=t.x}}return t},_getOffsetTop:function(e){var t=e.offsetTop;if(this.isCardLayout()&&this.m_contentHandler.getMargin){var i=this.m_contentHandler.getMargin();isNaN(i)||(t=Math.max(0,t-i))}var s=this.element.get(0).offsetTop;return isNaN(this.m_elementOffset)||this.m_elementOffset===s?t:Math.max(0,t-s)},_getScrollTopByIndex:function(e,t){var s;if(null!=t)null!=(s=this.FindElementByKey(t))&&(s=i(s).children("ul").first());else{if(0===e)return 0;s=this.element.get(0),this.isCardLayout()&&(s=s.firstElementChild.firstElementChild)}if(null!=s){var n=i(s).children("."+this.getItemElementStyleClass())[e];if(null!=n)return this._getOffsetTop(n)}if(this.m_contentHandler.hasMoreToFetch&&this.m_contentHandler.hasMoreToFetch())return this._getScrollHeight()},_getScrollTopByKey:function(e){var t=this.FindElementByKey(e);return null!=t?this._getOffsetTop(t):this.m_contentHandler.hasMoreToFetch&&this.m_contentHandler.hasMoreToFetch()?this._getScrollHeight():void 0},_getScrollCoordinates:function(e){var t,i=e.x,s=e.offsetX;isNaN(i)||isNaN(s)||(i+=s);var n=e.key;isNaN(t)&&null!=n&&(t=this._getScrollTopByKey(n));var o=e.parent,r=e.index;isNaN(t)&&!isNaN(r)&&(t=this._getScrollTopByIndex(r,o));var a=e.offsetY;return isNaN(t)||isNaN(a)||(t+=a),isNaN(t)&&!isNaN(e.y)&&(t=e.y),{x:i,y:t}},_isEmpty:function(){var e=this.element[0],t=e.querySelector("li."+this.getItemElementStyleClass()),i=e.querySelector("li.oj-listview-temp-item");return null==t&&null==i},_handleScroll:function(e){if(null!=this.m_contentHandler&&this.ShouldUseGridRole()&&!this._isEmpty()){var t=this._getScroller().scrollTop;this.ojContext._IsCustomElement()||this.SetOption("scrollTop",t,{_context:{originalEvent:e,internalSet:!0}}),this.ShouldUpdateScrollPosition()&&this.SetOption("scrollPosition",this._getCurrentScrollPosition(t),{_context:{originalEvent:e,internalSet:!0}}),this._handlePinGroupHeader()}},isLoadMoreOnScroll:function(){var e=this.GetOption("scrollPolicy");if("auto"===e){var i=this.GetOption("data");if(null!=i&&(void 0!==t.TableDataSource&&i instanceof t.TableDataSource||void 0!==t.TreeDataSource&&i instanceof t.TreeDataSource))return!1}return"loadAll"!==e},_unregisterScrollHandler:function(){var e=i(this._getScrollEventElement());return this._scrollListener&&e[0].removeEventListener("scroll",this._scrollListener),this.ojContext._IsCustomElement()?(e[0].removeEventListener("wheel",this._wheelListener,{passive:!1}),delete this._wheelListener):this.ojContext._off(e,"wheel"),e},_registerScrollHandler:function(){var e=this,t=this._unregisterScrollHandler();this._scrollListener=function(t){e._skipScrollUpdate||e.m_ticking||(window.requestAnimationFrame(function(){e._handleScroll(t),e.m_ticking=!1}),e.m_ticking=!0),c.info("scroll listener: "+e._skipScrollUpdate),e._skipScrollUpdate&&(c.info("clearing scrollPosBusyState"),e._clearScrollPosBusyState()),e._skipScrollUpdate=!1},t[0].addEventListener("scroll",this._scrollListener),this.isLoadMoreOnScroll()&&this._getScroller()!==document.documentElement&&(this._wheelListener=function(t){t.originalEvent||(t.originalEvent=t),e._preventMouseWheelOverscroll(e._getScroller(),t)},this._scrollElem=t,this.ojContext._IsCustomElement()?this._scrollElem[0].addEventListener("wheel",this._wheelListener,{passive:!1}):this.ojContext._on(this._scrollElem,{wheel:this._wheelListener}))},mergeScrollListener:function(){this._scrollListener&&this._getScrollEventElement().removeEventListener("scroll",this._scrollListener);return this._scrollListener},unmergeScrollListener:function(){if(this._scrollListener){var e=this._getScrollEventElement();e.removeEventListener("scroll",this._scrollListener),e.addEventListener("scroll",this._scrollListener)}},_isPinGroupHeader:function(){return"static"!==this.GetOption("groupHeaderPosition")&&this.m_contentHandler.IsHierarchical()},_getGroupItemsCache:function(){if(null==this.m_groupItems){var e="."+this.getGroupItemStyleClass()+":visible";this.m_groupItems=this.element.find(e).filter(function(){return!i(this).parent().hasClass("oj-collapsed")&&i(this).next().children().length>0})}return this.m_groupItems},_unpinGroupItem:function(e){i(e).removeClass("oj-pinned"),e.style.top="auto",e.style.width="auto"},_getNextGroupItem:function(e){var t=this._getGroupItemsCache(),i=t.index(e);return i>-1&&i<t.length-1?t[i+1]:null},_pinGroupItem:function(e,t){var s=e.offsetWidth,n=e.offsetHeight,o=this._getNextGroupItem(e);null!=o&&o.offsetTop<=t+n+5&&(t-=n),i(e).addClass("oj-pinned"),e.style.top=t+"px",e.style.width=s+"px"},_handlePinGroupHeader:function(){var e;if(this._isPinGroupHeader()&&!this._isPositionStickySupported()){var t=this._getScroller().scrollTop;if(null!=this.m_groupItemToPin&&0===t)return this._unpinGroupItem(this.m_groupItemToPin),void(this.m_groupItemToPin=null);var i=this._getGroupItemsCache(),s=0;null!=this.m_groupItemToPin&&(s=this.m_groupItemToPin.offsetHeight);for(var n=0;n<i.length;n++){var o=i[n];if(this.m_groupItemToPin!==o){var r=i[n].offsetTop,a=r+o.parentNode.offsetHeight;if(r<t&&a>t+s){e=o;break}}}if(null!=e&&e!==this.m_groupItemToPin)null!=this.m_groupItemToPin&&this._unpinGroupItem(this.m_groupItemToPin),this._pinGroupItem(e,t),this.m_groupItemToPin=e;else if(null!=this.m_groupItemToPin){var l=this._getNextGroupItem(this.m_groupItemToPin);if(null!=l&&l.offsetTop<=t+s)return void(this.m_groupItemToPin.style.top=l.offsetTop-s+"px");this.m_groupItemToPin.style.top=t+"px"}}},_getScroller:function(){if(null!=this.m_scroller)return this.m_scroller;var e,t=this.GetOption("scrollPolicyOptions");return null!=t&&null!=(e=t.scroller)&&("string"==typeof e&&null==(e=document.querySelector(e))&&c.error("the css selector string specified in scroller attribute does not resolve to any element"),null==e||e.contains(this.getListContainer()[0])||(c.error("the specified scroller must be an ancestor of the component"),e=null)),this.m_scroller=null!=e?e:this.getListContainer().get(0),this.m_scroller},_scrollToGroupHeader:function(e){var t=this._getScroller(),i=t.scrollTop;null!=this.m_groupItemToPin&&(this._unpinGroupItem(this.m_groupItemToPin),this.m_groupItemToPin=null);var s=e.offsetTop;this._isPinGroupHeader()&&this._isPositionStickySupported()&&s<i&&(s=Math.max(0,s-e.parentNode.offsetHeight+e.offsetHeight)),t.scrollTop=s,i===t.scrollTop&&this._handlePinGroupHeader(),this._setFirstFocusableItemInGroupCurrent(e)},_setFirstFocusableItemInGroupCurrent:function(e){var t=this;i(e).next().children().each(function(){var e=i(this);if(!t.SkipFocus(e))return t.SetOption("currentItem",this.key),!1})}});I._CSS_Vars={animation:{add:"--oj-private-list-view-global-add-animation-default",remove:"--oj-private-list-view-global-remove-animation-default",update:"--oj-private-list-view-global-update-animation-default",expand:"--oj-private-list-view-global-expand-animation-default",collapse:"--oj-private-list-view-global-collapse-animation-default",pointerUp:"--oj-private-list-view-global-pointerUp-animation-default",cardEntrance:"--oj-private-list-view-global-card-entrance-animation-default",cardExit:"--oj-private-list-view-global-card-exit-animation-default"},gridlines:{item:"--oj-private-list-view-global-gridlines-item-default",top:"--oj-private-list-view-global-gridlines-top-default",bottom:"--oj-private-list-view-global-gridlines-bottom-default"},loadIndicator:"--oj-private-list-view-global-load-indicator-default",showIndicatorDelay:"--oj-private-core-global-loading-indicator-delay-duration",cardAnimationDelay:"--oj-private-animation-global-card-entrance-delay-increment"},I.getComplexCSSVariable=function(e){const t={},i=Object.keys(e),s=i.map(t=>e[t]),n=a.getCachedCSSVarValues(s);return i.forEach((e,i)=>{const s=/^(\[|{)/.test(n[i])?JSON.parse(n[i]):n[i];t[e]=s}),t},t._registerLegacyNamespaceProp("_ojListView",I),t.__registerWidget("oj.ojListView",i.oj.baseComponent,{widgetEventPrefix:"oj",options:{as:"",currentItem:null,data:null,display:"list",dnd:{drag:null,drop:null,reorder:{items:"disabled"}},drillMode:"collapsible",expanded:new C,firstSelectedItem:{key:null,data:null},gridlines:{item:"visible"},groupHeaderPosition:"sticky",item:{focusable:!0,renderer:null,selectable:!0},scrollToKey:"auto",scrollPolicy:"auto",scrollPolicyOptions:{fetchSize:25,maxCount:500},scrollPosition:{x:0,y:0},scrollTop:0,selected:new u.KeySetImpl,selection:[],selectionMode:"none",selectionRequired:!1,animateStart:null,animateEnd:null,beforeCurrentItem:null,beforeExpand:null,beforeCollapse:null,collapse:null,copy:null,cut:null,expand:null,itemAction:null,paste:null,ready:null,reorder:null},_ComponentCreate:function(){this._super(),this._setup()},_setup:function(){var e={};(e.element=this.element,e.OuterWrapper=this.OuterWrapper,e.ojContext=this,this._IsCustomElement())||this.options.expanded instanceof C&&(this.options.expanded="auto");e=i.extend(this.options,e),this.listview=new I,this.listview.init(e),h.disableDefaultBrowserStyling(this.element[0])},_AfterCreate:function(){this._super();var e=this;this.listview._FixRendererContext=function(t){return e._FixRendererContext(t)},this.listview._WrapCustomElementRenderer=function(t){return e._WrapCustomElementRenderer(t)},this.listview._GetCustomElement=function(){return e._GetCustomElement()},this.listview.afterCreate()},_SetupResources:function(){this._super(),this.listview.setupResources()},_ReleaseResources:function(){this._super(),this.listview.releaseResources()},GetFocusElement:function(){return null!=this.listview?this.listview.GetFocusElement():this._super()},_destroy:function(){this.listview.destroy(),this._super()},_NotifyContextMenuGesture:function(e,t,i){this.listview.notifyContextMenuGesture(e,t,i)},_setOptions:function(e,t){if(this.listview.isAvailable()){var i=this.listview.setOptions(e,t);this._super(e,t),i?(e.data&&this.listview.adjustScrollPositionValueOnFetch(),this.listview.refresh()):(e.selectionRequired||e.selection||e.selectionMode)&&this.listview.enforceSelectionRequired()}else this._super(e,t)},_setOption:function(e,t,s){var n,o=!0;if("selectionMode"===e?o="none"===t||"single"===t||"multiple"===t:"drillMode"===e?o="collapsible"===t||"none"===t:"scrollPolicy"===e?o="auto"===t||"loadMoreOnScroll"===t||"loadAll"===t:"groupHeaderPosition"===e?o="static"===t||"sticky"===t:"firstSelectedItem"===e&&(o=!1),!o)throw new Error("Invalid value: "+t+" for key: "+e);this.listview.isAvailable()&&("selection"===e?(n=this.listview.getItems(t),s={_context:{extraData:{items:this._IsCustomElement()?n:i(n)}}}):"currentItem"===e&&(n=this.listview.getItems([t])[0],s={_context:{extraData:{items:this._IsCustomElement()?n:i(n)}}})),this._super(e,t,s)},_NotifyAttached:function(){this.listview.notifyAttached()},_NotifyDetached:function(){this.listview.notifyDetached()},_NotifyShown:function(){this.listview.notifyShown()},_VerifyConnectedForSetup:function(){return!0},widget:function(){return this.listview.GetRootElement()},refresh:function(){this._super(),this.listview.refresh()},whenReady:function(){return this.listview.whenReady()},getNodeBySubId:function(e){return this.listview.getNodeBySubId(e)},getSubIdByNode:function(e){return this.listview.getSubIdByNode(e)},getContextByNode:function(e){return this.listview.getContextByNode(e)},getDataForVisibleItem:function(e){return this.listview.getDataForVisibleItem(e)},expand:function(e,t){this.listview.expandKey(e,t,!0,!0)},collapse:function(e,t){this.listview.collapseKey(e,t,!0)},getExpanded:function(){return this.listview.getExpanded()},getIndexerModel:function(){return null==this.indexerModel&&v.ListViewIndexerModel&&(this.indexerModel=new v.ListViewIndexerModel(this.listview)),this.indexerModel},scrollToItem:function(e){this.listview.scrollToItem(e)},_CompareOptionValues:function(e,i,s){switch(e){case"currentItem":case"scrollPolicyOptions":return t.Object.compareValues(i,s);case"selection":return i&&void 0===i.inverted&&(i.inverted=!1),s&&void 0===s.inverted&&(s.inverted=!1),(!i||!s||i.inverted===s.inverted)&&t.Object.compareValues(i,s);default:return this._super(e,i,s)}}}),l.setDefaultOptions({ojListView:{gridlines:l.createDynamicPropertyGetter(function(){const e=I._CSS_Vars.gridlines;var t={gridlines:I.getComplexCSSVariable(e)};return null==t?(c.error("Cannot find oj-list-view option defaults, which might be caused by missing JET css file"),t={gridlines:{}}):null==t.gridlines&&(c.error("Cannot find gridlines default option, which might be caused by a mismatch between JET js and css files"),t={gridlines:{}}),{item:t.gridlines.item}})}})}),define("ojs/ojlistitemlayout",["exports","preact/jsx-runtime","ojs/ojvcomponent","preact"],function(e,t,i,s){"use strict";var n=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};e.ListItemLayout=class extends s.Component{constructor(){super(...arguments),this._hasContent=e=>Array.isArray(e)&&e.length>0||e}_getWrappedSlotContent(e,i,s){if(this._hasContent(e)){let n=0;return i&&i.length>0&&s?t.jsx("div",Object.assign({class:i,tabIndex:n},{children:e})):i&&i.length>0?t.jsx("div",Object.assign({class:i},{children:e})):s?t.jsx("div",Object.assign({tabIndex:n},{children:e})):t.jsx("div",{children:e})}return null}_getWrappedSlotContentWithClickThroughDisabled(e,i,s){if(this._hasContent(e)){let n=0;return i&&i.length>0&&s?t.jsx("div",Object.assign({"data-oj-clickthrough":"disabled",class:i,tabIndex:n},{children:e})):i&&i.length>0?t.jsx("div",Object.assign({"data-oj-clickthrough":"disabled",class:i},{children:e})):s?t.jsx("div",Object.assign({"data-oj-clickthrough":"disabled",tabIndex:n},{children:e})):t.jsx("div",Object.assign({"data-oj-clickthrough":"disabled"},{children:e}))}return null}render(e){const i=this._hasContent(e.metadata)||this._hasContent(e.action)||this._hasContent(e.trailing);let s="";this._hasContent(e.secondary)&&this._hasContent(e.tertiary)&&(s="oj-listitemlayout-tertiary");let n="oj-listitemlayout-leading";this._hasContent(e.selector)&&this._hasContent(e.leading)&&(n+=" oj-listitemlayout-start-padding");let o="oj-listitemlayout-quaternary",r="oj-listitemlayout-textslots";return(this._hasContent(e.selector)||this._hasContent(e.leading))&&(r+=" oj-listitemlayout-start-padding",o+=" oj-listitemlayout-start-padding"),t.jsxs("div",Object.assign({class:"oj-listitemlayout-grid"},{children:[this._getWrappedSlotContent(e.selector,"oj-listitemlayout-selector",!1),this._getWrappedSlotContent(e.leading,n,!0),t.jsxs("div",Object.assign({class:r},{children:[this._getWrappedSlotContent(e.overline,null,!0),this._getWrappedSlotContent(e.children,null,!0),this._getWrappedSlotContent(e.secondary,null,!0),this._getWrappedSlotContent(e.tertiary,s,!0)]})),i?t.jsxs("div",Object.assign({class:"oj-listitemlayout-extra"},{children:[this._getWrappedSlotContent(e.metadata,"oj-listitemlayout-metadata oj-listitemlayout-start-padding",!0),this._getWrappedSlotContent(e.trailing,"oj-listitemlayout-trailing oj-listitemlayout-image oj-listitemlayout-start-padding",!0),this._getWrappedSlotContentWithClickThroughDisabled(e.action,"oj-listitemlayout-action oj-listitemlayout-start-padding",!1)]})):null,this._getWrappedSlotContent(e.quaternary,o,!0),this._getWrappedSlotContentWithClickThroughDisabled(e.navigation,"oj-listitemlayout-navigation",!1)]}))}},e.ListItemLayout.metadata={slots:{"":{},overline:{},selector:{},leading:{},secondary:{},tertiary:{},metadata:{},trailing:{},action:{},quaternary:{},navigation:{}}},e.ListItemLayout=n([i.customElement("oj-list-item-layout")],e.ListItemLayout),Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojlistviewdnd",["exports","ojs/ojcore","jquery","ojs/ojlogger","ojdnd","ojs/ojlistview"],function(e,t,i,s,n,o){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;const r=function(e){this.listview=e};t._registerLegacyNamespaceProp("ListViewDndContext",r),t.Object.createSubclass(r,t.Object,"oj.ListViewDndContext"),r.C_KEY=67,r.V_KEY=86,r.X_KEY=88,r.CUT_COMMAND="cut",r.COPY_COMMAND="copy",r.PASTE_COMMAND="paste",r.PASTE_BEFORE_COMMAND="pasteBefore",r.PASTE_AFTER_COMMAND="pasteAfter",r.prototype.reset=function(){this._unsetSelectionDraggable(),this.m_itemsDragged=null,this.m_dragImage=null,this.m_currentDragItem=null,this.m_dragItems=null,this.m_contextMenuItem=null,this.m_cachedOffset=null,this.m_dropTarget=null,this.m_firstDropTarget=null},r.prototype._getDndOptions=function(e){var t=this.listview.GetOption("dnd");return null!=t&&t[e]?t[e].items:null},r.prototype._getDragOptions=function(){return this._getDndOptions("drag")},r.prototype._getDropOptions=function(){return this._getDndOptions("drop")},r.prototype.IsItemReOrdering=function(){return"enabled"===this._getDndOptions("reorder")},r.prototype.GetDragAffordanceClass=function(){return"oj-listview-drag-handle"},r.prototype.GetDragImageClass=function(){return"oj-listview-drag-image"},r.prototype.GetDragItemClass=function(){return"oj-listview-drag-item"},r.prototype.GetCutStyleClass=function(){return"oj-listview-cut"},r.prototype.GetCommandPrefix=function(){return"oj-listview-"},r.prototype._findItem=function(e){return i(e).get(0).classList.contains("oj-listview-first-drop-target")?i(this.m_dropTargetElem):this.listview.FindItem(e)},r.prototype._getSelectedItems=function(e){var t=[];if(this.listview._isSelectionEnabled())for(var s=this.listview.GetOption("selection"),n=0;n<s.length;n++){var o=this.listview.FindElementByKey(s[n]);null==o||this.listview.SkipFocus(i(o))||t.push(o)}else{var r=this._getActiveItem();null!=r&&t.push(r)}return!e&&null!=this.m_contextMenuItem&&this.m_contextMenuItem.length>0&&(this.listview.element.get(0).contains(this.m_contextMenuItem.get(0))?-1===t.indexOf(this.m_contextMenuItem.get(0))&&(t=[this.m_contextMenuItem.get(0)]):this.m_contextMenuItem=null),t},r.prototype._getActiveItem=function(){return null==this.listview.m_active?null:this.listview.m_active.elem[0]},r.prototype.itemRenderComplete=function(e,t){i(e).hasClass(this.listview.getItemStyleClass())||(e=e.firstElementChild);var s=i(e).find("."+this.GetDragAffordanceClass());null!=s&&s.length>0&&this.listview._isTouchSupport()&&s.attr("draggable","true")},r.prototype._unsetSelectionDraggable=function(){this.m_draggableSelection&&i.each(this.m_draggableSelection,function(e,t){i(t).removeClass("oj-draggable"),this.listview._isTouchSupport()&&i(t).removeAttr("draggable")}.bind(this))},r.prototype.setSelectionDraggable=function(){var e=[];this._unsetSelectionDraggable();for(var t=this.listview.GetOption("selection"),s=0;s<t.length;s++){var n=this.listview.FindElementByKey(t[s]);null==n||this.listview.SkipFocus(i(n))||(e.push(n),i(n).addClass("oj-draggable"),this.listview._isTouchSupport()&&i(n).attr("draggable","true"))}this.m_draggableSelection=e},r.prototype._setItemDraggable=function(e){var t=this.GetDragAffordanceClass(),i=e.find("."+t);return null!=i&&i.length>0||(e.addClass("oj-draggable"),!1)},r.prototype._unsetItemDraggable=function(e){e.removeClass("oj-draggable")},r.prototype._setDraggable=function(e){if(null!=this._getDragOptions()||this.IsItemReOrdering()){var t,s=this.GetDragAffordanceClass();if(e.hasClass(s))t=i(e);else{var n=this._findItem(e);if(this.shouldDragCurrentItem())t=n;else{if(null!=n)if(this._setItemDraggable(n))return;var o=this._getSelectedItems(!0);o.length>0&&(null!=n&&o.indexOf(n[0])>-1?t=n:i(o[0]).removeClass("oj-draggable"))}}null!=t&&t.attr("draggable",!0)}},r.prototype._unsetDraggable=function(e){if(null!=this._getDragOptions()||this.IsItemReOrdering()){var t,s=this.GetDragAffordanceClass();null!=(t=e.hasClass(s)?i(e):this._findItem(e))&&(t.removeAttr("draggable"),this._unsetItemDraggable(t))}},r.prototype.isDndInProgress=function(){return null!=this.m_dragImage},r.prototype._invokeDndCallback=function(e,t,i,n){var o,r="drag"===e?this._getDragOptions():this._getDropOptions();if(r){var a=r[t];if(a&&"function"==typeof a)try{this.listview.ojContext._IsCustomElement()?(a(i.originalEvent,n),i.originalEvent.defaultPrevented&&i.preventDefault()):(i.dataTransfer=i.originalEvent.dataTransfer,o=a(i,n))}catch(e){s.error("Error: "+e)}else o=-1}else o=-1;return o},r.prototype._setDragItemDataTransfer=function(e,t,i){for(var s=[],n=0;n<i.length;n++){var o=this.listview._getDataForItem(i[n]);o&&(o.innerHTML&&o.tagName&&"LI"===o.tagName?s.push(o.innerHTML):s.push(o))}return s.length>0?(this._setDragItemData(e.originalEvent,t,s),this.SetDragItemImage(e.originalEvent,i),{items:s}):null},r.prototype._setDragItemData=function(e,t,i){var s=e.dataTransfer,n=JSON.stringify(i);if("string"==typeof t)s.setData(t,n);else if(t)for(var o=0;o<t.length;o++)s.setData(t[o],n);s.setData(this.GetDragSourceType(),this.listview.element.get(0).id)},r.prototype._createDragImage=function(){var e=document.createElement("ul");if(e.className=this.listview.element.get(0).className,e.classList.add(this.GetDragImageClass()),this.listview.ojContext._IsCustomElement()){var t=["oj-component","oj-complete"].concat(this.listview.GetContainerStyleClass().split(" "));this.listview.GetRootElement().get(0).classList.forEach(function(i){-1===t.indexOf(i)&&e.classList.add(i)})}return e},r.prototype._calculateOffset=function(e){var t=window.getComputedStyle(e);return parseFloat(t.marginLeft)+parseFloat(t.marginRight)+parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)+parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth)},r.prototype._calculateAffordanceOffset=function(e,t){if(null==this.m_cachedOffset){this.m_cachedOffset=Math.max(0,t.offsetLeft-e.offsetLeft)+t.offsetWidth/2;var i=this._calculateOffset(e),s=this._calculateOffset(this.listview.getListContainer().get(0));this.m_cachedOffset+=Math.max(s,i-s)}return this.m_cachedOffset},r.prototype.SetDragItemImage=function(e,t){var s,n,o,r=0,a=0,l=e.target,h=this.listview.isCardLayout();if(t.length>1){var d;(s=i(this._createDragImage())).css({width:this.listview.element.css("width"),height:this.listview.element.css("height")});var c=Number.MAX_VALUE;for(d=0;d<t.length;d++)c=Math.min(c,t[d].offsetTop);for(d=0;d<t.length;d++){n=t[d].offsetTop-c;var u=t[d].offsetWidth;(o=i(t[d].cloneNode(!0))).removeClass("oj-selected oj-focus oj-hover").css({position:"absolute",top:n,width:u}),h||o.addClass("oj-listview-item-drag-image"),s.append(o)}}else i(l).hasClass(this.GetDragAffordanceClass())?(n=0,i.contains(t[0],l.offsetParent)&&(n=l.offsetTop),r=this._calculateAffordanceOffset(t[0],l),a=n+l.offsetHeight/2):(r=Math.max(0,e.offsetX),a=Math.max(0,e.offsetY)),(o=i(t[0].cloneNode(!0))).removeClass("oj-selected oj-focus oj-hover").addClass("oj-drag"),h||o.addClass("oj-listview-item-drag-image"),(s=i(this._createDragImage())).css({width:this.GetDragImageWidth(t[0]),height:2*t[0].offsetHeight}).append(o);h&&s.addClass("oj-listview-card-layout"),i("body").append(s),this.m_dragImage=s,e.dataTransfer.setDragImage(s.get(0),r,a)},r.prototype.GetDragImageWidth=function(){return this.listview.element.css("width")},r.prototype.GetDefaultDataType=function(){return"text/ojlistview-items-data"},r.prototype._handleDragStart=function(e){var t,s,n=this._getDragOptions();if((null!=n||this.IsItemReOrdering())&&(t=null!=n?n.dataTypes:this.GetDefaultDataType(),i(e.target).hasClass(this.GetDragAffordanceClass())||this.shouldDragCurrentItem()?(s=[]).push(this._findItem(e.target)[0]):s=this._getSelectedItems(!0),s.length>0)){this.m_dragItems=s,this.m_currentDragItem=i(s[0]);var o=this._setDragItemDataTransfer(e,t,s);if(o){var r=this._invokeDndCallback("drag","dragStart",e,o);if(-1===r)return;return r}return!1}},r.prototype._handleDrag=function(e){return this._invokeDndCallback("drag","drag",e)},r.prototype._destroyDragImage=function(){null!=this.m_dragImage&&(this.m_dragImage.remove(),this.m_dragImage=null)},r.prototype._handleDragEnd=function(e){if(this.m_dragEndCallCheck&&(window.cancelAnimationFrame(this.m_dragEndCallCheck),this.m_dragEndCallCheck=null),null!=this.m_currentDragItem&&null!=this.m_dragItems){this.m_currentDragItem.find("."+this.GetDragAffordanceClass()).removeAttr("draggable"),this.m_currentDragItem.removeClass("oj-drag oj-draggable").removeAttr("draggable");for(var t=0;t<this.m_dragItems.length;t++){var s=this.m_dragItems[t];s.classList.remove("oj-listview-drag-source"),s.classList.remove(this.GetDragItemClass()),i(s).css("display","")}}this._cleanupDropTarget(),this._destroyDragImage(),this._unsetSelectionDraggable(),this._invokeDndCallback("drag","dragEnd",e),this.m_itemsDragged=this.m_dragItems,this.m_dragImage=null,this.m_currentDragItem=null,this.m_dragItems=null,this.listview.restoreFocusAfterDrag()},r.prototype._matchDragDataType=function(e){var t=this._getDropOptions();if(t&&t.dataTypes)for(var i=t.dataTypes,s="string"==typeof i?[i]:i,n=e.originalEvent.dataTransfer.types,o=0;o<n.length;o++)if(s.indexOf(n[o])>=0)return!0;return!1},r.prototype._invokeDropCallback=function(e,t,i){var s=this._invokeDndCallback("drop",e,t,i);return void 0!==s&&-1!==s||this._matchDragDataType(t)&&t.preventDefault(),s},r.prototype._getDropIndicator=function(){return null!=this.m_dragItems?"space":"line"},r.prototype._createDropTarget=function(e){var t,s=this._getDropIndicator();null==this.m_dropTarget&&("space"===s?(t=i(e.get(0).cloneNode(!1))).addClass("oj-drop").removeClass("oj-drag oj-draggable oj-hover oj-focus").css({display:"block",height:e.outerHeight(),width:e.outerWidth()}):"line"===s&&(t=document.createElement("li")).classList.add("oj-listview-drop-target"),this.m_dropTarget=i(t));var n=e.get(0);if("line"===s){n.classList.add("oj-drop"),null!=this.m_dropTargetElem&&this.m_dropTargetElem.classList.remove("oj-drop"),this.m_dropTargetElem=n;var o=n.offsetTop+n.offsetHeight-this._getDropIndicatorHeight();null==n.nextElementSibling&&this.listview._isGridlinesVisible()&&(o-=1),this.m_dropTarget.get(0).style.top=o+"px"}else"space"===s&&(this.m_dropTarget.get(0).key=n.key);return this.m_dropTarget},r.prototype._getDropIndicatorHeight=function(){if(!isNaN(this.m_dropIndicatorHeight))return this.m_dropIndicatorHeight;if(this.m_dropTarget){var e=this.m_dropTarget.get(0);return this.listview.element.get(0).appendChild(e),this.m_dropIndicatorHeight=e.offsetHeight,this.listview._isGridlinesVisible()&&(this.m_dropIndicatorHeight-=1),this.m_dropIndicatorHeight}return 0},r.prototype._cleanupGroupItem=function(){null!=this.m_currentDropItem&&-1===this.m_dropTargetIndex&&this.m_currentDropItem.children("."+this.listview.getGroupItemStyleClass()).removeClass("oj-drop")},r.prototype._cleanupEmptyList=function(){null!=this.m_currentDropItem&&this.m_currentDropItem.hasClass(this.listview.getEmptyTextStyleClass())&&(this.m_currentDropItem.removeClass("oj-drop"),this.m_currentDropItem.get(0).textContent=this.listview._getEmptyText())},r.prototype._cleanupDropTarget=function(){null!=this.m_dropTarget&&(this.m_dropTarget.css("height","0"),this.m_dropTarget.remove(),this.m_dropTarget=null),null!=this.m_dropTargetElem&&this.m_dropTargetElem.classList.remove("oj-drop"),null!=this.m_firstDropTarget&&(this.m_firstDropTarget.parentNode&&this.m_firstDropTarget.parentNode.removeChild(this.m_firstDropTarget),this.m_firstDropTarget=null),this._cleanupEmptyList(),this._cleanupGroupItem()},r.prototype._handleDragEnter=function(e){var t=this._findItem(e.target);if(null!=t&&t.length>0){var i=this._invokeDropCallback("dragEnter",e,{item:t.get(0)});if(-1!==i)return i}},r.prototype._setCurrentDropItem=function(e){null!=this.m_currentDropItem&&this.m_currentDropItem.removeClass("oj-valid-drop oj-invalid-drop"),this.m_currentDropItem=e,this.m_currentDropItem.addClass("oj-valid-drop")},r.prototype._setAccInfo=function(e,t){var i=e.attr("aria-label");null==i&&(i=e.text());var s="accessibleReorder"+t.charAt(0).toUpperCase()+t.substr(1)+"Item",n=this.listview.ojContext.getTranslatedString(s,{item:i});this.listview._setAccInfoText(n)},r.prototype._adjustGroupItemStyle=function(){null==this.m_maxHeightAdjusted&&this.listview._isTouchSupport()&&(this.listview.element.find("ul."+this.listview.getGroupStyleClass()).each(function(){i(this).attr("oldMaxHeight",i(this).css("maxHeight").toString()),i(this).css("maxHeight",1e4)}),this.m_maxHeightAdjusted="adjusted")},r.prototype._restoreGroupItemStyle=function(){this.listview._isTouchSupport()&&this.listview.element.find("ul."+this.listview.getGroupStyleClass()).each(function(){i(this).css("maxHeight",parseInt(i(this).attr("oldMaxHeight"),10)),i(this).removeAttr("oldMaxHeight")}),this.m_maxHeightAdjusted=null},r.prototype._setDropPosition=function(e,t){if("line"===this._getDropIndicator())return t.insertAfter(e),"after";var i=e.index();return null==this.m_dropTargetIndex||this.m_dropTargetIndex<i?(t.insertAfter(e),"after"):(t.insertBefore(e),"before")},r.prototype._checkFirstItemDropTarget=function(e,t,i){if(i.classList.contains("oj-listview-first-drop-target"))return this.m_dropPosition="before",void(t.style.top="0px");if("line"===this._getDropIndicator())if(null===e.previousElementSibling)if(null==this.m_firstDropTarget){var s=document.createElement("li");s.classList.add("oj-listview-first-drop-target"),s.style.top="0px",e.parentNode.appendChild(s),this.m_firstDropTarget=s}else this.m_dropPosition="after",t.style.top=e.offsetTop+e.offsetHeight-this._getDropIndicatorHeight()+"px";else this.m_firstDropTarget&&(this.m_firstDropTarget.parentNode&&this.m_firstDropTarget.parentNode.removeChild(this.m_firstDropTarget),this.m_firstDropTarget=null)},r.prototype._isDropOnDragItem=function(e,t){return this._matchDragDataType(e)&&null!=this.m_dragItems&&this.m_dragItems.length>=0&&this.m_dragItems[0].key===t.get(0).key},r.prototype._handleDragOver=function(e){var t,s,n;if(this._adjustGroupItemStyle(),null!=this.m_dragItems&&"none"!==i(this.m_dragItems[0]).css("display"))if(t=i(this.m_dragItems[0]),-1===(n=this._invokeDropCallback("dragOver",e,{item:t.get(0)}))&&this.IsItemReOrdering()&&this.isDndInProgress()||!1===n||e.isDefaultPrevented()){s=this._createDropTarget(t);for(var o=0;o<this.m_dragItems.length;o++)i(this.m_dragItems[o]).addClass(this.GetDragItemClass()).css("display","none");s.insertBefore(t),this.m_dropTargetIndex=s.index()}else t.get(0).classList.remove("oj-hover"),t.get(0).classList.add("oj-listview-drag-source");else if(null!=(t=this._findItem(e.target))&&t.length>0){if(this._isDropOnDragItem(e,t)){if(n=this._invokeDndCallback("drop","dragOver",e,{item:t.get(0)}),!e.isDefaultPrevented())return-1}else n=this._invokeDropCallback("dragOver",e,{item:t.get(0)});-1===n&&this.IsItemReOrdering()&&this.isDndInProgress()||!1===n||e.isDefaultPrevented()?(t.hasClass(this.listview.getItemStyleClass())?(this._cleanupGroupItem(),t.hasClass("oj-drop")?s=this.m_dropTarget:(s=this._createDropTarget(t),this.m_dropPosition=this._setDropPosition(t,s),this._setAccInfo(t,this.m_dropPosition),this._setCurrentDropItem(t),this.m_dropTargetIndex=s.index()),this._checkFirstItemDropTarget(t.get(0),s.get(0),e.target)):(this._cleanupDropTarget(),t.children("."+this.listview.getGroupItemStyleClass()).addClass("oj-drop"),this._setCurrentDropItem(t),this.m_dropTargetIndex=-1,this.m_dropPosition="inside",this._setAccInfo(t,this.m_dropPosition)),e.preventDefault()):i(e.target).hasClass(this.listview.getGroupStyleClass())||(t.addClass("oj-invalid-drop"),this._cleanupDropTarget())}else{var r=this._getAndUpdateEmptyItem();null!=r&&r.length>0&&(this._setCurrentDropItem(r),e.preventDefault())}return n},r.prototype._getAndUpdateEmptyItem=function(){var e=this.listview.element.children("."+this.listview.getEmptyTextStyleClass());return 0===e.length?e=i(this.listview.element[0].querySelector(".oj-listview-no-data-item")):e.get(0).textContent="",e.addClass("oj-drop"),e},r.prototype._isDndEventInElement=function(e,t){var i=t.getBoundingClientRect(),s=e.originalEvent;return s.clientX>=i.left&&s.clientX<i.right&&s.clientY>=i.top&&s.clientY<i.bottom},r.prototype._handleDragLeave=function(e){var t;if(null!=this.m_currentDropItem){var i=this._findItem(e.target);return null!=i&&i.length>0?(i.removeClass("oj-valid-drop oj-invalid-drop"),t=this._invokeDropCallback("dragLeave",e,{item:i.get(0)}),!this._isDndEventInElement(e,e.currentTarget)&&i.hasClass("oj-drop")&&(this._cleanupDropTarget(),this._restoreGroupItemStyle())):this._isDndEventInElement(e,e.currentTarget)||this._cleanupEmptyList(),-1!==t?t:void 0}},r.prototype._isEmptyItem=function(e){return e.hasClass(this.listview.getEmptyTextStyleClass())||e.hasClass("oj-listview-no-data-item")},r.prototype._handleDrop=function(e){if(null!=this.m_currentDropItem){var t,i=e.originalEvent.dataTransfer.getData(this.GetDragSourceType());t=this._isEmptyItem(this.m_currentDropItem)?{}:{item:this.m_currentDropItem.get(0),position:this.m_dropPosition},this.IsItemReOrdering()&&i===this.listview.element.get(0).id?t.reorder=!0:t.reorder=!1,null!=this.m_currentDropItem&&this.m_currentDropItem.removeClass("oj-valid-drop"),this._cleanupDropTarget(),this._restoreGroupItemStyle(),this._destroyDragImage();var s=this._invokeDropCallback("drop",e,t);if(t.reorder&&(t.items=null==this.m_dragItems?this.m_itemsDragged:this.m_dragItems,this.listview.Trigger("reorder",e,this.CreateReorderPayload(t.items,t.position,t.item)),e.preventDefault(),this.m_dragEndCallCheck=window.requestAnimationFrame(()=>{this.m_currentDragItem&&this._handleDragEnd(e)})),this.m_currentDropItem=null,this.m_dropTargetIndex=-1,this.m_dropPosition=null,this.m_itemsDragged=null,-1!==s)return s}},r.prototype.CreateReorderPayload=function(e,t,i){return{items:e,position:t,reference:i}},r.prototype.prepareContextMenu=function(e){var t=this,s=i(e);this.m_contextMenu!==e&&(this.m_contextMenu=e,"OJ-MENU"===e.tagName?(e.addEventListener("ojBeforeOpen",this._handleContextMenuBeforeOpen.bind(this)),e.addEventListener("ojAction",this._handleContextMenuSelect.bind(this))):(s.on("ojbeforeopen",this._handleContextMenuBeforeOpen.bind(this)),s.on("ojselect",this._handleContextMenuSelect.bind(this))));var n=this._getCommands(e,function(e,s){var n=t._buildContextMenuItem(s,e.tagName);"OJ-OPTION"===e.tagName?(e.innerHTML=n.get(0).innerHTML,i(e).attr("data-oj-command",n.attr("data-oj-command"))):(n.get(0).className=i(e).get(0).className,i(e).replaceWith(n))});this.m_menuItemsSet=n,n.length>0&&s.data("oj-ojMenu")&&("OJ-MENU"===e.tagName?e.refresh():i(e).ojMenu("refresh"))},r.prototype._getDndContextMenuItemSelector=function(){var e=this,t="",i=["cut","copy","paste","paste-before","paste-after","pasteBefore","pasteAfter"];return this.m_dndMenuItemSelector||(i.forEach(function(s,n){t+="[data-oj-command="+e.GetCommandPrefix()+s+"],",t+="[data-oj-command="+s+"]",n<i.length-1&&(t+=",")}),this.m_dndMenuItemSelector=t),this.m_dndMenuItemSelector},r.prototype._getCommands=function(e,t){var s=this,n=[];return i(e).find(this._getDndContextMenuItemSelector()).each(function(){var e;0===i(this).children("a").length?0===i(this).attr("data-oj-command").indexOf(s.GetCommandPrefix())&&(e=i(this).attr("data-oj-command").substring(s.GetCommandPrefix().length),t&&t(this,e)):(e=i(this).attr("data-oj-command"))===r.PASTE_BEFORE_COMMAND?e="paste-before":e===r.PASTE_AFTER_COMMAND&&(e="paste-after"),e&&n.push(e)}),n},r.prototype._buildContextMenuItem=function(e,t){return"paste-before"===e?this._buildContextMenuListItem(r.PASTE_BEFORE_COMMAND,t):"paste-after"===e?this._buildContextMenuListItem(r.PASTE_AFTER_COMMAND,t):this._buildContextMenuListItem(e,t)},r.prototype._buildContextMenuListItem=function(e,t){var s=i(document.createElement(t));return s.attr("data-oj-command",e),s.append(this._buildContextMenuLabel(e,"OJ-OPTION"===t)),s},r.prototype._buildContextMenuLabel=function(e,t){var s="label"+e.charAt(0).toUpperCase()+e.slice(1),n=document.createTextNode(this.listview.ojContext.getTranslatedString(s));return t?n:i('<a href="#"></a>').append(n)},r.prototype._handleCut=function(e){null!=this.m_clipboard&&i(this.m_clipboard).removeClass(this.GetCutStyleClass());var t=this.GetCutItems(e);this.listview.ojContext.element.focus(),i(t).addClass(this.GetCutStyleClass()),this.m_clipboard=t,this.listview.Trigger("cut",e,{items:t})},r.prototype.GetCutItems=function(e){return this._getSelectedItems()},r.prototype._handleCopy=function(e){null!=this.m_clipboard&&i(this.m_clipboard).removeClass(this.GetCutStyleClass());var t=this._getSelectedItems();this.m_clipboard=t,this.listview.Trigger("copy",e,{items:t})},r.prototype._handlePaste=function(e,t,s){this.listview.Trigger("paste",e,{item:t.get(0)}),i(this.m_clipboard).removeClass(this.GetCutStyleClass()),this.listview.Trigger("reorder",e,this.CreateReorderPayload(this.m_clipboard,s,t.get(0))),this.m_clipboard=null},r.prototype._handleContextMenuSelect=function(e,t){if(null!=this.m_contextMenuItem)switch((t?t.item:i(e.target)).attr("data-oj-command")){case r.CUT_COMMAND:this._handleCut(e);break;case r.COPY_COMMAND:this._handleCopy(e);break;case r.PASTE_COMMAND:this._handlePaste(e,this.m_contextMenuItem,"inside"),this.m_contextMenuItem=null;break;case r.PASTE_BEFORE_COMMAND:this._handlePaste(e,this.m_contextMenuItem,"before"),this.m_contextMenuItem=null;break;case r.PASTE_AFTER_COMMAND:this._handlePaste(e,this.m_contextMenuItem,"after"),this.m_contextMenuItem=null}},r.prototype._appendToMenuContainer=function(e,t){null!=this.m_menuItemsSet&&("paste-before"===t?t=r.PASTE_BEFORE_COMMAND:"paste-after"===t&&(t=r.PASTE_AFTER_COMMAND),e.find("[data-oj-command='"+t+"']").removeClass("oj-disabled"))},r.prototype._handleContextMenuBeforeOpen=function(e,t){var s,n=t?t.openOptions.position.of:e.detail.openOptions.position.of;if(n&&(n.target?s=this.listview.FindItem(n.target):n.hasClass&&n.hasClass(this.listview.getItemStyleClass())&&(s=n)),this.IsItemReOrdering()){var o=i(e.target);o.find(this._getDndContextMenuItemSelector()).addClass("oj-disabled"),null!=s&&null!=this.m_menuItemsSet&&0!==this.m_menuItemsSet.length?(s.children().first().hasClass(this.listview.getGroupItemStyleClass())?null!=this.m_clipboard&&this._appendToMenuContainer(o,"paste"):(this._appendToMenuContainer(o,"cut"),this._appendToMenuContainer(o,"copy"),null!=this.m_clipboard&&(this._appendToMenuContainer(o,"paste-before"),this._appendToMenuContainer(o,"paste-after"))),"OJ-MENU"!==o.get(0).tagName&&o.ojMenu("refresh"),this.m_contextMenuItem=s):"OJ-MENU"!==o.get(0).tagName&&o.ojMenu("refresh")}else this.m_contextMenuItem=s},r.prototype.HandleKeyDown=function(e){if(e.ctrlKey||e.metaKey){var t=e.keyCode;if(t===r.X_KEY||t===r.C_KEY||t===r.V_KEY){var s=this.listview.ojContext._GetContextMenu();if(null==s)return!1;var n=this._getCommands(s);if(0===n.length)return!1;if(t===r.X_KEY&&n.indexOf("cut")>-1)return this._handleCut(e),!0;if(t===r.C_KEY&&n.indexOf("copy")>-1)return this._handleCopy(e),!0;if(t===r.V_KEY){var o,a=i(this._getActiveItem());if(null!=this.m_clipboard){if(a.children().first().hasClass(this.listview.getGroupItemStyleClass())?n.indexOf("paste")>-1&&(o="inside"):n.indexOf("paste-before")>-1?o="before":n.indexOf("paste-after")>-1&&(o="after"),null!=o)return this._handlePaste(e,a,o),!0}else this.listview.Trigger("paste",e,{item:a.get(0)})}}}return!1},r.prototype.shouldDragCurrentItem=function(){return!1},r.prototype.GetDragSourceType=function(){return"text/ojlistview-dragsource-id"},e.ListViewDndContext=r,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojnavigationlistdnd",["exports","jquery","ojs/ojcore-base","ojs/ojlistviewdnd"],function(e,t,i,s){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;const n=function(e){n.superclass.constructor.call(this,e)};i._registerLegacyNamespaceProp("NavigationListDndContext",n),i.Object.createSubclass(n,i.ListViewDndContext,"oj.NavigationListDndContext"),n.prototype.GetDragAffordanceClass=function(){return"oj-tabbar-drag-handle"},n.prototype.GetDragImageClass=function(){return"oj-tabbar-drag-image"},n.prototype.GetDragItemClass=function(){return"oj-tabbar-drag-item"},n.prototype.GetCutStyleClass=function(){return"oj-tabbar-cut"},n.prototype.GetCommandPrefix=function(){return"oj-tabbar-"},n.prototype.shouldDragCurrentItem=function(){return!0},n.prototype.GetDragImageWidth=function(e){var t=this.listview.GetOption("edge");return"top"===t||"bottom"===t?e.offsetWidth:i.NavigationListDndContext.superclass.GetDragImageWidth.call(this,e)},n.prototype.GetDragSourceType=function(){return"text/ojnavigationlist-dragsource-id"},n.prototype.CreateReorderPayload=function(e,t,i){return{item:e[0],position:t,reference:i}},n.prototype.IsItemReOrdering=function(){return"enabled"===this.listview.GetOption("reorderable")},n.prototype.GetDefaultDataType=function(){return"text/ojnavigationlist-items-data"},n.prototype.SetDragItemImage=function(e,i){var s=Math.max(0,e.offsetX),n=Math.max(0,e.offsetY),o=t(i[0].cloneNode(!0));o.removeClass("oj-selected oj-focus oj-focus-highlight  oj-hover").addClass("oj-drag");var r=t(document.createElement("div"));r.get(0).className=this.listview.ojContext.element.get(0).className,r.addClass(this.GetDragImageClass()).css({width:this.GetDragImageWidth(i[0]),height:i[0].offsetHeight}).append(o),t("body").append(r),this.m_dragImage=r,e.dataTransfer.setDragImage(r.get(0),s,n)},n.prototype.GetCutItems=function(e){var t=[];return t.push(this.m_contextMenuItem&&this.m_contextMenuItem.length>0?this.m_contextMenuItem[0]:this._getActiveItem()),t},e.NavigationListDndContext=n,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojnavigationlist",["ojs/ojcore-base","ojs/ojcomponentcore","ojs/ojthemeutils","jquery","ojs/ojdomutils","ojs/ojnavigationlistdnd","ojs/ojlistview","ojs/ojdatacollection-common","ojs/ojmenu","ojs/ojbutton"],function(e,t,i,s,n,o,r,a,l,h){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s;var d={properties:{as:{type:"string",value:""},currentItem:{type:"any",writeback:!0},data:{type:"object",extension:{webelement:{exceptionStatus:[{type:"unsupported",since:"13.0.0",description:"Data sets from a DataProvider cannot be sent to WebDriverJS; use ViewModels or page variables instead."}]}}},display:{type:"string",enumValues:["all","icons"],value:"all"},drillMode:{type:"string",enumValues:["collapsible","none","sliding"],value:"none"},edge:{type:"string",enumValues:["bottom","start","top"],value:"start"},expanded:{type:"KeySet",writeback:!0},hierarchyMenuThreshold:{type:"number",value:0},item:{type:"object",properties:{renderer:{type:"function"},selectable:{type:"function|boolean",value:!0}}},overflow:{type:"string",enumValues:["hidden","popup"],value:"hidden"},rootLabel:{type:"string",value:"Navigation List"},selection:{type:"any",writeback:!0},translations:{type:"object",value:{},properties:{defaultRootLabel:{type:"string"},hierMenuBtnLabel:{type:"string"},msgFetchingData:{type:"string"},msgNoData:{type:"string"},overflowItemLabel:{type:"string"},previousIcon:{type:"string"},selectedLabel:{type:"string"}}}},methods:{getContextByNode:{},getProperty:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateEnd:{},ojAnimateStart:{},ojBeforeCollapse:{},ojBeforeCurrentItem:{},ojBeforeExpand:{},ojBeforeSelect:{},ojCollapse:{},ojExpand:{},ojSelectionAction:{}},extension:{}};!function(){d.extension._WIDGET_NAME="ojNavigationList",d.extension._ALIASED_PROPS={hierarchyMenuThreshold:"hierarchyMenuDisplayThresholdLevel"},oj.CustomElementBridge.register("oj-navigation-list",{metadata:d});var e={properties:{as:{type:"string",value:""},currentItem:{type:"any",writeback:!0},data:{type:"object"},display:{type:"string",enumValues:["all","icons","stacked"],value:"all"},edge:{type:"string",enumValues:["bottom","end","start","top"],value:"start"},item:{type:"object",properties:{renderer:{type:"function"},selectable:{type:"function|boolean",value:!0}}},layout:{type:"string",enumValues:["condense","stretch"],value:"stretch"},overflow:{type:"string",enumValues:["hidden","popup"],value:"hidden"},reorderable:{type:"string",enumValues:["disabled","enabled"],value:"disabled"},selection:{type:"any",writeback:!0},translations:{type:"object",value:{},properties:{accessibleReorderAfterItem:{type:"string"},accessibleReorderBeforeItem:{type:"string"},accessibleReorderTouchInstructionText:{type:"string"},labelCut:{type:"string"},labelPasteAfter:{type:"string"},labelPasteBefore:{type:"string"},labelRemove:{type:"string"},msgFetchingData:{type:"string"},msgNoData:{type:"string"},overflowItemLabel:{type:"string"},removeCueText:{type:"string"},selectedLabel:{type:"string"}}},truncation:{type:"string",enumValues:["none","progressive"],value:"none"}},methods:{getContextByNode:{},getProperty:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateEnd:{},ojAnimateStart:{},ojBeforeCurrentItem:{},ojBeforeDeselect:{},ojBeforeRemove:{},ojBeforeSelect:{},ojDeselect:{},ojRemove:{},ojReorder:{}},extension:{}};e.extension._WIDGET_NAME="ojNavigationList",oj.CustomElementBridge.register("oj-tab-bar",{metadata:e})}();const c=function(t,i){var n=function(){};return e.Object.createSubclass(n,t,""),s.extend(n.prototype,i),n}(e._ojListView,{OPTION_DRILL_MODE:"drillMode",OPTION_DRILL_MODE_NONE:"none",OPTION_DRILL_MODE_COLLAPSIBLE:"collapsible",OPTION_DRILL_MODE_SLIDING:"sliding",OPTION_DISPLAY:"display",OPTION_DISPLAY_ICONS:"icons",OPTION_DISPLAY_ALL:"all",OPTION_DISPLAY_STACKED:"stacked",OPTION_LAYOUT_STRETCH:"stretch",OPTION_LAYOUT_CONDENSE:"condense",OPTION_EDGE:"edge",OPTION_EDGE_TOP:"top",OPTION_EDGE_END:"end",OPTION_EDGE_START:"start",OPTION_EDGE_BOTTOM:"bottom",OPTION_SELECTION:"selection",OPTION_CURRENT_ITEM:"currentItem",OPTION_ITEM:"item",TAG_NAME_TAB_BAR:"oj-tab-bar",NAVLIST_ITEM_SUBID_KEY:{navlist:"oj-navigationlist-item",tabbar:"oj-tabbar-item"},NAVLIST_EXPANDED_STYLE_CLASS:{navlist:"oj-navigationlist-expanded",tabbar:"oj-tabbar-expanded"},NAVLIST_COLLAPSIBLE_STYLE_CLASS:{navlist:"oj-navigationlist-collapsible",tabbar:"oj-tabbar-collapsible"},NAVLIST_VERTICAL_STYLE_CLASS:{navlist:"oj-navigationlist-vertical",tabbar:"oj-tabbar-vertical"},ITEM_CONTENT_STYLE_CLASS:{navlist:"oj-navigationlist-item-content",tabbar:"oj-tabbar-item-content"},NAVLIST_DIVIDERS_STYLE_CLASS:{navlist:"oj-navigationlist-item-dividers",tabbar:"oj-tabbar-item-dividers"},LAST_ITEM_STYLE_CLASS:{navlist:"oj-navigationlist-item-last-child",tabbar:"oj-tabbar-item-last-child"},EXPANDED_STYLE_CLASS:"oj-expanded",COLLAPSED_STYLE_CLASS:"oj-collapsed",CONDENSE_STYLE_CLASS:"oj-condense",SLIDING_NAVLIST_CURRENT_STYLE_CLASS:"oj-navigationlist-current",DIVIDER_STYLE_CLASS:{navlist:"oj-navigationlist-divider",tabbar:"oj-tabbar-divider"},NAVLIST_OVERFLOW_MENU_ITEM:{navlist:"oj-navigationlist-overflow-menu-item",tabbar:"oj-tabbar-overflow-menu-item"},NAVLIST_OVERFLOW_MENU:{navlist:"oj-navigationlist-overflow-menu",tabbar:"oj-tabbar-overflow-menu"},NAVLIST_OVERFLOW_ITEM_ICON:{navlist:"oj-navigationlist-overflow-item-icon",tabbar:"oj-tabbar-overflow-item-icon"},_CATEGORY_DIVIDER_STYLE_CLASS:{navlist:"oj-navigationlist-category-divider",tabbar:"oj-tabbar-category-divider"},_ITEM_LABEL_STYLE_CLASS:{navlist:"oj-navigationlist-item-label",tabbar:"oj-tabbar-item-label"},_ICON_ONLY_STYLE_CLASS:{navlist:"oj-navigationlist-icon-only",tabbar:"oj-tabbar-icon-only"},_STACK_ICON_STYLE_CLASS:{navlist:"oj-navigationlist-stack-icon-label",tabbar:"oj-tabbar-stack-icon-label"},_ITEM_ICON_STYLE_CLASS:{navlist:"oj-navigationlist-item-icon",tabbar:"oj-tabbar-item-icon"},_ITEM_BADGE_STYLE_CLASS:{navlist:"oj-navigationlist-item-end",tabbar:"oj-tabbar-item-end"},_HORIZONTAL_NAVLIST_STYLE_CLASS:{navlist:"oj-navigationlist-horizontal",tabbar:"oj-tabbar-horizontal"},_NAVLIST_END_EDGE_STYLE_CLASS:{navlist:"oj-navigationlist-vertical-end",tabbar:"oj-tabbar-vertical-end"},_NAVLIST_BOTTOM_EDGE_STYLE_CLASS:{navlist:"oj-navigationlist-horizontal-bottom",tabbar:"oj-tabbar-horizontal-bottom"},_NAVLIST_HAS_ICONS:{navlist:"oj-navigationlist-has-icons",tabbar:"oj-tabbar-has-icons"},_NAVLIST_ITEM_HAS_NO_ICON:{navlist:"oj-navigationlist-item-no-icon",tabbar:"oj-tabbar-item-no-icon"},_NAVLIST_ITEM_TITLE:{navlist:"oj-navigationlist-item-title",tabbar:"oj-tabbar-item-title"},_NAVLIST_STYLE_CLASS:{navlist:"oj-navigationlist",tabbar:"oj-tabbar"},_NAVLIST_TOUCH_STYLE_CLASS:{navlist:"oj-navigationlist-touch",tabbar:"oj-tabbar-touch"},_NAVLIST_LISTVIEW_CONTAINER_STYLE_CLASS:{navlist:"oj-navigationlist-listview-container",tabbar:"oj-tabbar-listview-container"},_IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION:"IsTitleAttrDueToTruncation",_APPLICATION_LEVEL_NAV_STYLE_CLASS:"oj-navigationlist-app-level",_PAGE_LEVEL_NAV_STYLE_CLASS:"oj-navigationlist-page-level",_NAVLIST_ITEM_ICON_HAS_TITLE:"navigationListItemIconHastitle",_NAVLIST_NO_FOLLOW_LINK_CLASS:{navlist:"oj-navigationlist-nofollow-link",tabbar:"oj-tabbar-nofollow-link"},_CONTAINER_STYLE_CLASS:{navlist:"oj-navigationlist-listview",tabbar:"oj-tabbar-listview"},_ELEMENT_STYLE_CLASS:{navlist:"oj-navigationlist-element",tabbar:"oj-tabbar-element"},_ELEMENT_EMPTY_TEXT_STYLE_CLASS:{navlist:"oj-navigationlist-empty-text",tabbar:"oj-tabbar-empty-text"},_ELEMENT_NO_DATA_MSG_STYLE_CLASS:{navlist:"oj-navigationlist-no-data-message",tabbar:"oj-tabbar-no-data-message"},_FOCUSED_ELEMENT_STYLE_CLASS:{navlist:"oj-navigationlist-focused-element",tabbar:"oj-tabbar-focused-element"},_ITEM_ELEMENT_STYLE_CLASS:{navlist:"oj-navigationlist-item-element",tabbar:"oj-tabbar-item-element"},_ITEM_STYLE_CLASS:{navlist:"oj-navigationlist-item",tabbar:"oj-tabbar-item"},_OPTION_DEFAULT_STYLE_CLASS:{navlist:"oj-navigationlist-option-defaults",tabbar:"oj-tabbar-option-defaults"},_LOADING_STATUS_ICON_STYLE_CLASS:{navlist:"oj-navigationlist-loading-icon",tabbar:"oj-tabbar-loading-icon"},_STATUS_MSG_STYLE_CLASS:{navlist:"oj-navigationlist-status-message",tabbar:"oj-tabbar-status-message"},_STATUS_STYLE_CLASS:{navlist:"oj-navigationlist-status",tabbar:"oj-tabbar-status"},getItemLabel:function(e){var t=this.getItemContentElement(e);return t.is("a")?s.trim(t.text()):s.trim(t.find("."+this.getItemTitleStyleClass()).text())},getItemContentElement:function(e){var t=e.children("."+this.getItemContentStyleClass());return 0===t.length&&0===(t=e.children("."+this.getGroupItemStyleClass()).children("."+this.getItemContentStyleClass())).length&&(t=e.children("."+this.getGroupItemStyleClass()).children(":not(."+this.getExpandIconStyleClass()+"):not(."+this.getCollapseIconStyleClass()+")")),t},isRtl:function(){return"rtl"===this.ojContext._GetReadingDirection()},_initNavigationMode:function(e){e[0].tagName.toLowerCase()===this.TAG_NAME_TAB_BAR?this._navigationMode="tabbar":this._navigationMode="navlist"},_getNavigationMode:function(){return this._navigationMode},renderComplete:function(){this.m_listHandler.BeforeRenderComplete(),c.superclass.renderComplete.apply(this,arguments)},itemInsertComplete:function(e,t){this.m_listHandler.ItemInsertComplete(e,t),c.superclass.itemInsertComplete.apply(this,arguments)},itemRemoveComplete:function(e,t){return this.m_listHandler.ItemRemoveComplete(e),c.superclass.itemRemoveComplete.apply(this,arguments)},_restoreContent:function(e){var t=e.children();e.removeAttr("style").removeClass(this.getHasIconsStyleClass()).removeAttr("aria-hidden");for(var i=0;i<t.length;i++){var n=t[i];if((n=s(n)).hasClass(this.getDividerStyleClass()))n.remove();else{var o=this.getItemContentElement(n);o.removeClass(this.getItemContentStyleClass()).removeClass(this.getHasNoIconStyleClass()).removeAttr("aria-haspopup");var r=o.children("."+this.getItemIconStyleClass());r&&r.length>0&&(r.removeAttr("role"),r.removeAttr("aria-label"),this._removeToolTipOnIcon(r)),n.removeClass("oj-default").removeAttr("role").removeAttr("aria-disabled").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-pressed");var a=this.getFocusItem(n);a.removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-pressed"),o.children("."+this.getItemLabelStyleClass()).contents().unwrap(),n.find("."+this.getNavListRemoveIcon()).remove(),a.data(this._IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION)&&a.removeAttr("title");var l=n.children("ul");l.length>0?(this.m_listHandler.RestoreItem(n,o,l),this._restoreContent(l)):this.m_listHandler.RestoreItem(n,o)}}},GetDnDContext:function(){if(void 0!==o.NavigationListDndContext&&this.ojContext.element[0].tagName.toLowerCase()===this.TAG_NAME_TAB_BAR)return new o.NavigationListDndContext(this)},IsNodeEditableOrClickable:function(e){return!(e.hasClass(this.getItemContentStyleClass())||e.hasClass(this.getExpandIconStyleClass())||e.hasClass(this.getCollapseIconStyleClass()))&&c.superclass.IsNodeEditableOrClickable.apply(this,arguments)},IsElementEditableOrClickable:function(e){return e.prop("nodeName").match(/^INPUT|SELECT|OPTION|BUTTON|^A\b|TEXTAREA/)&&!e.hasClass(this.getItemContentStyleClass())||e.hasClass("oj-component")},_focusable:function(e){return s(e.data).is("li")?!s(e.data).hasClass("oj-disabled"):!s(e.parentElement).hasClass("oj-disabled")},_prepareListViewOptions:function(e){var t=s.extend({},e);return t.drillMode="none"!==e.drillMode?"collapsible":"none",t.selection=null!==e.selection?[e.selection]:[],t.selectionMode="single",t.item=s.extend({focusable:this._focusable},e.item),t.element=this._list,t},updateListViewOption:function(e,t){switch(e){case this.OPTION_DRILL_MODE:this.options[this.OPTION_DRILL_MODE]="none"!==t?"collapsible":"none";break;case this.OPTION_SELECTION:this.options[this.OPTION_SELECTION]=null!==t?[t]:[];break;case this.OPTION_ITEM:this.options[this.OPTION_ITEM]=s.extend({focusable:this._focusable},t);break;default:this.options[e]=t}},getRootLabel:function(){return this.ojContext.options.rootLabel?this.ojContext.options.rootLabel:this.ojContext.getTranslatedString("defaultRootLabel")},SetAriaProperties:function(){"tabbar"===this._getNavigationMode()&&this.ojContext.element.attr("aria-multiselectable",!1)},HandleFocus:function(e){return this.m_listHandler.HandleFocus(e)},HandleBlur:function(e){return this.m_listHandler.HandleBlur(e)},SetRootElementTabIndex:function(){this.ojContext.element.attr("tabIndex",0)},RemoveRootElementTabIndex:function(){this.ojContext.element.removeAttr("tabIndex")},UnsetAriaProperties:function(){this.ojContext.element.removeAttr("aria-activedescendant").removeAttr("aria-multiselectable")},isLoadMoreOnScroll:function(){return!1},ShouldUseGridRole:function(){return!1},init:function(e){var t=this,i=e.ojContext.element;this._initNavigationMode(i),i.addClass(this.getNavListStyleClass()),n.isTouchSupported()&&i.addClass(this.getNavListTouchStyleClass()),this._list=i.children("ul:first"),0===this._list.length&&(this._list=s(document.createElement("ul")),i.append(this._list));var o=s(document.createElement("div"));o.addClass(this.getNavListContainerStyleClass()),o.attr("role","presentation"),this._list.wrap(o);var r=this._prepareListViewOptions(e);c.superclass.init.call(this,r),this.getListContainer().attr("role","presentation"),this.element.removeClass("oj-component-initnode"),this.ojContext._on(this.ojContext.element,{click:function(e){t.m_listHandler.HandleClick(e)},keydown:function(e){t.m_listHandler.HandleKeydown(e)},mouseup:function(e){t._clearActiveState(e)},mouseover:function(e){if(s(e.target).closest("a."+t.getItemContentStyleClass()).length>0){var i=s(e.target).closest("a."+t.getItemContentStyleClass()),n=i.find("."+t.getItemLabelStyleClass());n[0].offsetWidth<n[0].scrollWidth&&!i.attr("title")&&(i.attr("title",n.text().trim()),i.data(t._IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION,"true"))}},mouseout:function(e){if(s(e.target).closest("a."+t.getItemContentStyleClass()).length>0){var i=s(e.target).closest("a."+t.getItemContentStyleClass());i.data(t._IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION)&&(i.removeData(t._IS_TITLE_ATTR_ADDED_DUE_TO_TRUNCATION),i.removeAttr("title")),t._clearActiveState(e)}}})},_initListHandler:function(){var t=this.ojContext.options.drillMode,i=this.ojContext.options.edge;t===this.OPTION_DRILL_MODE_SLIDING?this.m_listHandler=new e.SlidingNavListHandler(this,this.ojContext.element,this.ojContext):t===this.OPTION_DRILL_MODE_COLLAPSIBLE?this.m_listHandler=new e.CollapsibleNavListHandler(this,this.ojContext.element,this.ojContext):t!==this.OPTION_DRILL_MODE_NONE||i!==this.OPTION_EDGE_TOP&&i!==this.OPTION_EDGE_BOTTOM?this.m_listHandler=new e.DefaultNavListHandler(this,this.ojContext.element,this.ojContext):this.m_listHandler=new e.HorizontalNavListHandler(this,this.ojContext.element,this.ojContext),this.m_listHandler.Init(this.options);var s=this.ojContext.options.navigationLevel;this._setNavigationLevel(s)},_setNavigationLevel:function(e){"none"===this.ojContext.options.drillMode&&("application"===e||"oj-navigation-list"===this.ojContext.element[0].tagName.toLowerCase()?(this.ojContext.element.addClass(this._APPLICATION_LEVEL_NAV_STYLE_CLASS),this.ojContext.element.removeClass(this._PAGE_LEVEL_NAV_STYLE_CLASS)):"page"===e&&(this.ojContext.element.addClass(this._PAGE_LEVEL_NAV_STYLE_CLASS),this.ojContext.element.removeClass(this._APPLICATION_LEVEL_NAV_STYLE_CLASS)))},_clearActiveState:function(e){var t=this.FindItem(s(e.target));null!=t&&this.HighlightUnhighlightElem(t,"oj-active",!1)},afterCreate:function(){this._initListHandler(),c.superclass.afterCreate.apply(this,arguments)},getAnimationEffect:function(e){return this.m_listHandler.GetAnimationEffect(e)},notifyAttached:function(){c.superclass.notifyAttached.apply(this,arguments),this.m_listHandler.NotifyAttached()},ShouldRegisterResizeListener:function(){return!0},HandleResize:function(e,t){var i=this;c.superclass.HandleResize.apply(this,arguments),e>0&&t>0&&null!=this.m_listHandler&&i.m_listHandler.HandleResize(e,t)},BeforeInsertItem:function(){this.m_listHandler.BeforeInsertItem()},HandleMouseDownOrTouchStart:function(e){c.superclass.HandleMouseDownOrTouchStart.apply(this,arguments);var t=this.FindItem(s(e.target));t&&!t.hasClass("oj-disabled")&&this.HighlightUnhighlightElem(t,"oj-active",!0)},HandleTouchEndOrCancel:function(e){this._clearActiveState(e),c.superclass.HandleTouchEndOrCancel.apply(this,arguments)},getItemContentStyleClass:function(){return this.ITEM_CONTENT_STYLE_CLASS[this._getNavigationMode()]},getNavListExpandedStyleClass:function(){return this.NAVLIST_EXPANDED_STYLE_CLASS[this._getNavigationMode()]},getNavListCollapsibleStyleClass:function(){return this.NAVLIST_COLLAPSIBLE_STYLE_CLASS[this._getNavigationMode()]},getNavListVerticalStyleClass:function(){return this.NAVLIST_VERTICAL_STYLE_CLASS[this._getNavigationMode()]},getNavListItemsDividerStyleClass:function(){return this.NAVLIST_DIVIDERS_STYLE_CLASS[this._getNavigationMode()]},getLastItemStyleClass:function(){return this.LAST_ITEM_STYLE_CLASS[this._getNavigationMode()]},getItemBadgeStyleClass:function(){return this._ITEM_BADGE_STYLE_CLASS[this._getNavigationMode()]},getDividerStyleClass:function(){return this.DIVIDER_STYLE_CLASS[this._getNavigationMode()]},getOverflowItemStyleClass:function(){return this.NAVLIST_OVERFLOW_MENU_ITEM[this._getNavigationMode()]},getOverflowMenuStyleClass:function(){return this.NAVLIST_OVERFLOW_MENU[this._getNavigationMode()]},getOverflowItemIconStyleClass:function(){return this.NAVLIST_OVERFLOW_ITEM_ICON[this._getNavigationMode()]},getCategoryDividerStyleClass:function(){return this._CATEGORY_DIVIDER_STYLE_CLASS[this._getNavigationMode()]},getItemLabelStyleClass:function(){return this._ITEM_LABEL_STYLE_CLASS[this._getNavigationMode()]},getIconOnlyStyleClass:function(){return this._ICON_ONLY_STYLE_CLASS[this._getNavigationMode()]},getStackedIconStyleClass:function(){return this._STACK_ICON_STYLE_CLASS[this._getNavigationMode()]},getItemIconStyleClass:function(){return this._ITEM_ICON_STYLE_CLASS[this._getNavigationMode()]},getHorizontalNavListStyleClass:function(){return this._HORIZONTAL_NAVLIST_STYLE_CLASS[this._getNavigationMode()]},getNavListEndEdgeStyleClass:function(){return this._NAVLIST_END_EDGE_STYLE_CLASS[this._getNavigationMode()]},getNavListBottomEdgeStyleClass:function(){return this._NAVLIST_BOTTOM_EDGE_STYLE_CLASS[this._getNavigationMode()]},getHasIconsStyleClass:function(){return this._NAVLIST_HAS_ICONS[this._getNavigationMode()]},getHasNoIconStyleClass:function(){return this._NAVLIST_ITEM_HAS_NO_ICON[this._getNavigationMode()]},getItemTitleStyleClass:function(){return this._NAVLIST_ITEM_TITLE[this._getNavigationMode()]},getNavListStyleClass:function(){return this._NAVLIST_STYLE_CLASS[this._getNavigationMode()]},getNavListTouchStyleClass:function(){return this._NAVLIST_TOUCH_STYLE_CLASS[this._getNavigationMode()]},getNavListContainerStyleClass:function(){return this._NAVLIST_LISTVIEW_CONTAINER_STYLE_CLASS[this._getNavigationMode()]},getNoFollowLinkStyleClass:function(){return this._NAVLIST_NO_FOLLOW_LINK_CLASS[this._getNavigationMode()]},getCondenseStyleClass:function(){return this.CONDENSE_STYLE_CLASS},getItemSubIdKey:function(){return this.isTabBar()?this.NAVLIST_ITEM_SUBID_KEY.tabbar:this.NAVLIST_ITEM_SUBID_KEY.navlist},GetContainerStyleClass:function(){return this._CONTAINER_STYLE_CLASS[this._getNavigationMode()]},GetStyleClass:function(){return this._ELEMENT_STYLE_CLASS[this._getNavigationMode()]},getEmptyTextMarkerClass:function(){return this._ELEMENT_EMPTY_TEXT_STYLE_CLASS[this._getNavigationMode()]},getEmptyTextStyleClass:function(){return this._ELEMENT_NO_DATA_MSG_STYLE_CLASS[this._getNavigationMode()]},getNavListRemoveIcon:function(){return"oj-tabbar-remove-icon"},getNavListRemoveCommand:function(){return"oj-tabbar-remove"},getRemovableStyleClass:function(){return"oj-removable"},getItemStyleClass:function(){return this._ITEM_STYLE_CLASS[this._getNavigationMode()]},getItemLayoutStyleClass:function(){return this.getItemStyleClass()},getFocusedElementStyleClass:function(){return this._FOCUSED_ELEMENT_STYLE_CLASS[this._getNavigationMode()]},getItemElementStyleClass:function(){return this._ITEM_ELEMENT_STYLE_CLASS[this._getNavigationMode()]},getCollapseIconStyleClass:function(){return"oj-navigationlist-collapse-icon"},getExpandIconStyleClass:function(){return"oj-navigationlist-expand-icon"},getDepthStyleClass:function(e){return"oj-navigationlist-depth-"+e},getGroupItemStyleClass:function(){return"oj-navigationlist-group-item"},getGroupStyleClass:function(){return"oj-navigationlist-group"},getGroupExpandStyleClass:function(){return"oj-navigationlist-collapsible-transition"},getGroupCollapseStyleClass:function(){return this.getGroupExpandStyleClass()},getStyleValues:function(){const t={};return Object.entries(c._CSS_Vars[this._getNavigationMode()]).forEach(([s,n])=>{"animation"===s?t.animation=e._ojListView.getComplexCSSVariable(n):t[s]=i.getCachedCSSVarValues([n])[0]}),t},getLoadingStatusIconStyleClass:function(){return this._LOADING_STATUS_ICON_STYLE_CLASS[this._getNavigationMode()]},getStatusMessageStyleClass:function(){return this._STATUS_MSG_STYLE_CLASS[this._getNavigationMode()]},getStatusStyleClass:function(){return this._STATUS_STYLE_CLASS[this._getNavigationMode()]},AnimateExpand:function(e,t,i){return this.m_listHandler.Expand(e,t,i)},AnimateCollapse:function(e,t,i,s){return this.m_listHandler.Collapse(e,t,i,s)},HandleArrowKeys:function(e,t,i){return!i.altKey&&this.m_listHandler.HandleArrowKeys(e,t,i)},IsArrowKey:function(e){return this.m_listHandler.IsArrowKey(e)},GetState:function(e){return this.m_listHandler.GetState(e)},SetState:function(e,t){this.m_listHandler.SetState(e,t)},HandleMouseClick:function(e){var t=s(e.target),i=t[0].parentNode,n=this.FindItem(t);if(null!=n&&0!==n.length)if(t.hasClass(this.getNavListRemoveIcon())&&this.isTabBar())this._handleRemove(e,n);else if(this.SkipFocus(n))e.preventDefault();else if(i.classList.contains("oj-animate-pointerUp")&&(t=s(i)),!this.IsNodeEditableOrClickable(t)){var o=this.getItemContentElement(n),r=o.attr("href");if(!r||"#"===r||0!==e.button||!e.shiftKey&&!e.ctrlKey){var a=this.GetOption("selection")[0];c.superclass.HandleMouseClick.apply(this,arguments),this.isTabBar()||this._skipSelectionAction||this.FireSelectionAction(e,n,a),e.preventDefault()}}},HandleKeyDown:function(e){if(this.m_active){var t,i=e.keyCode,n=this.m_active.elem,o=this.m_active.key;if(i===s.ui.keyCode.HOME||i===s.ui.keyCode.END)t=i===s.ui.keyCode.HOME?this.element.find("."+this.getItemContentStyleClass()+":visible").first().closest("."+this.getItemElementStyleClass()):this.element.find("."+this.getItemContentStyleClass()+":visible").last().closest("."+this.getItemElementStyleClass()),this.SetCurrentItem(t,e),e.preventDefault();else if(i===s.ui.keyCode.DELETE&&this.isTabBar())this._handleRemove(e,n);else{var r=this.GetOption("selection")[0],a=this.HandleSelectionOrActiveKeyDown(e),l=this.m_listHandler.HandleExpandAndCollapseKeys(e,i,n,o);a=a||l||null!=this.m_dndContext&&this.m_dndContext.HandleKeyDown(e),this.isTabBar()||e.keyCode!==s.ui.keyCode.ENTER&&e.keyCode!==s.ui.keyCode.SPACE||(this.FireSelectionAction(e,n,r),this._skipSelectionAction=e.keyCode===s.ui.keyCode.ENTER,window.requestAnimationFrame(()=>{this._skipSelectionAction=!1})),a&&e.preventDefault()}}},AvoidFocusHighLight:function(e){this._avoidFocusHighLight=e},RecentPointerCallback:function(){var e=this;return function(){return!!e._avoidFocusHighLight}},ShouldApplyHighlight:function(){return!0},ToggleSelection:function(e,t,i){var s=this.m_active.elem;if(this.IsSelectable(s[0])&&!this._isSelected(s)){var n=this._fireBeforeSelectEvent(e,s);n&&(c.superclass.ToggleSelection.apply(this,arguments),this._initiateNavigation(s))}},HighlightUnhighlightElem:function(e,t,i){var o=s(e);"oj-selected"===t&&this.m_listHandler.UpdateAriaPropertiesOnSelectedItem(this.getFocusItem(o),i);var r=o.children("."+this.getGroupItemStyleClass());r.length>0&&(o=s(r[0])),"oj-focus"===t?i?this._focusInHandler(o):this._focusOutHandler(o):i?o.addClass(t):o.removeClass(t),o.hasClass("oj-selected")||o.hasClass("oj-hover")||o.hasClass("oj-active")||o.hasClass("oj-disabled")?(o.hasClass(this.getRemovableStyleClass())&&this.isTabBar()&&o.find("."+this.getNavListRemoveIcon()).css("visibility","visible"),o.removeClass("oj-default")):(this.isTabBar()&&!n.isTouchSupported()&&o.find("."+this.getNavListRemoveIcon()).css("visibility","hidden"),o.addClass("oj-default"))},IsSelectable:function(e){return!s(e).hasClass("oj-disabled")&&this.m_listHandler.IsSelectable(s(e))},Trigger:function(e,t,i){return"ready"===e||this.ojContext._trigger(e,t,i)},SetOption:function(e,t,i){if(this.m_listHandler.IsOptionUpdateAllowed(e,t,i)){var s=null;if("selection"===e){var n=i._context,o=n&&n.extraData&&n.extraData.items;o&&(this.ojContext._IsCustomElement()?0===o.length?n.extraData.item=null:n.extraData.item=o[0]:n.extraData.item=o,n.extraData.items=void 0),t&&t.length>0&&(s=t[0]),this._fireDeselectEvent(n.originalEvent,o,t)}else s=t;this.ojContext.option(e,s,i),this.options[e]=t,this.m_listHandler.OptionUpdated(e,s,i)}},ShouldRefresh:function(e){return null!=e.data||null!=e.drillMode||null!=e.item||null!=e.display||null!=e.layout||null!=e.edge},setOptions:function(e,t){var i,s={skipOptions:[]};return this.m_listHandler.SetOptions(e),void 0!==e.navigationLevel&&this._setNavigationLevel(e.navigationLevel),void 0!==e.selection&&(i=e.selection),s.needRefresh=c.superclass.setOptions.call(this,e,t),void 0!==i&&void 0===e.selection&&s.skipOptions.push("selection"),void 0!==i&&(e.selection=i),s},compareValues:function(t,i){return t===i||e.Object.compareValues(t,i)},HandleSelectionOption:function(e){if(void 0!==e.selection){var t=e.selection;if(null!==t){var i=this.GetOption("selection");if(i&&0!==i.length&&this.compareValues(i[0],t))delete e.selection;else{var n=this.FindElementByKey(t);if(!n||this.IsSelectable(n))this._fireBeforeSelectEvent(null,s(n),t)?(this._fireDeselectEvent(null,n,t),e.selection=[t],this.m_listHandler.HandleSelectionChange(n),n&&this._initiateNavigation(s(n))):delete e.selection;else delete e.selection}}else e.selection=[]}c.superclass.HandleSelectionOption.call(this,e)},GetOption:function(e){var t=this.ojContext.option(e);return"selection"===e?null!=t?[t]:[]:("item"!==e||t.focusable||(t.focusable=this._focusable),null===t?this.options[e]:t)},getWidgetConstructor:function(){return t.__GetWidgetConstructor(this.ojContext.element)},SelectAndFocus:function(e,t){e.hasClass("oj-disabled")||this.IsSelectable(e[0])&&(!this._isSelected(e)&&this._fireBeforeSelectEvent(t,e)?(c.superclass.SelectAndFocus.apply(this,arguments),this._initiateNavigation(e)):this.HandleClickActive(e,t))},isTabBar:function(){return this.ojContext.element[0].tagName.toLowerCase()===this.TAG_NAME_TAB_BAR},_fireBeforeDeselectEvent:function(e,t,i){i||(i=this.GetKey(t[0]));var s=this.GetOption("selection"),n=this.FindElementByKey(s);return this.Trigger("beforeDeselect",e,{toItem:t,toKey:i,fromItem:n,fromKey:s})},_fireBeforeSelectEvent:function(e,t,i){var s=!0;return i||(i=this.GetKey(t[0])),this.isTabBar()&&(s=this._fireBeforeDeselectEvent(e,t,i)),s&&this.Trigger("beforeSelect",e,{item:t,key:i})},_fireRemoveEvent:function(e,t){var i=this.GetKey(t[0]);return this.Trigger("beforeRemove",e,{item:t,key:i})&&this.Trigger("remove",e,{item:t,key:i})},_fireDeselectEvent:function(e,t,i){var s=this.GetOption("selection"),n=this.FindElementByKey(s);this.Trigger("deselect",e,{toItem:t,toKey:i,fromItem:n,fromKey:s})},FireSelectionAction:function(e,t,i){var s=this.GetKey(t[0]||t);this.Trigger("selectionAction",e,{value:s,previousValue:i})},_initiateNavigation:function(e){if(this.ojContext.element.hasClass(this.getNoFollowLinkStyleClass()))return!1;var t=this.getItemContentElement(e),i=t.attr("href"),s=t.attr("target");return!(!i||"#"===i)&&(s&&"_self"!==s?window.open(i,s):window.location.href=i,!0)},_isSelected:function(e){var t=this.GetOption("selection"),i=this.GetKey(e[0]);return!(!t||1!==t.length||!this.compareValues(t[0],i))},_setToolTipOnIcon:function(e,t){e.attr("title")||e.attr("title",t)},_removeToolTipOnIcon:function(e){e.data(this._NAVLIST_ITEM_ICON_HAS_TITLE)?e.removeData(this._NAVLIST_ITEM_ICON_HAS_TITLE):e.removeAttr("title")},GetRootElement:function(){return this.ojContext.element},getSingleFocusableElement:function(e){var t=this,i="a, input, select, textarea, button",n=e.children(i).filter(function(){return!(s(this).hasClass(t.getNavListRemoveIcon())||s(this).hasClass(t.getExpandIconStyleClass()))});return 1===n.length&&0===n.first().find(i).length?n.first():e},PrepareContextMenu:function(e){var t=this.ojContext._GetContextMenu();if(null!=this.m_dndContext&&t&&this.m_dndContext.prepareContextMenu(t),e.hasClass(this.getRemovableStyleClass())&&t){this.m_contextMenu!==t&&(this.m_contextMenu=t,t.addEventListener("ojBeforeOpen",this._handleContextMenuBeforeOpen.bind(this)),t.addEventListener("ojAction",this._handleContextMenuSelect.bind(this)));var i=s(t).find("[data-oj-command="+this.getNavListRemoveCommand()+"]"),n=this.ojContext.getTranslatedString("labelRemove");this.ojContext._IsCustomElement()?i.empty().append(document.createTextNode(n)):i.empty().append(s('<a href="#"></a>').text(n)),t.refresh()}},_handleContextMenuSelect:function(e){s(e.target).attr("data-oj-command")===this.getNavListRemoveCommand()&&this._handleRemove(e,this.m_contextMenuItem)},_handleContextMenuBeforeOpen:function(e){this.m_contextMenuItem=e.detail.openOptions.launcher},_handleRemove:function(e,t){t.hasClass(this.getRemovableStyleClass())&&this._fireRemoveEvent(e,t)},_wrapInner:function(e,t){for(var i=e.childNodes;i.length>0;)t.appendChild(i[0]);e.appendChild(t)},itemRenderComplete:function(e,t){var i=s(e),o=this;if(i.hasClass(this.getCategoryDividerStyleClass()))return i.removeClass(this.getItemElementStyleClass()),i.removeClass(this.getFocusedElementStyleClass()),i.removeClass(this.getItemStyleClass()),i.removeAttr("aria-selected"),i.children().remove(),void i.attr("role","separator");var r,a=this.getGroupItemStyleClass(),l=this.getCollapseIconStyleClass(),h=this.getExpandIconStyleClass(),d=this.getItemIconStyleClass(),u=this.getItemBadgeStyleClass(),p=i.children("."+a);if(p.length>0){p.addClass(this.getItemStyleClass()),r=p.children(":not(."+h+"):not(."+l+")");var m=p.children("."+h);0===m.length&&(m=p.children("."+l)),m.attr("role","presentation"),m.attr("tabindex","-1"),m.removeAttr("aria-labelledby"),i.hasClass("oj-disabled")&&p.addClass("oj-disabled")}else r=i.children().first();if(r.length>0){r.addClass(this.getItemContentStyleClass());var _=this.getItemLabelStyleClass(),g=r[0].querySelector("."+_),f=r.find("."+d);if(null==g){(g=document.createElement("span")).classList.add(_),this._wrapInner(r[0],g);var v=r.find("."+u);v.length>0&&v.insertAfter(g),f.length>0&&f.insertBefore(g)}if(f.length>0){if(f.attr("title")&&f.data(this._NAVLIST_ITEM_ICON_HAS_TITLE,f.attr("title")),"icons"===this.ojContext.options.display){this.ojContext.element.addClass(this.getIconOnlyStyleClass());var y=this.getItemLabel(i);f.attr("aria-label",y),f.attr("role","img"),this._setToolTipOnIcon(f,y)}if("stacked"===this.ojContext.options.display){this.ojContext.element.hasClass(this.getStackedIconStyleClass())||(this.ojContext.element.addClass(this.getStackedIconStyleClass()),this.isStackedIconClassAdded=!0);var E=this.getItemLabel(i);f.attr("aria-label",E),f.attr("role","img"),this._setToolTipOnIcon(f,E)}this.element.closest("ul").addClass(o.getHasIconsStyleClass())}else r.addClass(this.getHasNoIconStyleClass())}if(i.hasClass("oj-disabled")?this.getFocusItem(i).attr("aria-disabled","true"):p.length>0?p.addClass("oj-default"):i.addClass("oj-default"),i.hasClass(this.getRemovableStyleClass())&&this.isTabBar()){var b=s("<a>");b.addClass(this.getNavListRemoveIcon()).addClass("oj-clickable-icon-nocontext oj-component-icon").attr("aria-label",this.ojContext.getTranslatedString("removeCueText")).attr("role","presentation").attr("aria-hidden","true"),n.isTouchSupported()||i.hasClass("oj-disabled")?b.css("visibility","visible"):b.css("visibility","hidden"),i.append(b),r.attr("aria-describedby",b.uniqueId().attr("id"))}this.m_listHandler.ModifyListItem(i,r),c.superclass.itemRenderComplete.apply(this,arguments)},DestroyContentHandler:function(e){var t=this.GetOption("data");null===t&&this._restoreContent(this.element),c.superclass.DestroyContentHandler.apply(this,arguments)},getNodeBySubId:function(e){if(null==e)return this.ojContext.element?this.ojContext.element[0]:null;var t=this.m_listHandler.GetNodeBySubId(e);if(!t&&e.subId===this.getItemSubIdKey()){var i=e.key;t=this.FindElementByKey(i)}return t},getSubIdByNode:function(e){var t=null;if(null!=e&&!(t=this.m_listHandler.GetSubIdByNode(e))){var i=this.FindItem(e);if(null!=i&&i.length>0){var s=this.GetKey(i[0]);null!=s&&(t={subId:this.getItemSubIdKey(),key:s})}}return t},getContextByNode:function(e){var t=c.superclass.getContextByNode.call(this,e);return t&&"oj-listview-item"===t.subId?(t.subId=this.getItemSubIdKey(),t):null},refresh:function(){this._resetNavlist(),this._initListHandler(),c.superclass.refresh.apply(this,arguments)},_resetNavlist:function(){this.ojContext.element.removeClass(this.getIconOnlyStyleClass()),this.isStackedIconClassAdded&&this.ojContext.element.removeClass(this.getStackedIconStyleClass()),this.ojContext.element.removeClass(this.getCondenseStyleClass()),this.ojContext.element.removeClass(this._APPLICATION_LEVEL_NAV_STYLE_CLASS),this.ojContext.element.removeClass(this._PAGE_LEVEL_NAV_STYLE_CLASS),this._restoreContent(this.element),this.m_listHandler.Destroy()},destroy:function(){this._resetNavlist(),c.superclass.destroy.apply(this,arguments),this._list.unwrap(),this._list.is(":empty")&&this._list.remove(),this.ojContext.element.removeClass(this.getNavListStyleClass()+" "+this.getNavListTouchStyleClass()),this.ojContext._off(this.element,"click"),this.ojContext._off(this.element,"focus"),this.ojContext._off(this.element,"blur"),this.ojContext._off(this.element,"mouseover"),this.ojContext._off(this.element,"mousein"),this.ojContext._off(this.element,"mouseout"),this.ojContext._off(this.element,"keydown")}});c._CSS_Vars={navlist:{animation:{addHorizontalItem:"--oj-private-navigation-list-global-horizontal-add-animation-default",removeHorizontalItem:"--oj-private-navigation-list-global-horizontal-remove-animation-default",add:"--oj-private-navigation-list-global-add-animation-default",remove:"--oj-private-navigation-list-global-remove-animation-default",update:"--oj-private-navigation-list-global-update-animation-default",expand:"--oj-private-navigation-list-global-expand-animation-default",collapse:"--oj-private-navigation-list-global-collapse-animation-default",sliderExpand:"--oj-private-navigation-list-global-slider-expand-animation-default",sliderCollapse:"--oj-private-navigation-list-global-slider-collapse-animation-default",pointerUp:"--oj-private-navigation-list-global-pointer-up-animation-default"},hierarchyMenuDisplayThresholdLevel:"--oj-private-navigation-list-global-hierarchy-menu-threshold-default",showIndicatorDelay:"--oj-private-core-global-loading-indicator-delay-duration"},tabbar:{animation:{addHorizontalItem:"--oj-private-tab-bar-global-horizontal-add-animation-default",removeHorizontalItem:"--oj-private-tab-bar-global-horizontal-remove-animation-default",add:"--oj-private-tab-bar-global-add-animation-default",remove:"--oj-private-tab-bar-global-remove-animation-default",update:"--oj-private-tab-bar-global-update-animation-default",pointerUp:"--oj-private-tab-bar-global-pointerUp-animation-default"},showIndicatorDelay:"--oj-private-core-global-loading-indicator-delay-duration"}},e.__registerWidget("oj.ojNavigationList",s.oj.baseComponent,{widgetEventPrefix:"oj",options:{as:"",currentItem:null,drillMode:"none",reorderable:"disabled",truncation:"none",edge:"start",hierarchyMenuDisplayThresholdLevel:0,rootLabel:null,selection:null,expanded:new e._ojListViewExpandedKeySet,data:null,display:"all",navigationLevel:"page",overflow:"hidden",item:{renderer:null,selectable:!0},animateStart:null,animateEnd:null,beforeSelect:null,beforeCollapse:null,beforeCurrentItem:null,beforeDeselect:null,collapse:null,deselect:null,beforeExpand:null,expand:null,reorder:null,selectionAction:null},_ComponentCreate:function(){this._super(),this._setup()},_AfterCreate:function(){this._super();var e=this;this.navlist._FixRendererContext=function(t){return e._FixRendererContext(t)},this.navlist._WrapCustomElementRenderer=function(t){return e._WrapCustomElementRenderer(t)},this.navlist._GetCustomElement=function(){return e._GetCustomElement()},this.navlist.afterCreate()},_NotifyContextMenuGesture:function(e,t,i){this.navlist.notifyContextMenuGesture(e,t,i)},_setup:function(){this.navlist=new c;for(var e=Object.keys(this.options),t=0;t<e.length;t++){var i=e[t];this._validateOptionValues(i,this.options[i])}this._validateOptionsForIconsOnlyAndHorizontalList(this.options[this.navlist.OPTION_DRILL_MODE],this.options[this.navlist.OPTION_DISPLAY],this.options[this.navlist.OPTION_EDGE]);var n={ojContext:this};n=s.extend(this.options,n),this.navlist.init(n)},getNodeBySubId:function(e){return this.navlist.getNodeBySubId(e)},getSubIdByNode:function(e){return this.navlist.getSubIdByNode(e)},getContextByNode:function(e){return this.navlist.getContextByNode(e)},expand:function(e,t,i){this.navlist.expandKey(e,t,!0,!0,i)},collapse:function(e,t,i){this.navlist.collapseKey(e,t,!0,i)},getExpanded:function(){return this.navlist.getExpanded()},_validateOptionsForIconsOnlyAndHorizontalList:function(e,t,i){if(e!==this.navlist.OPTION_DRILL_MODE_NONE){if(t===this.navlist.OPTION_DISPLAY_ICONS)throw new Error("Icon only navigation list should have drillMode set to 'none'.");if(t===this.navlist.OPTION_DISPLAY_STACKED)throw new Error("Stack only navigation list should have drillMode set to 'none'.");if(i===this.navlist.OPTION_EDGE_TOP)throw new Error("Horizontal navigation list should have drillMode set to 'none'.")}},_validateOptionValues:function(e,t){var i=!0;if(e===this.navlist.OPTION_DRILL_MODE?i=t===this.navlist.OPTION_DRILL_MODE_NONE||t===this.navlist.OPTION_DRILL_MODE_COLLAPSIBLE||t===this.navlist.OPTION_DRILL_MODE_SLIDING:e===this.navlist.OPTION_DISPLAY?i=t===this.navlist.OPTION_DISPLAY_ALL||t===this.navlist.OPTION_DISPLAY_ICONS||t===this.navlist.OPTION_DISPLAY_STACKED:e===this.navlist.OPTION_EDGE&&(i=this.element[0].tagName.toLowerCase()===this.navlist.TAG_NAME_TAB_BAR?t===this.navlist.OPTION_EDGE_TOP||t===this.navlist.OPTION_EDGE_START||t===this.navlist.OPTION_EDGE_END||t===this.navlist.OPTION_EDGE_BOTTOM:t===this.navlist.OPTION_EDGE_TOP||t===this.navlist.OPTION_EDGE_BOTTOM||t===this.navlist.OPTION_EDGE_START),!i)throw new Error("Invalid value: "+t+" for key: "+e)},_setOption:function(e,t){var i,n;switch(this._validateOptionValues(e,t),e){case this.navlist.OPTION_DRILL_MODE:this._validateOptionsForIconsOnlyAndHorizontalList(t,this.options[this.navlist.OPTION_DISPLAY],this.options[this.navlist.OPTION_EDGE]);break;case this.navlist.OPTION_DISPLAY:this._validateOptionsForIconsOnlyAndHorizontalList(this.options[this.navlist.OPTION_DRILL_MODE],t,this.options[this.navlist.OPTION_EDGE]);break;case this.navlist.OPTION_EDGE:this._validateOptionsForIconsOnlyAndHorizontalList(this.options[this.navlist.OPTION_DRILL_MODE],this.options[this.navlist.OPTION_DISPLAY],t);break;case this.navlist.OPTION_SELECTION:case this.navlist.OPTION_CURRENT_ITEM:this.navlist.isAvailable()&&(n=this.navlist.getItems([t])[0],i={_context:{extraData:{item:this._IsCustomElement()?n:s(n)}}})}return this.navlist.updateListViewOption(e,t),i?this._super(e,t,i):this._super(e,t)},_setOptions:function(e,t){if(!this.navlist.isAvailable())return this._super(e,t),this;for(var i=this.navlist.setOptions(e,t),s={},n=Object.keys(e),o=0;o<n.length;o++){var r=n[o];i.skipOptions.indexOf(r)<0&&(s[r]=e[r])}return this._super(s,t),i.needRefresh&&this.navlist.refresh(),this},_NotifyAttached:function(){this.navlist.notifyAttached()},_NotifyDetached:function(){this.navlist.notifyDetached()},_NotifyShown:function(){this.navlist.notifyShown()},_VerifyConnectedForSetup:function(){return!0},refresh:function(){this._super(),this.navlist.refresh()},whenReady:function(){return this.navlist.whenReady()},_SetupResources:function(){this._super(),this.navlist.setupResources()},_ReleaseResources:function(){this._super(),this.navlist.releaseResources()},_destroy:function(){this.navlist.destroy(),this._super()},_CompareOptionValues:function(t,i,s){switch(t){case"currentItem":case"selection":return e.Object.compareValues(i,s);default:return this._super(t,i,s)}}}),t.setDefaultOptions({ojNavigationList:{hierarchyMenuDisplayThresholdLevel:t.createDynamicPropertyGetter(function(){const e=c._CSS_Vars.navlist.hierarchyMenuDisplayThresholdLevel;return+i.getCachedCSSVarValues([e])[0]})}});const u=function(e,t,i){this.m_widget=e,this.m_root=t,this.m_component=i,this.m_widget.GetOption(this.m_widget.OPTION_EDGE)===this.m_widget.OPTION_EDGE_END&&this.m_root.addClass(this.m_widget.getNavListEndEdgeStyleClass())};oj._registerLegacyNamespaceProp("DefaultNavListHandler",u),u.prototype.Destroy=function(){this.m_root.removeClass(this.m_widget.getNavListExpandedStyleClass()).removeClass(this.m_widget.getNavListVerticalStyleClass()).removeClass(this.m_widget.getNavListEndEdgeStyleClass())},u.prototype.Expand=function(e,t,i){return Promise.resolve(null)},u.prototype.Collapse=function(e,t,i,s){return Promise.resolve(null)},u.prototype.HandleExpandAndCollapseKeys=function(e,t,i,s){return!1},u.prototype.ModifyListItem=function(e,t){this.m_widget.isTabBar()&&this.m_widget.getSingleFocusableElement(e).attr("role","tab")},u.prototype.UpdateAriaPropertiesOnSelectedItem=function(e,t){e.attr("aria-selected",t?"true":"false")},u.prototype.BeforeRenderComplete=function(){var e=this.m_widget.element.attr("role");e&&"presentation"!==e&&(this.m_widget.element.attr("role","presentation"),this.m_widget.isTabBar()?this.m_root.attr("role","tablist"):this.m_root.attr("role",e))},u.prototype.ItemInsertComplete=function(e,t){},u.prototype.ItemRemoveComplete=function(e){},u.prototype.HandleArrowKeys=function(e,t,i){return c.superclass.HandleArrowKeys.apply(this.m_widget,arguments)},u.prototype.IsArrowKey=function(e){return c.superclass.IsArrowKey.apply(this.m_widget,arguments)},u.prototype.GetState=function(e){return c.superclass.GetState.apply(this.m_widget,arguments)},u.prototype.SetState=function(e,t){c.superclass.SetState.apply(this.m_widget,arguments)},u.prototype.Init=function(e){this.m_root.addClass(this.m_widget.getNavListExpandedStyleClass()).addClass(this.m_widget.getNavListVerticalStyleClass())},u.prototype.IsSelectable=function(e){return c.superclass.IsSelectable.apply(this.m_widget,arguments)},u.prototype.RestoreItem=function(e,t,i){},u.prototype.SetOptions=function(e){},u.prototype.HandleBlur=function(e){return c.superclass.HandleBlur.apply(this.m_widget,arguments)},u.prototype.HandleFocus=function(e){return c.superclass.HandleFocus.apply(this.m_widget,arguments)},u.prototype.GetNodeBySubId=function(e){return null},u.prototype.GetSubIdByNode=function(e){return null},u.prototype.HandleResize=function(e,t){},u.prototype.NotifyAttached=function(){},u.prototype.GetAnimationEffect=function(e){return c.superclass.getAnimationEffect.apply(this.m_widget,arguments)},u.prototype.IsOptionUpdateAllowed=function(e,t,i){return!0},u.prototype.OptionUpdated=function(e,t,i){},u.prototype.BeforeInsertItem=function(){},u.prototype.HandleClick=function(e){},u.prototype.HandleKeydown=function(e){},u.prototype.HandleSelectionChange=function(e){};const p=function(e,t,i){p.superclass.constructor.call(this,e,t,i)};e.Object.createSubclass(p,u,"oj.CollapsibleNavListHandler"),e._registerLegacyNamespaceProp("CollapsibleNavListHandler",p),p.prototype.Destroy=function(){this.m_root.removeClass(this.m_widget.getNavListCollapsibleStyleClass()).removeClass(this.m_widget.getNavListVerticalStyleClass())},p.prototype.Init=function(e){this.m_root.addClass(this.m_widget.getNavListCollapsibleStyleClass()).addClass(this.m_widget.getNavListVerticalStyleClass())},p.prototype.Expand=function(e,t,i){return c.superclass.AnimateExpand.apply(this.m_widget,arguments)},p.prototype.Collapse=function(e,t,i,s){return c.superclass.AnimateCollapse.apply(this.m_widget,arguments)},p.prototype.HandleExpandAndCollapseKeys=function(e,t,i,n){var o=i.children("."+this.m_widget.getGroupStyleClass()).length>0;return t===this.m_widget.LEFT_KEY||t===this.m_widget.RIGHT_KEY?(t===this.m_widget.LEFT_KEY&&!this.m_widget.isRtl()||t===this.m_widget.RIGHT_KEY&&this.m_widget.isRtl()?this.m_widget.GetState(i)===this.m_widget.STATE_EXPANDED&&this.m_widget.CollapseItem(i,e,!0,n,!0,!0):this.m_widget.GetState(i)===this.m_widget.STATE_COLLAPSED&&this.m_widget.ExpandItem(i,e,!0,n,!0,!0,!0),!0):!(!o||t!==s.ui.keyCode.ENTER&&t!==s.ui.keyCode.SPACE)&&(!(i.length<=0)&&(this.m_widget.GetState(i)===this.m_widget.STATE_COLLAPSED?this.m_widget.ExpandItem(i,null,!0,n,!0,!0,!0):this.m_widget.GetState(i)===this.m_widget.STATE_EXPANDED&&this.m_widget.CollapseItem(i,null,!0,n,!0,!0),!0))};const m=function(e,t,i){this.m_duringInit=!0,m.superclass.constructor.call(this,e,t,i),this.m_widget.GetOption(this.m_widget.OPTION_EDGE)===this.m_widget.OPTION_EDGE_BOTTOM&&this.m_root.addClass(this.m_widget.getNavListBottomEdgeStyleClass())};e.Object.createSubclass(m,u,"oj.HorizontalNavListHandler"),e._registerLegacyNamespaceProp("HorizontalNavListHandler",m),m.prototype.Destroy=function(){this.m_root.removeClass(this.m_widget.getNavListExpandedStyleClass()).removeClass(this.m_widget.getHorizontalNavListStyleClass()).removeClass(this.m_widget.getNavListBottomEdgeStyleClass()),this.m_root.find("."+this.m_widget.getDividerStyleClass()).remove(),this._destroyOverflowMenu(),null!=this.m_overflowMenuItem&&(this.m_overflowMenuItem.remove(),this.m_overflowMenuItem=null),this.m_overflowMenuItems=[],this.m_duringInit=!0},m.prototype.UpdateAriaPropertiesOnSelectedItem=function(e,t){e.attr("aria-selected",t?"true":"false")},m.prototype._isTabBar=function(){return this.m_widget.isTabBar()},m.prototype.HandleArrowKeys=function(e,t,i){"ArrowLeft"===e||"Left"===e||e===s.ui.keyCode.LEFT?e=this.m_widget.isRtl()?s.ui.keyCode.DOWN:s.ui.keyCode.UP:"ArrowRight"!==e&&"Right"!==e&&e!==s.ui.keyCode.RIGHT||(e=this.m_widget.isRtl()?s.ui.keyCode.UP:s.ui.keyCode.DOWN);var n=c.superclass.HandleArrowKeys.call(this.m_widget,e,t,i),o=this.m_widget.m_active.elem;return a.isElementIntersectingScrollerBounds(this.m_root[0],document.documentElement)||o[0].scrollIntoView(!1),n},m.prototype.IsArrowKey=function(e){return"ArrowUp"===e||"Up"===e||e===this.m_widget.UP_KEY||"ArrowDown"===e||"Down"===e||e===this.m_widget.DOWN_KEY||"ArrowLeft"===e||"Left"===e||e===this.m_widget.LEFT_KEY||"ArrowRight"===e||"Right"===e||e===this.m_widget.RIGHT_KEY},m.prototype.ModifyListItem=function(e,t){this.m_widget.getSingleFocusableElement(e).attr("role","tab")},m.prototype.BeforeRenderComplete=function(){var e=this;this.m_root.attr("role","tablist"),this.m_widget.element.attr("role","presentation"),"condense"===this.m_widget.GetOption("layout")&&(this.m_root.hasClass(this.m_widget.getCondenseStyleClass())||this.m_root.addClass(this.m_widget.getCondenseStyleClass()));var t=this.m_widget.element.find("."+this.m_widget.getItemElementStyleClass()+":visible");t.each(function(i){var n=s(this);i>0&&e._addSeparator(this,i),i===t.length-1?n.addClass(e.m_widget.getLastItemStyleClass()):n.removeClass(e.m_widget.getLastItemStyleClass())}),this.m_duringInit&&(this.m_duringInit=!1,this._handleOverflow())},m.prototype._addSeparator=function(e,t){var i=s(e),n=i.prev();t>0&&n.length&&!n.is("li."+this.m_widget.getDividerStyleClass())&&i.before('<li role="separator" class="'+this.m_widget.getDividerStyleClass()+'"></li>')},m.prototype.ItemInsertComplete=function(e,t){this._addSeparator(e,t.index),this._handleOverflow()},m.prototype.ItemRemoveComplete=function(e){var t=s(e),i=t.prev();if(i.length&&i.is("li."+this.m_widget.getDividerStyleClass()))i.remove();else{var n=t.next();n.is("li."+this.m_widget.getDividerStyleClass())&&n.remove()}this._handleOverflow()},m.prototype.IsSelectable=function(e){return!(this.m_overflowMenuItem&&this.m_overflowMenuItem[0]===s(e)[0])&&this.m_widget.getFocusItem(s(e))[0].hasAttribute("aria-selected")},m.prototype.Init=function(e){this.m_root.addClass(this.m_widget.getNavListExpandedStyleClass()).addClass(this.m_widget.getHorizontalNavListStyleClass()),this.m_overflowMenuItems=[]},m.prototype.HandleClick=function(e){s(e.target).closest("."+this.m_widget.getOverflowItemStyleClass()+" a."+this.m_widget.getItemContentStyleClass()).length>0&&this._launchOverflowMenu(e)},m.prototype.HandleKeydown=function(e){s(e.target).closest("."+this.m_widget.getOverflowItemStyleClass()+" a."+this.m_widget.getItemContentStyleClass()).length>0&&e.keyCode===s.ui.keyCode.SPACE&&this._launchOverflowMenu(e)},m.prototype.NotifyAttached=function(){this._handleOverflow()},m.prototype.HandleResize=function(e,t){this.m_ignoreNextResize?this.m_ignoreNextResize=!1:this._handleOverflow()},m.prototype.SetOptions=function(e){var t,i,s=this.m_widget.GetOption("overflow"),n=this.m_widget.GetOption("truncation");e.overflow&&s!==e.overflow&&(t=e.overflow),e.truncation&&n!==e.truncation&&(i=e.truncation),(t||i)&&this._handleOverflow(t,i)},m.prototype.HandleSelectionChange=function(e){this.m_overflowMenuItem&&(null!=e&&"none"===e.style.display?this._highlightUnhighlightMoreItem(!0):this._highlightUnhighlightMoreItem(!1))},m.prototype.GetAnimationEffect=function(e){return"add"===e||"remove"===e?c.superclass.getAnimationEffect.call(this.m_widget,e+"HorizontalItem"):c.superclass.getAnimationEffect.apply(this.m_widget,arguments)},m.prototype.GetNodeBySubId=function(e){var t=null;if(e.subId===this.m_widget.getItemSubIdKey()&&this.m_overflowMenuItems.length>0)for(var i=this._getOverflowMenu(),n=e.key,o=i.find(".oj-menu-item"),r=0;r<o.length;r++)if(this.m_widget.compareValues(s(o[r]).data("key"),n)){t=o[r],this._launchOverflowMenu(null);break}return t},m.prototype.GetSubIdByNode=function(e){var t=null,i=s(e).closest(".oj-menu-item");if(null!==this._getOverflowMenu()&&i.closest("."+this.m_widget.getOverflowMenuStyleClass())[0]!==this._getOverflowMenu()[0])return null;if(null!=i&&i.length>0){var n=i.data("key");null!=n&&(t={subId:this.m_widget.getItemSubIdKey(),key:n})}return t},m.prototype.OptionUpdated=function(e,t,i){"selection"===e&&this._toggleOverflowBtnSelection(t)},m.prototype.IsOptionUpdateAllowed=function(e,t,i){return"currentItem"!==e||!this.m_overflowMenuItem||this.m_overflowMenuItem.attr("id")!==t};var _=function(e,t,i,s){this._overflow=t,this._truncation=i,this._items=e,this._navlistHandler=s};m.prototype._handleOverflow=function(e,t){var i=-1,s=this._getItems();if(0!==s.length){e||(e=this.m_widget.GetOption("overflow")),t||(t=this.m_widget.GetOption("truncation"));var n=new _(s,e,t,this);if(!n.shouldHandleOverflow())return n.unApplyTruncation(),void this._releaseContainerWidth();this.showAllItems(s,e),n.unApplyTruncation(),n.checkForOverflow()&&n.applyTruncation()&&(i=n.getOverflowThreshold()),this._applyThreshold(i),this._releaseContainerWidth()}},m.prototype.BeforeInsertItem=function(){this._fixContainerWidth()},m.prototype._fixContainerWidth=function(){var e=this.m_widget.getListContainer(),t=e[0].getBoundingClientRect().width;0!==t&&(this.m_freezedContainerWidth=t,e.css("maxWidth",t))},m.prototype._releaseContainerWidth=function(){this.m_widget.getListContainer().css("maxWidth","none"),this.m_freezedContainerWidth&&(this.m_ignoreNextResize=!0,this.m_freezedContainerWidth=null)},m.prototype.showAllItems=function(e,t){var i=this;"popup"===t&&this._showOrHideItem(this._getOverflowMenuButton(),!0),e.each(function(e,t){i._showOrHideItem(s(t),!0)})},m.prototype._getItems=function(){return this.m_root.find("."+this.m_widget.getItemElementStyleClass()+":not(."+this.m_widget.getOverflowItemStyleClass()+")")},m.prototype._hasSeparators=function(){return this.m_root.hasClass(this.m_widget.getNavListItemsDividerStyleClass())},m.prototype._showOrHideItem=function(e,t){var i;this._hasSeparators()&&(i=e.prev("."+this.m_widget.getDividerStyleClass())),t?(e.show(),i&&i.show()):(e.hide(),i&&i.hide())},m.prototype._applyThreshold=function(e){var t,i,n=this,o=this._getItems(),r=[];if(0!==o.length){this.m_root.find("."+this.m_widget.getLastItemStyleClass()).removeClass(this.m_widget.getLastItemStyleClass()),-1===e||e>=o.length?this.m_overflowMenuItem&&this._showOrHideItem(this.m_overflowMenuItem,!1):(this._addSeparator(this._getOverflowMenuButton(),o.length),this._showOrHideItem(this._getOverflowMenuButton(),!0),i=!0),o.each(function(i,o){var a=s(o);if(-1!==e&&e<=i){a.hasClass("oj-focus")&&n.m_widget.ActiveAndFocus(n._getOverflowMenuButton(),null),a.hasClass("oj-selected")&&n._highlightUnhighlightMoreItem(!0),n._showOrHideItem(a,!1);var l={};r.push(l),l.key=n.m_widget.GetKey(o),l.label=n._getItemLabel(a),a.hasClass("oj-disabled")&&(l.disabled=!0)}else t=a,n._showOrHideItem(a,!0),a.hasClass("oj-selected")&&n.m_overflowMenuItem&&n._highlightUnhighlightMoreItem(!1),n.m_overflowMenuItem&&n.m_overflowMenuItem.hasClass("oj-focus")&&n.m_widget.compareValues(n.m_widget.GetKey(o),n.m_widget.GetOption("currentItem"))&&n.m_widget.ActiveAndFocus(t,null)}),i?this._getOverflowMenuButton().addClass(this.m_widget.getLastItemStyleClass()):t.addClass(this.m_widget.getLastItemStyleClass()),this.m_overflowMenuItems=r,this.m_widget.ClearCache();var a=this.m_overflowMenu&&this.m_overflowMenu.is(":visible");this._destroyOverflowMenu(),a&&this._launchOverflowMenu(null)}},m.prototype._highlightUnhighlightMoreItem=function(e){var t=this._getOverflowMenuButton();e?t.addClass("oj-selected").removeClass("oj-default"):t.removeClass("oj-selected").addClass("oj-default")},m.prototype._destroyOverflowMenu=function(){this.m_overflowMenu&&(this.m_overflowMenu.ojMenu("destroy"),this.m_overflowMenu.remove(),this.m_overflowMenu=null)},m.prototype._getOverflowMenuButton=function(){if(!this.m_overflowMenuItem){var e=s(document.createElement("li")),t=s(document.createElement("a")),i=s(document.createElement("span")),n=s(document.createElement("span")),o=this._getItems();e.uniqueId().attr("role","presentation").addClass(this.m_widget.getItemElementStyleClass()).addClass(this.m_widget.getItemStyleClass()).addClass(this.m_widget.getOverflowItemStyleClass()).addClass("oj-default").append(t),t.addClass(this.m_widget.getFocusedElementStyleClass()).addClass(this.m_widget.getItemContentStyleClass()),t.attr("role","button").attr("aria-haspopup","true").attr("aria-selected","false").attr("tabindex","-1").attr("href","#").append(n).append(i),a.disableElement(t[0]),this.m_root.find("ul:first").hasClass(this.m_widget.getHasIconsStyleClass())||t.addClass(this.m_widget.getHasNoIconStyleClass()),i.text(this.m_widget.ojContext.getTranslatedString("overflowItemLabel")).addClass(this.m_widget.getItemLabelStyleClass()),n.addClass(this.m_widget.getItemIconStyleClass()).addClass("oj-fwk-icon").addClass(this.m_widget.getOverflowItemIconStyleClass()),e[0].key=e.attr("id"),this.m_root.find("."+this.m_widget.GetStyleClass()).append(e),this._addSeparator(e,o.length),this.m_overflowMenuItem=e}return this.m_overflowMenuItem},m.prototype._getOverflowMenu=function(){var e=this.m_overflowMenuItems;if(0===e.length)return null;if(!this.m_overflowMenu){var t=s(document.createElement("ul"));t.addClass(this.m_widget.getOverflowMenuStyleClass()).hide(),this.m_root.append(t);for(var i=0;i<e.length;i++){var n=s(document.createElement("li")),o=s(document.createElement("a"));o.attr("href","#").text(e[i].label),n.data("key",e[i].key),e[i].disabled&&n.addClass("oj-disabled"),n.append(o),t.append(n)}t.ojMenu({openOptions:{display:"auto"},open:this.__handleOverflowMenuOpen.bind(this),close:this.__handleOverflowMenuClose.bind(this),select:this.__handleOverflowMenuSelection.bind(this)}),this.m_overflowMenu=t}return this.m_overflowMenu},m.prototype._launchOverflowMenu=function(e){this._getOverflowMenu().is(":visible")||(this._highlightUnhighlightMoreItem(!0),this._getOverflowMenu().ojMenu("open",e,{launcher:this._getOverflowMenuButton(),initialFocus:"firstItem",position:{my:"end bottom",at:"end top",collision:"flipfit"}}))},m.prototype._toggleOverflowBtnSelection=function(e){var t;if(this.m_overflowMenuItem&&this.m_overflowMenuItems.length>0){if(e)for(var i=0;i<this.m_overflowMenuItems.length;i++)if(this.m_widget.compareValues(this.m_overflowMenuItems[i].key,e)){t=!0;break}if(t){const t=this.m_widget.element[0].querySelectorAll("."+this.m_widget.getItemElementStyleClass()+".oj-selected");for(let i=0;i<t.length-1;i++)this.m_widget.compareValues(t[i].key,e)||t[i].classList.remove("oj-selected")}else this._highlightUnhighlightMoreItem(!1)}},m.prototype.__handleOverflowMenuOpen=function(e){this._getOverflowMenuButton().find("."+this.m_widget.getItemContentStyleClass()).attr("tabindex","0")},m.prototype.__handleOverflowMenuClose=function(e){var t=this.m_widget.ojContext.option("selection");this._toggleOverflowBtnSelection(t),this._getOverflowMenuButton().find("."+this.m_widget.getItemContentStyleClass()).focus()},m.prototype.__handleOverflowMenuSelection=function(e,t){var i=t.item.data("key"),n={selection:i},o=this.m_widget.FindElementByKey(i);if(!this.m_widget.isTabBar()){var r=this.m_widget.GetOption("selection")[0];this.m_widget.FireSelectionAction(e,o,r)}this.m_widget.HandleSelectionOption(n);var a=n.selection;a&&this.m_widget.SetOption("selection",a,{_context:{originalEvent:e,internalSet:!0,extraData:{items:s(o)}},changed:!0})},m.prototype._getItemLabel=function(e){var t=e.find("."+this.m_widget.getItemTitleStyleClass()+":first");return t.length>0?t.text():e.find("."+this.m_widget.getItemLabelStyleClass()+":first").text()},_.prototype._TEXT_WIDTH_KEY="textWidth",_.prototype._ITEM_WIDTH_KEY="itemWidth",_.prototype._getOverflowMenuButton=function(){return this._navlistHandler._getOverflowMenuButton()},_.prototype._getWidget=function(){return this._navlistHandler.m_widget},_.prototype.shouldHandleOverflow=function(){return"popup"===this._overflow||"progressive"===this._truncation},_.prototype.unApplyTruncation=function(){var e=this;this._items.each(function(t,i){s(i).find("."+e._getWidget().getItemLabelStyleClass()).css("max-width","")})},_.prototype.checkForOverflow=function(){return!!this.shouldHandleOverflow()&&(this._overflowData||(this._overflowData=this._collectOverflowData()),this._isOverflowed(this._overflowData.containerEdgePos,this._overflowData.itemEdgePos,0))},_.prototype.applyTruncation=function(){"progressive"===this._truncation&&this._applyLabelMaxWidth(this._overflowData);var e=this._items.last()[0].getBoundingClientRect()["ltr"===n.getReadingDirection()?"right":"left"];return this._isOverflowed(this._overflowData.containerEdgePos,e,0)},_.prototype.getOverflowThreshold=function(){var e=-1;return"popup"===this._overflow&&(e=this._calculateThreshold(this._overflowData)),e},_.prototype._collectOverflowData=function(){var e,t,i="ltr"===n.getReadingDirection()?"right":"left",s=this._getWidget().ojContext.element,o=this._items.last();"progressive"===this._truncation&&(this._calculateItemWidths(),e=this._calculateItemNonTextWidth());var r=s[0].getBoundingClientRect()[i],a=s[0].getBoundingClientRect().width;return"popup"===this._overflow&&(t=this._getOverflowMenuButton()[0].getBoundingClientRect().width),{containerEdgePos:r,containerWidth:a,overflowItemWidth:t,itemEdgePos:o[0].getBoundingClientRect()[i],itemNonTextWidth:e}},_.prototype._calculateItemWidths=function(){var e=this;this._items.each(function(t,i){var n=s(i),o=n.find("."+e._getWidget().getItemLabelStyleClass())[0].getBoundingClientRect().width;n.data(e._TEXT_WIDTH_KEY,o),n.data(e._ITEM_WIDTH_KEY,i.getBoundingClientRect().width)})},_.prototype._calculateItemNonTextWidth=function(){var e=this._items,t=this;this._getWidget().GetRootElement().find("."+this._getWidget().getHasIconsStyleClass()).lenght>0&&(e=e.filter(function(e,i){return s(i).find("."+t._getWidget().getItemIconStyleClass()).length>0}));var i=e.filter(function(e,i){return s(i).find("."+t._getWidget().getRemovableStyleClass()).length>0}),n=i&&i.length>0?i.last():e.last(),o=n.data(t._TEXT_WIDTH_KEY);return n.data(t._ITEM_WIDTH_KEY)-o},_.prototype._isOverflowed=function(e,t,i){var s=i||0;return"ltr"===n.getReadingDirection()?t-e+s>.1:e-t+s>.1},_.prototype._calculateThreshold=function(e){for(var t=this._items,i="ltr"===n.getReadingDirection()?"right":"left",s=t.length-1,o=t[s].getBoundingClientRect()[i];this._isOverflowed(e.containerEdgePos,o,e.overflowItemWidth)&&s>0;)o=t[s-=1].getBoundingClientRect()[i];return s+1},_.prototype._applyLabelMaxWidth=function(e){var t=this._items,i=this,n=this._getMinLabelWidth(this._items),o=e.containerWidth/t.length-e.itemNonTextWidth;o<n&&(o=n);var r=0,a=0;t.each(function(e,t){var n=s(t).data(i._TEXT_WIDTH_KEY);n<o?r+=o-n:a+=n}),t.each(function(e,t){var n=s(t).data(i._TEXT_WIDTH_KEY),l=n;n>o&&(l=o+r*n/a),s(t).find("."+i._getWidget().getItemLabelStyleClass()).css({"max-width":l+"px"})})},_.prototype._getMinLabelWidth=function(e){var t=window.getComputedStyle(e.first().find("."+this._getWidget().getItemLabelStyleClass())[0],null).getPropertyValue("min-width");return t.indexOf("px")>0?parseInt(t.substring(0,t.length-2),10):0};const g="oj-navigationlist-hierarchical-menu",f=function(e,t,i){f.superclass.constructor.call(this,e,t,i),this.m_expanded=[]};e.Object.createSubclass(f,p,"oj.SlidingNavListHandler"),e._registerLegacyNamespaceProp("SlidingNavListHandler",f),f.prototype.Destroy=function(){this.m_root.removeClass("oj-navigationlist-slider").removeClass(this.m_widget.getNavListVerticalStyleClass()),this._toolbar.remove()},f.prototype._slideAnimation=function(e,t,i,s,n){var o=this,r=this.m_widget.getListContainer(),a=r.hasClass("oj-focus-ancestor");a&&t&&r.removeClass("oj-focus-ancestor");var l=t?"sliderExpand":"sliderCollapse";this.m_widget.StartAnimation(r.get(0),l,this.m_widget.getAnimationEffect(l)).then(function(){o._slideAnimationComplete(e,t,i,s,a),n(null)})},f.prototype._slideAnimationComplete=function(e,t,i,s,n){null!==this.m_widget.m_contentHandler&&(i&&(n&&this.m_widget.getListContainer().addClass("oj-focus-ancestor"),s&&0===s.button&&this.m_widget.AvoidFocusHighLight(!0),i.length>0&&this.m_widget.SetCurrentItem(i,s),this.m_widget.AvoidFocusHighLight(!1)),t?this.m_widget.AnimateExpandComplete(e.children("."+this.m_widget.getGroupStyleClass())):this.m_widget.AnimateCollapseComplete(e.children("."+this.m_widget.getGroupStyleClass())))},f.prototype.Expand=function(e,t,i){var n,o=new Promise(function(e){n=e}),r=s(e).parents(".oj-navigationlist-item-element:first"),a=r.children("."+this.m_widget.getGroupStyleClass()),l=null,h=r.closest("."+this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS);return h.length>0&&(h.removeClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),r.addClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),l=a.find("."+this.m_widget.getItemElementStyleClass()+":eq(0)"),this._updateHMenuOnExpand(r)),t?this._slideAnimation(r,!0,l,i,n):(this._slideAnimationComplete(r,!0,l,i,!1),n(null)),r.siblings().attr("aria-hidden","true"),r.children("."+this.m_widget.getGroupItemStyleClass()).children("."+this.m_widget.getItemContentStyleClass()).attr("aria-hidden","true"),a.removeAttr("aria-hidden"),e.css("display",""),r.addClass("oj-skipfocus"),o},f.prototype._updateHMenuOnExpand=function(e){var t=e.parentsUntil(this.m_widget.element,"."+this.m_widget.getItemElementStyleClass());t=t.get().reverse(),t=s(t.concat(e)),this.m_expanded=[],this._emptyHviewMenu(),t.each(function(e,t){var i;i=0===e?this.m_widget.getRootLabel():this.m_widget.getItemLabel(this.m_expanded[e-1]);var n=s(t);this._addItemToHviewMenu(this.m_widget.GetKey(n[0]),this.m_widget.getItemLabel(n),i),this.m_expanded.push(n)}.bind(this))},f.prototype.Collapse=function(e,t,i,s){var n,o=new Promise(function(e){n=e}),r=e.children("."+this.m_widget.getGroupStyleClass()),a=e.parent();return e.children("."+this.m_widget.getGroupItemStyleClass()).children("."+this.m_widget.getItemContentStyleClass()).removeAttr("aria-hidden"),r.attr("aria-hidden","true"),e.siblings().removeAttr("aria-hidden"),e.removeClass("oj-skipfocus"),e.removeClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),0===e.closest("."+this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS).length&&(a.closest("."+this.m_widget.getItemElementStyleClass()).addClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS),this.m_widget.element.is(a)&&this.m_widget.element.addClass(this.m_widget.SLIDING_NAVLIST_CURRENT_STYLE_CLASS)),i?this._slideAnimation(e,!1,r.parent(),s,n):(this._slideAnimationComplete(e,!1,r.parent(),s,!1),n(null)),this._updateHMenuOnCollapse(t),o},f.prototype._updateHMenuOnCollapse=function(e){var t=-1;this.m_expanded.forEach(function(i,s){var n=this.m_widget.GetKey(i[0]);e===n&&(t=s)}.bind(this)),t>-1&&this.m_expanded.splice(t),this._removeItemFromHviewMenu(e)},f.prototype.UpdateAriaPropertiesOnSelectedItem=function(e,t){t?e.attr("aria-describedby",this._selectedLabelId):e.removeAttr("aria-describedby")},f.prototype.GetState=function(e){var t=this.m_widget.getFocusItem(e).attr("aria-expanded");return"true"===t?this.m_widget.STATE_EXPANDED:"false"===t?this.m_widget.STATE_COLLAPSED:this.m_widget.STATE_NONE},f.prototype.SetState=function(e,t){t===this.m_widget.STATE_EXPANDED?(this.m_widget.getFocusItem(e).attr("aria-expanded","true"),e.removeClass(this.m_widget.COLLAPSED_STYLE_CLASS).addClass(this.m_widget.EXPANDED_STYLE_CLASS)):t===this.m_widget.STATE_COLLAPSED&&(this.m_widget.getFocusItem(e).attr("aria-expanded","false"),e.removeClass(this.m_widget.EXPANDED_STYLE_CLASS).addClass(this.m_widget.COLLAPSED_STYLE_CLASS))},f.prototype.ModifyListItem=function(e,t){var i=this.m_widget.getFocusItem(e);e.attr("role","presentation"),i.attr("role","menuitem"),t.attr("id")||t.uniqueId(),i.removeAttr("aria-selected");var s=e.children("."+this.m_widget.getGroupStyleClass());s.length>0&&(i.attr("aria-haspopup","true"),s.attr("role","menu"),s.css("display",""),e.removeAttr("aria-expanded"),i.attr("aria-expanded","false"))},f.prototype.BeforeRenderComplete=function(){this.m_root.attr("role","menu"),this.m_widget.element.attr("role","presentation")},f.prototype.Init=function(e){this.m_root.addClass("oj-navigationlist-slider").addClass(this.m_widget.getNavListVerticalStyleClass()),e.element.addClass("oj-navigationlist-current"),this._buildSlidingNavListHeader(e),this._initializeHierarchicalView()},f.prototype.HandleClick=function(e){s(e.target).closest(".oj-navigationlist-previous-link, .oj-navigationlist-previous-button").length>0&&this.CollapseCurrentList(e)},f.prototype.IsSelectable=function(e){var t,i=this.m_widget.getFocusItem(s(e))[0],n=this.m_widget.getCollapseIconStyleClass();return(!(t=i.previousElementSibling)||!t.classList.contains(n))&&("menuitem"===this.m_widget.getFocusItem(s(e))[0].getAttribute("role")&&!this.m_widget.getFocusItem(s(e))[0].hasAttribute("aria-selected"))},f.prototype.HandleKeydown=function(e){s(e.target).closest(".oj-navigationlist-previous-link, .oj-navigationlist-previous-button").length>0&&e.keyCode===s.ui.keyCode.ENTER&&this.CollapseCurrentList(e),s(e.target).closest("."+this.m_widget.GetStyleClass()).length>0&&(e.keyCode!==s.ui.keyCode.ESCAPE||e.isDefaultPrevented()||this.CollapseCurrentList(e))},f.prototype._buildSlidingNavListHeader=function(e){this._toolbar=s(document.createElement("div")),this._toolbar.addClass("oj-navigationlist-toolbar"),this._previousLink=s(document.createElement("a")),this._prevButton=s(document.createElement("a")),this._prevButton.addClass("oj-navigationlist-previous-button"),this._prevButton.css("visibility","hidden").attr("tabindex","-1"),this._previousLink.addClass("oj-navigationlist-previous-link").attr("tabindex","-1"),this._headerLabel=s(document.createElement("label")),this._headerLabel.addClass("oj-navigationlist-current-header").text(this.m_widget.getRootLabel()),this._vSeparator=s(document.createElement("span")),this._vSeparator.attr("role","separator").attr("aria-orientation","vertical").addClass("oj-navigationlist-toolbar-separator"),this._hviewBtn=s(document.createElement("button")),this._hviewBtn.addClass("oj-navigationlist-hierarchical-button").attr("tabindex","-1"),this._hviewMenu=s(document.createElement("ul")),this._hviewMenu.addClass(g).hide();var t=s(document.createElement("label"));t.uniqueId().addClass("oj-helper-hidden-accessible").attr("aria-hidden","true"),this._selectedLabelId=t.attr("id"),t.text(this.m_component.getTranslatedString("selectedLabel")),this._previousLink.append(this._headerLabel),this._toolbar.append(this._prevButton),this._toolbar.append(this._previousLink).append(this._vSeparator).append(this._hviewBtn).append(this._hviewMenu).append(t),this.m_root.prepend(this._toolbar),this._showOrHideHierarchyMenu(e.hierarchyMenuDisplayThresholdLevel)},f.prototype.CollapseCurrentList=function(e){var t=this.m_expanded[this.m_expanded.length-1];t&&this.m_widget.CollapseItem(t,e,!0,null,!0,!0)},f.prototype._initializeHierarchicalView=function(){var e=this,t=this._hviewMenu.uniqueId().attr("id");this._hviewMenu.ojMenu({openOptions:{position:{my:"end top",at:"end bottom"}},select:function(t,i){var n=i.item.nextAll(),o=e.m_expanded,r=i.item.data("key");for(e.m_widget.signalTaskStart();o.length>0;){var a=o[o.length-1],l=e.m_widget.GetKey(a[0]);if(e.m_widget.CollapseItem(s(a),t,!0,l,!0,!0),e.m_widget.compareValues(r,l))break}n.remove(),i.item.remove(),e._hviewMenu.ojMenu("refresh"),e.m_widget.signalTaskEnd()}}),this._hviewBtn.ojButton({label:this.m_component.getTranslatedString("hierMenuBtnLabel"),display:"icons",icons:{start:"oj-fwk-icon oj-hier-icon"},menu:"#"+t,disabled:!0,chroming:"half"}),this._prevButton.ojButton({label:this.m_component.getTranslatedString("previousIcon"),display:"icons",icons:{start:"oj-navigationlist-previous-icon oj-component-icon oj-clickable-icon-nocontext"},chroming:"half"})},f.prototype._emptyHviewMenu=function(){this._hviewMenu&&this._hviewMenu.find("li").remove()},f.prototype._addItemToHviewMenu=function(e,t,i){var n;if(this._hviewBtn){var o=this._hviewMenu.find("li").length,r=s(document.createElement("li")),a=s(document.createElement("a"));if(a.attr("href","#"),r.append(a),o>0){for(n=0;n<o;n++)n>0&&a.append(s(document.createElement("span")).addClass("oj-navigationlist-hvitem-space"));a.append(s(document.createElement("span")).addClass("oj-menu-item-icon oj-icon oj-navigationlist-level-indicator"))}var l=s(document.createElement("span")).addClass("oj-navigationlist-hierarchical-menu-label");l.text(i),a.append(l),r.data("key",e),this._hviewMenu.append(r),this._hviewMenu.ojMenu("refresh"),this._showOrHideHierarchyMenu(this.m_widget.GetOption("hierarchyMenuDisplayThresholdLevel")),this._hviewBtn.ojButton("option","disabled",!1),this._prevButton.css("visibility","visible"),this.m_widget.getListContainer().hasClass("oj-focus-ancestor")&&this._prevButton.attr("tabindex","0"),this._headerLabel.text(t)}},f.prototype.SetOptions=function(e){void 0!==e.hierarchyMenuDisplayThresholdLevel&&(this.m_widget.GetOption("hierarchyMenuDisplayThresholdLevel")!==e.hierarchyMenuDisplayThresholdLevel&&this._showOrHideHierarchyMenu(e.hierarchyMenuDisplayThresholdLevel))},f.prototype._showOrHideHierarchyMenu=function(e){var t=this._hviewMenu.find("li").length;-1===e||t<e?(this._vSeparator.css("visibility","hidden"),this._hviewBtn[0]===document.activeElement&&this.m_root.focusin(),this._hviewBtn.css("visibility","hidden")):t>=e&&(this._vSeparator.css("visibility","visible"),this._hviewBtn.css("visibility","visible"))},f.prototype._removeItemFromHviewMenu=function(e){var t,i;this._hviewBtn&&(this._hviewMenu.find("li").each(function(n,o){var r=s(o);r.data("key")===e?(r.remove(),i=r.children("a").text(),t=!0):t&&r.remove()}),this._hviewMenu.ojMenu("refresh"),this._showOrHideHierarchyMenu(this.m_widget.GetOption("hierarchyMenuDisplayThresholdLevel")),0===this._hviewMenu.children("li").length?(this._hviewBtn.ojButton("option","disabled",!0),this._prevButton.css("visibility","hidden"),this._prevButton.attr("tabindex","-1"),this._headerLabel.text(this.m_widget.getRootLabel())):this._headerLabel.text(i))},f.prototype.RestoreItem=function(e,t,i){t.removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-describedby").removeAttr("aria-hidden")},f.prototype._makeToolbarItemsFocusable=function(e){e?(this._hviewMenu.find("li").length&&this._prevButton.attr("tabindex","0"),this._hviewBtn.attr("tabindex","0")):(this._prevButton.attr("tabindex","-1"),this._hviewBtn.attr("tabindex","-1"))},f.prototype.HandleFocus=function(e){s.contains(this._toolbar.get(0),e.target)||this._hviewMenu.get(0)===e.relatedTarget||(this._makeToolbarItemsFocusable(!0),c.superclass.HandleFocus.apply(this.m_widget,arguments))},f.prototype.HandleBlur=function(e){s.contains(this._toolbar.get(0),e.relatedTarget)||this._hviewMenu.get(0)===e.relatedTarget?this.m_widget.UnhighlightActive():(null!=e.relatedTarget&&s.contains(this.m_root.get(0),e.relatedTarget)||this._makeToolbarItemsFocusable(!1),c.superclass.HandleBlur.apply(this.m_widget,arguments))},f.prototype.GetNodeBySubId=function(e){return"oj-navigationlist-previous-link"===e.subId?this._prevButton?this._prevButton[0]:null:"oj-navigationlist-hierarchical-button"===e.subId?this._hviewBtn?this._hviewBtn[0]:null:e.subId===g&&this._hviewMenu?this._hviewMenu[0]:null},f.prototype.GetSubIdByNode=function(e){return s(e).closest(this._prevButton).length>0?{subId:"oj-navigationlist-previous-link"}:s(e).closest(this._hviewBtn).length>0?{subId:"oj-navigationlist-hierarchical-button"}:s(e).closest(this._hviewMenu).length>0?{subId:g}:null}}),define("ojs/ojavatar",["exports","preact/jsx-runtime","ojs/ojvcomponent","ojs/ojthemeutils","preact"],function(e,t,i,s,n){"use strict";var o=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};e.Avatar=class extends n.Component{render(e){return t.jsxs("div",Object.assign({class:this._getClasses(e),"aria-hidden":"true"},{children:[this._getInnerContent(e),this._getSecondaryInnerContent(e)]}))}_getClasses(e){var t;const i=null!==(t=e.shape)&&void 0!==t?t:s.getCachedCSSVarValues(["--oj-private-avatar-global-shape-default"])[0];let n=`oj-avatar oj-avatar-bg-${e.background} oj-avatar-${e.size} ${"circle"===i?"oj-avatar-circle":"oj-avatar-square"}`;return e.iconClass||!e.src?(n+=" oj-avatar-no-image",e.initials&&(n+=" oj-avatar-has-initials")):n+=" oj-avatar-image",n}_getInnerContent(e){return e.src&&!e.iconClass?t.jsx("div",{class:"oj-avatar-background-image",style:{backgroundImage:`url("${e.src}")`}}):t.jsx("div",{class:"oj-avatar-background oj-avatar-background-image"})}_getSecondaryInnerContent(e){return e.iconClass?t.jsx("div",{class:"oj-avatar-icon "+e.iconClass}):e.src?void 0:e.initials?t.jsx("div",Object.assign({class:"oj-avatar-initials oj-avatar-background-image"},{children:e.initials})):t.jsx("div",{class:"oj-avatar-background-image oj-avatar-placeholder-icon"})}},e.Avatar.defaultProps={background:"neutral",initials:null,size:"md",src:null,iconClass:""},e.Avatar.metadata={properties:{background:{type:"string",enumValues:["neutral","orange","green","teal","blue","slate","mauve","pink","purple","lilac","gray","red","forest"]},initials:{type:"string|null"},size:{type:"string",enumValues:["2xs","xxs","xs","sm","md","lg","xl","2xl","xxl"]},src:{type:"string|null"},iconClass:{type:"string"},shape:{type:"string",enumValues:["square","circle"]}}},e.Avatar=o([i.customElement("oj-avatar")],e.Avatar),Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojswitcher",["ojs/ojcomponentcore","ojs/ojcustomelement","ojs/ojcustomelement-utils"],function(e,t,i){"use strict";const s=function(t){var s=this,n=t.element,o=!0,r=null;function a(){r=null}function l(t,i){var s=n.value;void 0===t._ojSwitcher_orig_display_style&&Object.defineProperty(t,"_ojSwitcher_orig_display_style",{value:t.style.display}),i===s?function(t){!("none"===t.style.display)?o&&e.subtreeShown(t,{initialRender:!0}):(t.style.display="",e.subtreeShown(t,o?{initialRender:!0}:void 0))}(t):function(t){!("none"===t.style.display)&&(t.style.display="none",e.subtreeHidden(t))}(t)}s._caseElementMutationObserver=new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&(e.addedNodes&&Array.prototype.forEach.call(e.addedNodes,function(e){if(1===e.nodeType){var t=e.getAttribute("slot");l(e,t),a()}}),e.removedNodes&&Array.prototype.forEach.call(e.removedNodes,function(e){1===e.nodeType&&(void 0!==e._ojSwitcher_orig_display_style&&(e.style.display=e._ojSwitcher_orig_display_style),a())}))})}),this.createDOM=function(){s._caseElementMutationObserver.observe(n,{childList:!0})},this.updateDOM=function(){for(var e=(r||(r=i.CustomElementUtils.getSlotMap(n)),r),t=Object.keys(e),s=0;s<t.length;s++)for(var a=t[s],h=e[a],d=0;d<h.length;d++){l(h[d],a)}o&&(o=!1)}};var n;(n={properties:{value:{type:"string",value:""}},methods:{getProperty:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}}).extension._CONSTRUCTOR=s,n.extension._CONTROLS_SUBTREE_HIDDEN=!0,oj.CustomElementBridge.register("oj-switcher",{metadata:n})}),define("ojs/ojmessage",["require","exports","ojs/ojcore","ojs/ojknockout","ojs/ojbutton","ojs/ojjquery-hammer","ojs/ojcore-base","jquery","knockout","ojs/ojanimation","ojs/ojdomutils","ojs/ojcomponentcore","ojs/ojcomposite","ojs/ojcontext","hammerjs","ojs/ojlogger","ojs/ojthemeutils","ojs/ojtranslation"],function(e,t,i,s,n,o,r,a,l,h,d,c,u,p,m,_,g,f){"use strict";r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,p=p&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p;function v(e){this._composite=e.element,this.containerId=[e.unique,"mc"].join("_"),this._messagesContainerId=this.containerId,this.handleCloseIcon=this._handleCloseIcon.bind(this),this.close=this._closeMessage.bind(this),this.bindingsApplied=this._bindingsApplied.bind(this),this.disconnected=this._disconnected.bind(this),this.connected=this._connected.bind(this),this.propertyChanged=this._propertyChanged.bind(this),this.messageCreatedTime=(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),this.handleKeydown=this._handleKeydown.bind(this),this._slotCounts=e.slotCounts,this._properties=e.properties,this._createObservables(),this._updateSeverityStyleClass(null)}function y(e,t){this._element=e,this._operation=t,this._init()}v.prototype._connected=function(e){var t=this._operationMediator;t&&"none"===t.getPendingOperation()&&this._isMessageOpen()&&this._scheduleAutoClose()},v.prototype._disconnected=function(e){var t=this._operationMediator;t&&"none"===t.getPendingOperation()&&this._clearAutoClose()},v.prototype._bindingsApplied=function(e){this._openMessage()},v.prototype._propertyChanged=function(e){function t(e,t,i){if("external"===e.updatedFrom&&e.property===t){var s=e.subproperty;if(s)return[t,i].join(".")===s.path;var n=e.previousValue[i];return e.value[i]!==n}return!1}if(t(e,"message","autoTimeout")&&(this.computedMessageCloseSelectors(this._computeMessageCloseSelectors()),this._clearAutoClose(),this._scheduleAutoClose()),t(e,"message","closeAffordance")&&(this.hasCloseAffordance("defaults"===this._computeCloseAffordance()),this._unregisterSwipeHandler(),this._registerSwipeHandler()),t(e,"message","icon")&&(this.computedIconStyle(this._computeIconStyle()),this.computedIconClass(this._computeIconClass()),this.computedMessageContainerSelectors(this._computeMessageContainerSelectors())),(t(e,"message","category")||t(e,"displayOptions","category"))&&(this.computedCategory(this._computeCategory()),this.computedMessageContainerSelectors(this._computeMessageContainerSelectors())),t(e,"message","severity")){const e=this.computedSeverity();this.computedSeverity(this._computeSeverity()),this.computedCategory(this._computeCategory()),this.computedIconClass(this._computeIconClass()),this.computedMessageContainerSelectors(this._computeMessageContainerSelectors()),this._updateSeverityStyleClass(e)}t(e,"message","timestamp")&&this.formattedTimestamp(this._formatTimestamp()),t(e,"message","summary")&&this.computedSummary(this._computeSummary()),t(e,"message","detail")&&(this.computedDetail(this._computeDetail()),this.computedMessageContainerSelectors(this._computeMessageContainerSelectors())),t(e,"translations","labelCloseIcon")&&this.computedLabelCloseIcon(this._computeLabelCloseIcon()),t(e,"translations","categories")&&this.computedCategory(this._computeCategory())},v.prototype._registerSwipeHandler=function(){if(d.isTouchSupported()&&"defaults"===this._computeCloseAffordance()){var e=a(document.getElementById(this._messagesContainerId)),t={recognizers:[[m.Swipe,{direction:m.DIRECTION_ALL}]],cssProps:{userSelect:"auto"}},i="rtl"===d.getReadingDirection()?"swipeleft swipeup":"swiperight swipeup";this._hammerSwipe=e.ojHammer(t).on(i,function(e){e.preventDefault(),e.gesture&&"mouse"!==e.gesture.pointerType&&this._closeMessage()}.bind(this))}},v.prototype._unregisterSwipeHandler=function(){if(d.isTouchSupported()&&this._hammerSwipe){var e="rtl"===d.getReadingDirection()?"swipeleft swipeup":"swiperight swipeup";this._hammerSwipe.off(e),delete this._hammerSwipe}},v.prototype._scheduleAutoClose=function(){this._computeAutoTimeout()>-1&&(this._autoCloseTimer=window.setTimeout(this._closeMessage.bind(this),this._computeAutoTimeout()))},v.prototype._clearAutoClose=function(){isNaN(this._autoCloseTimer)||(window.clearTimeout(this._autoCloseTimer),delete this._autoCloseTimer)},v.prototype._isMessageOpen=function(){var e=document.getElementById(this._messagesContainerId);return!(!e||!a(e).is(":visible"))},v.prototype._closeMessage=function(e){var t=document.getElementById(this._messagesContainerId);if(t){this._unregisterSwipeHandler(),this._clearAutoClose();var i=this._operationMediator;if(i){if(i.isOperationPending("close",this._closeMessage.bind(this,e)))return;i.destroy()}this._operationMediator=new y(this._composite,"close");var s=this._getAnimateOptionDefaults("close");h.startAnimation(t,"close",s,this._composite).then(function(){a(t).hide(),c.subtreeHidden(t);var i={bubbles:!0,cancelable:!1,detail:{message:this._properties.message}},s=new CustomEvent("ojClose",i);e&&Object.defineProperty(s,"_originalEvent",{value:e,writable:!1}),this._composite.dispatchEvent(s)}.bind(this))}},v.prototype._computeSeverity=function(){var e=this._properties.message;return r.StringUtils.isEmptyOrUndefined(e.severity)?v._getMessageDefault("severity"):"fatal"===e.severity?"error":e.severity},v.prototype._formatTimestamp=function(){var e=this._properties.message;if(!r.StringUtils.isEmptyOrUndefined(e.timestamp)){var t=p.getContext(this._composite).getBusyContext().addBusyState({description:"oj-message is busy loading required libraries and processing timestamp"});this._getConverterPromise(e.timestamp).then(function(i){try{var s=i.format(e.timestamp);this.formattedTimestamp(s)}catch(t){_.info("JET oj-message: Invalid value for message.timestamp: "+e.timestamp)}finally{t()}}.bind(this))}},v.prototype._getConverterPromise=function(t){return new Promise(function(t,i){e(["ojs/ojconverter-datetime"],function(e){t(function(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}),t.default=e,t}(e))},i)}).then(function(e){var i=this._isDateToday(t)?"hh:mm a":"MM/dd/yy, hh:mm a";return new e.IntlDateTimeConverter({pattern:i})}.bind(this))},v.prototype._isDateToday=function(e){var t=new Date,i=new Date(e);return t.getUTCFullYear()===i.getUTCFullYear()&&t.getUTCMonth()===i.getUTCMonth()&&t.getUTCDate()===i.getUTCDate()},v.prototype._computeCategory=function(){var e=this._properties.displayOptions;if(!e||!e.category||"none"!==e.category){var t=this._properties.message;if(!r.StringUtils.isEmptyOrUndefined(t.category))return t.category;var i=this._computeSeverity(),s=this._properties.translations,n=s&&s.categories?s.categories[i]:void 0;return r.StringUtils.isEmptyOrUndefined(n)&&(n=f.getComponentTranslations("oj-ojMessage").categories[i]),n}},v.prototype._computeAutoTimeout=function(){var e=this._properties.message;return isNaN(e.autoTimeout)?v._getMessageDefault("autoTimeout"):0===e.autoTimeout?this._getThemedAutoTimeoutDefault():e.autoTimeout},v.prototype._computeIconStyle=function(){var e=this._properties.message;if(!r.StringUtils.isEmptyOrUndefined(e.icon))return["url('",e.icon,"') no-repeat"].join("")},v.prototype._computeIconClass=function(){var e=this._properties.message;if(r.StringUtils.isEmptyOrUndefined(e.icon)){var t=this._computeSeverity();if("none"!==t){var i=["oj-component-icon","oj-message-status-icon"];return i.push(["oj","message",t,"icon"].join("-")),i.join(" ")}}},v.prototype._computeCloseAffordance=function(){var e=this._properties.message;return r.StringUtils.isEmptyOrUndefined(e.closeAffordance)?v._getMessageDefault("closeAffordance"):e.closeAffordance},v.prototype._computeMessageCloseSelectors=function(){return this._computeAutoTimeout()>-1?"oj-message-close oj-message-auto-timeout-close":"oj-message-close"},v.prototype._computeMessageContainerSelectors=function(){let e=["oj-message-container"];return this._computeIconStyle()||this._computeIconClass()||e.push("oj-message-no-icon"),this._isDetailShown()||e.push("oj-message-no-detail"),e.join(" ")},v.prototype._computeSound=function(){var e=this._properties.message;return void 0===e.sound?v._getMessageDefault("sound"):e.sound},v.prototype._computeLabelCloseIcon=function(){var e=this._properties.translations;return r.StringUtils.isEmptyOrUndefined(e.labelCloseIcon)?f.getTranslatedString("oj-ojMessage.labelCloseIcon"):e.labelCloseIcon},v.prototype._computeSummary=function(){var e=this._properties.message;if(!r.StringUtils.isEmptyOrUndefined(e.summary))return e.summary},v.prototype._computeDetail=function(){var e=this._properties.message;if(!r.StringUtils.isEmptyOrUndefined(e.detail))return e.detail},v.prototype._handleCloseIcon=function(e){this._closeMessage(e)},v.prototype._openMessage=function(){var e=document.getElementById(this._messagesContainerId);if(e)if(this._isInlinedChildOfOjMessages())this._prepareMessageAtOpen();else{this._operationMediator=new y(this._composite,"open");var t={bubbles:!0,cancelable:!1,detail:{message:this._properties.message}};this._composite.dispatchEvent(new CustomEvent("ojBeforeOpen",t));var i=this._getAnimateOptionDefaults("open");h.startAnimation(e,"open",i,this._composite).then(function(){t={bubbles:!0,cancelable:!1,detail:{message:this._properties.message}},this._prepareMessageAtOpen(),this._composite.dispatchEvent(new CustomEvent("ojOpen",t))}.bind(this))}},v.prototype._isInlinedChildOfOjMessages=function(){var e=this._findMessagesAncestor();return e&&!e.getProperty("messages")},v.prototype._findMessagesAncestor=function(){for(var e=this._composite.parentElement;e;e=e.parentElement)if(e.nodeName.startsWith("OJ-"))return"OJ-MESSAGES"===e.nodeName?e:null;return null},v.prototype._isDetailShown=function(){return v._SLOT.DETAIL in this._slotCounts||(void 0!==this._computeDetail()||void 0!==this._computeCategory()&&void 0!==this._computeSummary())},v.prototype._prepareMessageAtOpen=function(){var e=this._computeSound();"none"!==e&&(this._initAudioContext(),this._playSound(e)),this._registerSwipeHandler(),this._scheduleAutoClose()},v.prototype._handleKeydown=function(e){e.defaultPrevented||"defaults"!==this._computeCloseAffordance()||e.keyCode!==a.ui.keyCode.ESCAPE&&"Escape"!==e.key||(e.preventDefault(),this._closeMessage(e))},v.prototype._playSound=function(e){if("defaults"!==e){var t=document.createElement("AUDIO");t.src=e,t.addEventListener("error",function(){_.info(`JET oj-message: Failed to load media from URL in message.sound='${e}'.`)});var i=t.play();void 0!==i&&i.then(function(){}).catch(function(t){_.info(`JET oj-message: Failed to play specified sound: '${e}'. Error: ${t}`)})}else if(void 0===window.audioContext)_.info("JET oj-message: Failed to play default sound as the browser does not support Web Audio API");else{var s=window.audioContext.createGain();s.connect(window.audioContext.destination);var n=window.audioContext.createOscillator();n.connect(s),n.start(),n.stop(window.audioContext.currentTime+.01)}},v.prototype._initAudioContext=function(){if(void 0===window.audioContext)try{window.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(e){}},v.prototype._createObservables=function(){this.hasCloseAffordance=l.observable("defaults"===this._computeCloseAffordance()),this.computedIconStyle=l.observable(this._computeIconStyle()),this.computedIconClass=l.observable(this._computeIconClass()),this.computedSeverity=l.observable(this._computeSeverity()),this.computedCategory=l.observable(this._computeCategory()),this.formattedTimestamp=l.observable(this._formatTimestamp()),this.computedLabelCloseIcon=l.observable(this._computeLabelCloseIcon()),this.computedMessageCloseSelectors=l.observable(this._computeMessageCloseSelectors()),this.computedMessageContainerSelectors=l.observable(this._computeMessageContainerSelectors()),this.computedSummary=l.observable(this._computeSummary()),this.computedDetail=l.observable(this._computeDetail())},v.prototype._updateSeverityStyleClass=function(e){if(null!=e){const t=v._getStyleClassForSeverity(e);this._composite.classList.remove(t)}const t=v._getStyleClassForSeverity(this.computedSeverity());t&&this._composite.classList.add(t)},v._getMessageDefault=function(e){return v._DEFAULTS.message[e]},v._DEFAULTS={autoTimeout:4e3,animation:{open:{effect:"fadeIn",duration:"300ms"},close:{effect:"fadeOut",duration:"300ms"}},message:{severity:"none",autoTimeout:-1,closeAffordance:"defaults",sound:"none"}},v._getStyleClassForSeverity=function(e){return v._SEVERITY_STYLE_CLASS_MAP[e]},v._SEVERITY_STYLE_CLASS_MAP={confirmation:"oj-confirmation",error:"oj-error",info:"oj-info",warning:"oj-warning"},v._SLOT={DETAIL:"detail"},v.prototype._getThemedAutoTimeoutDefault=function(){var e=g.parseJSONFromFontFamily("oj-message-option-defaults");return e&&e.autoTimeout?e.autoTimeout:v._DEFAULTS.autoTimeout},v.prototype._getAnimateOptionDefaults=function(e){return v._DEFAULTS.animation[e]},y.prototype._init=function(){this._resolvedQueue=[],this._callback=this._eventHandler.bind(this);var e=this._operation,t=["oj"];t.push(e.charAt(0).toUpperCase()),t.push(e.slice(1));var i=t.join("");this._eventType=i,this._element.addEventListener(i,this._callback);var s=p.getContext(this._element).getBusyContext(),n={description:this._getBusyStateDescription.bind(this,this._element,this._operation)},o=s.addBusyState(n);this.addPromiseExecutor(function(e){window.setImmediate(function(){e()})}.bind(this,o))},y.prototype._getBusyStateDescription=function(e,t){return`${e.nodeName} is busy animating on the ${t} operation`},y.prototype._deliverResolved=function(e){var t=this._resolvedQueue;this._resolvedQueue=[],e=e||this._operation,this._operation=null;for(var i=0;i<t.length;i++)t[i](e)},y.prototype.destroy=function(){this._deliverResolved("none"),this._callback=null,this._element=null,this._operation=null,this._eventType=null},y.prototype._eventHandler=function(e){e.target===this._element&&(this._element.removeEventListener(e.type,this._callback),this._deliverResolved(),this._callback=null)},y.prototype.getPendingOperation=function(){return this._operation?this._operation:"none"},y.prototype.addPromiseExecutor=function(e,t){this._resolvedQueue.push(e)},y.prototype.isOperationPending=function(e,t){if(!this._element)return!1;var i=!1,s=this.getPendingOperation();return e===s?(_.info(["JET oj-message: invoked a '",e,"' operation while pending animation of the same type of operation. ","The second request will be ignored."].join("")),i=!0):"none"!==s&&(_.info(["JET oj-message: invoked a '",e,"' operation while pending animation of a '",s,"' operation. The second request will be invoked after the pending ","operation completes."].join("")),this.addPromiseExecutor(t),i=!0),i};u.register("oj-message",{view:'<div :id="[[containerId]]" :class="[[computedMessageContainerSelectors]]" on-keydown="[[handleKeydown]]">  <div class="oj-message-header">    <div class="oj-message-leading-header" :title="[[computedCategory]]">      <oj-bind-if test="[[computedIconStyle]]">        <div class="oj-component-icon oj-message-status-icon oj-message-custom-icon"          role="presentation" :title="[[computedCategory]]"          :style.background="[[computedIconStyle]]">        </div>      </oj-bind-if>      <oj-bind-if test="[[computedIconClass]]">        <div role="presentation" :title="[[computedCategory]]" :class="[[computedIconClass]]">        </div>      </oj-bind-if>      <oj-bind-if test="[[computedCategory]]">        <div class="oj-message-category oj-message-title" tabindex="-1">          <h1 :title="[[computedCategory]]">            <oj-bind-text value="[[computedCategory]]"></oj-bind-text>           </h1>        </div>      </oj-bind-if>      <oj-bind-if test="[[!computedCategory() && computedSummary()]]">        <div class="oj-message-summary oj-message-title" tabindex="-1">          <oj-bind-text value="[[computedSummary]]"></oj-bind-text>        </div>      </oj-bind-if>    </div>    <div class="oj-message-trailing-header">      <oj-bind-if test="[[formattedTimestamp]]">        <div class="oj-message-timestamp">          <oj-bind-text value="[[formattedTimestamp]]"></oj-bind-text>         </div>      </oj-bind-if>      <oj-bind-if test="[[hasCloseAffordance]]">        <div :class="[[computedMessageCloseSelectors]]">          <oj-button class="oj-button-sm" display="icons" chroming="borderless" on-click="[[handleCloseIcon]]">            <span slot="startIcon" class="oj-fwk-icon oj-fwk-icon-cross"></span>            <span>              <oj-bind-text value="[[computedLabelCloseIcon]]"></oj-bind-text>            </span>          </oj-button>        </div>      </oj-bind-if>    </div>    </div>  <div class="oj-message-body">    <oj-bind-if test="[[computedCategory]]">      <div class="oj-message-summary">        <oj-bind-text value="[[computedSummary]]"></oj-bind-text>      </div>    </oj-bind-if>    <div class="oj-message-detail">      <oj-bind-slot name="detail">        <oj-bind-text value="[[computedDetail]]"></oj-bind-text>      </oj-bind-slot>    </div>  <div></div>',viewModel:v,metadata:{properties:{displayOptions:{type:"object",properties:{category:{type:"string",enumValues:["auto","header","none"],value:"auto"}}},message:{type:"object",properties:{autoTimeout:{type:"number",value:-1},category:{type:"string",value:""},closeAffordance:{type:"string",enumValues:["defaults","none"],value:"defaults"},detail:{type:"string",value:""},icon:{type:"string",value:""},severity:{type:"string",enumValues:["confirmation","error","info","none","warning"],value:"none"},sound:{type:"string",value:"none"},summary:{type:"string",value:""},timestamp:{type:"string",value:""}}},translations:{type:"object",value:{},properties:{categories:{type:"object",properties:{confirmation:{type:"string"},error:{type:"string"},info:{type:"string"},warning:{type:"string"}}},labelCloseIcon:{type:"string"}}}},methods:{close:{},getProperty:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojClose:{}},extension:{}}}),t.ojMessage={},Object.defineProperty(t,"__esModule",{value:!0})}),define("ojs/ojmessages",["ojs/ojcore-base","jquery","knockout","ojs/ojanimation","ojs/ojcontext","ojs/ojthemeutils","ojs/ojtranslation","ojs/ojcomposite","ojs/ojcomponentcore","ojs/ojlogger","ojs/ojdomutils","ojs/ojknockout","ojs/ojpopupcore","ojs/ojmessage","ojs/ojdataprovider","ojs/ojcustomelement-utils"],function(e,t,i,s,n,o,r,a,l,h,d,c,u,p,m,_){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;function g(t){this._composite=t.element,this.containerId=[t.unique,"mc"].join("_"),this._messagesContainerId=this.containerId,this.handleOpen=this._handleOpen.bind(this),this.handleClose=this._handleClose.bind(this),this.handleAnimateStart=this._handleAnimateStart.bind(this),this.bindingsApplied=this._bindingsApplied.bind(this),this.disconnected=this._disconnected.bind(this),this.connected=this._connected.bind(this),this.close=this._close.bind(this),this.closeAll=this._closeAll.bind(this),this.propertyChanged=this._propertyChanged.bind(this),this._properties=t.properties,this._createObservables(),this._updateLandmark(),e.AgentUtils.getAgentInfo().os===e.AgentUtils.OS.IOS&&(this._composite.style.overflow="hidden")}function f(e){this.Init(e)}g.prototype._bindingsApplied=function(){var e=this._composite.querySelector("#"+this._messagesContainerId);if(e.addEventListener("ojFocus",this._navigationEventListener.bind(this),!1),this._properties.messages)e.addEventListener("ojBeforeOpen",this._handleBeforeOpen.bind(this),!1);else{var t=this._getDefaultSlotMessageElements();if(0!==t.length){var i=n.getContext(this._composite).getBusyContext();this._inlinedMessagesOpenBusyStateResolve=i.addBusyState({description:"oj-messages is busy opening inlined messages"}),this._showMessagesContainer();for(var s=0;s<t.length;s++)this._animateMessageAction(t[s].firstChild,"open",this._resolveInlinedMessagesOpenBusyState(t[s].getProperty("message"),t.length))}}},g.prototype._resolveInlinedMessagesOpenBusyState=function(e,t){this._updateLiveRegionAndContainer(e),this._numInlinedChildrenAnimated=this._numInlinedChildrenAnimated?this._numInlinedChildrenAnimated+1:1,this._numInlinedChildrenAnimated===t&&(this._numInlinedChildrenAnimated=0,this._inlinedMessagesOpenBusyStateResolve())},g.prototype._disconnected=function(){g.NAVIGATION_TRACKER.remove(this._messagesContainerId),e.ZOrderUtils.getStatus(this._composite)===e.ZOrderUtils.STATUS.OPEN&&this._closeOverlay()},g.prototype._connected=function(){g.NAVIGATION_TRACKER.add(this._messagesContainerId)},g.prototype._closeAll=function(e){if(this._isMessagesShown())for(var t=this._getDefaultSlotMessageElements(),i=0;i<t.length;i++){var s=t[i].message,n=!0;e&&(n=e(s)),n&&t[i].close()}},g.prototype._propertyChanged=function(e){"external"===e.updatedFrom&&"position"===e.property?e.previousValue&&e.value?this._refresh():!e.previousValue&&e.value?this._getDefaultSlotMessageElements().length>0&&(this._isMessagesShown()&&this._hideMessages(),this._openOverlay()):e.previousValue&&!e.value&&this._getDefaultSlotMessageElements().length>0&&(this._isOverlayOpen()&&this._closeOverlay(),this._showMessages()):"external"===e.updatedFrom&&"display"===e.property?this._getDefaultSlotMessageElements().length>0&&(this._isOverlayOpen()?(this._closeOverlay(),this._openOverlay(),this._refresh()):this._isMessagesShown()&&(this._hideMessages(),this._showMessages())):"external"===e.updatedFrom&&"translations"===e.property&&this._updateLandmark()},g.prototype._close=function(e){if(e&&this._isMessagesShown())for(var i=this._getDefaultSlotMessageElements(),s=0;s<i.length;s++){t(i[s]).prop("message")===e&&i[s].close()}},g.prototype._isEventPertaining=function(e){var t=e.target,i=document.getElementById(this._messagesContainerId);return!("OJ-MESSAGE"!==t.nodeName||!d.isAncestor(i,t))},g.prototype._handleBeforeOpen=function(e){e.defaultPrevented||!this._isEventPertaining(e)||this._isMessagesShown()||this._showMessagesContainer()},g.prototype._showMessagesContainer=function(){this._isPresentationInline()?this._showMessages():this._openOverlay()},g.prototype._handleOpen=function(e){!e.defaultPrevented&&this._isEventPertaining(e)&&this._updateLiveRegionAndContainer(e.detail.message)},g.prototype._updateLiveRegionAndContainer=function(e){var t=r.getComponentTranslations("oj-ojMessage").categories,i="fatal"===e.severity?"error":e.severity,s={category:e.category?e.category:t[i],summary:e.summary,detail:e.detail},n=this._getLiveRegion(),o=this._getTranslationsDefault("ariaLiveRegion.newMessage",s);n.announce(o),this._refresh()},g.prototype._getTranslationsDefault=function(t,i){for(var s=this._properties.translations,n=t.split("."),o=0;o<n.length&&s;o++)s=s[n[o]];return e.StringUtils.isEmptyOrUndefined(s)?s=r.getTranslatedString(["oj-ojMessages",t].join("."),i):i&&(s=r.applyParameters(s,i)),s},g.prototype._handleClose=function(e){if(!e.defaultPrevented&&this._isEventPertaining(e)){var i,s=e.target;e._originalEvent&&(i=this._getNextFocus(s)),i&&i.focus(),t(s).remove(),0===this._getDefaultSlotMessageElements().length?(g.NAVIGATION_TRACKER.togglePreviousFocus(this._messagesContainerId),this._isOverlayOpen()?this._closeOverlay():this._hideMessages()):this._refresh()}},g.prototype._getNextFocus=function(e){var t,i,s=this._getDefaultSlotMessageElements(),n=s.indexOf(e);return n-1>-1?t=s[n-1]:n+1<=s.length-1&&(t=s[n+1]),t&&(i=t.querySelector('.oj-message-category[tabindex="-1"]')),i},g.prototype._handleAnimateStart=function(e){!e.defaultPrevented&&this._isEventPertaining(e)&&(e.preventDefault(),this._animateMessageAction(e.detail.element,e.detail.action,e.detail.endCallback))},g.prototype._animateMessageAction=function(e,t,i){var n=this._isPresentationInline()?"general":this._computeDisplay(),o=this._getThemedAnimateOptions(n,t);s[o.effect](e,o).then(i)},g._DEFAULTS={general:{animation:{open:{effect:"expand",duration:"300ms"},close:{effect:"collapse",duration:"300ms"}},position:{my:{horizontal:"center",vertical:"top"},at:{horizontal:"center",vertical:"top"},of:"window",collision:"none"}},notification:{animation:{open:{effect:"slideIn",duration:"300ms"},close:{effect:"slideOut",duration:"300ms",direction:"end"}},position:{my:{horizontal:"end",vertical:"top"},at:{horizontal:"end",vertical:"top"},of:"window",collision:"none"}}},g.prototype._getThemedAnimateOptions=function(e,t){var i=o.parseJSONFromFontFamily("oj-messages-option-defaults");return i&&i[e]&&i[e].animation&&i[e].animation[t]?i[e].animation[t]:g._DEFAULTS[e].animation[t]},g.prototype._computeDisplay=function(){return this._properties.display},g.prototype._isPresentationInline=function(){return!this._properties.position},g.prototype._computeContainerSelectors=function(){var e=this._computeDisplay(),i=t(this._composite);return i.removeClass("oj-messages-general oj-messages-notification oj-messages-inline"),this._isPresentationInline()?i.addClass("oj-messages-inline"):i.addClass(["oj-messages",e].join("-")),"oj-messages-container"},g.prototype._getThemedPosition=function(){var e=this._computeDisplay(),t=o.parseJSONFromFontFamily("oj-messages-option-defaults");return t[e]&&t[e].position?t[e].position:g._DEFAULTS[e].position},g.prototype._getPositionAsJqUi=function(){var t=e.PositionUtils.coerceToJqUi(this._computePosition()),i="rtl"===d.getReadingDirection();return t=e.PositionUtils.normalizeHorizontalAlignment(t,i)},g.prototype._computePosition=function(){var t=this._properties.position;return e.PositionUtils.coerceToJet(t,this._getThemedPosition())},g.prototype._getDefaultSlotMessageElements=function(){for(var e=this._composite.querySelector("#"+this._messagesContainerId),t=[],i=_.CustomElementUtils.getSlotMap(e)[""],s=0;i&&s<i.length;s++)"OJ-MESSAGE"!==i[s].nodeName?"OJ-BIND-IF"!==i[s].nodeName&&h.error(`JET oj-messages: can contain only oj-message children in its default slot. Found <${i[s].nodeName}> instead.`):t.push(i[s]);return t},g.prototype._isMessagesShown=function(){return t(this._composite).is(":visible")},g.prototype._showMessages=function(){this._isMessagesShown()||(t(this._composite).show(),l.subtreeShown(t(this._composite))),g.NAVIGATION_TRACKER.add(this._messagesContainerId),this._announceNavigation()},g.prototype._hideMessages=function(){this._isMessagesShown()&&(t(this._composite).hide(),l.subtreeHidden(this._composite),g.NAVIGATION_TRACKER.remove(this._messagesContainerId),this._liveRegion&&(this._liveRegion.destroy(),delete this._liveRegion))},g.prototype._openOverlay=function(){var i=t(this._composite),s={};s[e.PopupService.OPTION.POPUP]=i,s[e.PopupService.OPTION.LAUNCHER]=this._getLauncher(),s[e.PopupService.OPTION.POSITION]=this._getPositionAsJqUi(),s[e.PopupService.OPTION.EVENTS]=this._getPopupServiceEvents(),s[e.PopupService.OPTION.LAYER_SELECTORS]=["oj","messages","layer"].join("-"),s[e.PopupService.OPTION.MODALITY]=e.PopupService.MODALITY.MODELESS,s[e.PopupService.OPTION.CUSTOM_ELEMENT]=!0,e.PopupService.getInstance().open(s),this._showMessages(),this._overlayEventsCallback=g._overlayEventsListener.bind(this,i),i[0].addEventListener("keydown",this._overlayEventsCallback,!1)},g.prototype._getLauncher=function(){var e=this._composite.parentElement;return this._composite.previousElementSibling?e=this._composite.previousElementSibling:this._composite.nextElementSibling&&(e=this._composite.nextElementSibling),t(e)},g.prototype._closeOverlay=function(){this._hideMessages();var i=t(this._composite),s={};s[e.PopupService.OPTION.POPUP]=i,e.PopupService.getInstance().close(s);var n=this._overlayEventsCallback;delete this._overlayEventsCallback,i[0].removeEventListener("keydown",n,!1)},g.prototype._isOverlayOpen=function(){var t=this._composite,i=e.ZOrderUtils.getStatus(t);return i===e.ZOrderUtils.STATUS.OPENING||i===e.ZOrderUtils.STATUS.OPEN||i===e.ZOrderUtils.STATUS.CLOSING},g._overlayEventsListener=function(e,i){if(!i.defaultPrevented&&(i.keyCode===t.ui.keyCode.TAB||"Tab"===i.key)){var s=i.target,n=e.find(":tabbable");if(n.length>0){var o=n[0],r=n[n.length-1];o===r&&s===o?i.preventDefault():o===s&&i.shiftKey?(i.preventDefault(),r.focus()):r!==s||i.shiftKey||(i.preventDefault(),o.focus())}else i.preventDefault()}},g.prototype._navigationEventListener=function(e){e.target.id===this._messagesContainerId&&(e.preventDefault(),this._announceNavigation(!0))},g.prototype._announceNavigation=function(t){var i,s=e.AgentUtils.getAgentInfo().os===e.AgentUtils.OS.IOS||e.AgentUtils.getAgentInfo().os===e.AgentUtils.OS.ANDROID;if(i=t?s?void 0:"ariaLiveRegion.navigationFromKeyboard":s?"ariaLiveRegion.navigationToTouch":"ariaLiveRegion.navigationToKeyboard"){var n=this._getLiveRegion(),o=this._getTranslationsDefault(i);n.announce(o)}},g.prototype._getLiveRegion=function(){var e=this._messagesContainerId;return this._liveRegion||(this._liveRegion=new f(e)),this._liveRegion},g.prototype._getPopupServiceEvents=function(){var t={};return t[e.PopupService.EVENT.POPUP_CLOSE]=this._closeOverlay.bind(this),t[e.PopupService.EVENT.POPUP_REMOVE]=this._surrogateRemoveHandler.bind(this),t[e.PopupService.EVENT.POPUP_REFRESH]=this._refresh.bind(this),t},g.prototype._refresh=function(){if(this._isOverlayOpen()){var e=this._composite.getBoundingClientRect();if(e.height<document.documentElement.clientHeight&&e.width<document.documentElement.clientWidth){var i=this._getPositionAsJqUi();t(this._composite).position(i)}}},g.prototype._surrogateRemoveHandler=function(){this._closeOverlay(),this._composite.parentElement.removeChild(this._composite)},g.prototype._createObservables=function(){this.containerSelectors=i.pureComputed(this._computeContainerSelectors.bind(this),this)},g.prototype._computeLabelLandmark=function(){var t=this._properties;return e.StringUtils.isEmptyOrUndefined(t.translations.labelLandmark)?this._getTranslationsDefault("labelLandmark"):t.translations.labelLandmark},g.prototype._updateLandmark=function(){var e=this._computeLabelLandmark();this._composite.setAttribute("aria-label",e),this._composite.setAttribute("role","complementary")},g.NAVIGATION_TRACKER={_messagesContainerIds:[],_priorFocusCache:{},add:function(e){this.remove(e),this._messagesContainerIds.push(e),this._start(e)},remove:function(e){var t=this._messagesContainerIds,i=t.indexOf(e);i>-1&&t.splice(i,1),this._stop(e)},togglePreviousFocus:function(i){var s=this._priorFocusCache,n=s[i];return!!(n&&t(n).is(":visible")&&e.ZOrderUtils.isAboveTopModalLayer(n))&&(n.focus(),delete s[i],!0)},_addPriorFocusCache:function(e,t){this._priorFocusCache[e]=t},_start:function(e){var i=document.getElementById(e);if(i){var s=this._messageContainerListener.bind(this,e);if(i.addEventListener("focus",s,!0),i.addEventListener("keydown",s,!1),i.addEventListener("click",s,!1),t(i).data("oj_messages_nmtl",s),!this._documentCallback){this._documentCallback=this._documentListener.bind(this);var n=document.documentElement;n.addEventListener("keydown",this._documentCallback,!1),n.addEventListener("blur",this._documentCallback,!0)}}},_stop:function(e){var i=document.getElementById(e);if(i){var s=t(i).data("oj_messages_nmtl");s&&(i.removeEventListener("focus",s,!0),i.removeEventListener("keydown",s,!1),i.removeEventListener("click",s,!1))}if(this._documentCallback&&!(this._messagesContainerIds.length>0)){var n=document.documentElement;n.removeEventListener("keydown",this._documentCallback,!1),n.removeEventListener("blur",this._documentCallback,!0),delete this._documentCallback}},_indexOfFocusWithin:function(e){for(var t=this._messagesContainerIds,i=0;i<t.length;i++){var s=document.getElementById(t[i]);if(s&&d.isAncestorOrSelf(s,e))return i}return-1},_documentListener:function(i){if(!i.defaultPrevented){var s=this._messagesContainerIds;if("keydown"===i.type&&(117===i.keyCode||"F6"===i.key)&&s.length>0){var n=this._indexOfFocusWithin(i.target);if(n>-1)return;for(var o=n=s.length-1;o>-1;o--){var r=document.getElementById(s[o]);if(r&&t(r).is(":visible")&&e.ZOrderUtils.isAboveTopModalLayer(r)){var a=r.querySelector('.oj-message-title[tabindex="-1"]');i.preventDefault(),this._addPriorFocusCache(s[o],i.target),a.focus();var l=new CustomEvent("ojFocus",{bubbles:!1,cancelable:!0});r.dispatchEvent(l);break}}}else"blur"===i.type&&(this._prevActiveElement=i.target)}},_messageContainerListener:function(e,i){if(!i.defaultPrevented)if("focus"===i.type||"click"===i.type){var s=document.getElementById(e),n=this._prevActiveElement;n&&s&&!d.isAncestorOrSelf(s,n)&&this._addPriorFocusCache(e,n)}else"keydown"!==i.type||117!==i.keyCode&&i.keyCode!==t.ui.keyCode.ESCAPE&&"F6"!==i.key&&"Escape"!==i.key||this.togglePreviousFocus(e)&&i.preventDefault()}},f.prototype.Init=function(e){this._id=e},f.prototype.destroy=function(){var e=t(document.getElementById(f._LIVE_REGION_ID)),i=this._id;delete this._id,e.find('div[data-container-id="'+i+'"]').remove(),e.children("div").length<1&&e.remove()},f.prototype.announce=function(e){var i=f._getLiveRegion(),s=this._id;t("<div>").attr("data-container-id",s).text(e).appendTo(i)},f._getLiveRegion=function(){var e=t(document.getElementById(f._LIVE_REGION_ID));return 0===e.length&&((e=t("<div>")).attr({id:f._LIVE_REGION_ID,role:"log","aria-live":"polite","aria-relevant":"additions"}),e.addClass("oj-helper-hidden-accessible"),e.appendTo(document.body)),e},f._LIVE_REGION_ID="__oj_messages_arialiveregion";a.register("oj-messages",{view:'<div role="presentation" :id="[[containerId]]" :class="[[containerSelectors]]"      on-oj-open="[[handleOpen]]" on-oj-close="[[handleClose]]"      on-oj-animate-start="[[handleAnimateStart]]">  <oj-bind-if test="[[!$properties.messages]]">    <oj-bind-slot>    </oj-bind-slot>  </oj-bind-if>  <oj-bind-if test="[[$properties.messages]]">    <oj-bind-for-each data="[[$properties.messages]]" >      <template>        <oj-bind-template-slot name="messageTemplate"           data="[[{data:$current.data, componentElement:_composite}]]">          <template>            <oj-message message="[[$current.data]]" display-options="[[$properties.displayOptions]]">            </oj-message>          </template>        </oj-bind-template-slot>      </template>    </oj-bind-for-each>  </oj-bind-if></div>',viewModel:g,metadata:{properties:{display:{type:"string",enumValues:["general","notification"],value:"general"},displayOptions:{type:"object",properties:{category:{type:"string",enumValues:["auto","header","none"],value:"auto"}}},messages:{type:"Array<Object>|object"},position:{type:"object",properties:{at:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"]},vertical:{type:"string",enumValues:["bottom","center","top"]}}},collision:{type:"string",enumValues:["fit","flip","flipfit","none"]},my:{type:"object",properties:{horizontal:{type:"string",enumValues:["center","end","left","right","start"]},vertical:{type:"string",enumValues:["bottom","center","top"]}}},of:{type:"string"},offset:{type:"object",properties:{x:{type:"number"},y:{type:"number"}}}}},translations:{type:"object",value:{},properties:{ariaLiveRegion:{type:"object",properties:{navigationFromKeyboard:{type:"string"},navigationToKeyboard:{type:"string"},navigationToTouch:{type:"string"},newMessage:{type:"string"}}},labelLandmark:{type:"string"}}}},methods:{close:{},closeAll:{},getProperty:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}}})}),define("ojs/ojconveyorbelt",["ojs/ojcore-base","jquery","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojlogger","ojs/ojcontext","ojs/ojconfig","ojs/ojdomutils","touchr"],function(e,t,i,s,n,o,r,a,l){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o;var h={properties:{arrowVisibility:{type:"string",writeback:!0,enumValues:["auto","hidden","visible"]},contentParent:{type:"string",writeback:!0},orientation:{type:"string",writeback:!0,enumValues:["horizontal","vertical"],value:"horizontal"},scrollPosition:{type:"number",writeback:!0,value:0},translations:{type:"object",value:{},properties:{tipArrowNext:{type:"string"},tipArrowPrevious:{type:"string"}}}},methods:{getProperty:{},refresh:{},scrollElementIntoView:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};function d(e,t,i,s,n){this._elem=e,this._orientation=t.orientation,this._contentParent=t.contentParent,this._scrollPosition=t.scrollPosition,this._bRtl=t.bRtl,this._arrowVisibility=i.arrowVisibility,this._prevButtonStyleClass=i.prevButtonStyleClass,this._nextButtonStyleClass=i.nextButtonStyleClass,this._prevButtonIcon=i.prevButtonIcon,this._nextButtonIcon=i.nextButtonIcon,this._scrollFunc=s.scrollFunc,this._addResizeListenerFunc=s.addResizeListener,this._removeResizeListenerFunc=s.removeResizeListener,this._addStyleClassNameFunc=s.addStyleClassName,this._removeStyleClassNameFunc=s.removeStyleClassName,this._hasStyleClassNameFunc=s.hasStyleClassName,this._filterContentElementsFunc=s.filterContentElements,this._subtreeDetachedFunc=s.subtreeDetached,this._subtreeAttachedFunc=s.subtreeAttached,this._addBusyStateFunc=s.addBusyState,this._handleFocus=s.handleFocus,this._setScrollPositionProperty=s.setScrollPositionProperty,this._overflowContainerStyleClass=n.overflowContainerStyleClass,this._contentContainerStyleClass=n.contentContainerStyleClass,this._itemStyleClass=n.itemStyleClass,this._hiddenStyleClass=n.hiddenStyleClass,this._bExternalScroll=!0,this._firstVisibleItemIndex=0,this._atStart=!0,this._atEnd=!1}h.extension._WIDGET_NAME="ojConveyorBelt",e.CustomElementBridge.register("oj-conveyor-belt",{metadata:h}),d.prototype.setup=function(){var e=this,i=d;if(this._createInnerContainers(),"visible"===this._arrowVisibility){this._createPrevButton(this._prevButtonStyleClass,this._prevButtonIcon),this._createNextButton(this._nextButtonStyleClass,this._nextButtonIcon);var s=this._nextButton;this._buttonWidth=Math.round(t(s).outerWidth(!0)),this._buttonHeight=Math.round(t(s).outerHeight(!0))}else this._buttonWidth=0,this._buttonHeight=0;this._hidePrevButton(),this._hideNextButton(),this._mouseWheelListener=function(t){e._handleMouseWheel(t)},i._addBubbleEventListener(this._elem,"mousewheel",this._mouseWheelListener,!1),i._addBubbleEventListener(this._elem,"wheel",this._mouseWheelListener,!1),this._touchStartListener=function(t){e._handleTouchStart(t)},i._addBubbleEventListener(this._overflowContainer,"touchstart",this._touchStartListener,!0),this._touchMoveListener=function(t){e._handleTouchMove(t)},i._addBubbleEventListener(this._overflowContainer,"touchmove",this._touchMoveListener,!1),this._touchEndListener=function(t){e._handleTouchEnd(t)},i._addBubbleEventListener(this._overflowContainer,"touchend",this._touchEndListener),i._addBubbleEventListener(this._overflowContainer,"touchcancel",this._touchEndListener),this._handleKeyDownFunc=function(t){e._handleKeyDown(t)},i._addBubbleEventListener(this._elem,"keydown",this._handleKeyDownFunc),this._handleFocusListener=function(t){e._handleFocus(t)},this._elem.addEventListener("focus",this._handleFocusListener,{passive:!1,capture:!0}),this._origScroll=this._scrollPosition,this._clearCachedSizes(),this._adjustOverflowSize(!0),this._handleResize(!0),this._handleResizeFunc=function(t,i){e._handleResize(!1)},this._addResizeListenerFunc(this._elem,this._handleResizeFunc),this._addResizeListenerFunc(this._contentContainer,this._handleResizeFunc),this._subtreeAttachedFunc(this._contentContainer)},d.prototype._handleKeyDown=function(e){if(!e.defaultPrevented){var t=this._elem.getAttribute("tabindex");if(!(null==t||t<0)){var i=e.key||e.keyCode;if("horizontal"===this._orientation)switch(i){case d._KEYBOARD_KEYS._RIGHT:case d._KEYBOARD_KEYS._RIGHT_IE:case d._KEYBOARD_KEYS._RIGHT_CODE:this._bRtl?this._scrollPrevOnKeyDown(e):this._scrollNextOnKeyDown(e);break;case d._KEYBOARD_KEYS._LEFT:case d._KEYBOARD_KEYS._LEFT_IE:case d._KEYBOARD_KEYS._LEFT_CODE:this._bRtl?this._scrollNextOnKeyDown(e):this._scrollPrevOnKeyDown(e);break;default:return}if("vertical"===this._orientation)switch(i){case d._KEYBOARD_KEYS._DOWN:case d._KEYBOARD_KEYS._DOWN_IE:case d._KEYBOARD_KEYS._DOWN_CODE:this._scrollNextOnKeyDown(e);break;case d._KEYBOARD_KEYS._UP:case d._KEYBOARD_KEYS._UP_IE:case d._KEYBOARD_KEYS._UP_CODE:this._scrollPrevOnKeyDown(e)}}}},d.prototype._scrollNextOnKeyDown=function(e){this._constrainScroll(this._calcNextScroll())!==this._getCurrScroll()&&(this._scrollNext(),e.preventDefault())},d.prototype._scrollPrevOnKeyDown=function(e){this._constrainScroll(this._calcPrevScroll())!==this._getCurrScroll()&&(this._scrollPrev(),e.preventDefault())},d.prototype.destroy=function(){this._resolveBusyState();var e=this._elem,t=d;t._removeBubbleEventListener(e,"mousewheel",this._mouseWheelListener,!1),t._removeBubbleEventListener(e,"wheel",this._mouseWheelListener,!1),t._removeBubbleEventListener(this._overflowContainer,"touchstart",this._touchStartListener,!0),t._removeBubbleEventListener(this._overflowContainer,"touchmove",this._touchMoveListener,!1),t._removeBubbleEventListener(this._overflowContainer,"touchend",this._touchEndListener),t._removeBubbleEventListener(this._overflowContainer,"touchcancel",this._touchEndListener),t._removeBubbleEventListener(this._overflowContainer,"scroll",this._scrollListener),t._removeBubbleEventListener(this._elem,"keydown",this._handleKeyDownFunc),this._elem.removeEventListener("focus",this._handleFocusListener,{passive:!1,capture:!0}),this._mouseWheelListener=null,this._touchStartListener=null,this._touchMoveListener=null,this._touchEndListener=null,this._scrollListener=null,this._handleFocusListener=null,this._removeResizeListenerFunc(e,this._handleResizeFunc),this._removeResizeListenerFunc(this._contentContainer,this._handleResizeFunc),this._handleResizeFunc=null,this._reparentChildrenFromContentContainer(this._contentContainer,e),e.removeChild(this._overflowContainer),this._overflowContainer=null,null!=this._nextButton&&null!=this._prevButton&&(e.removeChild(this._nextButton),e.removeChild(this._prevButton),this._nextButton=null,this._prevButton=null),this._contentContainer=null,this._clearCachedSizes(),this._elem=null,this._scrollFunc=null,this._addResizeListenerFunc=null,this._removeResizeListenerFunc=null,this._addStyleClassNameFunc=null,this._removeStyleClassNameFunc=null,this._hasStyleClassNameFunc=null,this._filterContentElementsFunc=null,this._subtreeDetachedFunc=null,this._subtreeAttachedFunc=null,this._addBusyStateFunc=null,this._contentParent=null},d.prototype.handleResize=function(){this._handleResize(!1)},d.prototype.setScroll=function(e,t){this._setCurrScroll(e,t)},d.prototype.getScroll=function(){return this._getCurrScroll()},d.prototype._reparentChildrenToContentContainer=function(e,t){for(var i=e.childNodes;i.length>0;){var s=i[0];this._subtreeDetachedFunc(s),t.appendChild(s),1===s.nodeType&&this._itemStyleClass&&this._addStyleClassNameFunc(s,this._itemStyleClass)}},d.prototype._reparentChildrenFromContentContainer=function(e,t){for(var i=e.childNodes;i.length>0;){var s=i[0];t.appendChild(s),1===s.nodeType&&this._itemStyleClass&&this._removeStyleClassNameFunc(s,this._itemStyleClass)}},d._getComputedStyle=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},d._getElemInnerWidth=function(e){var t=d,i=t._getComputedStyle(e);return t._getCSSLengthAsInt(i.width)},d._getElemInnerHeight=function(e){var t=d,i=t._getComputedStyle(e);return t._getCSSLengthAsInt(i.height)},d._getCSSLengthAsInt=function(e){if(e.length>0&&"auto"!==e){var t=Math.round(parseFloat(e));return isNaN(t)&&(t=0),t}return 0},d._addBubbleEventListener=function(e,t,i,s){e.addEventListener(t,i,{passive:s,capture:!1})},d._removeBubbleEventListener=function(e,t,i,s){e.removeEventListener(t,i,{passive:s,capture:!1})},d._getWheelDelta=function(e){var t=0;if(null!=e.deltaY||null!=e.deltaX)t=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-e.deltaX:-e.deltaY;else if(null!=e.wheelDelta){t=Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?e.wheelDeltaX:e.wheelDeltaY}else t=-e.detail;return 1===e.deltaMode&&(t*=5),t},d.prototype._isHorizontal=function(){return"horizontal"===this._orientation},d.prototype._isEmpty=function(){return!this._getContentParent().hasChildNodes()},d.prototype._reinitializeInnerDom=function(){this._origScroll=this._getCurrScroll(),this._setOverflowScroll(0),this._hidePrevButton(),this._hideNextButton()},d.prototype._clearCachedSizes=function(){this._totalSize=null,this._sizes=null},d.prototype._handleResize=function(e){e||this._reinitializeInnerDom(),this._clearCachedSizes(),this._totalSize=this._measureContents(),e||this._adjustOverflowSize(!1),"visible"===this._arrowVisibility&&this._alignButtons()},d.prototype._alignButtons=function(){var e=this._nextButton,t=this._prevButton,i=e.style,s=t.style,n=this._totalSize;this._isHorizontal()?(i.height=n.h+"px",s.height=n.h+"px"):(i.width=n.w+"px",s.width=n.w+"px")},d.prototype._adjustOverflowSize=function(e){var t=this._contentContainer,i=this._isHorizontal(),s=d,n=i?s._getElemInnerWidth(this._elem):s._getElemInnerHeight(this._elem);this._minScroll=0,this._maxScroll=i?t.offsetWidth-n+this._buttonWidth:t.offsetHeight-n+this._buttonHeight,this._maxScroll<0&&(this._maxScroll=0),this._hidePrevButton(),this._hideNextButton(),this._setCurrScroll(e?this._scrollPosition:this._origScroll,!0),this._origScroll=this._scrollPosition},d.prototype._createInnerContainers=function(){var e=this,t=this._elem,i=d,s=document.createElement("div");this._overflowContainer=s,this._addStyleClassNameFunc(s,this._overflowContainerStyleClass);var n=document.createElement("div");this._contentContainer=n,this._addStyleClassNameFunc(n,this._contentContainerStyleClass),this._reparentChildrenToContentContainer(t,n),t.appendChild(s),s.appendChild(n),this._scrollListener=function(t){e._handleScroll(t)},i._addBubbleEventListener(s,"scroll",this._scrollListener)},d.prototype._getContentElements=function(){var e,t=[],i=this._contentParent?this._contentParent:this._contentContainer,s=i.children,n=s.length;for(e=0;e<n;e++){var o=s[e];1===o.nodeType&&"TEMPLATE"!==o.tagName&&0!==o.offsetWidth&&t.push(o)}if(t=(0,this._filterContentElementsFunc)(t),i===this._contentContainer&&this._itemStyleClass)for(e=0;e<t.length;e++){var r=t[e];this._hasStyleClassNameFunc(r,this._itemStyleClass)||this._addStyleClassNameFunc(r,this._itemStyleClass)}return t},d.prototype._createPrevButton=function(e,t){var i=this,s=document.createElement("div");this._prevButton=s,s.setAttribute("class",e),s.setAttribute("aria-hidden","true"),d._addBubbleEventListener(s,"click",function(){i._scrollPrev()}),s.appendChild(t),this._elem.insertBefore(s,this._overflowContainer)},d.prototype._createNextButton=function(e,t){var i=this,s=document.createElement("div");this._nextButton=s,s.setAttribute("class",e),s.setAttribute("aria-hidden","true"),d._addBubbleEventListener(s,"click",function(){i._scrollNext()}),s.appendChild(t),this._elem.appendChild(s)},d.prototype._getContentParent=function(){var e=this._contentParent;return e||(e=this._contentContainer),e},d.prototype._measureContents=function(){var e=this._getContentElements(),t={w:0,h:0},i=[];if(e.length>0){var s,n=e,o=this._isHorizontal();s=this._contentContainer.offsetWidth;for(var r=0,a=null,l=0;l<n.length;l++){var h=n[l];if(1===h.nodeType){var d=h.offsetWidth,c=h.offsetHeight,u={w:d,h:c,id:h.id};if(o){var p=h.offsetLeft;this._contentParent||0!==p||(p=h.parentNode.offsetLeft),this._bRtl?u.start=s-(p+d):u.start=p,0===l&&(r=u.start),u.start-=r,t.w=u.start+d,t.h=Math.max(t.h,c),u.end=t.w-1}else{var m=h.offsetTop;this._contentParent||0!==m||(m=h.parentNode.offsetTop),u.start=m,t.w=Math.max(t.w,d),t.h=u.start+c,u.end=t.h-1}if(a&&a.end>=u.start){var _=a.end-(u.start-1);a.end-=_,o?a.w-=_:a.h-=_}i.push(u),a=u}}}return this._sizes=i,t},d.prototype._getSizes=function(){return this._sizes},d.prototype._showNextButton=function(){this._removeStyleClassNameFunc(this._nextButton,this._hiddenStyleClass),this._atEnd=!1},d.prototype._showPrevButton=function(){this._removeStyleClassNameFunc(this._prevButton,this._hiddenStyleClass),this._atStart=!1},d.prototype._hideNextButton=function(){this._addStyleClassNameFunc(this._nextButton,this._hiddenStyleClass),this._atEnd=!0},d.prototype._hidePrevButton=function(){this._addStyleClassNameFunc(this._prevButton,this._hiddenStyleClass),this._atStart=!0},d.prototype._getButtonSize=function(){var e=0;return"visible"===this._arrowVisibility&&(e=this._isHorizontal()?this._buttonWidth:this._buttonHeight),e},d.prototype._updateButtonVisibility=function(e){var t=this._getButtonSize(),i=this._getCurrScroll(),s=this._needsScroll();e<=this._minScroll?(this._atStart||(i-=t),this._hidePrevButton()):s&&(this._atStart&&(i+=t),this._showPrevButton()),e>=this._maxScroll?this._hideNextButton():s&&this._showNextButton(),this._setOverflowScroll(i)},d.prototype._setOverflowScroll=function(e){var t=this._overflowContainer;this._isHorizontal()?a.setScrollLeft(t,e):t.scrollTop=e},d.prototype._getCurrViewportSize=function(){var e=this._overflowContainer;return this._isHorizontal()?e.offsetWidth:e.offsetHeight},d.prototype._setCurrScroll=function(e,t){this._bScrolling||(this._bExternalScroll=!1,this._setCurrScrollHelper(e,t))},d.prototype._setCurrScrollHelper=function(e,t){if(!this._isEmpty()){this._bScrolling=!0,e=this._constrainScroll(e),this._updateButtonVisibility(e);var i=this._scrollFunc;if(t||!i||e===this._getCurrScroll())this._onScrollAnimEnd(this._bExternalScroll?this._getCurrScroll():e);else{this._busyStateResolveFunc=this._addBusyStateFunc("scrolling");var s=d,n=Math.abs(this._getCurrScroll()-e)/s._SCROLL_SPEED,o=this;i(this._overflowContainer,a.calculateScrollLeft(e),n,function(){o._onScrollAnimEnd(e),o._resolveBusyState()})}}},d.prototype._resolveBusyState=function(){this._busyStateResolveFunc&&(this._busyStateResolveFunc(),this._busyStateResolveFunc=null)},d.prototype._getCurrScroll=function(){var e=this._overflowContainer;return this._isHorizontal()?Math.round(Math.abs(e.scrollLeft)):Math.round(e.scrollTop)},d.prototype._needsScroll=function(){var e=this._contentContainer,t=this._overflowContainer;return this._isHorizontal()?e.offsetWidth>t.offsetWidth:e.offsetHeight>t.offsetHeight},d.prototype._constrainScroll=function(e){return!this._needsScroll()||e<this._minScroll?this._minScroll:e>this._maxScroll?this._maxScroll:e},d.prototype._handleMouseWheel=function(e){var t=this._bScrolling;if(this._needsScroll()&&!this._bScrolling){var i,s=d._getWheelDelta(e);s<0&&!this._atEnd?i=this._getCurrScroll()+Math.abs(s):s>0&&!this._atStart&&(i=this._getCurrScroll()-s),null!=i&&(t=!0,this._setCurrScroll(i,!0))}t&&(e.preventDefault(),e.stopPropagation())},d.prototype._handleTouchStart=function(e){var t=e.touches;this._needsScroll()&&!this._bScrolling&&1===t.length&&(this._bTouch=!0,this._firstTouch=t[0],this._touchLastCoord=this._isHorizontal()?this._firstTouch.pageX:this._firstTouch.pageY,this._touchStartScroll=this._getCurrScroll(),this._touchStartNextScroll=this._calcNextScroll(),this._touchStartPrevScroll=this._calcPrevScroll(),this._touchInitialNotAtEnd=!this._atEnd,this._touchInitialNotAtStart=!this._atStart,this._trackingPoints=[],this._addTrackingPoint(this._touchLastCoord),this._targetCoord=0)},d.prototype._handleTouchMove=function(e){var t=this._isHorizontal(),i=e.touches[0];this._touchCurrentCoord=t?i.pageX:i.pageY;var s=this._touchCurrentCoord-this._touchLastCoord,n=t&&this._bRtl?s>0:s<0,o=n&&this._touchInitialNotAtEnd||!n&&this._touchInitialNotAtStart;this._bTouch&&this._firstTouch.id===i.id&&o&&(this._addTrackingPoint(this._touchLastCoord),t&&this._bRtl?this._setCurrScroll(this._getCurrScroll()+s,!0):this._setCurrScroll(this._getCurrScroll()-s,!0),this._touchLastCoord=this._touchCurrentCoord,(this._touchInitialNotAtEnd&&this._atEnd||this._touchInitialNotAtStart&&this._atStart)&&(this._bTouch=!1),this._scrolledForThisTouch=!0),this._scrolledForThisTouch&&(e.preventDefault(),e.stopPropagation())},d.prototype._handleTouchEnd=function(e){this._bTouch=!1,this._scrolledForThisTouch=!1,null!=this._trackingPoints&&(this._addTrackingPoint(this._touchLastCoord),this._startDecelAnim())},d.prototype._addTrackingPoint=function(e){if(null!=this._trackingPoints){for(var t=Date.now();this._trackingPoints.length>0&&!(t-this._trackingPoints[0].time<=100);)this._trackingPoints.shift();this._trackingPoints.push({coord:e,time:t})}},d.prototype._startDecelAnim=function(){var e=this._trackingPoints[0],t=this._trackingPoints[this._trackingPoints.length-1],i=t.coord-e.coord,s=(t.time-e.time)/15;this._decVel=i/s||0,Math.abs(this._decVel)>1&&(this._decelerating=!0,requestAnimationFrame(this._stepDecelAnim.bind(this)))},d.prototype._stepDecelAnim=function(){if(this._decelerating){var e=d._TOUCH_SCROLL_FRICTION,t=d._TOUCH_SCROLL_STOP_THRESHOLD;this._decVel*=e,this._targetCoord+=this._decVel,Math.abs(this._decVel)>t?(this._isHorizontal()&&this._bRtl?this._setCurrScroll(this._getCurrScroll()+this._targetCoord,!0):this._setCurrScroll(this._getCurrScroll()-this._targetCoord,!0),requestAnimationFrame(this._stepDecelAnim.bind(this))):this._decelerating=!1}},d.prototype._handleScroll=function(e){this._bExternalScroll&&!this._bScrolling&&this._setCurrScrollHelper(this._getCurrScroll(),!0)},d.prototype._onScrollAnimEnd=function(e){this._setOverflowScroll(e),this._setScrollPositionProperty(e),this._bExternalScroll=!0,this._bScrolling=!1},d.prototype._scrollNext=function(){this._bScrolling||this._setCurrScroll(this._calcNextScroll(),!1)},d.prototype._scrollPrev=function(){this._bScrolling||this._setCurrScroll(this._calcPrevScroll(),!1)},d.prototype._calcNextScroll=function(){var e=this._calcNextVisibleItemIndex();return e===this._calcFirstVisibleItemIndex()?this._getCurrScroll()+this._getCurrViewportSize():this._calcStartScroll(e)},d.prototype._calcPrevScroll=function(){var e=this._calcPrevVisibleItemIndex(),t=0;return t=e===this._calcLastVisibleItemIndex()?this._getCurrScroll()-this._getCurrViewportSize():this._calcEndScroll(e),this._atEnd&&(t+=this._getButtonSize()),t<=this._getButtonSize()&&(t=this._minScroll),t},d.prototype._calcStartScroll=function(e){return this._getSizes()[e].start},d.prototype._calcEndScroll=function(e){return this._getSizes()[e].end-this._getCurrViewportSize()+1},d.prototype._calcFirstVisibleItemIndex=function(){var e=this._getCurrScroll(),t=this._calcItemIndex(e);return t<0?0:t},d.prototype._calcLastVisibleItemIndex=function(){var e=this._getCurrViewportSize(),t=this._getCurrScroll()+e-1,i=this._calcItemIndex(t),s=this._getSizes();return i<0?s.length-1:i},d.prototype._calcPrevVisibleItemIndex=function(){var e=this._getCurrScroll()-1,t=this._calcItemIndex(e);return t<0?0:t},d.prototype._calcNextVisibleItemIndex=function(){var e=this._getCurrViewportSize(),t=this._getCurrScroll()+e,i=this._calcItemIndex(t),s=this._getSizes();return i<0?s.length-1:i},d.prototype._calcItemIndex=function(e){for(var t=this._getSizes(),i=0;i<t.length;i++){if(e<=t[i].end)return i}return-1},d._SCROLL_SPEED=1.1,d._TOUCH_SCROLL_FRICTION=.7,d._TOUCH_SCROLL_STOP_THRESHOLD=.1,d._KEYBOARD_KEYS={_UP:"ArrowUp",_UP_IE:"Up",_UP_CODE:38,_DOWN:"ArrowDown",_DOWN_IE:"Down",_DOWN_CODE:40,_LEFT:"ArrowLeft",_LEFT_IE:"Left",_LEFT_CODE:37,_RIGHT:"ArrowRight",_RIGHT_IE:"Right",_RIGHT_CODE:39},function(){function l(e){var i=t("<div></div>");return i.text(e),i[0].innerHTML}e.__registerWidget("oj.ojConveyorBelt",t.oj.baseComponent,{defaultElement:"<div>",widgetEventPrefix:"oj",options:{orientation:"horizontal",arrowVisibility:"auto",contentParent:null,scrollPosition:0},_ComponentCreate:function(){this._super(),this.element.addClass("oj-conveyorbelt oj-component"),this.options.disabled&&n.warn("JET ConveyorBelt: 'disabled' property not supported"),this._setup()},refresh:function(){this._super();var e,t="rtl"===this._GetReadingDirection(),i=this._bRTL!==t;i||(e=this._cbCommon.getScroll()),this._destroyCBCommon(),this._setup(),i||this._cbCommon.setScroll(e,!0)},_NotifyShown:function(){if(this._super(),this._needsSetup)this._setup();else if(this._cbCommon){this._cbCommon.handleResize()}},_NotifyAttached:function(){if(this._super(),this._needsSetup)this._setup();else if(this._cbCommon){this._cbCommon.handleResize()}},_setup:function(){var e=this,i=this.element,n=this.options,o=n.orientation;if("vertical"===o?i.addClass("oj-conveyorbelt-vertical"):i.removeClass("oj-conveyorbelt-vertical"),this._canCalculateSizes()){if(this._needsSetup=null,this._bRTL="rtl"===this._GetReadingDirection(),!this._cbCommon){var h=null,c=null,u=null,p=null,m=null,_=l(this.getTranslatedString("tipArrowNext")),g=l(this.getTranslatedString("tipArrowPrevious"));"vertical"!==o?(h="oj-enabled oj-conveyorbelt-overflow-indicator oj-start oj-default",c="oj-enabled oj-conveyorbelt-overflow-indicator oj-end oj-default",u=this._createIcon("oj-conveyorbelt-overflow-icon oj-start",g),p=this._createIcon("oj-conveyorbelt-overflow-icon oj-end",_),m=this._animateScrollLeft.bind(this)):(h="oj-enabled oj-conveyorbelt-overflow-indicator oj-top oj-default",c="oj-enabled oj-conveyorbelt-overflow-indicator oj-bottom oj-default",u=this._createIcon("oj-conveyorbelt-overflow-icon oj-top",g),p=this._createIcon("oj-conveyorbelt-overflow-icon oj-bottom",_),m=this._animateScrollTop.bind(this));var f={};"auto"===n.arrowVisibility?f.arrowVisibility="phone"===r.getDeviceRenderMode()?"hidden":"visible":f.arrowVisibility=n.arrowVisibility,f.prevButtonStyleClass=h,f.nextButtonStyleClass=c,f.prevButtonIcon=u,f.nextButtonIcon=p;var v={overflowContainerStyleClass:"oj-conveyorbelt-overflow-container",contentContainerStyleClass:"oj-conveyorbelt-content-container",itemStyleClass:"oj-conveyorbelt-item",hiddenStyleClass:"oj-helper-hidden"},y={addResizeListener:function(e,t){a.addResizeListener(e,t,25)}};y.removeResizeListener=a.removeResizeListener,y.addStyleClassName=this._addStyleClassName,y.removeStyleClassName=this._removeStyleClassName,y.hasStyleClassName=this._hasStyleClassName,y.filterContentElements=function(t){return e._filterContentElements(t)},y.subtreeDetached=s.subtreeDetached,y.subtreeAttached=s.subtreeAttached,y.addBusyState=function(t){return e._addBusyState(t)},y.setScrollPositionProperty=function(t){e.option("scrollPosition",t,{_context:{internalSet:!0,writeback:!0}})},"enabled"!==r.getAutomationMode()&&(y.scrollFunc=m);var E=null;n.contentParent&&(E=t(n.contentParent)[0]),y.handleFocus=function(t){if(!e.element[0].isEqualNode(t.target)){var i;i=null!=E?E.children:e.element[0].getElementsByClassName("oj-conveyorbelt-item");for(var s=0;s<i.length;s++)if(i[s].isEqualNode(t.target)){e.scrollElementIntoView(i[s]);break}}},this._cbCommon=new d(i[0],{orientation:o,contentParent:E,bRtl:this._bRTL,scrollPosition:n.scrollPosition},f,y,v)}this._cbCommon.setup();for(var b=i.find(".oj-conveyorbelt-overflow-indicator"),S=0;S<b.length;S++)this._setupButtonMouseStyles(t(b[S]))}else this._needsSetup=!0},_destroy:function(){this._destroyCBCommon(),this.element.removeClass("oj-conveyorbelt oj-component oj-conveyorbelt-vertical"),this._super()},_setOption:function(e,t,i){var s=!1,o=this.options;switch(e){case"containerParent":case"arrowVisibility":s=!0;break;case"orientation":s=o.orientation!==t;break;case"scrollPosition":o.scrollPosition!==t&&this._cbCommon.setScroll(t,!0);break;case"disabled":n.warn("JET ConveyorBelt: 'disabled' property not supported")}s&&this._destroyCBCommon(),"scrollPosition"!==e&&this._super(e,t,i),s&&this._setup()},_destroyCBCommon:function(){var e=this._cbCommon;e&&(this.element.find(".oj-conveyorbelt-overflow-indicator").off(this.eventNamespace),e.destroy());this._cbCommon=null},_canCalculateSizes:function(){var e=document.createElement("div"),t=e.style;t.width="10px",t.height="10px",t["-webkit-flex"]="0 0 auto",t.flex="0 0 auto";var i=this.element[0];i.appendChild(e);var s=!1;try{s=e.offsetWidth>0&&e.offsetHeight>0}catch(e){}return i.removeChild(e),s},_setupButtonMouseStyles:function(e){this._AddHoverable({element:e,afterToggle:function(t){"mouseenter"===t?e.removeClass("oj-default"):"mouseleave"===t&&e.addClass("oj-default")}}),this._AddActiveable({element:e,afterToggle:function(t){"mousedown"===t||"touchstart"===t||"mouseenter"===t?e.removeClass("oj-default"):"mouseup"!==t&&"touchend"!==t&&"touchcancel"!==t&&"mouseleave"!==t||e.addClass("oj-default")}})},_createIcon:function(e,t){var i=document.createElement("span");i.setAttribute("class","oj-component-icon "+e);var s=document.createElement("div");return s.setAttribute("class","oj-conveyorbelt-overflow-button"),s.setAttribute("role","button"),s.appendChild(i),s.setAttribute("title",t),s},_animateScrollLeft:function(e,i,s,n){var o={};o.scrollLeft=i,t(e).animate(o,s,"swing",n)},_animateScrollTop:function(e,i,s,n){var o={};o.scrollTop=i,t(e).animate(o,s,"swing",n)},_addStyleClassName:function(e,i){t(e).addClass(i)},_removeStyleClassName:function(e,i){t(e).removeClass(i)},_hasStyleClassName:function(e,i){return t(e).hasClass(i)},_filterContentElements:function(e){for(var t=[],i=0;i<e.length;i++){var s=e[i];this._hasStyleClassName(s,"oj-helper-detect-expansion")||this._hasStyleClassName(s,"oj-helper-detect-contraction")||t.push(s)}return t},_addBusyState:function(e){var t=this.element,i=o.getContext(t[0]).getBusyContext(),s="ConveyorBelt";s+=" (id='"+t.attr("id")+"')";var n={description:s+=": "+e};return i.addBusyState(n)},getNodeBySubId:function(e){if(null==e)return this.element[0];var t=e.subId;return"oj-conveyorbelt-start-overflow-indicator"===t?this.widget().find(".oj-conveyorbelt-overflow-indicator.oj-start")[0]:"oj-conveyorbelt-end-overflow-indicator"===t?this.widget().find(".oj-conveyorbelt-overflow-indicator.oj-end")[0]:"oj-conveyorbelt-top-overflow-indicator"===t?this.widget().find(".oj-conveyorbelt-overflow-indicator.oj-top")[0]:"oj-conveyorbelt-bottom-overflow-indicator"===t?this.widget().find(".oj-conveyorbelt-overflow-indicator.oj-bottom")[0]:null},getSubIdByNode:function(e){for(var t=this.getNodeBySubId({subId:"oj-conveyorbelt-start-overflow-indicator"}),i=this.getNodeBySubId({subId:"oj-conveyorbelt-end-overflow-indicator"}),s=this.getNodeBySubId({subId:"oj-conveyorbelt-top-overflow-indicator"}),n=this.getNodeBySubId({subId:"oj-conveyorbelt-bottom-overflow-indicator"}),o=e,r=this.element[0];o&&o!==r;){if(o===t)return{subId:"oj-conveyorbelt-start-overflow-indicator"};if(o===i)return{subId:"oj-conveyorbelt-end-overflow-indicator"};if(o===s)return{subId:"oj-conveyorbelt-top-overflow-indicator"};if(o===n)return{subId:"oj-conveyorbelt-bottom-overflow-indicator"};o=o.parentElement}return null},scrollElementIntoView:function(e){var t=this._cbCommon.getScroll(),i=this._cbCommon._getCurrViewportSize(),s=this._cbCommon._contentContainer.offsetWidth,n=e.offsetLeft;this._cbCommon._contentParent||0!==n||(n=e.parentNode.offsetLeft),this._cbCommon._bRtl&&(n=s-(n+e.offsetWidth));var o=e.offsetTop;if(this._cbCommon._contentParent||0!==o||(o=e.parentNode.offsetTop),this._cbCommon._isHorizontal()){if(n+e.offsetWidth<=t+i&&n>=t&&n>this._cbCommon._getButtonSize())return}else if(o+e.offsetHeight<=t+i&&o>=t&&o>this._cbCommon._getButtonSize())return;var r=this._cbCommon._contentContainer,a=d,l=this._cbCommon._isHorizontal()?a._getElemInnerWidth(this.element[0]):a._getElemInnerHeight(this.element[0]);this._cbCommon._minScroll=0,this._cbCommon._maxScroll=this._cbCommon._isHorizontal()?r.offsetWidth-l+this._cbCommon._buttonWidth:r.offsetHeight-l+this._cbCommon._buttonHeight,this._cbCommon._maxScroll<0&&(this._cbCommon._maxScroll=0);var h=0;(h=this._cbCommon._isHorizontal()?n:o)<=this._cbCommon._getButtonSize()&&(h=this._cbCommon._minScroll),this._cbCommon._setCurrScroll(h,!0)}}),s.setDefaultOptions({ojConveyorBelt:{arrowVisibility:s.createDynamicPropertyGetter(function(){return i.getCachedCSSVarValues(["--oj-private-conveyor-belt-global-arrow-visibility-default"])[0]})}})}()}),define("ojs/ojcollapsible",["ojs/ojcore-base","jquery","ojs/ojcomponentcore","ojs/ojcontext","ojs/ojdomutils","ojs/ojcustomelement","ojs/ojanimation","ojs/ojcustomelement-utils"],function(e,t,i,s,n,o,r,a){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s;var l={properties:{disabled:{type:"boolean",value:!1},expandArea:{type:"string",enumValues:["disclosureIcon","header"],value:"header"},expanded:{type:"boolean",writeback:!0,value:!1,extension:{webelement:{exceptionStatus:[{type:"deprecated",since:"13.0.0",description:"Use doCollapse/doExpand instead"}]}}},translations:{type:"object",value:{}}},methods:{getProperty:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojBeforeCollapse:{},ojBeforeExpand:{},ojCollapse:{},ojExpand:{}},extension:{}};l.extension._WIDGET_NAME="ojCollapsible",l.extension._CONTROLS_SUBTREE_HIDDEN=!0,e.CustomElementBridge.register("oj-collapsible",{metadata:l}),function(){var o=0,r="oj-collapsible-open-icon",l="oj-collapsible-close-icon";const h="oj-collapsible-header",d="oj-collapsible-transition";e.__registerWidget("oj.ojCollapsible",t.oj.baseComponent,{widgetEventPrefix:"oj",options:{expanded:!1,disabled:!1,expandOn:"click",expandArea:"header",beforeExpand:null,expand:null,beforeCollapse:null,collapse:null},_ComponentCreate:function(){this._super(),this.element.addClass("oj-collapsible oj-component"),this._processPanels(),this._refresh(),this._initialRender=!0;var e=this.element[0];this._expandCollapseHandler(this._createEventObject(e,this.options.expanded?"ojexpand":"ojcollapse")),this._initialRender=void 0},GetFocusElement:function(){return this._isDisabled()?this.element[0]:this._getCollapsibleIcon()[0]},_createEventObject:function(e,i){return{type:i,target:e,currentTarget:e,preventDefault:t.noop}},_NotifyContextMenuGesture:function(e,t,i){this._OpenContextMenu(t,i,{launcher:this._getCollapsibleIcon().first()})},_createIcons:function(){var e=this.options.expanded?r:l;(this._isDisabled()?t("<span>"):t('<a tabindex="0">')).addClass("oj-component-icon oj-clickable-icon-nocontext oj-collapsible-header-icon "+e).attr("aria-labelledby",this.header.attr("id")).prependTo(this.header)},_destroyIcons:function(){this.header.children(".oj-collapsible-header-icon").remove()},_destroy:function(){this._resolveBusyContext(),this._cleanup(),this.element.removeClass("oj-collapsible oj-component oj-expanded oj-collapsed oj-disabled"),this._isDisabled()&&this._findFocusables(this.header).removeAttr("tabIndex"),this.header.removeClass(h).each(this._removeIdAttr.bind(this)),this._findFirstFocusableInHeader().removeAttr("role").removeAttr("aria-controls").removeAttr("aria-expanded").removeAttr("aria-disabled"),this._destroyIcons(),this.content.css("display","").removeAttr("aria-hidden").removeAttr("tabIndex").removeClass("oj-component-content oj-collapsible-content").each(this._removeIdAttr.bind(this))},_cleanup:function(){this._tearDownEvents(),this.content&&(n.unwrap(this.content),this.wrapper=null)},_isDisabled:function(){return this.element.hasClass("oj-disabled")},_getExpandAreaSelector:function(){return"header"===this.options.expandArea?"> .oj-collapsible-header":"> .oj-collapsible-header > .oj-collapsible-header-icon"},_getCollapsibleIcon:function(){return this.header.find(".oj-collapsible-header-icon")},_setOption:function(e,t,i){if("expanded"!==e){if("disabled"===e)return this._super(e,t,i),void this.refresh();"expandOn"===e||"expandArea"===e?(this._tearDownEvents(),this._super(e,t,i),this._setupEvents()):this._super(e,t,i)}else{if(t===this.options.expanded)return;t?this.expand(!0):this.collapse(!0)}},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode;switch(e.keyCode){case i.SPACE:case i.ENTER:this._toggleHandler(e)}}},refresh:function(){this._super(),this._cleanup(),this._processPanels(),this._destroyIcons(),this._refresh()},_processHeaderSlots:function(){var e,i=this.element[0],s=!1,n=a.CustomElementUtils.getSlotMap(i).header;if(n&&n.length)if(1===n.length)e=n[0];else{var o=t("<span slot='header'></span>");e=o[0];for(var r=0;r<n.length;r++)e.appendChild(n[r]);o.children().attr("slot",""),s=!0}else e=t("<span slot='header'></span>")[0],s=!0;return(s||0!==this.element.children().index(e))&&i.insertBefore(e,i.firstChild),t(e)},_processDefaultSlots:function(){var e,i=this.element[0],s=a.CustomElementUtils.getSlotMap(i)[""];if(s&&1===s.length)e=s[0];else{if(e=t("<div></div>")[0],s&&s.length)for(var n=0;n<s.length;n++)e.appendChild(s[n]);i.appendChild(e)}return t(e)},_processPanels:function(){this._IsCustomElement()?this.header=this._processHeaderSlots():this.header=this.element.children(":first-child"),this.header.addClass(h),this._IsCustomElement()?this.content=this._processDefaultSlots():this.content=this.header.next(),this.content.addClass("oj-collapsible-content oj-component-content"),this.content.wrap("<div></div>"),this.wrapper=this.content.parent().addClass("oj-collapsible-wrapper"),this.options.disabled&&this.element.addClass("oj-disabled"),this._isDisabled()&&this._findFocusables(this.header).attr("tabIndex",-1)},_refresh:function(){var e=this.header,t=this.content,i=this.options,s=this.element.attr("id");s||(s=o+=1);var n="oj-collapsible-"+s;this.collapsibleId=n;var r=e.attr("id"),a=t.attr("id");r||(r=n+"-header",e.attr("id",r)),a||(a=n+"-content",t.attr("id",a)),this._createIcons();var l=this._findFirstFocusableInHeader();l.attr("role","button").attr("aria-controls",a).attr("aria-expanded",i.expanded),this._isDisabled()&&l.attr("aria-disabled","true"),i.expanded?t.removeAttr("aria-hidden"):(this.wrapper.css({"max-height":0,"overflow-y":"hidden",display:"none"}),t.attr("aria-hidden","true")),this._setupEvents()},_setupEvents:function(){var e={keydown:this._keydown},i=this.options.expandOn;if(i){var s=this;t.each(i.split(" "),function(t,i){n.isValidIdentifier(i)&&(e[i]=s._toggleHandler)})}var o=this.element.find(this._getExpandAreaSelector());this._on(o,e),this._on(this.wrapper,{transitionend:this._transitionEndHandler,webkitTransitionEnd:this._transitionEndHandler}),this._isDisabled()||(this._on(this.element,{ojfocus:this._focusHandler,ojfocusout:this._focusHandler}),this._focusable({element:this._getCollapsibleIcon(),applyHighlight:!0}),this._AddHoverable(o),this._AddActiveable(o))},_tearDownEvents:function(){var e=this.element.find(this._getExpandAreaSelector());this._RemoveHoverable(e),this._RemoveActiveable(e),this._off(e),this.wrapper&&this._off(this.wrapper),this._off(this.element.add(this.content))},_toggleHandler:function(e){if(!this._isDisabled()&&!e.isDefaultPrevented()){for(var i=t(e.target);i.length&&i[0]!==this.header[0];i=i.parent()){if("disabled"===i.attr("data-oj-clickthrough"))return;if(i.hasClass("oj-clickthrough-disabled"))return}this.options.expanded?this.collapse(!0,e):this.expand(!0,e),e.preventDefault(),e.stopPropagation(),this._getCollapsibleIcon().focus()}},_calcEffectTime:function(e){for(var t=e.css("transitionProperty"),i=e.css("transitionDelay"),s=e.css("transitionDuration"),n=t.split(","),o=i.split(","),r=s.split(","),a=n.length,l=o.length,h=r.length,d=0,c=0;c<a;c++){var u=r[c%h],p=u.indexOf("ms")>-1?parseFloat(u):1e3*parseFloat(u);if(p>0){var m=o[c%l],_=m.indexOf("ms")>-1?parseFloat(m):1e3*parseFloat(m);d=Math.max(d,_+p)}}return d+100},_resolveTransition:function(e){var t=this;this._transitionTimer=setTimeout(function(){t._transitionEndHandler()},t._calcEffectTime(e))},_expandCollapseHandler:function(e){if((!this._isDisabled()||this._initialRender)&&e.target===this.element[0]&&(this._initialRender||!e.isDefaultPrevented||!e.isDefaultPrevented())){var t=this.element,i=this.content,n=this.wrapper,o="ojexpand"===e.type,a=this;if(e.preventDefault(),this._initialRender||this._changeExpandedOption(o),this._getCollapsibleIcon().toggleClass(r,o).toggleClass(l,!o||!1).end(),this._initialRender||document.hidden||this.element.hasClass("oj-collapsible-skip-animation"))o||(n.css("max-height",0),n.hide()),a._afterExpandCollapse(o,e);else{if(n.contentHeight=n.outerHeight(),!this._animationResolve){var h=s.getContext(t[0]).getBusyContext();this._animationResolve=h.addBusyState({description:"The collapsible id='"+this.element.attr("id")+"' is animating."})}this._transitionEnded=!1,o?(n.show(),setTimeout(function(){n.contentHeight+=i.outerHeight(),n.addClass(d).css({"max-height":n.contentHeight}),a._resolveTransition(n)},0)):(n.removeClass(d),n.css({"max-height":n.contentHeight,"overflow-y":"hidden"}),0===n.contentHeight?a._transitionEndHandler():setTimeout(function(){n.addClass(d).css({"max-height":0}),a._resolveTransition(n)},20))}}},_focusHandler:function(e){this._isDisabled()||("ojfocusout"===e.type?(this._findFirstFocusableInHeader().attr("tabIndex",-1),e.preventDefault(),e.stopPropagation()):"ojfocus"===e.type&&(this._findFirstFocusableInHeader().attr("tabIndex",0).focus(),e.preventDefault(),e.stopPropagation()))},_findFirstFocusableInHeader:function(){return this._findFocusables(this.header).first()},_findFocusables:function(e){return this._isDisabled()?e.find("span"):e.find("a,:input")},expand:function(e,t){if(!this._isDisabled()){var i={header:this.header,content:this.content};e&&!1===this._trigger("beforeExpand",t,i)||this._expandCollapseHandler(this._createEventObject(this.element[0],"ojexpand"))}},collapse:function(e,t){if(!this._isDisabled()){var i={header:this.header,content:this.content};e&&!1===this._trigger("beforeCollapse",t,i)||this._expandCollapseHandler(this._createEventObject(this.element[0],"ojcollapse"))}},_transitionEndHandler:function(e){if(!(this._isDisabled()||e&&e.target!==this.element[0])){var t=!1;e&&e.originalEvent&&(t="max-height"===e.originalEvent.propertyName),t&&this._transitionTimer&&(clearTimeout(this._transitionTimer),this._transitionTimer=void 0),e&&(e.preventDefault(),e.stopImmediatePropagation()),this._transitionEnded||(!t&&e||(this._transitionEnded=!0),this.wrapper&&(this.options.expanded?this.wrapper.css({"max-height":9999,"overflow-y":""}):this.wrapper.hide(),this.wrapper.removeClass(d),this._afterExpandCollapse(this.options.expanded,e)))}},_resolveBusyContext:function(){this._animationResolve&&(this._animationResolve(),this._animationResolve=null)},_afterExpandCollapse:function(e,t){var s=this.element,n=this.wrapper;e?(s.removeClass("oj-collapsed"),s.addClass("oj-expanded"),i.subtreeShown(n[0])):(s.removeClass("oj-expanded"),s.addClass("oj-collapsed"),i.subtreeHidden(n[0])),e?this.content.removeAttr("aria-hidden"):this.content.attr("aria-hidden","true"),this._findFirstFocusableInHeader().attr("aria-expanded",e),this._resolveBusyContext();var o={header:this.header,content:this.content};this._initialRender||(e?this._trigger("expand",t,o):this._trigger("collapse",t,o))},_changeExpandedOption:function(e){this.option("expanded",e,{_context:{writeback:!0,internalSet:!0}})},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;switch(e.subId){case"oj-collapsible-content":return this.content[0];case h:return this.header[0];case"oj-collapsible-disclosure":case"oj-collapsible-header-icon":return this._getCollapsibleIcon()[0]}return null},getSubIdByNode:function(e){for(var t=this.getNodeBySubId({subId:"oj-collapsible-disclosure"}),i=e;i;){if(i===this.content[0])return{subId:"oj-collapsible-content"};if(i===this.header[0])return{subId:h};if(i===t)return{subId:"oj-collapsible-disclosure"};i=i.parentElement}return null},_removeIdAttr:function(e,t){/^oj-collapsible/.test(t.id)&&this.removeAttribute("id")}})}()}),define("ojs/ojaccordion",["ojs/ojcore-base","jquery","ojs/ojlogger","ojs/ojcomponentcore","ojs/ojcollapsible"],function(e,t,i,s,n){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var o={properties:{expanded:{type:"Array<string>|Array<number>|Array<Object>",writeback:!0},multiple:{type:"boolean",value:!1},translations:{type:"object",value:{}}},methods:{getProperty:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojBeforeCollapse:{},ojBeforeExpand:{},ojCollapse:{},ojExpand:{}},extension:{}};o.extension._WIDGET_NAME="ojAccordion",o.extension._TRACK_CHILDREN="nearestCustomElement",e.CustomElementBridge.register("oj-accordion",{metadata:o}),
/**
   * @preserve Copyright 2013 jQuery Foundation and other contributors
   * Released under the MIT license.
   * http://jquery.org/license
   */
function(){const s="oj-accordion-collapsible";e.__registerWidget("oj.ojAccordion",t.oj.baseComponent,{widgetEventPrefix:"oj",options:{multiple:!1,expanded:null,beforeExpand:null,expand:null,beforeCollapse:null,collapse:null},_ComponentCreate:function(){this._super(),this.element.addClass("oj-accordion oj-component").attr("role","group"),this.options.expanded=this._expandedIndexToId(this.options.expanded),this._refresh()},_NotifyContextMenuGesture:function(e,t,i){this._OpenContextMenu(t,i,{launcher:this.element.find(".oj-collapsible-header-icon").first()})},_destroy:function(){this.element.removeClass("oj-accordion oj-component").removeAttr("role"),this.element.children().removeClass(s),this.element.children(".oj-accordion-created").removeClass("oj-accordion-created").ojCollapsible("destroy")},_setOption:function(e,t,i){if("multiple"===e)!t&&this.options.multiple&&this.element.children(".oj-expanded").first().siblings(".oj-collapsible").ojCollapsible("collapse",!1);else if("expanded"===e)return void this._setExpandedOption(t);this._super(e,t,i)},refresh:function(){this._super(),this._refresh()},_refresh:function(){this._makeCollapsible(),this._internalSetExpanded=!0,this._setExpandedOption(this.options.expanded),this._internalSetExpanded=!1,this._setupEvents()},_makeCollapsible:function(){this.collapsibles=this.element.children().not("oj-menu"),this._IsCustomElement()?this.collapsibles.not("oj-collapsible").ojCollapsible({expandArea:"header"}).addClass("oj-accordion-created").attr("data-oj-internal",""):(this.element.children(":oj-collapsible").each(function(){t(this).ojCollapsible("option","expandArea","header")}),this.collapsibles.not(":oj-ojCollapsible").ojCollapsible({expandArea:"header"}).addClass("oj-accordion-created").attr("data-oj-internal","")),this.collapsibles.addClass(s)},_setupEvents:function(){var e;e=this._IsCustomElement()?{keydown:this._keydown,ojBeforeExpand:this._beforeExpandHandler,ojExpand:this._expandHandler,ojBeforeCollapse:this._beforeCollapseHandler,ojCollapse:this._collapseHandler}:{keydown:this._keydown,ojbeforeexpand:this._beforeExpandHandler,ojexpand:this._expandHandler,ojbeforecollapse:this._beforeCollapseHandler,ojcollapse:this._collapseHandler},this._off(this.collapsibles),this._on(this.collapsibles,e)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey&&(t(e.target).hasClass("oj-collapsible-header")||t(e.target).hasClass("oj-collapsible-header-icon"))){var i=t.ui.keyCode,s=this.collapsibles.not(".oj-disabled"),n=s.length,o=t(e.target).closest(".oj-collapsible"),r=s.index(o),a=!1;if(r>=0)switch(e.keyCode){case i.RIGHT:case i.DOWN:a=s[(r+1)%n];break;case i.LEFT:case i.UP:a=s[(r-1+n)%n];break;case i.HOME:a=s[0];break;case i.END:a=s[n-1]}a&&(o&&t(o).trigger("ojfocusout"),t(a).trigger("ojfocus"),e.preventDefault())}},_findTargetSiblings:function(e){if(!this.options.multiple){var i=t(e.target).closest(".oj-collapsible");if(i.parent().is(":oj-ojAccordion"))return i.siblings(".oj-collapsible.oj-expanded").map(function(){return t(this).data("oj-ojCollapsible")})}return t()},_beforeExpandHandler:function(e,i){if(!this._isTargetMyCollapsible(e))return!0;var s;this._expandTarget=t(e.target);var n=null;if(this._findTargetSiblings(e).each(function(){var t={header:(n=this.element).find(".oj-collapsible-header"),content:n.find(".oj-collapsible-content")};return(s=this._trigger("beforeCollapse",e,t))||(this._expandTarget=null),s}),!this.options.multiple){var o=this._initEventData(n,this._expandTarget);s=this._trigger("beforeExpand",e,o)}var r=this;return s&&this._findTargetSiblings(e).each(function(){this.collapse(!1,e,i),r._collapsedCollapsible=this.widget()}),s},_expandHandler:function(e,i){var s=null;if(this._collapsedCollapsible&&(s=this._collapsedCollapsible,this._collapsedCollapsible=null),this._isTargetMyCollapsible(e)&&!this._duringSetExpandedOption){var n,o=this;this._findTargetSiblings(e).each(function(){this.collapse(!1,e,i),n=o._initEventData(this.element,t(e.target))}),n||(n=o._initEventData(s,t(e.target))),this.options.multiple||this._trigger("expand",e,n),this._updateExpanded(),this._expandTarget=null}},_beforeCollapseHandler:function(e,t){var i=t;return!(this._isTargetMyCollapsible(e)&&!this.options.multiple)||(!i&&e.originalEvent instanceof CustomEvent&&(i=e.originalEvent.detail),this._trigger("beforeCollapse",e,this._initCollapseEventData(e,i)))},_collapseHandler:function(e,t){var i=t;if(!this._duringSetExpandedOption&&this._isTargetMyCollapsible(e)){!i&&e.originalEvent instanceof CustomEvent&&(i=e.originalEvent.detail);var s=this._initCollapseEventData(e,i);this.options.multiple||this._trigger("collapse",e,s),this._updateExpanded()}},_initEventData:function(e,t){return{fromCollapsible:e,toCollapsible:t}},_initCollapseEventData:function(e,i){var s;return i.toCollapsible?s=i:e.originalEvent&&e.originalEvent.target&&(s=this._initEventData(t(e.target),this._expandTarget)),!s&&this._expandTarget&&(s=this._initEventData(t(e.target),this._expandTarget)),s},_isTargetMyCollapsible:function(e){return t(e.target).is(this.collapsibles)},_updateExpanded:function(){var i,s,n=[];this.collapsibles.each(function(e){("oj-collapsible"===this.tagName.toLowerCase()?this.expanded:t(this).ojCollapsible("option","expanded"))&&(s={},(i=t(this).attr("id"))&&(s.id=i),s.index=e,n.push(s))}),this.options.expanded&&e.Object._compareArrayIdIndexObject(n,this.options.expanded)||this.option("expanded",n,{_context:{internalSet:!0,writeback:!0}})},_expandedIndexToId:function(e){if(Array.isArray(e)){for(var i,s=[],n=[],o=0;o<e.length;o++){var r=e[o];"number"==typeof r||"string"==typeof r?n.push(r):"number"==typeof r.index?n.push(r.index):"string"==typeof r.id&&n.push(r.id)}return this.element.children().each(function(e){(i=t(this).attr("id"))?-1===n.indexOf(i)&&-1===n.indexOf(e)||s.push({id:i,index:e}):-1!==n.indexOf(e)&&s.push({index:e})}),!this.options.multiple&&s.length>1&&(s=[s[s.length-1]]),s}return null},_setExpandedOption:function(e){var s=e;if(this._internalSetExpanded||(s=this._expandedIndexToId(s)),s){var n,o,r,a,l=this,h=0;this.collapsibles.each(function(e){n=t(this),o=n.attr("id"),r=!1,(a=s[h])&&(o?o===a.id&&(r=!0):e===a.index&&(r=!0),r&&(h+=1));var d="oj-collapsible"===this.tagName.toLowerCase();(d?this.expanded:n.ojCollapsible("option","expanded"))!==r&&(i.warn("JET Accordion: override collapsible "+e+" expanded setting"),l._duringSetExpandedOption=!0,d?this.expanded=r:n.ojCollapsible("option","expanded",r),l._duringSetExpandedOption=!1)})}this._updateExpanded()},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var i=e.subId,n=e.index;if("number"!=typeof n||n<0||n>=this.collapsibles.length)return null;var o=this.collapsibles[n];switch(i){case"oj-accordion-content":i="oj-collapsible-content";break;case"oj-accordion-header":i="oj-collapsible-header";break;case"oj-accordion-disclosure":case"oj-accordion-header-icon":i="oj-collapsible-disclosure";break;case s:return o;default:return null}return t(o).ojCollapsible("getNodeBySubId",{subId:i})},getSubIdByNode:function(e){for(var i=-1,n=e;n&&-1===(i=Array.prototype.indexOf.call(this.collapsibles,n));)n=n.parentElement;var o=null;if(-1!==i){var r=t(this.collapsibles[i]).ojCollapsible("getSubIdByNode",e);switch((r=r||{}).subId){case"oj-collapsible-content":o="oj-accordion-content";break;case"oj-collapsible-header":o="oj-accordion-header";break;case"oj-collapsible-disclosure":case"oj-collapsible-header-icon":o="oj-accordion-disclosure";break;default:o=s}}return o?{subId:o,index:i}:null},_CompareOptionValues:function(t,i,s){return"expanded"===t?e.Object.compareValues(i,s):this._super(t,i,s)}})}()}),define("ojs/ojprogress",["ojs/ojcore-base","ojs/ojcomponentcore","ojs/ojcore","jquery"],function(e,t,i,s){"use strict";var n;e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,(n={properties:{max:{type:"number",value:100},translations:{type:"object",value:{},properties:{ariaIndeterminateProgressText:{type:"string"}}},type:{type:"string",enumValues:["bar","circle"],value:"bar"},value:{type:"number",writeback:!0,value:0}},methods:{getProperty:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}}).extension._WIDGET_NAME="ojProgressbar",e.CustomElementBridge.register("oj-progress",{metadata:n}),i.__registerWidget("oj.ojProgressbar",s.oj.baseComponent,{version:"1.0.0",defaultElement:"<div>",widgetEventPrefix:"oj",options:{max:100,value:0,type:"bar",disabled:!1},min:0,_indeterminate:!1,_ComponentCreate:function(){this._super(),this.options.value=this._constrainedValue(),this.oldValue=this.options.value,this.element.attr({role:"progressbar","aria-valuemin":this.min}),this.element.addClass("oj-component"),this._setUpProgressType()},_setUpProgressType:function(){"circle"===this.options.type?(this.element.addClass("oj-progress-circle"),this._setupCircleSVG()):(this.element.addClass("oj-progress-bar"),this.valueDiv=s("<div class='oj-progress-bar-value'></div>").appendTo(this.element)),this._refreshValue()},_InitOptions:function(e,t){var i=this.element;if(this._super(e,t),void 0===t.max){var s=i.attr("max")||void 0;null!=s&&(this.options.max=s)}},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this._indeterminate=-1===e,"number"!=typeof e&&(e=isNaN(e)?0:Number(e)),this._indeterminate?-1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e,t){var i=e.value;delete e.value,this._super(e,t),this.options.disabled||(this.options.value=this._constrainedValue(i),this._refreshValue())},_setupCircleSVG:function(){if(this.svg&&this.svg.remove(),!this._indeterminate){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg"),i=document.createElementNS(e,"circle"),n=document.createElementNS(e,"circle"),o=.5*Math.min(this.element.outerWidth(),this.element.outerHeight());t.setAttribute("width",2*o),t.setAttribute("height",2*o),t.setAttribute("class","oj-progress-circle-transform"),i.setAttribute("r",.9*o),i.setAttribute("cx",o),i.setAttribute("cy",o),i.setAttribute("class","oj-progress-circle-base"),n.setAttribute("r",.9*o),n.setAttribute("cx",o),n.setAttribute("cy",o),n.setAttribute("class","oj-progress-circle-base oj-progress-circle-value");var r=2*o*.9*Math.PI,a=r-this._percentage()/100*r;n.style.strokeDasharray=r.toString(),n.style.strokeDashoffset=a,t.appendChild(i),t.appendChild(n),this.svg=s(t),this.element[0].appendChild(t)}},_setOption:function(e,t,i){"max"===e&&(t=Math.max(this.min,t)),"type"===e&&("circle"===this.options.type?(this.element.removeClass("oj-progress-circle"),this.svg&&this.svg.remove()):(this.element.removeClass("oj-progress-bar"),this.valueDiv.remove()),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this._super(e,t,i),"type"===e&&this._setUpProgressType()},_percentage:function(){return Math.min(this._indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min),100)},_refreshValue:function(){var e=this.options.value,t=this._percentage(),i="circle"===this.options.type;if(i?this._setupCircleSVG():(this.valueDiv.toggle(this._indeterminate||e>this.min).width(t.toFixed(0)+"%"),this.element.toggleClass("oj-progress-bar-indeterminate",this._indeterminate)),this._indeterminate){if(this.element.attr({"aria-valuetext":this.getTranslatedString("ariaIndeterminateProgressText")}),this.element.removeAttr("aria-valuenow"),this.element.removeAttr("aria-valuemin"),this.element.removeAttr("aria-valuemax"),!this.overlayDiv){if(i){this.overlayDiv=s("<div class='oj-progress-circle-overlay'></div>").appendTo(this.element);var n=Math.min(this.element.outerWidth(),this.element.outerHeight());this.overlayDiv.css("width",n),this.overlayDiv.css("height",n)}else this.overlayDiv=s("<div class='oj-progress-bar-overlay'></div>").appendTo(this.valueDiv);this.overlayDiv.addClass("oj-indeterminate")}}else this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)},_destroy:function(){"circle"===this.options.type?(this.element.removeClass("oj-progress-circle oj-component"),this.svg&&this.svg.remove()):(this.element.removeClass("oj-progress-bar oj-component"),this.valueDiv.remove(),this._indeterminate&&this.element.removeClass("oj-progress-bar-indeterminate")),this.element.removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.overlayDiv&&this.overlayDiv.remove(),this._super()}})}),define("ojs/ojprogressbar",["ojs/ojprogress"],function(e){}),define("ojs/ojprogress-bar",["exports","preact/jsx-runtime","ojs/ojvcomponent","preact","ojs/ojtranslation"],function(e,t,i,s,n){"use strict";var o=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};e.ProgressBar=class extends s.Component{render(e){return-1===e.value?this._renderIndeterminateBar(e):this._renderDeterminateBar(e)}_renderDeterminateBar(e){let s=e.max,n=e.value;s<0&&(s=0),n<0&&(n=0);const o=0===s?0:n>s?1:n/s;return t.jsx(i.Root,Object.assign({class:"oj-progress-bar",role:"progressbar","aria-valuemin":"0","aria-valuemax":String(s),"aria-valuenow":String(n)},{children:t.jsx("div",Object.assign({class:"oj-progress-bar-track"},{children:t.jsx("div",{class:"oj-progress-bar-value",style:{width:100*o+"%"}})}))}))}_renderIndeterminateBar(e){return t.jsx(i.Root,Object.assign({class:"oj-progress-bar",role:"progressbar","aria-valuetext":n.getTranslatedString("oj-ojProgressbar.ariaIndeterminateProgressText")},{children:t.jsx("div",Object.assign({class:"oj-progress-bar-track"},{children:t.jsx("div",{class:"oj-progress-bar-value oj-progress-bar-indeterminate"})}))}))}},e.ProgressBar.defaultProps={max:100,value:0},e.ProgressBar.metadata={properties:{max:{type:"number"},value:{type:"number"}}},e.ProgressBar=o([i.customElement("oj-progress-bar")],e.ProgressBar),Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojprogress-circle",["exports","preact/jsx-runtime","ojs/ojvcomponent","preact","ojs/ojtranslation"],function(e,t,i,s,n){"use strict";var o=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};e.ProgressCircle=class extends s.Component{render(e){return-1===e.value?this._renderIndeterminateCircle(e):this._renderDeterminateCircle(e)}_renderIndeterminateCircle(e){return t.jsx(i.Root,Object.assign({class:"oj-progress-circle oj-progress-circle-"+e.size,role:"progressbar","aria-valuetext":n.getTranslatedString("oj-ojProgressbar.ariaIndeterminateProgressText")},{children:t.jsx("div",Object.assign({class:"oj-progress-circle-indeterminate"},{children:t.jsx("div",{class:"oj-progress-circle-indeterminate-inner"})}))}))}_renderDeterminateCircle(e){let s=e.max,n=e.value;s<0&&(s=0),n<0&&-1!==n&&(n=0);const o=0===s?0:n>s?1:n/s,r=this._getClipPath(o);return t.jsxs(i.Root,Object.assign({class:"oj-progress-circle oj-progress-circle-"+e.size,role:"progressbar","aria-valuemin":"0","aria-valuemax":s,"aria-valuenow":n},{children:[t.jsx("div",{class:"oj-progress-circle-tracker"}),t.jsx("div",{class:"oj-progress-circle-value",style:{clipPath:r}})]}))}_getClipPath(e){let t;return e<.125?(t=this._calculateTangent(e)+50,`polygon(50% 0, ${t}% 0, 50% 50%)`):e<.375?(t=e<.25?50-this._calculateTangent(.25-e):this._calculateTangent(e-.25)+50,`polygon(50% 0, 100% 0, 100% ${t}%, 50% 50%)`):e<.625?(t=e<.5?50+this._calculateTangent(.5-e):50-this._calculateTangent(e-.5),`polygon(50% 0, 100% 0, 100% 100%, ${t}% 100%, 50% 50%)`):e<.875?(t=e<.75?50+this._calculateTangent(.75-e):50-this._calculateTangent(e-.75),`polygon(50% 0, 100% 0, 100% 100%, 0% 100%, 0% ${t}%, 50% 50%)`):(t=50-this._calculateTangent(1-e),`polygon(50% 0, 100% 0, 100% 100%, 0% 100%, 0% 0%, ${t}% 0%, 50% 50%)`)}_calculateTangent(e){return 50*Math.tan(2*e*Math.PI)}},e.ProgressCircle.defaultProps={max:100,value:0,size:"md"},e.ProgressCircle.metadata={properties:{max:{type:"number"},value:{type:"number"},size:{type:"string",enumValues:["sm","md","lg"]}}},e.ProgressCircle=o([i.customElement("oj-progress-circle")],e.ProgressCircle),Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojprogresslist",["ojs/ojcore","jquery","knockout","ojs/ojcomposite","ojs/ojknockouttemplateutils","ojs/ojcomponentcore","ojs/ojlistview","ojs/ojprogress"],function(e,t,i,s,n){"use strict";e.ProgressItem=function(){},e.ProgressItem.Status={QUEUED:"queued",LOADSTARTED:"loadstarted",ABORTED:"aborted",ERRORED:"errored",TIMEDOUT:"timedout",LOADED:"loaded"},e.ProgressItem.EventType={LOADSTART:"loadstart",PROGRESS:"progress",ABORT:"abort",ERROR:"error",LOAD:"load",TIMEOUT:"timeout",LOADEND:"loadend"};s.register("oj-progress-item",{view:"    <div class='oj-flex oj-sm-justify-content-space-between'>      <div class='oj-flex-item oj-flex oj-sm-flex-direction-column'>        <span data-bind='text: $properties.data.name' class='oj-progresslist-name'></span>        <div data-bind='text: message' class='oj-progresslist-error-message'></div>      </div>      <div class='oj-flex oj-sm-align-items-center'>        <oj-bind-slot name='itemInfo'>          <div class='oj-flex-item oj-flex oj-progresslist-info'>            <span data-bind='text: $data.getSizeInBKMGT($properties.data.size)'></span>          </div>        </oj-bind-slot>        <div class='oj-flex-item oj-flex'>          <oj-progress-status status='{{status}}'                              progress='{{progress}}'>          </oj-progress-status>        </div>      </div>    </div>",viewModel:function(t){var s,n,o,r=this;s=function(t){t.target&&t.lengthComputable&&(r.status(e.ProgressItem.Status.LOADSTARTED),r.progress(parseInt(t.loaded/t.total*100,10)))},n=function(t){var i=t.target;i&&(r.message(t.error.message),r.status(e.ProgressItem.Status.ERRORED),h(i))},o=function(t){var i=t.target;i&&(r.status(e.ProgressItem.Status.LOADED),h(i))},r.status=i.observable(e.ProgressItem.Status.QUEUED),r.progress=i.observable(-1),r.message=i.observable("");var a,l=["B","KB","MB","GB","TB"];function h(t){t.removeEventListener(e.ProgressItem.EventType.PROGRESS,s,!1),t.removeEventListener(e.ProgressItem.EventType.ERROR,n,!1),t.removeEventListener(e.ProgressItem.EventType.TIMEOUT,n,!1),t.removeEventListener(e.ProgressItem.EventType.ABORT,n,!1),t.removeEventListener(e.ProgressItem.EventType.LOAD,o,!1)}r.getSizeInBKMGT=function(e){var t,i=e;if(isNaN(i))return null;for(t=0;i>=1024&&t<4;t++)i/=1024;return i.toFixed(2)+l[t]},(a=t.properties.data).addEventListener(e.ProgressItem.EventType.PROGRESS,s),a.addEventListener(e.ProgressItem.EventType.ERROR,n),a.addEventListener(e.ProgressItem.EventType.TIMEOUT,n),a.addEventListener(e.ProgressItem.EventType.ABORT,n),a.addEventListener(e.ProgressItem.EventType.LOAD,o)},metadata:{properties:{data:{type:"object"}}}});s.register("oj-progress-list",{view:"<oj-list-view data-bind=\"attr: {id: $unique + '_list'}\"              aria-label='list using array'              data='{{$properties.data}}'              item.renderer='{{renderer()}}'              selection-mode='single'></oj-list-view><script type='text/html' data-bind=\"attr: {id: tempId}\">  <li class='oj-progresslist-item' tabindex='0'>    <oj-progress-item data='{{$data}}'>    </oj-progress-item>  </li><\/script>",viewModel:function(e){var t=this;t.tempId=e.unique+"_templ",t.renderer=function(){return n.getRenderer(t.tempId,!0)}},metadata:{properties:{data:{type:"object"}},methods:{getProperty:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}}});s.register("oj-progress-status",{view:"  <div data-bind='visible: ($properties.status == \"queued\")'       class='oj-progressstatus-cell'>    <div class='oj-component-icon oj-progressstatus-cancel-icon'         role='img' title='cancel'></div>  </div>  <div data-bind='visible: ($properties.status == \"loadstarted\")'       class='oj-progressstatus-cell'>    <oj-progress type='circle' value='{{$properties.progress}}'>    </oj-progress>  </div>  <div data-bind='visible: ($properties.status == \"loaded\")'       class='oj-progressstatus-cell'>    <div class='oj-component-icon oj-progressstatus-done-icon' role='img' title='done'></div>  </div>  <div data-bind='visible: ($properties.status == \"errored\" || $properties.status == \"timedout\" || $properties.status == \"aborted\")'       class='oj-progressstatus-cell'>    <div class='oj-component-icon oj-progressstatus-error-icon' role='img' title='error'></div>  </div>",metadata:{properties:{status:{type:"string"},progress:{type:"number"}}}})}),define("ojs/ojfilmstrip",["exports","ojs/ojcore-base","jquery","ojs/ojcontext","ojs/ojcomponentcore","ojs/ojlogger","ojs/ojdomutils","ojs/ojfocusutils","touchr"],function(e,t,i,s,n,o,r,a,l){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;var h={properties:{arrowPlacement:{type:"string",enumValues:["adjacent","overlay"],value:"adjacent"},arrowVisibility:{type:"string",enumValues:["auto","hidden","hover","visible"],value:"auto"},currentItem:{type:"object",writeback:!0,value:{index:0},properties:{id:{type:"string"},index:{type:"number"}}},looping:{type:"string",enumValues:["off","page"],value:"off"},maxItemsPerPage:{type:"number",value:0},orientation:{type:"string",enumValues:["horizontal","vertical"],value:"horizontal"},translations:{type:"object",value:{},properties:{labelAccArrowNextPage:{type:"string"},labelAccArrowPreviousPage:{type:"string"},labelAccFilmStrip:{type:"string"},tipArrowNextPage:{type:"string"},tipArrowPreviousPage:{type:"string"}}}},methods:{getItemsPerPage:{},getPagingModel:{},getProperty:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},extension:{}};h.extension._WIDGET_NAME="ojFilmStrip",h.extension._TRACK_CHILDREN="immediate",t.CustomElementBridge.register("oj-film-strip",{metadata:h});const d=function(){this.Init()};t._registerLegacyNamespaceProp("FilmStripPagingModel",d),t.Object.createSubclass(d,t.EventSource,"oj.FilmStripPagingModel"),d.prototype.Init=function(){d.superclass.Init.call(this),this._page=-1,this._totalSize=0,this._pageSize=-1},d.prototype.setTotalSize=function(e){this._totalSize=e},d.prototype.getPageSize=function(){return this._pageSize},d.prototype.getPage=function(){return this._page},d.prototype.setPage=function(e,t){e=parseInt(e,10);try{var i=this.getPageCount(),s=this._page,n=this._pageSize,o=n;if(t&&t.pageSize&&(o=t.pageSize),0===this._totalSize&&-1===o)return Promise.resolve();var r=Math.ceil(this._totalSize/o);if(e<0||e>r-1)throw new Error("JET FilmStrip: Invalid 'page' set: "+e);var a=!1;if(e!==s||o!==n){if(!1===this.handleEvent("beforePage",{page:e,previousPage:s}))return Promise.reject();a=!0}this._page=e,this._pageSize=o;var l=this.getPageCount(),h=this;return new Promise(function(n){if(i!==l&&h.handleEvent("pageCount",{pageCount:l,previousPageCount:i}),a){var o={page:e,previousPage:s};t&&t.loopDirection&&(o.loopDirection=t.loopDirection),h.handleEvent("page",o)}n(null)})}catch(e){return Promise.reject(e)}},d.prototype.getStartItemIndex=function(){return-1===this._page&&-1===this._pageSize?-1:this._page*this._pageSize},d.prototype.getEndItemIndex=function(){return Math.min(this.getStartItemIndex()+this._pageSize,this._totalSize)-1},d.prototype.getPageCount=function(){return Math.ceil(this._totalSize/this._pageSize)},d.prototype.totalSize=function(){return this._totalSize},d.prototype.totalSizeConfidence=function(){return"actual"},function(){function e(e,t){e.css("-webkit-transform",t).css("-ms-transform",t).css("transform",t)}function l(e){e.css("-webkit-transform","").css("-ms-transform","").css("transform","")}function h(e){const t=i("<div></div>");return t.text(e),t[0].innerHTML}t.__registerWidget("oj.ojFilmStrip",i.oj.baseComponent,{defaultElement:"<div>",widgetEventPrefix:"oj",options:{maxItemsPerPage:0,orientation:"horizontal",currentItem:{index:0},arrowPlacement:"adjacent",arrowVisibility:"auto",looping:"off"},_ComponentCreate:function(){this._super();const e=this.element;e.addClass("oj-filmstrip oj-component").attr("tabindex",0).attr("role","application"),e.uniqueId(),this._focusable({element:e,applyHighlight:!0});const t=this.options;if(t.disabled&&o.warn("JET FilmStrip: 'disabled' property not supported"),"horizontal"!==t.orientation&&"vertical"!==t.orientation)throw new Error("JET FilmStrip: Unsupported value set as 'orientation' property: "+t.orientation);if("adjacent"!==t.arrowPlacement&&"overlay"!==t.arrowPlacement)throw new Error("JET FilmStrip: Unsupported value set as 'arrowPlacement' property: "+t.arrowPlacement);if("visible"!==t.arrowVisibility&&"hidden"!==t.arrowVisibility&&"hover"!==t.arrowVisibility&&"auto"!==t.arrowVisibility)throw new Error("JET FilmStrip: Unsupported value set as 'arrowVisibility' property: "+t.arrowVisibility);if("off"!==t.looping&&"page"!==t.looping)throw new Error("JET FilmStrip: Unsupported value set as 'looping' property: "+t.looping);if(this.touchEventNamespace=this.eventNamespace+"Touch",this.mouseEventNamespace=this.eventNamespace+"Mouse",this.keyEventNamespace=this.eventNamespace+"Key",this.navArrowHoverableEventNamespace=this.eventNamespace+"NavArrowHoverable",t.currentItem=this._convertCurrentItemToObj(t.currentItem),e.children().length&&t.currentItem&&(function(e,t){return e&&r.isValidIdentifier(e)&&!t.find("#"+e).length}(t.currentItem.id,e)||function(e,t){return null!=e&&(e<0||e>=t.children().length)}(t.currentItem.index,e)))throw new Error("JET FilmStrip: Value of 'currentItem' property is invalid. No such item exists: "+JSON.stringify(t.currentItem));this._setup(!0),this._populateCurrentItemObj(t.currentItem),this.option("currentItem",t.currentItem,{_context:{internalSet:!0,writeback:!0}})},refresh:function(){this._super(),this._setup(!1)},getItemsPerPage:function(){return this._itemsPerPage},getPagingModel:function(){return this._pagingModel},_notifyCommon:function(){this._needsSetup?this._setup(this._needsSetup[0]):this._handleResize()},_NotifyShown:function(){this._super(),this._notifyCommon()},_NotifyAttached:function(){this._super(),this._notifyCommon()},_setup:function(e){const t=this;if(e&&!this._pagingModel&&(this._pagingModel=new d),e&&!this._filterNestedFilmStripsFunc&&(this._filterNestedFilmStripsFunc=function(e,s){return i(s).closest(".oj-filmstrip")[0]===t.element[0]}),!this._canCalculateSizes()){let t=!1;return this._needsSetup&&(t=this._needsSetup[0]),void(this._needsSetup=[e||t])}this._needsSetup=null,this._bRTL="rtl"===this._GetReadingDirection(),this._bTouchSupported=r.isTouchSupported();const s=this.element;e?(this._itemsPerPage=0,this._handlePageFunc=function(e){t._handlePage(e)},this._componentSize=0,this._itemSize=-1,this._handleTransitionEndFunc=function(){t._handleTransitionEnd()},this._handleResizeFunc=function(){t._handleResize()},this._bTouchSupported&&(this._handleTouchStartFunc=function(e){t._handleTouchStart(e)},this._handleTouchMoveFunc=function(e){t._handleTouchMove(e)},this._handleTouchEndFunc=function(){t._handleTouchEnd()},this._addTouchListeners()),this._handleMouseDownFunc=function(e){t._handleMouseDown(e)},this._handleMouseMoveFunc=function(e){t._handleMouseMove(e)},this._handleMouseUpFunc=function(){t._handleMouseUp()},this._addMouseListeners(),this._handleKeyDownFunc=function(e){t._handleKeyDown(e)},this._addKeyListeners()):this._destroyInternal();const a=s.children();for(let e=0;e<a.length;e++)n.subtreeDetached(a[e]);const l=this._pagingModel;e&&l.on("page",this._handlePageFunc),l.setTotalSize(a.length),this._wrapChildren(),this._adjustSizes();for(let e=0;e<a.length;e++)n.subtreeAttached(a[e]);0===a.length&&o.warn("JET FilmStrip: There are no nested children!"),r.addResizeListener(s[0],this._handleResizeFunc,25)},_destroy:function(){this._bTouchSupported&&(this._removeTouchListeners(),this._handleTouchStartFunc=null,this._handleTouchMoveFunc=null,this._handleTouchEndFunc=null),this._removeMouseListeners(),this._handleMouseDownFunc=null,this._handleMouseMoveFunc=null,this._handleMouseUpFunc=null,this._removeKeyListeners(),this._handleKeyDownFunc=null,this._destroyInternal(),this._pagingModel.off("page",this._handlePageFunc),this._handlePageFunc=null,this._pagingModel=null,this._handleResizeFunc=null,this._handleTransitionEndFunc=null,this._filterNestedFilmStripsFunc=null;const e=this.element;e.removeClass("oj-filmstrip oj-component oj-filmstrip-hover").removeAttr("tabindex role").removeAttr("aria-labelledby"),e.removeUniqueId(),this._IsCustomElement()&&(e[0].removeEventListener("touchstart",this._delegatedHandleTouchStartFunc,{passive:!0}),e[0].removeEventListener("touchmove",this._delegatedHandleTouchMoveFunc,{passive:!1}),delete this._delegatedHandleTouchStartFunc,delete this._delegatedHandleTouchMoveFunc),this._super()},_destroyInternal:function(){this._deferredHandleResize=!1,this._resolveBusyState();const e=this.element;r.removeResizeListener(e[0],this._handleResizeFunc),this._itemSize=-1,this._queuedHandleResize&&(clearTimeout(this._queuedHandleResize),this._queuedHandleResize=null);const t=this._getItems();let i;for(i=0;i<t.length;i++)n.subtreeDetached(t[i]);this._clearCalculatedSizes();for(this._getItemContainers().unwrap(),this._unwrapChildren(),i=0;i<t.length;i++)n.subtreeAttached(t[i])},_setOption:function(e,t,i){const s=this.options;let n=!1,r=-1;const a=this._pagingModel,l=a.getPage();switch(e){case"disabled":o.warn("JET FilmStrip: 'disabled' property not supported");break;case"orientation":if("horizontal"!==t&&"vertical"!==t)throw new Error("JET FilmStrip: Unsupported value set as 'orientation' property: "+t);n=s.orientation!==t;break;case"maxItemsPerPage":n=s.maxItemsPerPage!==t;break;case"arrowPlacement":if("adjacent"!==t&&"overlay"!==t)throw new Error("JET FilmStrip: Unsupported value set as 'arrowPlacement' property: "+t);n=s.arrowPlacement!==t;break;case"arrowVisibility":if("visible"!==t&&"hidden"!==t&&"hover"!==t&&"auto"!==t)throw new Error("JET FilmStrip: Unsupported value set as 'arrowVisibility' property: "+t);n=s.arrowVisibility!==t;break;case"looping":if("off"!==t&&"page"!==t)throw new Error("JET FilmStrip: Unsupported value set as 'looping' property: "+t);n=s.looping!==t;break;case"currentItem":t=this._convertCurrentItemToObj(t),this._populateCurrentItemObj(t);var h=s.currentItem;if(h&&t&&(h.id!==t.id||h.index!==t.index)&&(r=this._findPage(t),r<0||r>=a.getPageCount()))throw new Error("JET FilmStrip: Value of 'currentItem' property is invalid. No such item exists: "+JSON.stringify(t))}this._super(e,t,i),"currentItem"===e&&r>-1&&r!==l&&a.setPage(r),n&&this._setup(!1)},_handleResize:function(){if(this._busyStateResolveFunc)this._deferredHandleResize=!0;else if(this._bHandlingResize){if(!this._queuedHandleResize){const e=this;this._queuedHandleResize=setTimeout(function(){e._queuedHandleResize=null,e._handleResize()},0)}}else this._bHandlingResize=!0,this._adjustSizes(!0),this._bHandlingResize=!1},_isHorizontal:function(){return"vertical"!==this.options.orientation},_isLoopingPage:function(){return"page"===this.options.looping},_getCssPositionAttr:function(){return this._isHorizontal()?this._bRTL?"right":"left":"top"},_getCssSizeAttr:function(){return this._isHorizontal()?"width":"height"},_canCalculateSizes:function(){const e=document.createElement("div"),t=e.style;t.position="absolute",t.width="10px",t.height="10px";const i=this.element[0];i.appendChild(e);let s=!1;try{s=e.offsetWidth>0&&e.offsetHeight>0}catch(e){}return i.removeChild(e),s},_wrapChildren:function(){const e=this.element,t=this._isHorizontal(),i=e.children();i.addClass("oj-filmstrip-item").wrap('<div class="oj-filmstrip-container oj-filmstrip-item-container"></div>');const s=this._getCssPositionAttr(),n=e.children().wrapAll('<div class="oj-filmstrip-container oj-filmstrip-pages-container"></div>').parent().css(s,"0px");this._pagesWrapper=n;const o=this.options;"hidden"!==o.arrowVisibility&&"adjacent"===o.arrowPlacement&&(this._contentWrapper=n.wrap('<div class="oj-filmstrip-container oj-filmstrip-content-container"></div>').parent()),e.addClass("oj-filmstrip-container"),t||e.addClass("oj-filmstrip-vertical");const r=this._createPageInfoElem(),a=e.attr("id"),l=r.attr("id");e.append(r),e.attr("aria-labelledby",`${a} ${l}`),this._pageInfoElem=r,"hidden"!==o.arrowVisibility&&i.length>0&&(this._prevButton=this._createPrevNavArrow(),this._nextButton=this._createNextNavArrow(),this._navArrowsShownOnHover()&&this._setupNavArrowsHoverable())},_unwrapChildren:function(){const e=this.element,t=this._getItems();this._tearDownNavArrowsHoverable(),this._prevButton&&(this._UnregisterChildNode(this._prevButton),this._prevButton=null),this._nextButton&&(this._UnregisterChildNode(this._nextButton),this._nextButton=null);const i=e.children(".oj-filmstrip-arrow-container");i&&i.remove(),this._pageInfoElem&&(this._UnregisterChildNode(this._pageInfoElem),this._pageInfoElem.remove(),this._pageInfoElem=null),t.removeClass("oj-filmstrip-item").unwrap().unwrap(),this._pagesWrapper=null,this._contentWrapper&&(t.unwrap(),this._contentWrapper=null),e.removeClass("oj-filmstrip-container oj-filmstrip-vertical")},_createPageInfoElem:function(){const e=i(document.createElement("div"));return e.uniqueId(),e.addClass("oj-helper-hidden-accessible oj-filmstrip-liveregion"),e.attr({"aria-live":"polite","aria-atomic":"true"}),e},_updatePageInfoElem:function(){const e=this._pagingModel,t=e.getPage(),i=e.getPageCount(),s=h(this.getTranslatedString("labelAccFilmStrip",{pageIndex:t+1,pageCount:i})),n=this._pageInfoElem;n&&n.text(s)},_setupNavArrowsHoverable:function(){this.element.on("mouseenter"+this.navArrowHoverableEventNamespace,function(e){i(e.currentTarget).hasClass("oj-disabled")||i(e.currentTarget).addClass("oj-filmstrip-hover")}).on("mouseleave"+this.navArrowHoverableEventNamespace,function(e){i(e.currentTarget).removeClass("oj-filmstrip-hover")})},_tearDownNavArrowsHoverable:function(){this.element.off(this.navArrowHoverableEventNamespace)},_navArrowsShownOnHover:function(){const e=this.options,t=e.arrowVisibility;return"hover"===t||"auto"===t&&"overlay"===e.arrowPlacement},_hasPrevPage:function(){return this._pagingModel.getPage()>0},_hasNextPage:function(){const e=this._pagingModel;return e.getPage()<e.getPageCount()-1},_prevPage:function(){const e=this._pagingModel;if(this._hasPrevPage())e.setPage(e.getPage()-1);else{const t=e.getPageCount();this._isLoopingPage()&&t>1&&e.setPage(t-1,{loopDirection:"prev"})}},_nextPage:function(){const e=this._pagingModel;if(this._hasNextPage())e.setPage(e.getPage()+1);else{const t=e.getPageCount();this._isLoopingPage()&&t>1&&e.setPage(0,{loopDirection:"next"})}},_displayNavigationArrow:function(e,t){"adjacent"===this.options.arrowPlacement?t.css("visibility",e?"":"hidden"):t.parent().css("display",e?"":"none")},_updateNavigationArrowsDisplay:function(){if("hidden"!==this.options.arrowVisibility){const e=this._pagingModel,t=e.getPage(),i=e.getPageCount(),s=this._isLoopingPage()&&i>1;this._displayNavigationArrow(s||0!==t,this._prevButton),this._displayNavigationArrow(s||t!==i-1,this._nextButton)}},_createPrevNavArrow:function(){const e=this.element,t=this._isHorizontal()?"oj-start":"oj-top",i=this._createNavigationArrowContainer(t);"overlay"===this.options.arrowPlacement?e.append(i):e.prepend(i);const s=h(this.getTranslatedString("labelAccArrowPreviousPage")),n=h(this.getTranslatedString("tipArrowPreviousPage")),o=this._createNavigationArrow(i,t,s,n),r=this;return o.on("click",function(){r._prevPage()}),o},_createNextNavArrow:function(){const e=this.element,t=this._isHorizontal()?"oj-end":"oj-bottom",i=this._createNavigationArrowContainer(t);e.append(i);const s=h(this.getTranslatedString("labelAccArrowNextPage")),n=h(this.getTranslatedString("tipArrowNextPage")),o=this._createNavigationArrow(i,t,s,n),r=this;return o.on("click",function(){r._nextPage()}),o},_createNavigationArrowContainer:function(e){const t=i(document.createElement("div"));t.addClass("oj-filmstrip-arrow-container "+e);return"overlay"===this.options.arrowPlacement&&(t.addClass("oj-filmstrip-arrow-container-overlay"),this._navArrowsShownOnHover()&&t.addClass("oj-filmstrip-arrow-transition")),t},_createNavigationArrow:function(e,t,i,s){const n=`<div class='oj-filmstrip-arrow oj-default oj-enabled ${t}' role='button' tabindex='-1'><span class='oj-filmstrip-arrow-icon ${t} oj-component-icon'></span></div>`;e.append(n);const o=e.children(".oj-filmstrip-arrow").eq(0);o.uniqueId();const r=o.attr("id");i&&o.attr("aria-label",i),s&&o.attr("title",s);const a=this._pageInfoElem.attr("id");o.attr("aria-labelledby",`${a} ${r}`),this._AddHoverable(o),this._AddActiveable(o);return"adjacent"===this.options.arrowPlacement&&this._navArrowsShownOnHover()&&o.addClass("oj-filmstrip-arrow-transition"),o},_getItemContainers:function(){return this._pagesWrapper.find(".oj-filmstrip-item-container").filter(this._filterNestedFilmStripsFunc)},_getItems:function(){return this._pagesWrapper.find(".oj-filmstrip-item").filter(this._filterNestedFilmStripsFunc)},_getPages:function(){return this._pagesWrapper.children(".oj-filmstrip-page")},_clearCalculatedSizes:function(){const e=this._pagesWrapper;this._getPages().css("flex-basis","").css("-webkit-flex-basis","");this._getItemContainers().css("flex-basis","").css("-webkit-flex-basis",""),e.css(this._getCssSizeAttr(),"")},_adjustSizes:function(e){this._clearCalculatedSizes();const t=this.options,s=this._isHorizontal();let o=t.maxItemsPerPage;const r=o<1,a=this.element,l=this._getItemContainers();if(this._itemSize<0){if(this._getItems().length){const e=this._getItemIndex(t.currentItem);let o;o=e>-1&&l[e]?i(l[e]):i(l[0]);const r=o.children(".oj-filmstrip-item");r.css("display",""),n.subtreeShown(r[0]),this._itemSize=s?o.width():o.height()}}let h=s?a.width():a.height();if("hidden"!==t.arrowVisibility&&"adjacent"===t.arrowPlacement){const e=a.children(".oj-filmstrip-arrow-container").eq(0);h-=2*(s?e.width():e.height())}if(this._componentSize=h,!r){const e=Math.max(Math.floor(h/this._itemSize),1);e<o&&(o=e)}const d=r?Math.max(Math.floor(h/this._itemSize),1):o,c=h/d;l.css("flex-basis",c+"px").css("-webkit-flex-basis",c+"px");const u=Math.ceil(l.length/d);let p=this._getPages(),m=!1;const _=this._pagingModel;if(_.getPageCount()!==u||this._itemsPerPage!==d||!p||p.length<1){let t;if(m=!0,e)for(t=0;t<l.length;t++)n.subtreeDetached(l[t]);for(p&&p.length>0&&l.unwrap(),t=0;t<l.length;t+=d){l.slice(t,t+d).wrapAll('<div class="oj-filmstrip-container oj-filmstrip-page" aria-hidden="true"></div>').parent().css("display","none")}if(e)for(t=0;t<l.length;t++)n.subtreeAttached(l[t])}p=this._getPages(),p.css("flex-basis",h+"px").css("-webkit-flex-basis",h+"px");const g=this._pagesWrapper,f=this._contentWrapper;if(g.css(this._getCssSizeAttr(),h),f&&f.css(this._getCssSizeAttr(),h),l.length){let e=0;if(t.currentItem&&(e=this._findTargetPage(t.currentItem,d)),e>-1&&(_.getPageCount()!==u||this._itemsPerPage!==d||_.getPage()!==e))_.setPage(e,{pageSize:d});else if(m){const e=_.getPage();this._handlePage({previousPage:e,page:e})}}},_handlePage:function(e){const t=e.page,s=e.loopDirection,n=e.previousPage,o=this._pagesWrapper,r=this._getPages(),a=this._pagingModel,l=a.getPageSize(),h=a.getPageCount(),d=n<0||n===t||this._itemsPerPage!==l,c=this._isLoopingPage();this._itemsPerPage=l;let u=null;d||(u=i(r[n]));const p=this._getCssPositionAttr(),m=i(r[t]),_=m.is(":hidden");_&&this._unhidePage(m);let g,f=this._bDragInit;if(n>-1&&!d){g=t>n,c&&s&&(g="next"===s);const e=c&&!g&&h>1&&0===n,i=c&&g&&h>1&&n===h-1;f=!0,o.css(this._getCssSizeAttr(),2*this._componentSize),g||_&&o.css(p,-this._componentSize+"px"),g?(u&&u.addClass("oj-filmstrip-transition-next-oldpage-from"),m.addClass("oj-filmstrip-transition-next-newpage-from"),i&&m.addClass("oj-filmstrip-transition-display-as-lastpage")):(u&&u.addClass("oj-filmstrip-transition-prev-oldpage-from"),m.addClass("oj-filmstrip-transition-prev-newpage-from"),e&&m.addClass("oj-filmstrip-transition-display-as-firstpage"))}if(this._busyStateResolveFunc=this._addBusyState("scrolling"),f){const e=this,i=this._bDragInit;if(i&&n<0){r.filter(":visible").addClass("oj-filmstrip-transition")}setTimeout(function(){e._finishHandlePage(t,n,g,d,i)},25)}else this._finishHandlePage(t,n,g,d)},_finishHandlePage:function(t,s,n,o,r){const a=this._pagesWrapper;if(o||(this._bPageChangeTransition=!0,a.on(`transitionend${this.eventNamespace} webkitTransitionEnd${this.eventNamespace}`,this._handleTransitionEndFunc)),o)this._handleTransitionEnd();else{const o=this._getPages();if(r&&l(o),s>-1){const e=i(o[s]),r=i(o[t]);e.addClass("oj-filmstrip-transition"),r.addClass("oj-filmstrip-transition"),n?(e.removeClass("oj-filmstrip-transition-next-oldpage-from"),r.removeClass("oj-filmstrip-transition-next-newpage-from"),e.addClass("oj-filmstrip-transition-next-oldpage-to"),r.addClass("oj-filmstrip-transition-next-newpage-to")):(e.removeClass("oj-filmstrip-transition-prev-oldpage-from"),r.removeClass("oj-filmstrip-transition-prev-newpage-from"),e.addClass("oj-filmstrip-transition-prev-oldpage-to"),r.addClass("oj-filmstrip-transition-prev-newpage-to"))}else if(r){e(o.filter(":visible"),"translate3d(0, 0, 0)")}}},_handleTransitionEnd:function(){this._bPageChangeTransition=!1;const e=this._pagesWrapper,t=this._getCssPositionAttr();e.off(this.eventNamespace).css(this._getCssSizeAttr(),this._componentSize).css(t,"0px");let s=null;(a.containsFocus(e[0])||this._nextButton&&a.containsFocus(this._nextButton[0])||this._prevButton&&a.containsFocus(this._prevButton[0]))&&(s=document.activeElement);const n=this._pagingModel.getPage(),o=this._getPages();for(let e=0;e<o.length;e++)e!==n&&this._hidePage(i(o[e]));if(o.removeClass("oj-filmstrip-transition oj-filmstrip-transition-next-oldpage-to oj-filmstrip-transition-next-newpage-to oj-filmstrip-transition-prev-oldpage-to oj-filmstrip-transition-prev-newpage-to oj-filmstrip-transition-display-as-firstpage oj-filmstrip-transition-display-as-lastpage"),l(o),this._updateNavigationArrowsDisplay(),s&&i(s).is(":hidden")){const e=this.element,t=a.getFirstTabStop(o[n]);t?a.focusElement(t):a.focusElement(e[0])}const r=this.options;if(this._findPage(r.currentItem)!==n){const e=this._getFirstItemOnPage(n);e&&this.option("currentItem",e,{_context:{writeback:!0}})}this._deferredHandleResize&&(this._deferredHandleResize=!1,this._handleResize()),this._updatePageInfoElem(),this._resolveBusyState()},_getItemIndex:function(e){let t=-1;if(e){const i=this._getItems();if(e.id&&r.isValidIdentifier(e.id))for(let s=0;s<i.length;s++){const n=i[s].id;if(n&&n.length>0&&n===e.id){t=s;break}}else null!=e.index&&e.index>=0&&e.index<i.length&&(t=e.index)}return t},_convertCurrentItemToObj:function(e){let t=null;return"object"==typeof e?t={index:e.index,id:e.id}:"number"==typeof e?t={index:e}:"string"==typeof e&&(t={id:e}),t},_populateCurrentItemObj:function(e){if(e&&this._pagingModel.getPage()>=0){const t=this._getItemIndex(e);if(e.index=t,null==e.id&&t>-1){const i=this._getItems();e.id=i[t].id}}},_findPage:function(e,t){const i=this._getItemIndex(e);let s=-1;return i>-1&&(void 0===t&&(t=this._itemsPerPage),s=Math.floor(i/t)),s},_findTargetPage:function(e,t){let i=this._findPage(e,t);if(i<0){const s=this._getItems();s.length>0&&e&&null!=e.index&&e.index>=s.length&&(void 0===t&&(t=this._itemsPerPage),i=Math.floor((s.length-1)/t))}return i},_getFirstItemOnPage:function(e,t,i){const s=this._pagingModel;if(void 0===t&&(t=s.getPageCount()),e>=0&&e<t){const t=this._getItems();void 0===i&&(i=this._itemsPerPage);const s=e*i;if(s<t.length){return{id:t[s].id,index:s}}}return null},_hidePage:function(e){n.subtreeHidden(e[0]),e.css("display","none").attr("aria-hidden","true");e.find(".oj-filmstrip-item").filter(this._filterNestedFilmStripsFunc).css("display","none")},_unhidePage:function(e){e.css("display","").removeAttr("aria-hidden");e.find(".oj-filmstrip-item").filter(this._filterNestedFilmStripsFunc).css("display",""),n.subtreeShown(e[0])},_addKeyListeners:function(){this.element.on("keydown"+this.keyEventNamespace,this._handleKeyDownFunc)},_removeKeyListeners:function(){this.element.off(this.keyEventNamespace)},_addMouseListeners:function(){this.element.on("mousedown"+this.mouseEventNamespace,this._handleMouseDownFunc).on("mousemove"+this.mouseEventNamespace,this._handleMouseMoveFunc).on("mouseup"+this.mouseEventNamespace,this._handleMouseUpFunc)},_removeMouseListeners:function(){this.element.off(this.mouseEventNamespace)},_addTouchListeners:function(){const e=this.element;if(this._IsCustomElement()){const t=function(e){return function(t){e(i.Event(t))}};this._delegatedHandleTouchStartFunc=t(this._handleTouchStartFunc),this._delegatedHandleTouchMoveFunc=t(this._handleTouchMoveFunc),e[0].addEventListener("touchstart",this._delegatedHandleTouchStartFunc,{passive:!0}),e[0].addEventListener("touchmove",this._delegatedHandleTouchMoveFunc,{passive:!1}),e.on("touchend"+this.touchEventNamespace,this._handleTouchEndFunc).on("touchcancel"+this.touchEventNamespace,this._handleTouchEndFunc)}else e.on("touchstart"+this.touchEventNamespace,this._handleTouchStartFunc).on("touchmove"+this.touchEventNamespace,this._handleTouchMoveFunc).on("touchend"+this.touchEventNamespace,this._handleTouchEndFunc).on("touchcancel"+this.touchEventNamespace,this._handleTouchEndFunc)},_removeTouchListeners:function(){this.element.off(this.touchEventNamespace)},_handleKeyDown:function(e){if(e.target!==this.element[0])return;const t=this._pagingModel,s=t.getPage(),n=t.getPageCount();let o;switch(e.keyCode){case i.ui.keyCode.RIGHT:o=this._bRTL?s-1:s+1;break;case i.ui.keyCode.LEFT:o=this._bRTL?s+1:s-1;break;case i.ui.keyCode.DOWN:o=s+1;break;case i.ui.keyCode.UP:o=s-1;break;case i.ui.keyCode.HOME:o=0;break;case i.ui.keyCode.END:o=n-1;break;default:return}if(o>-1&&o<n)t.setPage(o);else if(this._isLoopingPage()&&n>1){const e={};o===n&&(o=0,e.loopDirection="next"),-1===o&&(o=n-1,e.loopDirection="prev"),t.setPage(o,e)}e.preventDefault()},_handleMouseDown:function(e){const t=e.originalEvent;this._dragScrollStart(t)},_handleMouseMove:function(e){const t=e.originalEvent;this._dragScrollMove(e,t)},_handleMouseUp:function(){this._dragScrollEnd()},_handleTouchStart:function(e){const t=e.originalEvent.touches;if(1===t.length){const e=t[0];this._dragScrollStart(e)}},_handleTouchMove:function(e){const t=e.originalEvent.touches[0];this._dragScrollMove(e,t),(this._bTouch||this._scrolledForThisTouch)&&e.preventDefault()},_handleTouchEnd:function(){this._dragScrollEnd()},_dragScrollStart:function(e){if(this._pagingModel.getPageCount()>1&&!this._bPageChangeTransition){this._bTouch=!0,this._bDragInit=!1,this._bFirstToLast=!1,this._bLastToFirst=!1;const t=this._isHorizontal();this._touchStartCoord=t?e.pageX:e.pageY,this._touchStartCoord2=t?e.pageY:e.pageX}},_initDragScroll:function(e,t,s){const n=this._isHorizontal();this._touchStartCoord=n?e.pageX:e.pageY,this._touchStartCoord2=n?e.pageY:e.pageX;const o=this._getCssPositionAttr(),r=this._pagesWrapper,a=this._pagingModel,l=a.getPage(),h=a.getPageCount(),d=this._getPages();let c=1;t||s?(t&&(this._unhidePage(i(d[h-1])),r.css(o,-this._componentSize+"px"),c+=1,i(d[h-1]).addClass("oj-filmstrip-transition-display-as-firstpage")),s&&(this._unhidePage(i(d[0])),c+=1,i(d[0]).addClass("oj-filmstrip-transition-display-as-lastpage"))):(l>0&&(this._unhidePage(i(d[l-1])),r.css(o,-this._componentSize+"px"),c+=1),l<h-1&&(this._unhidePage(i(d[l+1])),c+=1)),c>1&&r.css(this._getCssSizeAttr(),c*this._componentSize),this._touchStartScroll=parseInt(r.css(o),10)},_dragScrollMove:function(t,s){if(!this._bTouch)return;const n=this._isHorizontal(),o=(n?s.pageX:s.pageY)-this._touchStartCoord,r=(n?s.pageY:s.pageX)-this._touchStartCoord2,a=n&&this._bRTL?o>0:o<0,l=this._pagingModel,h=l.getPage(),d=l.getPageCount(),c=this._isLoopingPage(),u=c&&!a&&d>1&&0===h,p=c&&a&&d>1&&h===d-1;if(!this._bDragInit)return Math.abs(r)>Math.abs(o)&&(this._bTouch=!1,this._scrolledForThisTouch=!1),Math.abs(o)>3&&(this._initDragScroll(s,u,p),this._bDragInit=!0),this._bFirstToLast=u,void(this._bLastToFirst=p);u===this._bFirstToLast&&p===this._bLastToFirst||(this._dragScrollResetPages(),this._initDragScroll(s,u,p),this._bFirstToLast=u,this._bLastToFirst=p);if(a&&h<l.getPageCount()-1||!a&&h>0||c){const t=this.element[0],s=Math.min(.33*(n?t.offsetWidth:t.offsetHeight),100),r=this._getCssPositionAttr(),c=this._pagesWrapper,m=this._getPages();if(Math.abs(o)>=s){let e,t;const s={};if(u||p?(u?(e=d-1,t=d>2?1:-1):(e=0,t=d>2?d-2:-1),s.loopDirection=a?"next":"prev"):(e=a?h+1:h-1,t=a?h-1:h+1),t>-1&&t<l.getPageCount()&&this._hidePage(i(m[t])),a&&t>-1&&!p){const e=parseInt(c.css(r),10);c.css(r,e+this._componentSize+"px")}c.css(this._getCssSizeAttr(),2*this._componentSize),this._bTouch=!1,l.setPage(e,s)}else{const t=o,i=n?`translate3d(${t}px, 0, 0)`:`translate3d(0, ${t}px, 0)`;e(m.filter(":visible"),i)}this._scrolledForThisTouch=!0}this._scrolledForThisTouch&&(t.preventDefault(),t.stopPropagation())},_dragScrollEnd:function(){if(this._bTouch&&this._bDragInit){const e=this._pagingModel.getPage();this._handlePage({previousPage:e,page:e})}this._bTouch=!1,this._bDragInit=!1,this._bFirstToLast=!1,this._bLastToFirst=!1,this._scrolledForThisTouch=!1},_dragScrollResetPages:function(){const e=this._pagesWrapper,t=this._getCssPositionAttr(),s=this._pagingModel,n=s.getPage(),o=s.getPageCount(),r=this._getPages();for(let e=0;e<r.length;e++)e!==n&&this._hidePage(i(r[e]));e.css(t,"0px"),i(r[0]).removeClass("oj-filmstrip-transition-display-as-lastpage"),i(r[o-1]).removeClass("oj-filmstrip-transition-display-as-firstpage")},_addBusyState:function(e){const t=this.element,i=s.getContext(t[0]).getBusyContext(),n={description:`FilmStrip (id='${t.attr("id")}'): ${e}`};return i.addBusyState(n)},_resolveBusyState:function(){this._busyStateResolveFunc&&(this._busyStateResolveFunc(),this._busyStateResolveFunc=null)},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;const t=e.subId;return"oj-filmstrip-start-arrow"===t?this.widget().find(".oj-filmstrip-arrow.oj-start").filter(this._filterNestedFilmStripsFunc)[0]:"oj-filmstrip-end-arrow"===t?this.widget().find(".oj-filmstrip-arrow.oj-end").filter(this._filterNestedFilmStripsFunc)[0]:"oj-filmstrip-top-arrow"===t?this.widget().find(".oj-filmstrip-arrow.oj-top").filter(this._filterNestedFilmStripsFunc)[0]:"oj-filmstrip-bottom-arrow"===t?this.widget().find(".oj-filmstrip-arrow.oj-bottom").filter(this._filterNestedFilmStripsFunc)[0]:null},getSubIdByNode:function(e){const t=this.getNodeBySubId({subId:"oj-filmstrip-start-arrow"}),i=this.getNodeBySubId({subId:"oj-filmstrip-end-arrow"}),s=this.getNodeBySubId({subId:"oj-filmstrip-top-arrow"}),n=this.getNodeBySubId({subId:"oj-filmstrip-bottom-arrow"});let o=e;const r=this.element[0];for(;o&&o!==r;){if(o===t)return{subId:"oj-filmstrip-start-arrow"};if(o===i)return{subId:"oj-filmstrip-end-arrow"};if(o===s)return{subId:"oj-filmstrip-top-arrow"};if(o===n)return{subId:"oj-filmstrip-bottom-arrow"};o=o.parentElement}return null},_CompareOptionValues:function(e,i,s){return"currentItem"===e?t.Object.compareValues(i,s):this._super(e,i,s)}})}(),e.FilmStripPagingModel=d,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojtouchproxy",["jquery","ojs/ojcore-base"],function(e,t){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const i=function(e){this._init(e)};t._registerLegacyNamespaceProp("_TouchProxy",i),i.prototype._init=function(t){this._elem=t,this._touchHandled=!1,this._touchMoved=!1,this._touchStartHandler=e.proxy(this._touchStart,this),this._touchEndHandler=e.proxy(this._touchEnd,this),this._touchMoveHandler=e.proxy(this._touchMove,this),this._elem.on({touchend:this._touchEndHandler,touchcancel:this._touchEndHandler}),this._elem[0].addEventListener("touchstart",this._touchStartHandler,{passive:!0}),this._elem[0].addEventListener("touchmove",this._touchMoveHandler,{passive:!1})},i.prototype._destroy=function(){this._elem&&this._touchStartHandler&&(this._elem.off({touchend:this._touchEndHandler,touchcancel:this._touchEndHandler}),this._elem[0].removeEventListener("touchstart",this._touchStartHandler,{passive:!0}),this._elem[0].removeEventListener("touchmove",this._touchMoveHandler,{passive:!1}),this._touchStartHandler=void 0,this._touchEndHandler=void 0,this._touchMoveHandler=void 0)},i.prototype._touchHandler=function(e,t){if(!(e.originalEvent.touches.length>1)){"touchstart"!==e.type&&"touchend"!==e.type&&e.preventDefault();var i=e.originalEvent.changedTouches[0],s=document.createEvent("MouseEvent");s.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(s)}},i.prototype._touchStart=function(t){this._touchHandled||(this._touchHandled=!0,this._touchMoved=!1,t=e.Event(t),this._touchHandler(t,"mouseover"),this._touchHandler(t,"mousemove"),this._touchHandler(t,"mousedown"))},i.prototype._touchMove=function(t){this._touchHandled&&(this._touchMoved=!0,t=e.Event(t),this._touchHandler(t,"mousemove"))},i.prototype._touchEnd=function(e){this._touchHandled&&(this._touchHandler(e,"mouseup"),this._touchHandler(e,"mouseout"),this._touchMoved||"touchend"!==e.type||this._touchHandler(e,"click"),this._touchHandled=!1)},i._TOUCH_PROXY_KEY="_ojTouchProxy",i.prototype.touchMoved=function(){return this._touchMoved},i.addTouchListeners=function(t){var s=e(t),n=s.data(i._TOUCH_PROXY_KEY);return n||(n=new i(s),s.data(i._TOUCH_PROXY_KEY,n)),n},i.removeTouchListeners=function(t){var s=e(t),n=s.data(i._TOUCH_PROXY_KEY);n&&(n._destroy(),s.removeData(i._TOUCH_PROXY_KEY))}}),define("ojs/ojselector",["exports","preact/jsx-runtime","ojs/ojtranslation","ojs/ojvcomponent","preact","ojs/ojdomutils"],function(e,t,i,s,n,o){"use strict";var r=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};e.Selector=class extends n.Component{constructor(e){super(e),this._handleFocusin=e=>{this.setState({focus:!0})},this._handleFocusout=e=>{this.setState({focus:!1})},this._checkboxListener=e=>{var t,i,s,n;const{selectedKeys:o,rowKey:r,selectionMode:a}=this.props;let l;null!=o&&(e.target.checked?"multiple"===a?l=o.add([r]):"all"===a?l=o.addAll():"single"!==a||o.has(r)||(l=o.clear().add([r])):l="all"===a?o.clear():o.delete([r]),null===(i=(t=this.props).onSelectedKeysChanged)||void 0===i||i.call(t,l),null===(n=(s=this.props).onIndeterminateChanged)||void 0===n||n.call(s,!1))},this.state={focus:!1}}render(e,n){var r;const{rowKey:a,indeterminate:l}=e,h=this._isSelected(a);let d="oj-selector-wrapper oj-component-icon";l?d+=" oj-indeterminate":h&&(d+=" oj-selected"),n.focus&&!o.recentPointer()&&(d+=" oj-focus-highlight");const c=e["aria-labelledby"]||null,u=null==e["aria-label"]||""==(null===(r=e["aria-label"])||void 0===r?void 0:r.trim())?null:e["aria-label"]+(h?i.getTranslatedString("oj-ojSelector.checkboxAriaLabelSelected"):i.getTranslatedString("oj-ojSelector.checkboxAriaLabelUnselected"));return t.jsx(s.Root,Object.assign({class:"oj-selector"},{children:t.jsx("span",Object.assign({class:d},{children:t.jsx("input",{type:"checkbox",class:"oj-selectorbox","data-oj-clickthrough":"disabled","aria-label":u,"aria-labelledby":c,checked:h,onfocusin:this._handleFocusin,onfocusout:this._handleFocusout,onClick:this._checkboxListener})}))}))}_isSelected(e){const{selectedKeys:t,selectionMode:i}=this.props;return!!t&&("all"===i?t.isAddAll():t.has(e))}},e.Selector.defaultProps={rowKey:null,indeterminate:!1,selectedKeys:null,selectionMode:"multiple"},e.Selector.metadata={properties:{rowKey:{type:"any"},indeterminate:{type:"boolean",writeback:!0},selectedKeys:{type:"any",writeback:!0},selectionMode:{type:"string",enumValues:["all","multiple","single"]}},extension:{_WRITEBACK_PROPS:["selectedKeys","indeterminate"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["aria-label","aria-labelledby"]}},e.Selector=r([s.customElement("oj-selector")],e.Selector),Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojtreeview",["require","ojs/ojcore-base","jquery","ojs/ojcontext","ojs/ojthemeutils","ojs/ojcomponentcore","ojs/ojanimation","ojs/ojdomutils","ojs/ojlogger","ojs/ojconfig","ojs/ojkeyset","ojs/ojselector","ojdnd","ojs/ojcustomelement-utils","ojs/ojdatacollection-common","ojs/ojtranslation"],function(e,t,i,s,n,o,r,a,l,h,d,c,u,p,m,_){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s;class g{constructor(e,t={keyAttributes:"id",childrenAttribute:"children"},i=(e=>new Map(e)),s=(e=>new Set(e))){this.data=e,this.createOptimizedKeyMap=i,this.createOptimizedKeySet=s,this.keyAttr=t.keyAttributes,this.childrenAttr=t.childrenAttribute;const n=(e,t,i)=>{e.forEach(e=>{i.add(e[this.keyAttr]),e[this.childrenAttr]&&e[this.childrenAttr].length>0&&(t.set(e[this.keyAttr],e),n(e[this.childrenAttr],t,i))})};this.parentKeyNodeMap=this.createOptimizedKeyMap(),this.allKeys=this.createOptimizedKeySet(),n(this.data,this.parentKeyNodeMap,this.allKeys)}computeSelection(e,t=new d.KeySetImpl){const i=this.normalizeKeySet(e),s=this.normalizeKeySet(t),n=i.delete(s.values()),o=s.delete(i.values()),r=this.reduceToLeaves(o.values()),a={selectedLeaves:this.createOptimizedKeySet(new Set([...[...i.values()].filter(e=>!this.parentKeyNodeMap.has(e)),...this.reduceToLeaves(n.values())].filter(e=>!r.has(e)))),selectedParents:this.createOptimizedKeySet(),partialParents:this.createOptimizedKeySet()};return this.assignParentSelection({children:this.data},{selected:0,partial:0},a),a.selected=this.createOptimizedKeySet([...a.selectedLeaves.values(),...a.selectedParents.values()]),{selected:new d.KeySetImpl(a.selected),selectedLeaves:new d.KeySetImpl(a.selectedLeaves),selectedParents:new d.KeySetImpl(a.selectedParents),partialParents:new d.KeySetImpl(a.partialParents)}}reduceToLeaves(e){const t=(e,i)=>{this.parentKeyNodeMap.has(e[this.keyAttr])?e[this.childrenAttr].forEach(e=>t(e,i)):i.add(e[this.keyAttr])},i=this.createOptimizedKeySet();return e.forEach(e=>this.parentKeyNodeMap.has(e)?t(this.parentKeyNodeMap.get(e),i):i.add(e),this),i}assignParentSelection(e,t,i){if(void 0!==e[this.keyAttr]&&!this.parentKeyNodeMap.has(e[this.keyAttr]))i.selectedLeaves.has(e[this.keyAttr])&&(t.selected+=1);else{const s={selected:0,partial:0};if(e[this.childrenAttr].forEach(e=>this.assignParentSelection(e,s,i)),void 0===e[this.keyAttr]||s.selected+s.partial===0)return;s.selected===e[this.childrenAttr].length?(i.selectedParents.add(e[this.keyAttr]),t.selected+=1):(i.partialParents.add(e[this.keyAttr]),t.partial+=1)}}normalizeKeySet(e){return e.isAddAll()?new d.KeySetImpl(this.allKeys).delete(e.deletedValues()):e}}t.__registerWidget("oj.ojTreeView",i.oj.baseComponent,{version:"1.0.0",defaultElement:"<div>",widgetEventPrefix:"oj",options:{currentItem:null,data:null,dnd:{drag:null,drop:null},expanded:new d.KeySetImpl,item:{focusable:null,renderer:null,selectable:null},scrollPolicyOptions:{maxCount:500},selected:new d.KeySetImpl,selection:[],selectionMode:"none",animateEnd:null,animateStart:null,beforeCollapse:null,beforeCurrentItem:null,beforeExpand:null,collapse:null,expand:null},constants:{TREEVIEW_CONTENT_PADDING_REM:.5,PERIOD:".",OJ_COMPLETE:"oj-complete",OJ_TREEVIEW_LIST:"oj-treeview-list",ERROR_FETCHING_DATA:"Error fetching data: ",OJ_ITEM_DATA:"oj-item-data",OJ_ITEM_METADATA:"oj-item-metadata",OJ_TREEVIEW_ITEM_CONTENT:"oj-treeview-item-content",OJ_TREEVIEW_SELECTOR:"oj-treeview-selector",OJ_COMPONENT_ICON:"oj-component-icon",OJ_DRAGGABLE:"oj-draggable",OJ_TREEVIEW_SPACER:"oj-treeview-spacer",OJ_TREEVIEW_LEAF:"oj-treeview-leaf",OJ_TREEVIEW_DISCLOSURE_ICON:"oj-treeview-disclosure-icon",OJ_DEFAULT:"oj-default",OJ_EXPANDED:"oj-expanded",OJ_TREEVIEW_SKELETON_CONTAINER:"oj-treeview-skeleton-container",OJ_COLLAPSED:"oj-collapsed",OJ_TREEVIEW_ANIMATED:"oj-treeview-animated",OJ_SELECTED:"oj-selected",OJ_TREEVIEW_DRAG_SOURCE:"oj-treeview-drag-source",OJ_TREEVIEW_SKELETON_CONTENT:"oj-treeview-skeleton-content",OJ_ANIMATION_SKELETON:"oj-animation-skeleton",OJ_TREEVIEW_ITEM:"oj-treeview-item",OJ_HOVER:"oj-hover",OJ_CLICKABLE_ICON_NOCONTEXT:"oj-clickable-icon-nocontext",OJ_TREEVIEW_DROPLINE:"oj-treeview-drop-line",OJ_TREEVIEW_SELECT_SINGLE:"oj-treeview-select-single",OJ_TREEVIEW_ICON:"oj-treeview-icon",OJ_TREEVIEW_DRAG_IMAGE:"oj-treeview-drag-image",OJ_TREEVIEW_DRAG_IMAGE_ITEM:"oj-treeview-drag-image-item",OJ_FOCUS:"oj-focus",OJ_TREEVIEW_DROP_ZONE:"oj-treeview-drop-zone",OJ_FOCUS_HIGHLIGHT:"oj-focus-highlight",OJ_ANIMATION_SKELETON_FADE_IN:"oj-animation-skeleton-fade-in",OJ_TREEVIEW_SKELETON_CHILD:"oj-treeview-skeleton-child",OJ_TREEVIEW_SKELETON_CARROT:"oj-treeview-skeleton-carrot",OJ_TREEVIEW_SKELETON_ITEM:"oj-treeview-skeleton-item",OJ_TREEVIEW_SKELETON_LEAF:"oj-treeview-skeleton-leaf",OJ_TREEVIEW_ITEM_ICON:"oj-treeview-item-icon",OJ_TREEVIEW_SELECTED_TOP_ITEM:"oj-selected-item-content-top",OJ_TREEVIEW_SELECTED_BOTTOM_ITEM:"oj-selected-item-content-bottom",OJ_TREEVIEW_CSS_VARS:{expandAnimation:"--oj-private-tree-view-global-expand-animation",collapseAnimation:"--oj-private-tree-view-global-collapse-animation",dataFadeInDuration:"--oj-private-tree-view-global-data-fadein-duration",multipleSelectionAffordance:"--oj-private-tree-view-global-selection-affordance-default",loadIndicator:"--oj-private-tree-view-global-load-indicator-default",showIndicatorDelay:"--oj-private-core-global-loading-indicator-delay-duration"}},_ComponentCreate:function(){this._super()},_AfterCreate:function(){this._super(),this._initRender(),this._render()},_CompareOptionValues:function(e,i,s){switch(e){case"selection":return i&&void 0===i.inverted&&(i.inverted=!1),s&&void 0===s.inverted&&(s.inverted=!1),(!i||!s||i.inverted===s.inverted)&&t.KeyUtils.equals(i,s);case"selected":return m.areKeySetsEqual(i,s);default:return this._super(e,i,s)}},_initRender:function(){var e=this;this._on(this.element,{click:function(t){e._handleClick(t)},mouseover:function(t){e._handleMouseOver(t)},mouseout:function(t){e._handleMouseOut(t)},mousedown:function(t){e._handleMouseDown(t)},mouseup:function(t){e._handleMouseUp(t)},keydown:function(t){e._handleKeyDown(t)},dragstart:function(t){e._handleDragStart(t)},drag:function(t){e._handleDragSourceEvent(t,"drag")},dragend:function(t){e._handleDragSourceEvent(t,"dragEnd")},dragenter:function(t){e._handleDropTargetEvent(t,"dragEnter")},dragover:function(t){e._handleDropTargetEvent(t,"dragOver")},dragleave:function(t){e._handleDropTargetEvent(t,"dragLeave")},drop:function(t){e._handleDropTargetEvent(t,"drop")}}),a.isTouchSupported()&&(this.element[0].addEventListener("touchstart",function(t){e.touchStartEvent=t},{passive:!0}),this.element[0].addEventListener("touchmove",function(t){e.ojTreeViewDragEvent&&t.preventDefault()},{passive:!1}),this.element[0].addEventListener("touchcancel",function(){e.touchStartEvent=null,e.ojTreeViewDragEvent=!1}),this.element[0].addEventListener("touchend",function(t){e.touchStartEvent&&t.changedTouches.length&&document.elementFromPoint(t.changedTouches[0].clientX,t.changedTouches[0].clientY)!==e.touchStartEvent.target&&(e.touchStartEvent=null),e.ojTreeViewDragEvent=!1,e._handleMouseOut(t)})),this._dropLine=document.createElement("div"),this._dropLine.classList.add(this.constants.OJ_TREEVIEW_DROPLINE),this.element[0].appendChild(this._dropLine);const t=document.createElement("div");t.classList.add("oj-helper-hidden-accessible"),t.setAttribute("role","status"),this.element[0].appendChild(t),this._dropLine.style.display="none",this._refreshId=0,this._uiExpanded=new d.KeySetImpl,this.m_fetching=new Set,this._expandedChildrenMap=new Map,this._syncSelectionState()},_syncSelectionState:function(){var e=d.KeySetUtils.toArray(this.options.selected),t=d.KeySetUtils.toKeySet(this.options.selection);e.length>0||e.inverted?this._userOptionChange("selection",e,null):(this.options.selection.length>0||this.options.selection.inverted)&&this._userOptionChange("selected",t,null)},_render:function(){var e=this;this.element[0].classList.remove(this.constants.OJ_COMPLETE),this._keyList=new Set;var t,i=this.element[0].querySelectorAll("ul");if(this.options.data){for(t=0;t<i.length;t++)i[t].parentNode.removeChild(i[t]);this._fetchChildren(null,function(t){var i=t.values[0];e._truncateIfOverMaxCount(i.value);var s={fetchListResult:i.value,parentElem:e.element[0]};e._renderItems(s).then(function(){e._resetFocus(),e.element[0].classList.add(e.constants.OJ_COMPLETE),e._decorateTree(),e._lastSelectedItem=null})})}else{for(t=0;t<i.length;t++)i[t].classList.add(this.constants.OJ_TREEVIEW_LIST),i[t].setAttribute("role","group");var s=this.element[0].querySelectorAll("li");for(t=0;t<s.length;t++){var n=this._getItemContent(s[t]);if(n){var o=this._getItemDisclosureIcon(n);o&&n.removeChild(o)}e._decorateItem(s[t])}this._resetFocus(),this._decorateTree(),this.element[0].classList.add(this.constants.OJ_COMPLETE)}},_getDataProvider:function(){var i;if(null==this.m_dataSource){if(i=this.options.data,!t.DataProviderFeatureChecker.isTreeDataProvider(i)){var s=new Promise(function(t,i){e(["ojs/ojtreedataprovideradapter"],function(e){t(function(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}),t.default=e,t}(e))},i)});if(!s)throw new Error("Error adapting a TreeDataSource");return s.then(e=>new e.default(i))}}else i=this.m_dataSource;return Promise.resolve(i)},_fetchChildren:function(e,t){var i=this,s=i._addBusyState("getting data provider",e),n=i._getDataProvider(),o=this._refreshId;n.then(function(n){if(s(),i._refreshId===o){i.m_dataSource=n;var r=null===e?n:n.getChildDataProvider(e);if(null!=r){var a=i._addBusyState("fetching data",e),h=i._getShowStatusDelay();i._isSkeletonSupported()&&(i._skeletonTimeout=setTimeout(function(){var t=i._expandedChildrenMap.get(null);if(null===e)i._renderInitialSkeletons();else if(!t&&!i._isParentSkeletonRendered(e)&&!i._isLeafOnlySelectionEnabled()){var s=i._getItemByKey(e);s&&(i._getSubtree(s)||i._renderChildSkeletons(e))}},h));var d=i._loadTemplateEngine();i._clientId=i._clientId||Symbol();var c={clientId:i._clientId,size:-1},u=r.fetchFirst(c)[Symbol.asyncIterator](),p=u.next(),m=function(t){if(t[0].done){if(i._clearSkeletonTimeout(),i._isLeafOnlySelectionEnabled()&&i._buildRawData(e,t[0]),i._isSkeletonSupported()){for(var s=[],n=t[0].value.data,r=0;r<n.length;r++){var h=t[0].value.metadata[r].key;i._isInitExpanded(h)&&i.m_dataSource.getChildDataProvider(h)&&s.push(h)}i._expandedChildrenMap.set(e,s);var d=i._expandedChildrenMap.get(e);if(d){var c=d.indexOf(e);c>-1&&d.splice(c,1)}if(!d||0===d.length)return{values:t,shouldRemoveSkeleton:!0}}return{values:t,shouldRemoveSkeleton:!1}}return u.next().then(function(e){return i._refreshId!==o?null:(t[0].done=e.done,t[0].value.data=t[0].value.data.concat(e.value.data),t[0].value.metadata=t[0].value.metadata.concat(e.value.metadata),m(t))},function(e){l.error(i.constants.ERROR_FETCHING_DATA+e),a()})};Promise.all([p,d]).then(function(e){return i._refreshId!==o?null:m(e)},function(e){return Promise.reject(e)}).then(function(e){i._refreshId===o?(t(e),a()):a()},function(e){l.error(i.constants.ERROR_FETCHING_DATA+e);var t=i._getSkeletonContainer(i.element[0]);i._isSkeletonSupported()&&t&&i._removeSkeleton(null),a()})}}},function(e){l.error(i.constants.ERROR_FETCHING_DATA+e),s(),i._expandedChildrenMap=new Map,i.m_fetching=new Set})},_clearSkeletonTimeout:function(){this._skeletonTimeout&&(clearTimeout(this._skeletonTimeout),this._skeletonTimeout=null)},_buildRawData:function(e,t){null===e?this._rawData=t.value.metadata:this._findParentAndAddChildren(this._rawData,t.value.metadata,e)},_findParentAndAddChildren:function(e,t,i){for(var s=0;s<e.length;s++){if(e[s].key===i)return void(e[s].children=t);e[s].children&&this._findParentAndAddChildren(e[s].children,t,i)}},_isParentSkeletonRendered:function(e){for(var t=this._getItemByKey(e),i=this._getParents(t,this.constants.PERIOD+this.constants.OJ_TREEVIEW_ITEM),s=0;s<i.length;s++){var n=this._getKey(i[s]);if(this._expandedChildrenMap.get(n))return!0}return!1},_getShowStatusDelay:function(){var e=this._getOptionDefaults(),t=parseInt(e.showIndicatorDelay,10);return isNaN(t)?0:t},_renderItems:function(e){return new Promise(function(t){var i=document.createElement("ul");i.classList.add(this.constants.OJ_TREEVIEW_LIST),i.setAttribute("role","group");var s=this._getSkeletonContainer(this.element[0]);(s&&this._isSkeletonSupported()||this._isLeafOnlySelectionEnabled())&&(i.style.display="none"),e.parentElem.appendChild(i);for(var n=0;n<e.fetchListResult.data.length;n++)this._renderItem(i,e.fetchListResult,n);s&&this._isSkeletonSupported()&&!this._isLeafOnlySelectionEnabled()?this._toggleParentDisplay(e.parentElem,t):t()}.bind(this))},_getScrollPolicyOptions:function(){return this.options.scrollPolicyOptions},_validateScrollPolicyOptions:function(e){var t=this._getScrollPolicyOptions(),i=this._getTreeViewItemCount()+e;return t.maxCount<i&&l.info("ScrollPolicyOptions max count of ["+t.maxCount+"] has been reached."),i-t.maxCount},_truncateIfOverMaxCount:function(e){const t=e.data.length,i=this._validateScrollPolicyOptions(t);i===t?(e.data=[],e.metadata=[]):i>0&&(e.data.splice(-i,t),e.metadata.splice(-i,t))},_toggleParentDisplay:function(e,t){var i=this._getKey(e);e===this.element[0]&&(i=null);var s=this._expandedChildrenMap.get(i);if(s&&s.length>0)t();else{let e=null;for(e of this._expandedChildrenMap.keys()){var n,o,r=this._expandedChildrenMap.get(e);null===e?(n=this.element[0],o=this._getRoot()):(n=this._getItemByKey(e),o=this._getSubtree(n),this._setItemExpanded(n)),o&&0===r.length&&this._resolveNoChildren(e,n,o,t);for(var a=r.length-1;a>=0;a--)r[a]===i&&o&&(r.splice(a,1),0===r.length&&this._resolveNoChildren(e,n,o,t))}t()}},_resolveNoChildren:function(e,t,i,s){this._expandedChildrenMap.delete(e),this._getSkeletonContainer(t)&&!this._isLeafOnlySelectionEnabled()?this._foundSkeleton(e,i,s):this._isLeafOnlySelectionEnabled()||(i&&(i.style.display="block"),this._toggleParentDisplay(t,s))},_foundSkeleton:function(e,t,i){this._removeSkeleton(e).then(function(){t&&(t.style.display="block");var e=this._getOptionDefaults();r.fadeIn(t,{duration:e.dataFadeInDuration}),i()}.bind(this))},_renderItem:function(e,t,s,n,r){var a,l,h=t.data[s],d=t.metadata[s],c=d.key;if(!r){if(this._keyList.has(c))throw new Error("JET TreeView nodes should not have duplicated keys: "+c);this._keyList.add(c)}var u=document.createElement("li");if(r){var p=this._getItemByKey(c);if(!p)return;e=p.parentNode;var m=this._getSubtree(p);p.parentNode.replaceChild(u,p)}else null==n||n>=e.children.length?e.appendChild(u):e.insertBefore(u,e.children[n]);var _={parentElement:i(u),index:s,data:h,datasource:this.options.data,parentKey:this._getKey(this._getParentItem(u)),metadata:d,component:o.__GetWidgetConstructor(this.element)};this._FixRendererContext&&(_=this._FixRendererContext(_));var g=this.m_dataSource.getChildDataProvider(c);d.leaf=null===g,d.depth=this._getDepth(u);var f=Object.keys(d);for(a=0;a<f.length;a++){var v=f[a];_[v]=d[v]}var y=this.options.item.renderer;y=this._WrapCustomElementRenderer(y);var E=this._getItemTemplate(),b=this._getTemplateEngine();if(null!=y){var S=y.call(this,_);null!=S&&(null===S.parentNode||S.parentNode instanceof DocumentFragment?u.appendChild(S):null!=S.parentNode||S.toString&&((l=document.createElement("span")).appendChild(document.createTextNode(S.toString())),u.appendChild(l)))}else if(null!=E&&null!=b){var C=this.element[0],I=b.execute(C,E,_,null);for(a=0;a<I.length;a++){if("LI"===I[a].tagName){u.parentNode.replaceChild(I[a],u);break}u.appendChild(I[a])}}else(l=document.createElement("span")).appendChild(document.createTextNode(null==h?"":h.toString())),u.appendChild(l);r&&m&&u.appendChild(m),u=e.children[null!=n?n:s],_.parentElement=i(u),u.hasAttribute("id")||u.setAttribute("id",this._getUniqueItemId()),u[this.constants.OJ_ITEM_DATA]=h,u[this.constants.OJ_ITEM_METADATA]=d,this._decorateItem(u)},_getDepth:function(e){for(var t=0,i=e;i&&i!==this.element[0];)i=i.parentElement.parentElement,t+=1;return t},_loadTemplateEngine:function(){return null!=this._getItemTemplate()&&null==this.options.item.renderer?new Promise(e=>{const t={customElement:this._GetCustomElement()};h.__getTemplateEngine(t).then(t=>{this.m_engine=t,e(t)},e=>{throw new Error("Error loading template engine: "+e)})}):Promise.resolve(null)},_getTemplateEngine:function(){return this.m_engine},_getItemTemplate:function(){if(void 0===this.m_template){this.m_template=null;var e=this._getSlotMap().itemTemplate;e&&e.length>0&&"template"===e[0].tagName.toLowerCase()&&(this.m_template=e[0])}return this.m_template},_getSlotMap:function(){return p.CustomElementUtils.getSlotMap(this.element[0])},_decorateTree:function(){var e=this,t=this._getRoot();if(t){this._focusable({element:i(t),applyHighlight:!0,setupHandlers:function(t,i){e._focusInHandler=t,e._focusOutHandler=i}}),t.setAttribute("tabIndex",0),i(t).on("focus",function(){e._focusInHandler(i(e._getItemContent(e._currentItem)))}).on("blur",function(){e._focusOutHandler(i(e._getItemContent(e._currentItem)))}),t.setAttribute("role","tree"),t.setAttribute("aria-labelledby",this.element[0].getAttribute("id"));var s=this.options.selectionMode;"none"!==s?t.setAttribute("aria-multiselectable",this._isMultiSelectionEnabled()||this._isLeafOnlySelectionEnabled()?"true":"false"):t.removeAttribute("aria-multiselectable"),"single"===s&&this.element[0].classList.add(this.constants.OJ_TREEVIEW_SELECT_SINGLE),this.element[0].setAttribute("tabIndex",-1),this.element[0].addEventListener("focus",()=>{this._getRoot().focus()}),this.element[0].addEventListener("blur",()=>{this._getRoot().blur()})}},_isMultiSelectionEnabled:function(){return"multiple"===this.options.selectionMode},_isLeafOnlySelectionEnabled:function(){return"leafOnly"===this.options.selectionMode},_isDefaultCheckBoxesEnabled:function(){return"selector"===this._getOptionDefaults().multipleSelectionAffordance&&(this._isMultiSelectionEnabled()||this._isLeafOnlySelectionEnabled())},_refreshSelectionItems:function(){if("none"!==this.options.selectionMode){var e,t,i=this._getSelected(),s=Array.from(this._getItemsInSelectedKeySet(i));if(i.isAddAll())for(e=0;e<s.length;e++){t=s[e];var n=this._getKey(t);i.has(n)&&this._isActionable(t,"select")?this._setSelected(t):this._setUnselected(t)}else{var o=this._getSelectedItemContents();for(e=o.length-1;e>=0;e--){var r=o[e].parentElement,a=s.indexOf(r);-1!==a?s.splice(a,1):this._setUnselected(r)}for(e=0;e<s.length;e++)t=s[e],this._setSelected(t)}this._isLeafOnlySelectionEnabled()&&this._updateIndeterminateState(this._selectedKeysets.partialParents)}},_getItemsInSelectedKeySet:function(e){var t=[];return e.isAddAll()?this._getItems():(e.values().forEach(e=>{var i=this._getItemByKey(e);i&&this._isActionable(i,"select")&&t.push(i)}),t)},_decorateItem:function(e){var t;e.classList.add(this.constants.OJ_TREEVIEW_ITEM),e.setAttribute("role","treeitem");var i=this._getKey(e),n=this._getItemContent(e);if(!n){if((n=document.createElement("div")).classList.add(this.constants.OJ_TREEVIEW_ITEM_CONTENT),this._isDefaultCheckBoxesEnabled()&&this._isActionable(e,"focus")&&this._isActionable(e,"select")){var o=document.createElement("span");o.classList.add(this.constants.OJ_TREEVIEW_SELECTOR);var r=document.createElement("oj-selector");this._getSelected().has(i)?r.selectedKeys=new d.KeySetImpl([i]):r.selectedKeys=new d.KeySetImpl,r.setAttribute("data-oj-binding-provider","none"),r.setAttribute("selection-mode","multiple"),r.setAttribute("aria-label",_.getTranslatedString("oj-ojTreeView.treeViewSelectorAria",{rowKey:i})),r.addEventListener("selectedKeysChanged",function(e){if("internal"===e.detail.updatedFrom){var t=this._getItemByKey(e.target.rowKey);this._focus(t,e);var i=this._getSelected();i.has(e.target.rowKey)?i=i.delete([e.target.rowKey]):(i=i.add([e.target.rowKey]),this._selectionAnchor=e.target.rowKey),this._userSelectedOptionChange(i,e)}}.bind(this)),r.rowKey=i,o.appendChild(r),n.appendChild(o),s.getContext(r).getBusyContext().whenReady().then(()=>{m.disableAllFocusableElements(r)})}if(e.firstChild)do{n.appendChild(e.firstChild)}while(e.childNodes.length>0);e.appendChild(n);var a=n.getElementsByTagName("ul")[0];a&&e.appendChild(a);var l=n.querySelectorAll(this.constants.PERIOD+this.constants.OJ_TREEVIEW_ITEM_ICON);for(t=0;t<l.length;t++)l[t].classList.add(this.constants.OJ_TREEVIEW_ICON),l[t].classList.add(this.constants.OJ_COMPONENT_ICON)}this._select(e),n.setAttribute("draggable",this._isDnD()?"true":"false");var h=this._getItemDisclosureIcon(n),c=this._getItemSpacer(n);h||(h=document.createElement("ins"),this._addTreeViewIconClass(h),c?n.insertBefore(h,c.nextElementSibling):n.insertBefore(h,n.children[0])),c||(c=document.createElement("span"),this._addTreeviewSpacerClass(c),n.insertBefore(c,h)),this._addIndentation(e,c),this._isDnD()&&(e.classList.add(this.constants.OJ_DRAGGABLE),n.classList.add(this.constants.OJ_DRAGGABLE)),this._isLeaf(e)?this._addTreeviewLeafClass(e):(this._isInitExpanded(i)?this._expand(e,!1):this._collapse(e,!1),this._addDisclosureClasses(h))},_addIndentation:function(e,t){let i=this._getDepth(e)-1;const s=t.style,o="redwood"===n.parseJSONFromFontFamily("oj-theme-json").behavior;let r=0;this._hasIcon(e)&&o&&(r=i*this.constants.TREEVIEW_CONTENT_PADDING_REM),this._isLeaf(e)&&(i+=1),s.width="calc(calc("+i+" * var(--oj-tree-view-indent-width)) + "+r+"rem)"},_hasIcon:function(e){return e.querySelectorAll(".oj-treeview-icon.oj-component-icon").length>0},_removeIndentation:function(e){e.style.removeProperty("width"),e.removeAttribute("class"),e.classList.add(this.constants.OJ_TREEVIEW_SPACER)},_addTreeviewSpacerClass:function(e){e.classList.add(this.constants.OJ_TREEVIEW_SPACER)},_addTreeViewIconClass:function(e){e.classList.add(this.constants.OJ_TREEVIEW_ICON)},_addTreeviewLeafClass:function(e){e.classList.add(this.constants.OJ_TREEVIEW_LEAF)},_removeTreeviewLeafClass:function(e){e.classList.remove(this.constants.OJ_TREEVIEW_LEAF)},_addDisclosureClasses:function(e){e.classList.add(this.constants.OJ_TREEVIEW_DISCLOSURE_ICON),e.classList.add(this.constants.OJ_COMPONENT_ICON),e.classList.add(this.constants.OJ_CLICKABLE_ICON_NOCONTEXT),e.classList.add(this.constants.OJ_DEFAULT)},_removeDisclosureClasses:function(e){e.classList.remove(this.constants.OJ_TREEVIEW_DISCLOSURE_ICON),e.classList.remove(this.constants.OJ_COMPONENT_ICON),e.classList.remove(this.constants.OJ_CLICKABLE_ICON_NOCONTEXT),e.classList.remove(this.constants.OJ_DEFAULT)},_getItems:function(){return this.element[0].querySelectorAll(this.constants.PERIOD+this.constants.OJ_TREEVIEW_ITEM)},_getKey:function(e){if(!e)return null;var t=e[this.constants.OJ_ITEM_METADATA];return t?t.key:e.getAttribute("id")},_getItemByKey:function(e){for(var i,s=this.element[0].getElementsByTagName("li"),n=0;n<s.length;n++){var o=s[n][this.constants.OJ_ITEM_METADATA];if(o&&t.KeyUtils.equals(o.key,e)){i=s[n];break}}if(i)return i;if("string"==typeof e){var r=document.getElementById(e),a=this._getRoot();if(a&&r&&a.contains(r))return r}},_getItemContent:function(e){if(!e)return null;for(var t=e.children,i=0;i<t.length;i++)if(e.children[i].classList&&e.children[i].classList.contains(this.constants.OJ_TREEVIEW_ITEM_CONTENT))return e.children[i];return null},_getChildItems:function(e){var t=[],i=e.getElementsByClassName(this.constants.OJ_TREEVIEW_LIST)[0];if(i)for(var s=i.children,n=0;n<s.length;n++)t.push(s[n]);return t},_getParentItem:function(e){var t=this._getParents(e,".oj-treeview-list")[0];return this._getParents(t,this.constants.PERIOD+this.constants.OJ_TREEVIEW_ITEM)[0]},_getSubtree:function(e){return e.getElementsByClassName(this.constants.OJ_TREEVIEW_LIST)[0]},_getRoot:function(){return this.element[0].getElementsByClassName(this.constants.OJ_TREEVIEW_LIST)[0]},_isLeaf:function(e){if(!e)return null;var t=e[this.constants.OJ_ITEM_METADATA];return!(t?!t.leaf:void 0!==this._getSubtree(e))},_isInitExpanded:function(e,t){var i=null!=t?t:this.options.expanded;return!(!i||!i.has)&&i.has(e)},_isExpanded:function(e){return e.classList.contains(this.constants.OJ_EXPANDED)},_isDisclosing:function(e){return!(!e||!this.m_disclosing)&&this.m_disclosing.indexOf(e)>-1},_setDisclosing:function(e,t){if(null!=e)if(null==this.m_disclosing&&(this.m_disclosing=[]),t)this.m_disclosing.push(e);else for(var i=this.m_disclosing.indexOf(e);i>-1;)this.m_disclosing.splice(i,1),i=this.m_disclosing.indexOf(e)},_expand:function(e,t,i,s){var n=this;if(!(this._isExpanded(e)||this._isLeaf(e)||t&&this._isDisclosing(this._getKey(e)))){if(t&&!this._trigger("beforeExpand",i,this._getEventPayload(e))&&!1!==s)return;i&&this._isActionable(e,"focus")&&this._focus(e,i);var o=this._getSubtree(e),r=n._getKey(e);if(!o)return this._uiExpanded=this._uiExpanded.add([r]),void this._fetchChildren(r,function(s){if((!n._isExpanded(e)||n._isSkeletonSupported())&&(n._isInitExpanded(r)||n._isInitExpanded(r,n._uiExpanded))){var a=s.values[0];n._truncateIfOverMaxCount(a.value);var l=e.getElementsByClassName(n.constants.OJ_TREEVIEW_SKELETON_CONTAINER).length,h={fetchListResult:a.value,parentElem:e};n._isSkeletonSupported()&&l>0&&s.shouldRemoveSkeleton&&!n._isLeafOnlySelectionEnabled()?n._renderItems(h).then(function(){var t=e.offsetHeight,s=3*t,r=t*a.value.data.length;o=n._getSubtree(e);var l={startMaxHeight:s+"px",endMaxHeight:r+"px"};r>s?n._animateSkeletonRemoval("expand",e,o,l,i):r<s?n._animateSkeletonRemoval("collapse",e,o,l,i):n._animateSkeletonRemoval("fadeIn",e,o,l,i)}):n._isSkeletonSupported()&&l>0?n._renderItems(h).then(function(){n._setExpandedState(n,e,i),n.isReady()&&n._isLeafOnlySelectionEnabled()&&n._initLeafOnlySelectionMode()}):n._renderItems(h).then(function(){n._expandAfterFetch(e,t,i),n._refreshTopAndBottomSelectionClasses(),n.isReady()&&n._isLeafOnlySelectionEnabled()&&n._initLeafOnlySelectionMode()})}});this._expandAfterFetch(e,t,i),this._refreshTopAndBottomSelectionClasses()}},_initLeafOnlySelectionMode:function(){let e=e=>new Map(e);this.options.data.createOptimizedKeyMap&&(e=e=>this.options.data.createOptimizedKeyMap(e));let t=e=>new Set(e);this.options.data.createOptimizedKeySet&&(t=e=>this.options.data.createOptimizedKeySet(e)),this.treeviewSelectionManager=new g(this._rawData,{keyAttributes:"key",childrenAttribute:"children"},e,t),this._userSelectedOptionChange(this._filterOutParentKeys(this._getSelected()),null,!0);var i=this._getRoot();this._getSkeletonContainer(this.element[0])?this._removeSkeleton(null).then(function(){i&&(i.style.display="block");var e=this._getOptionDefaults();r.fadeIn(i,{duration:e.dataFadeInDuration})}.bind(this)):i&&(i.style.display="block")},_setItemExpanded:function(e){e.classList.remove(this.constants.OJ_COLLAPSED),e.classList.add(this.constants.OJ_EXPANDED),this._setAriaExpanded(e,"true")},_animateSkeletonRemoval:function(e,t,i,s,n){var o=this._getKey(t);this._removeSkeleton(o).then(function(){this._setItemExpanded(t);var a=this,l=this._getOptionDefaults();i.style.display="block",r.fadeIn(i,{duration:l.dataFadeInDuration}).then(function(){var r=this._addBusyState("animating skeleton removal",o);t.classList.add(this.constants.OJ_TREEVIEW_ANIMATED),this._setDisclosing(this._getKey(t),!0),"expand"===e?this._startAnimation(i,"expand",s).then(this._resolveAnimationPromise(a,t,n,r)):"collapse"===e?this._startAnimation(i,"collapse",s).then(this._resolveAnimationPromise(a,t,n,r)):this._resolveAnimationPromise(a,t,n,r)()}.bind(this))}.bind(this))},_expandAfterFetch:function(e,t,i){this._setItemExpanded(e);var s=this._getKey(e),n=this._getSubtree(e);if(n&&(n.style.display="block"),t){var o=this._addBusyState("animating expand",s);e.classList.add(this.constants.OJ_TREEVIEW_ANIMATED),this._setDisclosing(s,!0),this._startAnimation(n,"expand").then(this._resolveAnimationPromise(this,e,i,o))}},_setExpandedState:function(e,t,i){e._setDisclosing(e._getKey(t),!1),t.classList.remove(e.constants.OJ_TREEVIEW_ANIMATED),e._trigger("expand",i,e._getEventPayload(t));var s=e.options.expanded.add([e._getKey(t)]);e._userOptionChange("expanded",s,i)},_resolveAnimationPromise:function(e,t,i,s){return function(){this._setExpandedState(e,t,i),s()}.bind(this)},_collapse:function(e,t,i,s){var n=this,o=this._getKey(e);if(!(e.classList.contains(this.constants.OJ_COLLAPSED)||this._isLeaf(e)||t&&this._isDisclosing(o))){if(i&&this._isActionable(e,"focus"))this._focus(e,i);else if(e.contains(this._currentItem)){var r=e;this._isActionable(r,"focus")||(r=this._getPreviousActionableItem(e,"focus"))||(r=this._getNextActionableItem(e,"focus")),r?this._focus(r,i):(this.options.currentItem=null,this._resetFocus())}if(t){if(!this._trigger("beforeCollapse",i,this._getEventPayload(e))&&!1!==s)return;this._setDisclosing(o,!0)}e.classList.remove(this.constants.OJ_EXPANDED),e.classList.add(this.constants.OJ_COLLAPSED),this._setAriaExpanded(e,"false");var a=this._getSubtree(e);if(t){var l=this._addBusyState("animating collapse",o);e.classList.add(this.constants.OJ_TREEVIEW_ANIMATED),this._uiExpanded=this._uiExpanded.delete([o]),this._startAnimation(a,"collapse").then(function(){n._setDisclosing(o,!1),a.style.display="none",e.classList.remove(n.constants.OJ_TREEVIEW_ANIMATED),n._trigger("collapse",i,n._getEventPayload(e)),n._refreshTopAndBottomSelectionClasses();var t=n.options.expanded.delete([o]);n._userOptionChange("expanded",t,i),l()})}else a&&(a.style.display="none",this._refreshTopAndBottomSelectionClasses());this._isLeafOnlySelectionEnabled()&&!a&&this._fetchChildren(o,function(t){var i=t.values[0];n._truncateIfOverMaxCount(i.value);var s={fetchListResult:i.value,parentElem:e};n._renderItems(s).then(function(){n.isReady()&&n._isLeafOnlySelectionEnabled()&&n._initLeafOnlySelectionMode()})})}},_startAnimation:function(e,t,i){var s={};null==s[t]&&(s[t]=JSON.parse(this._getOptionDefaults()[t+"Animation"]));var n=s[t];return i&&("expand"!==n.effect&&"collapse"!==n.effect||Object.assign(n,i)),r.startAnimation(e,t,n,this)},_getEventPayload:function(e){return{key:this._getKey(e),item:e}},_isActionable:function(e,t){var i=this.options.item[t+"able"];return!1!==i&&("function"!=typeof i||i(this.getContextByNode(e)))},_isSelected:function(e){var t=this.options.selectionMode,i=this._getSelected();if("none"===t)return!1;var s=this._getKey(e);return i.has(s)},_getSelected:function(){return this._isLeafOnlySelectionEnabled()&&this._selectedKeysets?this._selectedKeysets.selected:this.options.selected},_select:function(e,t){if("none"!==this.options.selectionMode&&this._isActionable(e,"focus")&&this._isActionable(e,"select")){var i=this._isSelected(e);if(t){var s=t.key||t.keyCode,n=t.originalEvent.sourceCapabilities&&t.originalEvent.sourceCapabilities.firesTouchEvents,o=a.isTouchSupported()&&(n||null!=this.touchStartEvent&&this.touchStartEvent.target===t.target),r=a.isMetaKeyPressed(t),l=m.isArrowUpKeyEvent(s)||m.isArrowDownKeyEvent(s),h=this._getKey(e),c=new d.KeySetImpl;if((this._isMultiSelectionEnabled()||this._isLeafOnlySelectionEnabled())&&t.shiftKey&&!l&&this._selectionAnchor){let t=this._getItemByKey(this._selectionAnchor);r?c=this._getSelected():this._clearSelection();for(var u=t&&t.offsetTop<e.offsetTop?this._getNextActionableItem.bind(this):this._getPreviousActionableItem.bind(this);t&&t!==e;){var p=this._getKey(t);c.has(p)||(c=c.add([p]),this._setSelected(t)),t=u(t,"select")}i=!0,c=c.add([h])}else(this._isMultiSelectionEnabled()||this._isLeafOnlySelectionEnabled())&&(r||o||l)?(i=!i,c=this._getSelected(),c=i?c.add([h]):c.delete([h]),this._selectionAnchor=h):(o||m.isSpaceBarKeyEvent(s))&&i?(i=!1,c=new d.KeySetImpl):(i=!0,c=new d.KeySetImpl([h]),this._selectionAnchor=h);this._userSelectedOptionChange(c,t,!r&&!l&&!o)}i?this._setSelected(e):this._setUnselected(e)}},_getSelectorByItem:function(e){return e.getElementsByTagName("oj-selector")[0]},_updateIndeterminateState:function(e){if(this._isDefaultCheckBoxesEnabled()){var t,i,s=Array.from(this.element[0].getElementsByClassName("oj-indeterminate")),n=Array.from(e.values());for(i=s.length-1;i>=0;i--){var o=(t=s[i].parentElement).rowKey,r=n.indexOf(o);-1!==r?n.splice(r,1):t.indeterminate=!1}for(i=0;i<n.length;i++){var a=this._getItemByKey(n[i]);(t=this._getSelectorByItem(a)).indeterminate=!0}}},_setSelected:function(e){this._getItemContent(e).classList.add(this.constants.OJ_SELECTED),e.setAttribute("aria-selected","true");var t=this._getKey(e);this._setupSelector(t,e,!1),(this._isLeafOnlySelectionEnabled()||this._isMultiSelectionEnabled())&&this._setTopAndBottomSelectionClasses(e)},_setTopAndBottomSelectionClasses:function(e){let t=e,i=this._getItemContent(e);do{i=this._getItemContent(t),i.classList.remove(this.constants.OJ_TREEVIEW_SELECTED_TOP_ITEM),i.classList.remove(this.constants.OJ_TREEVIEW_SELECTED_BOTTOM_ITEM),t=this._getPreviousItem(t)}while(t&&this._isSelected(t)&&!this._isHiddenElement(e));i.classList.add(this.constants.OJ_TREEVIEW_SELECTED_TOP_ITEM);let s=e,n=this._getItemContent(e);do{n=this._getItemContent(s),n!==i&&n.classList.remove(this.constants.OJ_TREEVIEW_SELECTED_TOP_ITEM),n.classList.remove(this.constants.OJ_TREEVIEW_SELECTED_BOTTOM_ITEM),s=this._getNextItem(s)}while(s&&this._isSelected(s)&&!this._isHiddenElement(e));n.classList.add(this.constants.OJ_TREEVIEW_SELECTED_BOTTOM_ITEM)},_removeTopAndBottomSelectionClasses:function(e){const t=this._getPreviousItem(e);this._getItemContent(e).classList.remove(this.constants.OJ_TREEVIEW_SELECTED_TOP_ITEM),t&&this._isSelected(t)&&!this._isHiddenElement(e)&&this._getItemContent(t).classList.add(this.constants.OJ_TREEVIEW_SELECTED_BOTTOM_ITEM);const i=this._getNextItem(e);this._getItemContent(e).classList.remove(this.constants.OJ_TREEVIEW_SELECTED_BOTTOM_ITEM),i&&this._isSelected(i)&&!this._isHiddenElement(e)&&this._getItemContent(i).classList.add(this.constants.OJ_TREEVIEW_SELECTED_TOP_ITEM)},_isHiddenElement:function(e){const t=this._getParents(e,this.constants.PERIOD+this.constants.OJ_TREEVIEW_ITEM);for(let i=1;i<t.length;i++){const s=this._getSubtree(t[i]);if(s&&"none"===s.style.display&&e!==t[i])return!0}return!1},_refreshTopAndBottomSelectionClasses:function(){let e;this._getFlatList().forEach(t=>{const i=this._getItemContent(t);i.classList.remove(this.constants.OJ_TREEVIEW_SELECTED_TOP_ITEM),i.classList.remove(this.constants.OJ_TREEVIEW_SELECTED_BOTTOM_ITEM);const s=this._isSelected(t);if(!e&&s&&(i.classList.add(this.constants.OJ_TREEVIEW_SELECTED_TOP_ITEM),e=t),e&&s){const s=this._getNextItem(t);this._isSelected(s)||(i.classList.add(this.constants.OJ_TREEVIEW_SELECTED_BOTTOM_ITEM),e=null)}})},_setUnselected:function(e){this._getItemContent(e).classList.remove(this.constants.OJ_SELECTED),e.setAttribute("aria-selected","false");var t=this._getKey(e);this._setupSelector(t,e,!0),(this._isLeafOnlySelectionEnabled()||this._isMultiSelectionEnabled())&&this._removeTopAndBottomSelectionClasses(e)},_clearSelection:function(){for(var e=this._getSelectedItemContents(),t=e.length-1;t>=0;t--)this._setUnselected(e[t].parentElement)},_setupSelector:function(e,t,i){if(this._isDefaultCheckBoxesEnabled()){var s=this._getSelectorByItem(t),n=i?[]:[e];s&&(s.selectedKeys=new d.KeySetImpl(n))}},_getSelectedItemContents:function(){return this.element[0].querySelectorAll(this.constants.PERIOD+this.constants.OJ_TREEVIEW_ITEM_CONTENT+this.constants.PERIOD+this.constants.OJ_SELECTED)},_focus:function(e,t){if(this._isActionable(e,"focus")){if(t){var s=this._getEventPayload(e);if(this._currentItem&&(s.previousKey=this._getKey(this._currentItem),s.previousItem=this._currentItem),!this._trigger("beforeCurrentItem",t,s))return;this._userOptionChange("currentItem",this._getKey(e),t)}this._focusOutHandler(i(this._getItemContent(this._currentItem))),this._focusInHandler(i(this._getItemContent(e))),this._setCurrentItem(e)}},_resetFocus:function(){if(this.options.currentItem){var e=this._getItemByKey(this.options.currentItem);if(e)return void this._setCurrentItem(e)}var t=this._getItems()[0];this._isActionable(t,"focus")||(t=this._getNextActionableItem(t,"focus")),this._setCurrentItem(t),this._userOptionChange("currentItem",this._getKey(this._currentItem),null)},_setCurrentItem:function(e){this._currentItem=e;var t=this._getRoot();t&&e&&t.setAttribute("aria-activedescendant",this._getItemId(e))},_getItemId:function(e){return e.getAttribute("id")},_getUniqueItemId:function(){return p.ElementUtils.getUniqueId(this.element[0].getAttribute("id")).concat("_"+this._getTreeViewItemCount())},_getTreeViewItemCount:function(){return this._getItems().length},_addBusyState:function(e,t){var i=s.getContext(this.element[0]).getBusyContext(),n=this.element.attr("id"),o=i.addBusyState({description:"The component identified by '"+n+"', "+e});return this.m_fetching.add(t),this._changeStatusMessage(t,!1),function(){this._changeStatusMessage(t,!0),this.m_fetching.delete(t),o(),Promise.resolve(this._processEventQueue())}.bind(this)},_changeStatusMessage:function(e,t){const i=this.element[0].getElementsByClassName("oj-helper-hidden-accessible")[0];let s;const n=null!==e?this._getNodeTextByKey(e):this.element[0].getAttribute("id");s=t?_.getTranslatedString("oj-ojTreeView.receivedDataAria",{nodeText:n}):_.getTranslatedString("oj-ojTreeView.retrievingDataAria",{nodeText:n}),i.textContent=s},_getNodeTextByKey:function(e){const t=this._getItemByKey(e);if(t){const e=/[\n\r]+|[\s]{2,}/g;return this._getItemContent(t).textContent.replace(e," ").trim()}return null},_userOptionChange:function(e,t,i){this.option(e,t,{_context:{originalEvent:i,writeback:!0,internalSet:!0}})},_userSelectedOptionChange:function(e,t,i){let s=e;if(this._isLeafOnlySelectionEnabled()){let e=i?this._getEmptyKeySet(s):this._getSelected();this._selectedKeysets=this.treeviewSelectionManager.computeSelection(s,e),s=this._selectedKeysets.selectedLeaves}this._userOptionChange("selected",s,t),this._userOptionChange("selection",d.KeySetUtils.toArray(s),t),this._refreshSelectionItems()},_getEmptyKeySet:function(e){return e.isAddAll()?new d.AllKeySetImpl:new d.KeySetImpl},_filterOutParentKeys:function(e){if(e.isAddAll()){let t=new d.AllKeySetImpl,i=[...e.deletedValues()].filter(e=>!this.treeviewSelectionManager.parentKeyNodeMap.has(e));return t=t.delete(i),t}return new d.KeySetImpl([...e.values()].filter(e=>!this.treeviewSelectionManager.parentKeyNodeMap.has(e)))},_getDragOptions:function(){return((this.options.dnd||{}).drag||{}).items||{}},_getDropOptions:function(){return((this.options.dnd||{}).drop||{}).items||{}},_getClosestItem:function(e){return this._closest(e,this.constants.PERIOD+this.constants.OJ_TREEVIEW_ITEM)},_getClosestItemContent:function(e){return this._closest(e,".oj-treeview-item-content")},_getClosestDisclosureIcon:function(e){return this._closest(e,".oj-treeview-disclosure-icon")},_handleClick:function(e){if(!m.isFromDefaultSelector(e)){var t,i=this._getClosestDisclosureIcon(e.target);if(i){t=this._getClosestItem(i);var s=this._getKey(t);if(this.m_fetching.has(s))return;return this._isExpanded(t)?this._collapse(t,!0,e):this._expand(t,!0,e),void(this.touchStartEvent=null)}var n=this._getClosestItemContent(e.target);if(n)return t=n.parentNode,this._select(t,e),this._focus(t,e),void(this.touchStartEvent=null);"none"!==this.options.selectionMode&&(this._clearSelection(),this._userSelectedOptionChange(new d.KeySetImpl,e)),this.touchStartEvent=null}},_isDnD:function(){var e=this._getDragOptions();return Object.keys(e).length>0},_handleMouseOver:function(e){if((!a.isTouchSupported()||!this.touchStartEvent)&&("none"!==this.options.selectionMode||this._isDnD())){var t=this._getClosestDisclosureIcon(e.target);t||(t=this._getClosestItemContent(e.target)),t&&(t.classList.remove(this.constants.OJ_DEFAULT),t.classList.add(this.constants.OJ_HOVER))}},_handleMouseOut:function(e){var t=this._getClosestDisclosureIcon(e.target);t&&t.classList.remove(this.constants.OJ_SELECTED),t||(t=this._getClosestItemContent(e.target)),t&&(t.classList.add(this.constants.OJ_DEFAULT),t.classList.remove(this.constants.OJ_HOVER))},_handleMouseDown:function(e){if(!m.isFromDefaultSelector(e)){var t=this._getClosestDisclosureIcon(e.target);t&&t.classList.add(this.constants.OJ_SELECTED)}},_handleMouseUp:function(e){var t=this._getClosestDisclosureIcon(e.target);t&&t.classList.remove(this.constants.OJ_SELECTED)},_handleKeyDown:function(e){var t,i=this._currentItem,s=e.key||e.keyCode;if(m.isArrowUpKeyEvent(s)||m.isArrowDownKeyEvent(s))(t=m.isArrowDownKeyEvent(s)?this._getNextActionableItem(i,"focus"):this._getPreviousActionableItem(i,"focus"))&&(e.preventDefault(),this._isSelected(i)&&e.shiftKey&&this._select(this._isSelected(t)?i:t,e),this._scrollToVisible(t),this._focus(t,e));else if(m.isArrowLeftKeyEvent(s)||m.isArrowRightKeyEvent(s)){var n="rtl"===this._GetReadingDirection(),o=!n&&m.isArrowRightKeyEvent(s)||n&&m.isArrowLeftKeyEvent(s);!o||this._isLeaf(i)||this._isExpanded(i)?o||this._isLeaf(i)||!this._isExpanded(i)?(t=o?this._getNextActionableItem(i,"focus"):this._getPreviousActionableItem(i,"focus"))&&(e.preventDefault(),this._focus(t,e)):(e.preventDefault(),this._collapse(i,!0,e)):(e.preventDefault(),this._expand(i,!0,e))}else if(m.isEnterKeyEvent(s)||m.isSpaceBarKeyEvent(s))e.preventDefault(),this._select(i,e);else if(m.isLetterAKeyEvent(s)&&a.isMetaKeyPressed(e)&&(this._isLeafOnlySelectionEnabled()||this._isMultiSelectionEnabled())){e.preventDefault();for(var r=this._getItems(),l=new d.AllKeySetImpl,h=0;h<r.length;h++)this._isActionable(r[h],"select")&&this._setSelected(r[h]);this._userSelectedOptionChange(l,e)}},_scrollToVisible:function(e){const t=this.element[0],i=this._getItemSpacer(e).offsetHeight,s=t.getBoundingClientRect(),n=s.top,o=s.bottom,r=e.getBoundingClientRect(),a=r.top,l=r.top+i;a>=n&&l<=o||(a<n?t.scrollTop+=a-n-1:l>o&&(t.scrollTop+=l-o+1))},_getNextItem:function(e){if(!this._isLeaf(e)&&this._isExpanded(e)){var t=this._getChildItems(e)[0];if(t)return t}for(var i=e;i;){var s=this._getNextSibling(i,this.constants.PERIOD+this.constants.OJ_TREEVIEW_ITEM);if(s)return s;i=this._getParentItem(i)}return null},_getNextActionableItem:function(e,t){for(;null!=e;)if(null!=(e=this._getNextItem(e))&&this._isActionable(e,t))return e;return null},_getPreviousItem:function(e){for(var t=this._getPreviousSibling(e,this.constants.PERIOD+this.constants.OJ_TREEVIEW_ITEM);t;){if(this._isLeaf(t)||!this._isExpanded(t))return t;var i=this._getChildItems(t),s=i[i.length-1];if(!s)return t;t=s}var n=this._getParentItem(e);return n||null},_getPreviousActionableItem:function(e,t){for(;null!=e;)if(null!=(e=this._getPreviousItem(e))&&this._isActionable(e,t))return e;return null},_handleDragStart:function(e){a.isTouchSupported()&&(this.ojTreeViewDragEvent=!0);var i=this,s="rtl"===this._GetReadingDirection(),n=this._getClosestItem(e.target);if(n){var o,r=[];if(this._isSelected(n)){var l=this.options.selection;for(o=0;o<l.length;o++){var h=this._getItemByKey(l[o]);h&&r.push(h)}}else this._select(n,e),r.push(n);var d=this._getDragOptions(),c=e.originalEvent.dataTransfer,u=document.createElement("ul");u.classList.add(this.constants.OJ_TREEVIEW_DRAG_IMAGE),u.classList.add(this.constants.OJ_TREEVIEW_LIST),t.AgentUtils.getAgentInfo().browser===t.AgentUtils.BROWSER.SAFARI&&(u.style.position="absolute");var p,m=[],_=1/0,g=1/0;for(r.forEach(function(e){const t=e[i.constants.OJ_ITEM_DATA];t?m.push(t):m.push(e.parentElement.innerHTML);var n=i._getItemSpacer(e),o=e.getBoundingClientRect(),r=o.top,a=void 0===n?0:n.offsetWidth;if(s){for(var l=i._getItemContent(e).children,h=0,d=0;d<l.length;d++)h+=l[d].offsetWidth;a=i._getTreeviewWidth()+o.x-h-a}r+=document.body.scrollTop,a+=document.body.scrollLeft;var c=e.cloneNode(!0);c.style.top=r+"px",c.style.left=a+"px",e.classList.add(i.constants.OJ_TREEVIEW_DRAG_SOURCE),c.classList.add(i.constants.OJ_TREEVIEW_DRAG_IMAGE),c.classList.add(i.constants.OJ_TREEVIEW_DRAG_IMAGE_ITEM);var p=i._getSubtree(c);p&&c.removeChild(p);var f=i._getItemContent(c);i._setUnselected(c),f.classList.remove(i.constants.OJ_FOCUS),f.classList.remove(i.constants.OJ_HOVER),f.classList.remove(i.constants.OJ_FOCUS_HIGHLIGHT),f.classList.remove(i.constants.OJ_DRAGGABLE);var v=c.getElementsByClassName(i.constants.OJ_TREEVIEW_SPACER)[0];if(v){var y=document.createElement("span");i._addTreeviewSpacerClass(y),f.insertBefore(y,v),f.removeChild(v)}if(i._isDefaultCheckBoxesEnabled()&&i._isActionable(e,"focus")&&i._isActionable(e,"select")){var E=c.getElementsByClassName(i.constants.OJ_TREEVIEW_SELECTOR)[0];E.firstChild.selectedKeys=i.options.selected,E.firstChild.rowKey=i._getKey(e)}r<_&&(_=r),a<g&&(g=a),u.appendChild(c)}),o=0;o<u.children.length;o++)(p=u.children[o]).style.top=parseFloat(p.style.top)-_+"px",p.style.left=parseFloat(p.style.left)-g+"px";var f=d.dataTypes,v="string"==typeof f?[f]:f||[];for(o=0;o<v.length;o++)c.setData(v[o],JSON.stringify(m));document.body.appendChild(u),c.setDragImage(u,e.pageX-g,e.pageY-_),setTimeout(function(){u.parentElement.removeChild(u)},0);var y=d.dragStart;y&&y(e.originalEvent,{items:m})}},_handleDragSourceEvent:function(e,t){"dragEnd"===t&&(this._removeGhostElements(),this._dropLine.style.display="none"),"dragEnd"===t&&a.isTouchSupported()&&(this.ojTreeViewDragEvent=!1);var i=this._getDragOptions()[t];i&&i(e.originalEvent)},_getTreeviewWidth:function(){return this.element[0].offsetWidth},_getItemSpacer:function(e){return e.getElementsByClassName(this.constants.OJ_TREEVIEW_SPACER)[0]},_handleDropTargetEvent:function(e,t){var i=this._getDropOptions(),s=i.dataTypes,n="string"==typeof s?[s]:s||[],o=i[t],r=this._getClosestItem(e.target);if(r){var l=this._getItemSpacer(r).getBoundingClientRect(),h="inside",d=e.originalEvent.clientY-l.top;d<.25*l.height?h="before":d>.75*l.height&&(h=this._isExpanded(r)?"first":"after"),o&&o(e.originalEvent,{item:r,position:h});for(var c=0;c<n.length;c++){var u=e.originalEvent.dataTransfer.types;if(u&&u.indexOf(n[c])>=0){e.preventDefault();break}}if("dragEnter"!==t&&"dragOver"!==t||!e.originalEvent.defaultPrevented){if("drop"===t&&(this._removeGhostElements(),this._dropLine.style.display="none",this._removeDropClass(r)),"drop"===t&&a.isTouchSupported()&&(this.ojTreeViewDragEvent=!1),"dragLeave"===t){var p=r.offsetWidth;if("DIV"===e.target.nodeName&&e.target.classList.contains(this.constants.OJ_TREEVIEW_ITEM_CONTENT)&&(e.offsetX>=p||e.offsetX<=0))this._dropLine.style.display="none",a.isTouchSupported()&&(this.ojTreeViewDragEvent=!1),this._removeDropClass(r);else if(e.offsetY>=r.offsetHeight||e.offsetY<=0){var m=this._getItems();if(m.length>0){var _=m[0];(r===m[m.length-1]&&"after"===h||r===_&&"before"===h)&&(this._dropLine.style.display="none",a.isTouchSupported()&&(this.ojTreeViewDragEvent=!1))}else 0===m.length&&(this._dropLine.style.display="none",a.isTouchSupported()&&(this.ojTreeViewDragEvent=!1))}"inside"!==h&&this._removeDropClass(r)}}else{"dragEnter"===t&&a.isTouchSupported()&&(this.ojTreeViewDragEvent=!0);var g="rtl"===this._GetReadingDirection(),f=r.offsetTop;if("before"!==h&&(f+=l.height),"inside"!==h){var v,y=this._getParentItem(r);y&&this._isLeaf(r)?(v=l.width,v-=this._getItemDisclosureIcon(y).offsetHeight):y&&!this._isLeaf(r)?(v=l.width,"first"===h&&(v+=this._getItemDisclosureIcon(r).offsetHeight)):y||(v=0,"first"===h&&(v+=this._getItemDisclosureIcon(r).offsetHeight)),this._removeDropClass(r);var E=this._getTreeviewWidth()-parseInt(v,10)+"px",b=g?"0px":v+"px";this._dropLine.style.width=E,this._dropLine.style.left=b,this._dropLine.style.top=f+"px",this._dropLine.style.display=""}else this._dropLine.style.display="none",this._addDropClass(r)}}},_addDropClass:function(e){this._getItemContent(e).classList.add(this.constants.OJ_TREEVIEW_DROP_ZONE)},_removeDropClass:function(e){this._getItemContent(e).classList.remove(this.constants.OJ_TREEVIEW_DROP_ZONE)},_removeGhostElements:function(){for(var e=this.element[0].querySelectorAll(this.constants.PERIOD+this.constants.OJ_TREEVIEW_DRAG_SOURCE),t=e.length-1;t>=0;t--)e[t].classList.remove(this.constants.OJ_TREEVIEW_DRAG_SOURCE)},_NotifyContextMenuGesture:function(e,t,i){if("keyboard"===i){var s=this._currentItem?this._getItemContent(this._currentItem):this.element,n={launcher:this._getRoot(),initialFocus:"menu",position:{my:"start top",at:"start bottom",of:s}};this._OpenContextMenu(t,i,n)}else if(!this.ojTreeViewDragEvent){var o=this._getClosestItem(t.target);o&&(this._setCurrentItem(o),this._userOptionChange("currentItem",this._getKey(this._currentItem),t),this._superApply(arguments))}},refresh:function(){this._super(),this._refreshId+=1,delete this.m_template,delete this.m_engine,delete this.m_dataSource,this._expandedChildrenMap=new Map,this.m_fetching=new Set,this._render()},getNodeBySubId:function(e){if(null==e)return this.element?this.element[0]:null;var t,i=e.key,s=e.subId,n=this._getItemByKey(i);return"oj-treeview-disclosure"===s&&n?t=n.getElementsByClassName(this.constants.OJ_TREEVIEW_DISCLOSURE_ICON)[0]:s===this.constants.OJ_TREEVIEW_ITEM&&n&&(t=n.getElementsByClassName(this.constants.OJ_TREEVIEW_ITEM_CONTENT)[0]),t||null},getSubIdByNode:function(e){if(!this.element[0].contains(e))return null;var t,i=this._getClosestDisclosureIcon(e),s=this._getClosestItem(e);if(i)t="oj-treeview-disclosure";else{if(!s)return null;t=this.constants.OJ_TREEVIEW_ITEM}return{subId:t,key:this._getKey(s)}},getContextByNode:function(e){if(!this.element[0].contains(e))return null;var t,i=this._getClosestItem(e);if(!i)return null;var s=i.parentNode.children,n=[];for(t=0;t<s.length;t++)s[t].classList.contains(this.constants.OJ_TREEVIEW_ITEM)&&n.push(s[t]);var r={subId:this.constants.OJ_TREEVIEW_ITEM,index:n.indexOf(i),parentKey:this._getKey(this._getParentItem(i))};r.component=o.__GetWidgetConstructor(this.element),this._FixRendererContext&&(r=this._FixRendererContext(r));var a=i[this.constants.OJ_ITEM_METADATA];if(a){r.metadata=a,r.data=i[this.constants.OJ_ITEM_DATA],r.datasource=this.options.data;var l=Object.keys(a);for(t=0;t<l.length;t++){var h=l[t];r[h]=a[h]}}else r.key=this._getKey(i),r.leaf=this._isLeaf(i),r.depth=this._getParents(i,".oj-treeview-list").length;return r},_setOption:function(e,t,i){var s,n,o=this;if(this._isLeafOnlySelectionEnabled()&&(!this._isLeafOnlySelectionEnabled()||"selected"===e&&"selection"===e)||this._superApply(arguments),"expanded"===e)for(this._uiExpanded=o._uiExpanded.clear(),this._expandedChildrenMap=new Map,n=this._getItems(),s=0;s<n.length;s++){var r=this._getKey(n[s]);o._isInitExpanded(r)?o._expand(n[s],!0):o._collapse(n[s],!0)}else if("selected"===e){if(this._isLeafOnlySelectionEnabled()){let e=t;e=this._filterOutParentKeys(e);let i=this._getEmptyKeySet(e);this._selectedKeysets=this.treeviewSelectionManager.computeSelection(e,i),t=this._selectedKeysets.selectedLeaves,arguments[1]=t,this._superApply(arguments)}var a=d.KeySetUtils.toArray(t);this._userOptionChange("selection",a,null),this._refreshSelectionItems()}else if("selection"===e){var l=d.KeySetUtils.toKeySet(t);if(this._isLeafOnlySelectionEnabled()){let e=l;e=this._filterOutParentKeys(e);let t=this._getEmptyKeySet(e);this._selectedKeysets=this.treeviewSelectionManager.computeSelection(e,t),l=this._selectedKeysets.selectedLeaves,arguments[1]=d.KeySetUtils.toArray(l),this._superApply(arguments)}this._userOptionChange("selected",l,null),this._refreshSelectionItems()}else"currentItem"===e?this._resetFocus():"data"===e?(this._removeDataProviderEventListeners(),this.options.data=t,this.options.data||this._getRoot().remove(),this._addDataProviderEventListeners(),this.refresh()):this.refresh()},_SetupResources:function(){this._super(),this._addDataProviderEventListeners()},_ReleaseResources:function(){this._super(),this._removeDataProviderEventListeners()},_destroy:function(){this._removeDataProviderEventListeners(),this._super()},_addDataProviderEventListeners:function(){var e=this.options.data;e&&t.DataProviderFeatureChecker.isTreeDataProvider(e)&&(this.m_handleModelMutateEventListener=this.handleModelMutateEvent.bind(this),this.m_handleModelRefreshEventListener=this.handleModelRefreshEvent.bind(this),e.addEventListener("mutate",this.m_handleModelMutateEventListener),e.addEventListener("refresh",this.m_handleModelRefreshEventListener))},_removeDataProviderEventListeners:function(){var e=this.options.data;e&&t.DataProviderFeatureChecker.isTreeDataProvider(e)&&(e.removeEventListener("mutate",this.m_handleModelMutateEventListener),e.removeEventListener("refresh",this.m_handleModelRefreshEventListener))},handleModelMutateEvent:function(e){this._isLeafOnlySelectionEnabled()?l.error("Mutations are not supported in selectionMode: leafOnly  "):this.isReady()?(null!=e.detail.remove&&this.handleModelRemoveEvent(e),null!=e.detail.add&&this.handleModelAddEvent(e),null!=e.detail.update&&this.handleModelChangeEvent(e),this._processEventQueue()):this._pushToEventQueue(e)},_pushToEventQueue:function(e){null==this.m_eventQueue&&(this.m_eventQueue=[]),this.m_eventQueue.push(e)},_clearEventQueue:function(){null!=this.m_eventQueue&&(this.m_eventQueue.length=0)},_processEventQueue:function(){if(!this.isReady())return;let e;if(null!=this.m_eventQueue&&this.m_eventQueue.length>0){for(var t=0;t<this.m_eventQueue.length;t++)if(e=this.m_eventQueue[t],"refresh"===e.type&&(!e.detail||e.detail&&!e.detail.keys))return void this.handleModelRefreshEvent(e);e=this.m_eventQueue.shift(),"mutate"===e.type&&this.handleModelMutateEvent(e),"refresh"===e.type&&e.detail&&e.detail.keys&&this.handleModelRefreshEvent(e)}},isReady:function(){return 0===this.m_fetching.size},handleModelRemoveEvent:function(e){var t=this,i=e.detail.remove.keys,s=[];if(null==i||0===i.size)return;const n=this._getKey(this._currentItem),o=this._getFlatList(),r=o.indexOf(this._currentItem);if(i.forEach(function(i){(!e.detail.add||e.detail.add&&!e.options.detail.add.keys.has(i))&&(s=s.concat(t._removeAllChildrenOfParentKey(i)))}),0!==s.length){var a=this._getSelected();if(null!=a){var l=a.delete(s);a!==l&&this._userSelectedOptionChange(l,e)}var h=this.options.expanded;if(null!=h){var d=h.delete(s);this._uiExpanded.delete(s),h!==d&&this._userOptionChange("expanded",d,null)}if(!this._getItemByKey(n)){const t=this._getFlatList();let i=null;if(t.length>0){for(let e=r-1;e>=0;--e)if(t.includes(o[e])&&this._isActionable(o[e],"focus")){i=o[e];break}if(!i)for(let e=r;e<o.length;e++)if(t.includes(o[e])&&this._isActionable(o[e],"focus")){i=o[e];break}if(!i){const e=this._getItems();e.length>0&&(i=e[0])}if(i)return this._setCurrentItem(i),void this._userOptionChange("currentItem",this._getKey(this._currentItem),e)}}this._resetFocus()}},_getFlatList:function(){const e=[];return this._getItems().forEach(t=>{this._isHiddenElement(t)||e.push(t)}),e},_changeNodeToLeaf:function(e,t){if(e!==this.element[0]){e.removeChild(t),e[this.constants.OJ_ITEM_METADATA].leaf=!0,e.classList.add(this.constants.OJ_TREEVIEW_LEAF),e.classList.remove(this.constants.OJ_EXPANDED),e.removeAttribute("aria-expanded"),e.classList.remove(this.constants.OJ_COLLAPSED);var i=this._getItemSpacer(e);this._removeIndentation(i),this._addIndentation(e,i);var s=this._getKey(e),n=[];n.push(s);var o=this.options.expanded;if(null!=o){var r=o.delete(n);this._uiExpanded.delete(n),o!==r&&this._userOptionChange("expanded",r,null)}var a=this._getItemDisclosureIcon(e);this._removeDisclosureClasses(a)}},_changeNodeToParent:function(e){e[this.constants.OJ_ITEM_METADATA].leaf=!1,e.classList.remove(this.constants.OJ_TREEVIEW_LEAF),e.classList.add(this.constants.OJ_COLLAPSED),this._setAriaExpanded(e,"false"),this._refreshTopAndBottomSelectionClasses();var t=this._getItemSpacer(e);this._removeIndentation(t),this._addIndentation(e,t);var i=this._getItemDisclosureIcon(e);this._addDisclosureClasses(i)},_setAriaExpanded:function(e,t){e.setAttribute("aria-expanded",t)},_getItemDisclosureIcon:function(e){return e.getElementsByTagName("ins")[0]},_removeAllChildrenOfParentKey:function(e,i){var s=this,n=[],o=this._getItemByKey(e);if(o){this._getChildItems(o).forEach(function(e){var t=s._getKey(e),o=s._removeAllChildrenOfParentKey(t,i);n=n.concat(o)});var r=o.parentNode;t.KeyUtils.equals(e,i)||(r.removeChild(o),this._keyList.delete(e),n.push(e)),0!==r.getElementsByTagName("li").length||i||this._changeNodeToLeaf(r.parentNode,r)}return n},_isLeafIcon:function(e){return e.classList.contains(this.constants.OJ_TREEVIEW_LEAF)},handleModelReorder:function(e,t,i){var s=this._getItemByKey(t),n=s.parentElement,o=this._getItemByKey(e),r=o.parentElement,a=o.parentNode;r.removeChild(o),0===r.getElementsByTagName("li").length&&this._changeNodeToLeaf(a.parentNode,a),i?n.insertBefore(o,s.nextSibling):n.insertBefore(o,s)},getLastItemKey(e){return this._getKey(e[e.length-1])},handleModelAddEvent:function(e){var t=e.detail.add,i=t.parentKeys,s=t.indexes,n=0,o=this,r=e.detail.add.keys;const a=[],l=this._addBusyState("validating mutation data for add event",null);this._fetchEventDataForKeys(t).then(h=>{if(null===h)return void l();this._truncateIfOverMaxCount(h);const d=h.data,c=h.metadata;r.forEach(i=>{if(!e.detail.remove||e.detail.remove&&!e.options.detail.remove.keys.has(i))a.push(i);else if(t.addBeforeKeys&&t.addBeforeKeys[n]&&0!==t.addBeforeKeys.length)this.handleModelReorder(i,t.addBeforeKeys[n],!1);else{var s;if(t.parentKeys&&t.parentKeys[n]&&0!==t.parentKeys.length){var o=this._getItemByKey(t.parentKeys[n]),r=this._getChildItems(o);s=this.getLastItemKey(r)}else{var l=this._getItems();s=this.getLastItemKey(l)}s&&this.handleModelReorder(i,s,!0)}n+=1}),i.forEach(function(e){var t=o._getItemByKey(e);t&&o._isLeafIcon(t)&&o._changeNodeToParent(t)});const u=this._getAllTreeviewKeys(),p=m.getAddEventKeysResult(u,t,!0);if(d&&a.length>0&&d.length>0&&a.length===d.length&&(null==s||s.length===d.length))for(n=0;n<d.length;n++){var _=i[n],g=this._getInsertIndex(c[n].key,_,p);if(null!==g){var f,v=this._getItemByKey(_);null==_?(f=this._getRoot())&&this._renderItem(f,{data:[d[n]],metadata:[c[n]]},0,g):v&&(f=this._getSubtree(v))&&this._renderItem(f,{data:[d[n]],metadata:[c[n]]},0,g)}}l()})},_getInsertIndex:function(e,t,i){let s;if(s=t?this._getItemByKey(t):this.element[0],!s)return null;let n=i.indexOf(e);if(-1===n)return null;let o=this._getChildItems(s),r=o.length;for(let e=0;e<o.length;e++){let t=o[e],s=this._getKey(t);if(i.indexOf(s)>n){r=e;break}}return r},_getAllTreeviewKeys:function(){const e=[],t=this._getItems();for(let i=0;i<t.length;i++)e.push(this._getKey(t[i]));return e},handleModelChangeEvent:function(e){const t=e.detail.update,i=this._addBusyState("validating mutation data for change event",null);this._fetchEventDataForKeys(t).then(e=>{if(null===e)return void i();const t=[...e.keys];for(let i=0;i<t.length;i++){const s=this._getItemByKey(t[i]);if(null!=s){const t=this._indexToParent(s);this._renderItem(null,{data:[e.data[i]],metadata:[e.metadata[i]]},0,t,!0)}}this._resetFocus(),i()})},_fetchEventDataForKeys:function(e){return new Promise(t=>{const i=this._addBusyState("getting data provider",null);this._getDataProvider().then(s=>{t(m.getEventDetail(s,e)),i()},function(e){l.error(this.constants.ERROR_FETCHING_DATA+e),i()})})},_indexToParent:function(e){for(var t=0,i=0;i<e.parentNode.children.length;i++)if(e.parentNode.children[i]===e){t=i;break}return t},handleModelRefreshEvent:function(e){this.isReady()?e.detail&&e.detail.keys?e.detail.keys.forEach(e=>{const t=this._getItemByKey(e);if(t&&!this._isLeaf(t)){this._removeAllChildrenOfParentKey(e,e);const i=this._getSubtree(t);i&&t.removeChild(i),this._isExpanded(t)&&(t.classList.remove(this.constants.OJ_EXPANDED),this._expand(t,!0))}}):(this._clearEventQueue(),this.refresh()):this._pushToEventQueue(e)},_isSkeletonSupported:function(){return"skeleton"===this._getOptionDefaults().loadIndicator},_getOptionDefaults:function(){if(null==this.defaultOptions){this.defaultOptions={};const e=Object.keys(this.constants.OJ_TREEVIEW_CSS_VARS),t=e.map(e=>this.constants.OJ_TREEVIEW_CSS_VARS[e]),i=n.getCachedCSSVarValues(t);e.forEach((e,t)=>{this.defaultOptions[e]=i[t]})}return this.defaultOptions},_renderChildSkeletons:function(e){var t=this._getItemByKey(e);this._removeExistingSkeletons(t);var i=this._getItemDisclosureIcon(t).offsetWidth,s="rtl"===this._GetReadingDirection(),n=this._buildThreeItemedSkeleton(),o=this._buildSkeletonContainer(),r=i,a=this._getDepth(t);s?o.style.marginRight=r+i/a+"px":o.style.marginLeft=r+i/a+"px",o.appendChild(n),t.appendChild(o)},_renderInitialSkeletons:function(){this._removeExistingSkeletons(this.element[0]);var e=this._buildThreeItemedSkeleton(),t=this._buildTwoItemedSkeleton(),i=this._buildSkeletonContainer();i.appendChild(e),i.appendChild(t),this.element[0].classList.add(this.constants.OJ_COMPLETE),this.element[0].appendChild(i);var s=i.offsetHeight,n=this.element[0].offsetHeight,o=s/5,r=0;if(s<n)do{r%2==0?(s+=3*o,i.appendChild(this._buildThreeItemedSkeleton())):(s+=2*o,i.appendChild(this._buildTwoItemedSkeleton())),r+=1}while(s<=n);if(s>n){var a=i.querySelectorAll(this.constants.PERIOD+this.constants.OJ_TREEVIEW_SKELETON_CONTENT);for(r=a.length-1;r>=0&&(s-=o,i.removeChild(a[r]),!(s<=n));r--);}},_removeExistingSkeletons:function(e){for(var t=e.querySelectorAll(this.constants.PERIOD+this.constants.OJ_TREEVIEW_SKELETON_CONTAINER),i=0;i<t.length;i++)e.removeChild(t[i])},_getSkeletonContainer:function(e){return e.getElementsByClassName(this.constants.OJ_TREEVIEW_SKELETON_CONTAINER)[0]},_removeSkeleton:function(e){return new Promise(function(t){var i,s=this._addBusyState("removing skeleton",e);(i=null===e?this._getSkeletonContainer(this.element[0]):this._getSkeletonContainer(this._getItemByKey(e)))?r.fadeOut(i,{duration:"100ms"}).then(function(){i.parentElement&&i.parentElement.removeChild(i),s(),t()}):(s(),t())}.bind(this))},_buildThreeItemedSkeleton:function(){var e=this._buildTwoItemedSkeleton(),t=this._buildSkeletonLeafContent();return e.appendChild(t),e},_buildTwoItemedSkeleton:function(){var e=new DocumentFragment,t=this._buildSkeletonContent(!1);e.appendChild(t);var i=this._buildSkeletonContent(!0);return e.appendChild(i),e},_buildSkeletonContainer:function(){var e=document.createElement("div");return e.classList.add(this.constants.OJ_TREEVIEW_SKELETON_CONTAINER),e.classList.add(this.constants.OJ_ANIMATION_SKELETON_FADE_IN),e},_buildSkeletonContent:function(e){var t=document.createElement("div");t.classList.add(this.constants.OJ_TREEVIEW_SKELETON_CONTENT);var i=this._buildSkeletonCarrot();return e&&i.classList.add(this.constants.OJ_TREEVIEW_SKELETON_CHILD),t.appendChild(i),t.appendChild(this._buildSkeletonItem()),t},_buildSkeletonCarrot:function(){var e=document.createElement("div");return e.classList.add(this.constants.OJ_TREEVIEW_SKELETON_CARROT),e.classList.add(this.constants.OJ_ANIMATION_SKELETON),e},_buildSkeletonItem:function(){var e=document.createElement("div");return e.classList.add(this.constants.OJ_TREEVIEW_SKELETON_ITEM),e.classList.add(this.constants.OJ_ANIMATION_SKELETON),e},_buildSkeletonLeafContent:function(){var e=document.createElement("div");return e.classList.add(this.constants.OJ_TREEVIEW_SKELETON_CONTENT),e.appendChild(this._buildSkeletonLeafItem()),e},_buildSkeletonLeafItem:function(){var e=document.createElement("div");return e.classList.add(this.constants.OJ_TREEVIEW_SKELETON_LEAF),e.classList.add(this.constants.OJ_ANIMATION_SKELETON),e},_closest:function(e,t){if(!e)return null;if(!e.closest){do{if(this._matches(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}return e.closest(t)},_getParents:function(e,t){for(var i=[];e&&e!==this.element[0];e=e.parentNode)this._matches(e,t)&&i.push(e);return i},_getNextSibling:function(e,t){var i=e.nextElementSibling;if(!t)return i;for(;i;){if(this._matches(i,t))return i;i=i.nextElementSibling}return null},_getPreviousSibling:function(e,t){var i=e.previousElementSibling;if(!t)return i;for(;i;){if(this._matches(i,t))return i;i=i.previousElementSibling}return null},_matches:function(e,t){return e.matches||(e.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),e.matches(t)}});var f={properties:{currentItem:{type:"any",writeback:!0,readOnly:!0},data:{type:"object",extension:{webelement:{exceptionStatus:[{type:"unsupported",since:"13.0.0",description:"Data sets from a DataProvider cannot be sent to WebDriverJS; use ViewModels or page variables instead."}]}}},dnd:{type:"object",properties:{drag:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},drag:{type:"function"},dragEnd:{type:"function"},dragStart:{type:"function"}}}}},drop:{type:"object",properties:{items:{type:"object",properties:{dataTypes:{type:"string|Array<string>"},dragEnter:{type:"function"},dragLeave:{type:"function"},dragOver:{type:"function"},drop:{type:"function"}}}}}}},expanded:{type:"KeySet",writeback:!0},item:{type:"object",properties:{focusable:{type:"function"},renderer:{type:"function"},selectable:{type:"function"}}},scrollPolicyOptions:{type:"Object<number>",properties:{maxCount:{type:"number",value:500}}},selected:{type:"KeySet",writeback:!0},selection:{type:"Array<any>",writeback:!0,value:[]},selectionMode:{type:"string",enumValues:["leafOnly","multiple","none","single"],value:"none"},translations:{type:"object",value:{},properties:{receivedDataAria:{type:"string"},retrievingDataAria:{type:"string"},treeViewSelectorAria:{type:"string"}}}},methods:{getContextByNode:{},getProperty:{},refresh:{},setProperties:{},setProperty:{},getNodeBySubId:{},getSubIdByNode:{}},events:{ojAnimateEnd:{},ojAnimateStart:{},ojBeforeCollapse:{},ojBeforeCurrentItem:{},ojBeforeExpand:{},ojCollapse:{},ojExpand:{}},extension:{}};f.extension._WIDGET_NAME="ojTreeView",t.CustomElementBridge.register("oj-tree-view",{metadata:f})}),define("ojs/ojhighlighttext",["exports","preact/jsx-runtime","preact","ojs/ojvcomponent"],function(e,t,i,s){"use strict";var n=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};e.HighlightText=class extends i.Component{constructor(){super(...arguments),this._HIGHLIGHT_TOKEN="__@@__"}render(e){const i=this._highlighter(e.text,e.matchText);return t.jsx(s.Root,Object.assign({class:"oj-highlighttext"},{children:i}))}_highlighter(e,i){if(i){const s=this._escapeRegExp(i),n=e.replace(new RegExp(s,"gi"),this._HIGHLIGHT_TOKEN+"$&"+this._HIGHLIGHT_TOKEN).split(this._HIGHLIGHT_TOKEN).map((e,i)=>i%2==0?e:t.jsx("span",Object.assign({class:"oj-highlighttext-highlighter"},{children:e})));return t.jsx("span",{children:n})}return t.jsx("span",{children:e})}_escapeRegExp(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}},e.HighlightText.defaultProps={text:"",matchText:""},e.HighlightText.metadata={properties:{text:{type:"string"},matchText:{type:"string"}}},e.HighlightText=n([s.customElement("oj-highlight-text")],e.HighlightText),Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojinputsearch",["exports","preact/jsx-runtime","ojs/ojdomutils","ojs/ojlistdataproviderview","ojs/ojcore-base","ojs/ojconfig","ojs/ojcontext","ojs/ojlogger","ojs/ojthemeutils","ojs/ojtimerutils","ojs/ojtranslation","preact","ojs/ojhighlighttext","ojs/ojvcomponent","ojs/ojpopupcore"],function(e,t,i,s,n,o,r,a,l,h,d,c,u,p,m){"use strict";n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;class _ extends c.Component{constructor(e){super(e)}render(e){return t.jsx("li",Object.assign({role:"presentation",class:"oj-listbox-result",style:e.itemStyle},{children:t.jsx("div",{class:"oj-listbox-result-label oj-listbox-skeleton-line-height oj-animation-skeleton"})}))}}_.defaultProps={itemStyle:null};class g extends c.Component{constructor(e){super(e)}render(e){const i=[];for(let s=0;s<e.numItems;s++)i.push(t.jsx(_,{itemStyle:e.itemStyle}));return t.jsx("ul",Object.assign({role:"listbox",id:e.id,class:"oj-listbox-results oj-inputsearch-results"},{children:i}))}}g.defaultProps={id:null,numItems:1,itemStyle:null};class f extends c.Component{constructor(e){super(e),this._handleMouseenter=e=>{i.recentTouchEnd()||this.setState({hover:!0})},this._handleMouseleave=e=>{this.setState({hover:!1})},this._handleClick=e=>{0===e.button&&this._fireSuggestionActionEvent(this.props.formattedText,this.props.suggestionItemContext)},this._fireSuggestionActionEvent=(e,t)=>{var i,s;null===(s=(i=this.props).onOjSuggestionAction)||void 0===s||s.call(i,{text:e,itemContext:t})},this.state={hover:!1}}fireSuggestionAction(){this._fireSuggestionActionEvent(this.props.formattedText,this.props.suggestionItemContext)}getFormattedText(){return this.props.formattedText}render(e,i){let s="oj-listbox-result oj-listbox-result-selectable";i.hover&&(s+=" oj-hover"),e.focus&&(s+=" oj-focus");const n=this._renderContent(e);return t.jsx("li",Object.assign({role:"presentation",class:s,onClick:this._handleClick,onMouseEnter:this._handleMouseenter,onMouseLeave:this._handleMouseleave},{children:t.jsx("div",Object.assign({id:e.labelId,class:"oj-listbox-result-label",role:"option"},{children:n}))}))}_renderContent(e){var i;const s=e.suggestionItemTemplate;return s?s({data:e.suggestionItemContext.data,key:e.suggestionItemContext.key,metadata:e.suggestionItemContext.metadata,index:e.index,searchText:e.searchText}):t.jsx(u.HighlightText,{"data-oj-internal":!0,text:e.formattedText,matchText:null!==(i=e.searchText)&&void 0!==i?i:""})}}f.defaultProps={focus:!1,formattedText:"",index:-1,labelId:"",searchText:null};class v extends c.Component{constructor(e){super(e),this._renderedSuggestions=[],this.getCount=()=>{const e=this._renderedSuggestions.length,t=this._renderedSuggestions.indexOf(null);return-1===t?e:t},this.getFormattedText=e=>{var t;return null===(t=this._renderedSuggestions[e])||void 0===t?void 0:t.getFormattedText()},this.fireSuggestionAction=e=>{var t;null===(t=this._renderedSuggestions[e])||void 0===t||t.fireSuggestionAction()},this._setRenderedSuggestion=(e,t)=>{this._renderedSuggestions[e]=t}}render(e){var i;if((null===(i=e.data)||void 0===i?void 0:i.length)>0){let i=[];for(let s=0;s<e.data.length;s++){const n=s===e.focusIndex,o=e.formatItemText(e.suggestionItemText,e.data[s]),r=t.jsx(f,{ref:this._setRenderedSuggestion.bind(this,s),labelId:e.labelIds[s],focus:n,index:s,formattedText:o,searchText:e.searchText,suggestionItemContext:e.data[s],suggestionItemTemplate:e.suggestionItemTemplate,onOjSuggestionAction:e.onOjSuggestionAction});i.push(r)}return t.jsx("ul",Object.assign({role:"listbox",id:e.id,class:"oj-listbox-results oj-inputsearch-results"},{children:i}))}return null}}v.defaultProps={data:null,focusIndex:-1,formatItemText:null,id:null,labelIds:null,onOjSuggestionAction:null,searchText:null,suggestionItemTemplate:null};var y=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i};class E extends c.Component{constructor(e){super(e),this._isComposing=!1,this._setInputElem=e=>{var t,i;this._inputElem=e,null===(i=(t=this.props).inputRef)||void 0===i||i.call(t,e)},this._handleCompositionstart=e=>{var t;this._isComposing=!0,null===(t=this.props.onCompositionStart)||void 0===t||t.call(this._inputElem,e)},this._handleCompositionend=e=>{var t,i,s;this._isComposing=!1,null===(t=this.props.onCompositionEnd)||void 0===t||t.call(this._inputElem,e),null===(s=(i=this.props).onInputChanged)||void 0===s||s.call(i,{value:e.target.value})},this._handleInput=e=>{var t,i,s;null===(t=this.props.onInput)||void 0===t||t.call(this._inputElem,e),this._isComposing&&!this._isAndroidDevice||null===(s=(i=this.props).onInputChanged)||void 0===s||s.call(i,{value:e.target.value})};const t=n.AgentUtils.getAgentInfo();this._isAndroidDevice=t.os===n.AgentUtils.OS.ANDROID}render(e){const{onInputChanged:i,onInput:s,onCompositionStart:n,onCompositionEnd:o}=e,r=y(e,["onInputChanged","onInput","onCompositionStart","onCompositionEnd"]);return t.jsx("input",Object.assign({ref:this._setInputElem,onInput:this._handleInput,oncompositionstart:this._handleCompositionstart,oncompositionend:this._handleCompositionend},r))}}var b,S=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};e.InputSearch=b=class extends c.Component{constructor(e){super(e),this._KEYS={TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40},this._counter=0,this._queryCount=0,this._handleMouseenter=e=>{i.recentTouchEnd()||this._updateState({hover:!0})},this._handleMouseleave=e=>{this._updateState({hover:!1})},this._handleFocusin=e=>{e.target===e.currentTarget&&this._handleFocus(e),this._updateState({focus:!0})},this._handleFocusout=e=>{e.target===e.currentTarget&&this._handleBlur(e),this._updateState({focus:!1})},this._handleMobileFilterInputFocusin=e=>{this._updateState({mobileFilterInputFocus:!0})},this._handleMobileFilterInputFocusout=e=>{this._updateState({mobileFilterInputFocus:!1})},this._handleMobileFilterClear=e=>{var t;null===(t=this._mobileFilterInputElem)||void 0===t||t.focus(),this._updateState({filterText:"",displayValue:"",showAutocompleteText:!1,autocompleteFloatingText:null})},this._handleMobileDropdownBack=e=>{var t;null===(t=this._mainInputElem)||void 0===t||t.focus(),this._updateState({dropdownOpen:!1,filterText:this.props.value,displayValue:this.props.value})},this._handleInputChanged=e=>{const t=e.value,i=this.state.filterText||"",s=i.toLowerCase(),n=t.toLowerCase(),o={};this.state.showAutocompleteText&&!this.state.autocompleteFloatingText&&i===t?Object.assign(o,{showAutocompleteText:!1,focusedSuggestionIndex:-1}):!this.state.showAutocompleteText&&n.length<s.length&&s.startsWith(n)?Object.assign(o,{showAutocompleteText:!1}):Object.assign(o,{showAutocompleteText:t.length>0}),Object.assign(o,{filterText:t,displayValue:t,dropdownOpen:!0}),this._updateState(o)},this._handleFocus=e=>{var t;null===(t=this._rootElem)||void 0===t||t.dispatchEvent(new FocusEvent("focus",{relatedTarget:e.relatedTarget}))},this._handleBlur=e=>{var t;null===(t=this._rootElem)||void 0===t||t.dispatchEvent(new FocusEvent("blur",{relatedTarget:e.relatedTarget}))},this._handleFilterInputKeydownEnter=e=>{var t,i;const s=this.state.focusedSuggestionIndex;return this.state.dropdownOpen&&s>=0&&(null===(t=this._suggestionsList)||void 0===t?void 0:t.getCount())>s&&!this._resolveFetchBusyState?(null===(i=this._suggestionsList)||void 0===i||i.fireSuggestionAction(s),null):{dropdownOpen:!1,valueSubmitted:!0,actionDetail:null}},this._handleDesktopMainInputKeydown=e=>{var t,i,s,n;const o={lastEventType:"keyboard"},r=e.keyCode;switch(r){case this._KEYS.ENTER:const a=this._handleFilterInputKeydownEnter(e);a&&Object.assign(o,a);break;case this._KEYS.TAB:Object.assign(o,{dropdownOpen:!1,focus:!1,actionDetail:null}),this.state.showAutocompleteText&&Object.assign(o,{showAutocompleteText:!1,resetFilterInputSelectionRange:!0});break;case this._KEYS.ESC:this.state.dropdownOpen&&(o.dropdownOpen=!1,this.state.showAutocompleteText&&Object.assign(o,{showAutocompleteText:!1,displayValue:this.state.filterText}),e.preventDefault());break;case this._KEYS.UP:case this._KEYS.DOWN:if(this.state.dropdownOpen){if(!this._resolveFetchBusyState&&(null===(t=this._suggestionsList)||void 0===t?void 0:t.getCount())>0){let t=this.state.focusedSuggestionIndex;r===this._KEYS.DOWN||-1===t?(t+=1,o.scrollFocusedSuggestionIntoView="bottom"):t>0&&(t-=1,o.scrollFocusedSuggestionIntoView="top",e.preventDefault()),t=Math.min((null===(i=this._suggestionsList)||void 0===i?void 0:i.getCount())-1,t),o.focusedSuggestionIndex=t;const a=0===t&&(null===(s=this.state.filterText)||void 0===s?void 0:s.length)>0;o.showAutocompleteText=a,a?o.displayValue=this.state.filterText:t>-1&&(o.displayValue=null===(n=this._suggestionsList)||void 0===n?void 0:n.getFormattedText(t))}}else o.dropdownOpen=!0;break;case this._KEYS.LEFT:case this._KEYS.RIGHT:this.state.showAutocompleteText&&!this.state.autocompleteFloatingText&&Object.assign(o,{showAutocompleteText:!1,filterText:this.state.displayValue})}this._updateState(o)},this._handleMobileFilterInputKeydown=e=>{const t={lastEventType:"keyboard"};switch(e.keyCode){case this._KEYS.ENTER:const i=this._handleFilterInputKeydownEnter(e);i&&Object.assign(t,i)}this._updateState(t)},this._handleMousedown=e=>{0===e.button&&(this._updateState({focus:!0,dropdownOpen:!0}),e.target!==this._mainInputElem||this.state.fullScreenPopup?e.preventDefault():this._handleFilterInputMousedown(e))},this._handleFilterInputMousedown=e=>{this.state.showAutocompleteText&&(this.state.autocompleteFloatingText?this._updateState({showAutocompleteText:!1,filterText:this.state.autocompleteFloatingText,displayValue:this.state.autocompleteFloatingText}):this._updateState({showAutocompleteText:!1,filterText:this.state.displayValue}))},this._handleDesktopDropdownMousedown=e=>{0===e.button&&(this._updateState({focus:!0}),e.preventDefault())},this._handleDropdownMousemove=e=>{this._updateState({lastEventType:"mouse"})},this._handleDropdownMouseleave=e=>{this._updateState({lastEventType:null})},this._setRootElem=e=>{this._rootElem=e},this._setDropdownElem=e=>{this._dropdownElem=e},this._setMainInputElem=e=>{this._mainInputElem=e},this._setMainInputContainerElem=e=>{this._mainInputContainerElem=e},this._setSuggestionsList=e=>{this._suggestionsList=e},this._setMobileFilterInputElem=e=>{this._mobileFilterInputElem=e},this._getFilterInputElem=()=>this._mobileFilterInputElem||this._mainInputElem,this._clickAwayHandler=e=>{const t=e.target;if(t.closest("#"+CSS.escape(this._getDropdownElemId()))||t.closest("#"+CSS.escape(this._getMainInputContainerId())))return;const i={dropdownOpen:!1};this.state.showAutocompleteText&&Object.assign(i,{showAutocompleteText:!1,resetFilterInputSelectionRange:!0}),this._updateState(i)},this._handleDataProviderRefreshEventListener=e=>{this._updateState({fetchedInitial:!1})},this._handleSuggestionAction=e=>{this._updateState({filterText:e.text,displayValue:e.text,dropdownOpen:!1,valueSubmitted:!0,actionDetail:e.itemContext})},this._uniqueId=e.id?e.id:p.getUniqueId();let t=(l.parseJSONFromFontFamily("oj-inputsearch-option-defaults")||{}).showIndicatorDelay;t=parseInt(t,10),t=isNaN(t)?250:t,this._showIndicatorDelay=t;const s=l.getCachedCSSVarValues(["--oj-private-core-global-dropdown-offset"])[0]||"0";this._dropdownVerticalOffset=parseInt(s,10),e.suggestions&&(this._dataProvider=this._wrapDataProviderIfNeeded(this.props.suggestions)),this.state={dropdownOpen:!1,dropdownAbove:!1,valueSubmitted:!1,focus:!1,hover:!1,active:!1,displayValue:null,filterText:null,lastFetchedFilterText:null,fetchedData:null,labelIds:[],fetchedInitial:!1,fetching:!1,loading:!1,focusedSuggestionIndex:-1,activeDescendantId:null,scrollFocusedSuggestionIntoView:null,actionDetail:null,lastEventType:null,showAutocompleteText:!1,autocompleteFloatingText:null,initialRender:!0,oldPropsValue:e.value,oldPropsSuggestions:e.suggestions,fullScreenPopup:e.suggestions&&"phone"===o.getDeviceRenderMode(),mobileFilterInputFocus:!1,mobileFilterInputActive:!1,resetFilterInputSelectionRange:!1}}render(e,t){let i="oj-inputsearch oj-form-control oj-text-field oj-component";t.hover&&(i+=" oj-hover"),t.active&&(i+=" oj-active"),t.focus&&(i+=" oj-focus"),t.dropdownOpen&&(i+=" oj-listbox-dropdown-open",t.dropdownAbove&&(i+=" oj-listbox-drop-above")),t.fullScreenPopup&&(i+=" oj-inputsearch-mobile");const s=t.displayValue||"";return this._renderEnabled(e,t,i,"oj-text-field-start-end-icon oj-inputsearch-search-icon oj-component-icon",s,"oj-inputsearch-input oj-text-field-input")}static getDerivedStateFromProps(e,t){return t.initialRender?this._initStateFromProps(e,t):this._updateStateFromProps(e,t)}static _initStateFromProps(e,t){return{displayValue:e.value,filterText:e.value,fullScreenPopup:e.suggestions&&"phone"===o.getDeviceRenderMode()}}static _updateStateFromProps(e,t){const i={};return e.value!==t.oldPropsValue&&(!t.fullScreenPopup&&e.value!==t.displayValue||t.fullScreenPopup&&!t.dropdownOpen)&&(i.displayValue=e.value,i.filterText=e.value),t.oldPropsSuggestions!=e.suggestions&&(i.fetchedInitial=!1,i.fullScreenPopup=e.suggestions&&"phone"===o.getDeviceRenderMode()),e.suggestions||(i.dropdownOpen=!1,i.fetchedData=null),!1!==t.dropdownOpen&&!1!==i.dropdownOpen||(i.lastEventType=null,i.showAutocompleteText=!1),t.showAutocompleteText&&!1!==i.showAutocompleteText||(i.autocompleteFloatingText=null),i}componentDidMount(){var e,t;null!==this.props.value&&(null===(t=(e=this.props).onRawValueChanged)||void 0===t||t.call(e,this.props.value)),this._dataProvider&&this._addDataProviderEventListeners(this._dataProvider),this._updateState({initialRender:!1})}_updateState(e){this.setState(function(t,i){let s;s="function"==typeof e?e(t,i):e;let n=!1;for(const e in s)if(s[e]!==t[e]){n=!0;break}return n?s:null})}componentDidUpdate(e,t){var i,s,n,o,r,a,l,h,d,c;if(this.state.fullScreenPopup&&!t.dropdownOpen&&this.state.dropdownOpen&&(null===(i=this._mobileFilterInputElem)||void 0===i||i.focus()),(t.focus&&!this.state.focus||this.state.valueSubmitted)&&(this.props.value!==this.state.displayValue&&(null===(n=(s=this.props).onValueChanged)||void 0===n||n.call(s,this.state.displayValue)),t.focus&&!this.state.focus&&t.filterText!==this.state.displayValue&&this._updateState({filterText:this.state.displayValue}),this.state.valueSubmitted&&(null===(r=(o=this.props).onOjValueAction)||void 0===r||r.call(o,{value:this.state.displayValue,itemContext:this.state.actionDetail,previousValue:this.props.value}),this.state.fullScreenPopup&&(null===(a=this._mainInputElem)||void 0===a||a.focus()),this._updateState({valueSubmitted:!1}),this._testPromiseResolve&&(this._testPromiseResolve(),this._testPromiseResolve=null))),t.displayValue!=this.state.displayValue&&(null===(h=(l=this.props).onRawValueChanged)||void 0===h||h.call(l,this.state.displayValue)),e.suggestions!=this.props.suggestions&&(e.suggestions&&this._removeDataProviderEventListeners(this._dataProvider),this.props.suggestions?(this._dataProvider=this._wrapDataProviderIfNeeded(this.props.suggestions),this._addDataProviderEventListeners(this._dataProvider)):(this._dataProvider=null,this._resolveFetching())),this.state.dropdownOpen){this.state.lastFetchedFilterText==this.state.filterText&&(this.state.fetchedInitial||this._resolveFetchBusyState)||(this._updateState({lastFetchedFilterText:this.state.filterText}),this._fetchData(this.state.filterText)),t.dropdownOpen&&this.state.filterText===t.filterText?this.state.fetchedData&&this._updateState((e,t)=>{const i=Math.min(e.fetchedData.length-1,e.focusedSuggestionIndex);return e.focusedSuggestionIndex!==i?{focusedSuggestionIndex:i}:null}):t.dropdownOpen||this.state.filterText!==t.filterText?this._updateState((e,t)=>{var i;const s=(null===(i=e.filterText)||void 0===i?void 0:i.length)>0?0:-1;return e.focusedSuggestionIndex!==s?{focusedSuggestionIndex:s}:null}):this._updateState({focusedSuggestionIndex:-1});const e=this._resolveFetchBusyState?-1:this.state.focusedSuggestionIndex;if(e>=0&&this.state.labelIds.length>e){const t=this.state.filterText||"";if(0===e&&this.state.showAutocompleteText&&t.length>0){const i=null===(d=this._suggestionsList)||void 0===d?void 0:d.getFormattedText(0),s=i.toLowerCase(),n=t.toLowerCase();if(s.startsWith(n)){const s=t.length,n=i.substr(s);this._updateState({displayValue:t+n,autocompleteFloatingText:null,activeDescendantId:this.state.labelIds[e]}),this._getFilterInputElem().setSelectionRange(s,s+n.length)}else this.state.fullScreenPopup?this._updateState({autocompleteFloatingText:null,activeDescendantId:null,focusedSuggestionIndex:-1}):this._updateState({autocompleteFloatingText:i,displayValue:t,activeDescendantId:this.state.labelIds[e]})}else this._updateState({activeDescendantId:this.state.labelIds[e]})}else this._updateState({activeDescendantId:null});this._resolveFetchBusyState||0!==this.state.labelIds.length||(this.state.fullScreenPopup?this._updateState({showAutocompleteText:!1}):this._updateState({showAutocompleteText:!1,dropdownOpen:!1}))}else t.dropdownOpen&&(this._updateState({focusedSuggestionIndex:-1}),this._resolveFetching());const u=this.state.scrollFocusedSuggestionIntoView;if(u){const e=this.state.activeDescendantId;if(e){const t="top"===u;this._scrollSuggestionIntoView(e,t),this._updateState({scrollFocusedSuggestionIntoView:null})}}this.state.resetFilterInputSelectionRange&&(null===(c=this._getFilterInputElem())||void 0===c||c.setSelectionRange(this.state.displayValue.length,this.state.displayValue.length),this._updateState({resetFilterInputSelectionRange:!1})),this.state.oldPropsValue!==this.props.value&&this._updateState({oldPropsValue:this.props.value}),this.state.oldPropsSuggestions!==this.props.suggestions&&this._updateState({oldPropsSuggestions:this.props.suggestions})}componentWillUnmount(){this._dataProvider&&this._removeDataProviderEventListeners(this._dataProvider),this._resolveFetching(),this._updateState({initialRender:!0})}focus(){var e;null===(e=this._mainInputElem)||void 0===e||e.focus()}blur(){var e;null===(e=this._mainInputElem)||void 0===e||e.blur()}_getDropdownElemId(){return"searchDropdown_"+this._uniqueId}_getMainInputContainerId(){return"searchInputContainer_"+this._uniqueId}_getMobileFilterContainerId(){return"searchMobileFilterContainer_"+this._uniqueId}_getListboxId(){return"searchSuggestionsListbox_"+this._uniqueId}_getDesktopDropdownPosition(){const e={my:"start top",at:"start bottom",of:this._mainInputContainerElem,collision:"flip",using:this._usingHandler.bind(this),offset:{x:0,y:this._dropdownVerticalOffset}},t="rtl"===i.getReadingDirection();let s=n.PositionUtils.normalizeHorizontalAlignment(e,t);return s=n.PositionUtils.coerceToJet(s),s=n.PositionUtils.coerceToJqUi(s),s.of=e.of,s}_getMobileDropdownPosition(){const e=window.scrollX||window.pageXOffset,t=window.scrollY||window.pageYOffset;let s={my:"start top",at:"start top",of:window,offset:{x:e,y:t}};const o="rtl"===i.getReadingDirection();return s=n.PositionUtils.normalizeHorizontalAlignment(s,o),s}_getMobileDropdownStyle(){const e={},t=Math.min(window.innerWidth,window.screen.availWidth),i=Math.min(window.innerHeight,window.screen.availHeight);if("phone"===o.getDeviceType()&&window.parent&&window!==window.parent){const t=Math.min(window.parent.innerHeight,window.parent.screen.availHeight),s=Math.min(i,t);if(i>s){const t=i-s;e.paddingBottom=t+"px"}}return e.width=t+"px",e.height=i+"px",e}_usingHandler(e,t){n.PositionUtils.isAligningPositionClipped(t)?this._updateState({dropdownOpen:!1}):(t.element.element.css(e),this._updateState({dropdownAbove:"bottom"===t.vertical}))}_renderEnabled(e,i,s,o,r,a){const l=e.id?e.id:null,h=e["aria-label"]?e["aria-label"]:null,d=this._dataProvider?this._getListboxId():null,c=n.AgentUtils.getAgentInfo(),u=c.os===n.AgentUtils.OS.ANDROID||c.os===n.AgentUtils.OS.IOS||c.os===n.AgentUtils.OS.WINDOWSPHONE?"search":"text",m=i.autocompleteFloatingText?this._renderAutocompleteFloatingText(i.autocompleteFloatingText,r):null,_=t.jsx("span",{class:o,role:"presentation"}),g=i.fullScreenPopup?this._renderMobileMainTextFieldContainer(e,i,_,a,h,d):this._renderDesktopMainTextFieldContainer(e,i,_,r,a,h,d,u,m),f=i.dropdownOpen?this._renderDropdown(e,i,r,a,h,d,u,m):null,v=this._dataProvider?this._renderAriaLiveRegion(i):null;return t.jsxs(p.Root,Object.assign({id:l,ref:this._setRootElem,class:s,"aria-label":h,onMouseDown:this._handleMousedown,onMouseEnter:this._handleMouseenter,onMouseLeave:this._handleMouseleave},{children:[v,g,f]}))}_renderAriaLiveRegion(e){var i;const s=e.fetchedInitial&&!e.fetching&&0==(null===(i=e.fetchedData)||void 0===i?void 0:i.length)?d.getTranslatedString("oj-ojInputSearch2.noSuggestionsFound"):" ";return t.jsx("div",Object.assign({id:"oj-listbox-live-"+this._uniqueId,class:"oj-helper-hidden-accessible oj-listbox-liveregion","aria-live":"polite"},{children:s}))}_renderDesktopMainTextFieldContainer(e,i,s,n,o,r,a,l,h){return t.jsxs("div",Object.assign({role:"presentation",class:"oj-text-field-container oj-text-field-has-start-slot",id:this._getMainInputContainerId(),ref:this._setMainInputContainerElem},{children:[t.jsx("span",Object.assign({class:"oj-text-field-start"},{children:s})),t.jsxs("div",Object.assign({class:"oj-text-field-middle",role:this._dataProvider?"combobox":void 0,"aria-label":this._dataProvider?r:null,"aria-owns":a,"aria-haspopup":this._dataProvider?"listbox":"false","aria-expanded":i.dropdownOpen?"true":"false"},{children:[t.jsx(E,Object.assign({type:l,inputRef:this._setMainInputElem,value:n,class:o+" oj-inputsearch-filter",placeholder:e.placeholder,autocomplete:"off",autocorrect:"off"},{autocapitalize:"off"},{spellcheck:!1,autofocus:!1,"aria-label":r,"aria-autocomplete":this._dataProvider?"list":null,"aria-controls":a,"aria-busy":i.dropdownOpen&&i.loading,"aria-activedescendant":this._dataProvider?i.activeDescendantId:null,onfocusin:this._handleFocusin,onfocusout:this._handleFocusout,onInputChanged:this._handleInputChanged,onKeyDown:this._handleDesktopMainInputKeydown})),h]}))]}))}_renderMobileMainTextFieldContainer(e,i,s,n,o,r){return t.jsxs("div",Object.assign({role:"presentation",class:"oj-text-field-container oj-text-field-has-start-slot",id:this._getMainInputContainerId()},{children:[t.jsx("span",Object.assign({class:"oj-text-field-start"},{children:s})),t.jsx("div",Object.assign({class:"oj-text-field-middle",role:this._dataProvider?"combobox":void 0,"aria-label":this._dataProvider?o:null,"aria-owns":r,"aria-haspopup":this._dataProvider?"listbox":"false","aria-expanded":i.dropdownOpen?"true":"false"},{children:t.jsx("input",Object.assign({readOnly:!0,ref:this._setMainInputElem,value:e.value,class:n,placeholder:e.placeholder,autocomplete:"off",autocorrect:"off"},{autocapitalize:"off"},{spellcheck:!1,autofocus:!1,"aria-label":o,"aria-autocomplete":this._dataProvider?"list":null,"aria-controls":r,"aria-busy":i.dropdownOpen&&i.loading,onfocusin:this._handleFocusin,onfocusout:this._handleFocusout}))}))]}))}_renderMobileDropdownFilterField(e,i,s,n,o,r,a,l){let h="oj-text-field";i.mobileFilterInputActive&&(h+=" oj-active"),i.mobileFilterInputFocus&&(h+=" oj-focus");let d="oj-text-field-container oj-text-field-has-start-slot";const c=this._renderMobileDropdownBackIcon();let u;return s&&s.length>0&&(d+=" oj-text-field-has-end-slot",u=this._renderMobileDropdownClearIcon()),t.jsx("div",Object.assign({class:h},{children:t.jsxs("div",Object.assign({role:"presentation",class:d,id:this._getMobileFilterContainerId()},{children:[t.jsx("span",Object.assign({class:"oj-text-field-start"},{children:c})),t.jsxs("div",Object.assign({class:"oj-text-field-middle","aria-label":o,"aria-owns":r},{children:[t.jsx(E,Object.assign({type:a,inputRef:this._setMobileFilterInputElem,value:s,class:n+" oj-inputsearch-filter",placeholder:e.placeholder,autocomplete:"off",autocorrect:"off"},{autocapitalize:"off"},{spellcheck:!1,autofocus:!1,"aria-label":o,"aria-autocomplete":"list","aria-controls":r,"aria-busy":i.loading,"aria-activedescendant":i.activeDescendantId,onfocusin:this._handleMobileFilterInputFocusin,onfocusout:this._handleMobileFilterInputFocusout,onInputChanged:this._handleInputChanged,onKeyDown:this._handleMobileFilterInputKeydown,onMouseDown:this._handleFilterInputMousedown})),l]})),t.jsx("span",Object.assign({class:"oj-text-field-end"},{children:u}))]}))}))}_renderMobileDropdownBackIcon(){const e=d.getTranslatedString("oj-ojInputSearch2.cancel");return t.jsx("span",Object.assign({class:"oj-inputsearch-back-button","aria-label":e,onClick:this._handleMobileDropdownBack},{children:t.jsx("span",{class:"oj-inputsearch-back-icon oj-inputsearch-icon oj-component-icon oj-clickable-icon-nocontext"})}))}_renderMobileDropdownClearIcon(){return t.jsx("span",Object.assign({class:"oj-inputsearch-clear-button","aria-hidden":!0,onClick:this._handleMobileFilterClear},{children:t.jsx("span",{class:"oj-inputsearch-clear-icon oj-inputsearch-icon oj-component-icon oj-clickable-icon-nocontext"})}))}_renderDropdown(e,t,i,s,n,o,r,a){const l=t.loading?this._renderDropdownSkeleton():this._renderDropdownSuggestions(e,t);let h="oj-listbox-drop oj-listbox-inputsearch";return"keyboard"===t.lastEventType&&(h+=" oj-listbox-hide-hover"),"mouse"===t.lastEventType&&(h+=" oj-listbox-hide-focus"),t.fullScreenPopup?this._renderMobileDropdown(e,t,h,l,i,s,n,o,r,a):this._renderDesktopDropdown(e,t,h,l)}_renderDesktopDropdown(e,t,i,s){const n=this._getDesktopDropdownPosition(),o={minWidth:this._rootElem.offsetWidth+"px"};return t.dropdownAbove&&(i+=" oj-listbox-drop-above"),this._renderVPopup(n,i,o,s,null,this._handleDesktopDropdownMousedown)}_renderMobileDropdown(e,t,i,s,n,o,r,a,l,h){const d=this._getMobileDropdownPosition(),c=this._getMobileDropdownStyle();i+=" oj-listbox-fullscreen";const u=this._renderMobileDropdownFilterField(e,t,n,o,r,a,l,h);return this._renderVPopup(d,i,c,s,u,null)}_renderVPopup(e,i,s,n,o,r){return t.jsx(m.VPopup,Object.assign({position:e,layerSelectors:"oj-listbox-drop-layer",autoDismiss:this._clickAwayHandler},{children:t.jsxs("div",Object.assign({"data-oj-binding-provider":"preact",id:this._getDropdownElemId(),ref:this._setDropdownElem,class:i,role:"presentation",style:s,onMouseDown:r,onMouseMove:this._handleDropdownMousemove,onMouseLeave:this._handleDropdownMouseleave},{children:[o,n]}))}))}_renderAutocompleteFloatingText(e,i){const s=" — "+e;return t.jsxs("div",Object.assign({class:"oj-inputsearch-autocomplete-floating-container"},{children:[t.jsx("span",Object.assign({style:"visibility: hidden;"},{children:i})),t.jsx("span",Object.assign({class:"oj-inputsearch-autocomplete-floating-text"},{children:s}))]}))}_scrollSuggestionIntoView(e,t){const i=document.getElementById(e),s=i.closest(".oj-listbox-result"),n=i.closest(".oj-listbox-results"),o=s.offsetTop,r=s.offsetHeight,a=n.scrollTop,l=n.offsetHeight;(o<a||o+r>a+l)&&(n.scrollTop=t?o:o+r-l)}_generateId(){return this._uniqueId+"-"+this._counter++}_fetchData(e){this._queryCount+=1;const t=this._queryCount;let i=e;""===i&&(i=null);let s={size:12};if(i){const e=this._dataProvider.getCapability("filter");e&&e.textFilter||a.error("InputSearch: DataProvider does not support text filter. Filtering results in dropdown may not work correctly."),s.filterCriterion=n.FilterFactory.getFilter({filterDef:{text:i}})}if(this._updateState({fetching:!0}),!this._loadingTimer){const e=h.getTimer(this._showIndicatorDelay);e.getPromise().then(function(e){this._loadingTimer=null,e&&this._dataProvider&&this.state.dropdownOpen&&this._updateState({loading:!0})}.bind(this)),this._loadingTimer=e}let o=[];this._resolveFetchBusyState||(this._resolveFetchBusyState=this._addBusyState("InputSearch: fetching suggestions"));const r=this._dataProvider.fetchFirst(s)[Symbol.asyncIterator]();let l=12;const d=function(e){if(t!==this._queryCount)return;let i=e.done;const s=e.value,n=s.data,a=s.metadata;for(let e=0;e<n.length;e++){const t=n[e],s=a[e],r=s.key;if(o.push({data:t,metadata:s,key:r}),l-=1,0===l){i=!0;break}}if(i){let e=[];for(let t=0;t<o.length;t++)e.push("oj-inputsearch-result-label-"+this._generateId());this._updateState({fetchedInitial:!0,labelIds:e,fetchedData:o}),this._resolveFetching()}else r.next().then(d)}.bind(this);r.next().then(d)}_renderDropdownSkeleton(){let e=1,i=0;if(this._dropdownElem){const t=this._dropdownElem.querySelectorAll(".oj-listbox-result");if(e=Math.max(1,t.length),t.length>0){i=this._dropdownElem.querySelector(".oj-listbox-results").offsetWidth}}const s=i>0?{width:i+"px"}:null;return t.jsx(g,{id:this._getListboxId(),numItems:e,itemStyle:s})}_renderDropdownSuggestions(e,i){var s;return(null===(s=i.fetchedData)||void 0===s?void 0:s.length)>0?t.jsx(v,{ref:this._setSuggestionsList,data:i.fetchedData,searchText:i.filterText,focusIndex:i.focusedSuggestionIndex,formatItemText:b._formatItemText,id:this._getListboxId(),labelIds:i.labelIds,onOjSuggestionAction:this._handleSuggestionAction,suggestionItemText:e.suggestionItemText,suggestionItemTemplate:e.suggestionItemTemplate}):null}_addBusyState(e){const t=this._rootElem,i={description:'The component identified by "'+t.id+'" '+e};return r.getContext(t).getBusyContext().addBusyState(i)}_isDataProvider(e){return!!(null==e?void 0:e.fetchFirst)}_wrapDataProviderIfNeeded(e){if(this._isDataProvider(e)){let t=e;return t instanceof n.ListDataProviderView||(t=new n.ListDataProviderView(t)),t}return null}_addDataProviderEventListeners(e){e.addEventListener("mutate",this._handleDataProviderRefreshEventListener),e.addEventListener("refresh",this._handleDataProviderRefreshEventListener)}_removeDataProviderEventListeners(e){e.removeEventListener("mutate",this._handleDataProviderRefreshEventListener),e.removeEventListener("refresh",this._handleDataProviderRefreshEventListener)}_resolveFetching(){this._loadingTimer&&(this._loadingTimer.clear(),this._loadingTimer=null),this._resolveFetchBusyState&&(this._resolveFetchBusyState(),this._resolveFetchBusyState=null),this.state.loading&&this._updateState({loading:!1}),this._updateState({fetching:!1})}static _formatItemText(e,t){var i;let s;return(null==t?void 0:t.data)&&("string"==typeof e?((null===(i=t.data)||void 0===i?void 0:i.hasOwnProperty(e))||a.error(`oj-input-search: No '${e}' property found in DataProvider with key: ${null==t?void 0:t.key}`),s=t.data[e]):s=e(t)),s||""}_testChangeValue(e){const t=new Promise(e=>{this._testPromiseResolve=e});return this._updateState({filterText:e,displayValue:e,dropdownOpen:!1,valueSubmitted:!0,actionDetail:null}),t}_testChangeValueByKey(e){const t=new Promise(e=>{this._testPromiseResolve=e}),i=function(){throw this._testPromiseResolve&&(this._testPromiseResolve(),this._testPromiseResolve=null),new Error("oj-input-search: No row found in DataProvider for key: "+e)};return this._dataProvider.fetchByKeys({keys:new Set([e])}).then(function(t){const s=t.results.get(e);if(s&&null!=s.data&&null!=s.metadata){const e={data:s.data,metadata:s.metadata,key:s.metadata.key},t=b._formatItemText(this.props.suggestionItemText,e);this._updateState({filterText:t,displayValue:t,dropdownOpen:!1,valueSubmitted:!0,actionDetail:e})}else i()}.bind(this),i),t}},e.InputSearch.defaultProps={suggestions:null,suggestionItemText:"label",placeholder:"",value:null},e.InputSearch.metadata={properties:{suggestions:{type:"object|null"},suggestionItemText:{type:"string | number|function"},placeholder:{type:"string"},rawValue:{type:"string|null",readOnly:!0,writeback:!0},value:{type:"string|null",writeback:!0}},events:{ojValueAction:{}},slots:{suggestionItemTemplate:{data:{}}},extension:{_WRITEBACK_PROPS:["rawValue","value"],_READ_ONLY_PROPS:["rawValue"],_OBSERVED_GLOBAL_PROPS:["aria-label","id"]},methods:{focus:{},blur:{},_testChangeValue:{},_testChangeValueByKey:{}}},e.InputSearch=b=S([p.customElement("oj-input-search")],e.InputSearch),Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojactioncard",["exports","preact/jsx-runtime","ojs/ojvcomponent","preact","ojs/ojdomutils","ojs/ojdatacollection-common"],function(e,t,i,s,n,o){"use strict";var r=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};e.ActionCard=class extends s.Component{constructor(e){super(e),this._rootRef=s.createRef(),this._handleOjAction=e=>{this._isFromActiveSource(e)&&e.stopPropagation()},this._handleStart=e=>{this._isFromActiveSource(e)||this.setState({active:!0})},this._handleUpEnd=e=>{var t,i;!this._isFromActiveSource(e)&&this.state.active&&(this.setState({active:!1}),null===(i=(t=this.props).onOjAction)||void 0===i||i.call(t,{originalEvent:e}))},this._handleTouchcancel=e=>{this._isFromActiveSource(e)||this.setState({active:!1})},this._handleMove=e=>{this.state.active&&!this._isFromActiveSource(e)&&this.setState({active:!1})},this._handleKeydown=e=>{this._isFromActiveSource(e)||e.repeat||"Enter"!==e.key&&" "!==e.key||this.setState({active:!0})},this._handleKeyup=e=>{var t,i;this._isFromActiveSource(e)||"Enter"!==e.key&&" "!==e.key||(this.setState({active:!1}),null===(i=(t=this.props).onOjAction)||void 0===i||i.call(t,{originalEvent:e}))},this._handleFocusin=e=>{this.setState({focus:!0})},this._handleFocusout=e=>{this.setState({focus:!1})},this.state={active:!1,focus:!1}}render(e,s){var o;let r="oj-actioncard";s.active&&(r+=" oj-active"),s.focus&&!n.recentPointer()&&(r+=" oj-focus-highlight");const a=null!==(o=e.tabIndex)&&void 0!==o?o:0;return t.jsx(i.Root,Object.assign({tabIndex:a,class:r,role:"button",onKeyUp:this._handleKeyup,onMouseUp:this._handleUpEnd,onKeyDown:this._handleKeydown,onMouseDown:this._handleStart,onTouchStart:this._handleStart,onTouchEnd:this._handleUpEnd,onTouchCancel:this._handleTouchcancel,onTouchMove:this._handleMove,onfocusin:this._handleFocusin,onfocusout:this._handleFocusout},{onojAction:this._handleOjAction},{ref:this._rootRef},{children:this.props.children}))}componentDidMount(){this._rootRef.current.addEventListener("touchstart",this._handleStart,{passive:!0}),this._rootRef.current.addEventListener("touchend",this._handleUpEnd,{passive:!1}),this._rootRef.current.addEventListener("touchcancel",this._handleTouchcancel,{passive:!0}),this._rootRef.current.addEventListener("touchmove",this._handleMove,{passive:!0})}_isFromActiveSource(e){return o.isEventClickthroughDisabled(e,this._rootRef.current)}},e.ActionCard.metadata={slots:{"":{}},events:{ojAction:{bubbles:!0}},extension:{_OBSERVED_GLOBAL_PROPS:["tabIndex","role"]}},e.ActionCard=r([i.customElement("oj-action-card")],e.ActionCard),Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojmessagebanner",["exports","preact/jsx-runtime","@oracle/oraclejet-preact/UNSAFE_MessageBanner","@oracle/oraclejet-preact/UNSAFE_Message","ojs/ojanimation","ojs/ojtranslation","ojs/ojcontext","ojs/ojdataproviderhandler","ojs/ojvcomponent","preact","ojs/ojbutton"],function(e,t,i,s,n,o,r,a,l,h,d){"use strict";r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var c=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},u=function(e,t,i,s){return new(i||(i=Promise))(function(n,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}l((s=s.apply(e,t||[])).next())})};e.MessageBanner=class extends h.Component{constructor(e){super(e),this._addBusyState=e=>r.getContext(this._rootRef.current).getBusyContext().addBusyState({description:e}),this._handleCloseMessage=e=>{var t,i;null===(i=(t=this.props).onOjClose)||void 0===i||i.call(t,e)},this._handleAnimation=(e,t,i)=>u(this,void 0,void 0,function*(){yield n.startAnimation(e,t,i)}),this._renderCloseButton=(e,i)=>t.jsxs("oj-button",Object.assign({class:"oj-button-sm",display:"icons",chroming:"borderless",title:e,onojAction:i},{children:[t.jsx("span",{slot:"startIcon",class:"oj-fwk-icon oj-fwk-icon-cross"}),t.jsx("span",{children:e})]})),this._rootRef=h.createRef(),this.state={dataProviderCount:0,previousDataProvider:e.data},this.WrapperMessagesContainer=a.withDataProvider(i.MessageBanner,"data")}static getDerivedStateFromProps(e,t){const{data:i}=e,{dataProviderCount:s,previousDataProvider:n}=t;return i!==n?{dataProviderCount:s+1,previousDataProvider:i}:null}render(e,i){const{data:n,detailTemplateValue:r,messageTemplates:a,type:h}=e,{dataProviderCount:d}=this.state,c={addBusyState:this._addBusyState};return t.jsx(l.Root,Object.assign({ref:this._rootRef},{children:t.jsx(s.MessagesContext.Provider,Object.assign({value:c},{children:t.jsx(this.WrapperMessagesContainer,{addBusyState:this._addBusyState,data:n,type:h,closeButtonRenderer:this._renderCloseButton,detailRendererKey:r,renderers:a,startAnimation:this._handleAnimation,onClose:this._handleCloseMessage,translations:{close:o.getTranslatedString("oj-ojMessageBanner.close"),navigationFromMessagesRegion:o.getTranslatedString("oj-ojMessageBanner.navigationFromMessagesRegion"),navigationToMessagesRegion:o.getTranslatedString("oj-ojMessageBanner.navigationToMessagesRegion"),error:o.getTranslatedString("oj-ojMessageBanner.error"),warning:o.getTranslatedString("oj-ojMessageBanner.warning"),info:o.getTranslatedString("oj-ojMessageBanner.info"),confirmation:o.getTranslatedString("oj-ojMessageBanner.confirmation")}},"dataProvider"+d)}))}))}},e.MessageBanner.defaultProps={type:"section"},e.MessageBanner.metadata={properties:{data:{type:"object"},type:{type:"string",enumValues:["page","section"]},detailTemplateValue:{type:"string|function"}},extension:{_DYNAMIC_SLOT:{prop:"messageTemplates",isTemplate:1}},events:{ojClose:{}}},e.MessageBanner=c([l.customElement("oj-message-banner")],e.MessageBanner),Object.defineProperty(e,"__esModule",{value:!0})}),define("bundles/ojcommoncomponentsbundle",function(){});
//# sourceMappingURL=ojcommoncomponentsbundle.js.map